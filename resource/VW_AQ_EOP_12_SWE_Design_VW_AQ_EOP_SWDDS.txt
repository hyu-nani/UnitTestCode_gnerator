VW AQ EOP
Software Detailed Design Specification(2/4)
Document Properties
Status: Open
Version: 003
Author: Kim Minsu
Created: 2020-12-17 22:30
Approved Versions
Current Document version 003 has not been approved.
Approved Versions:
001 (2021-01-06 15:50)
002 (2021-04-15 21:15)
002 (2021-04-22 10:17)
Document Signatures
Approved (Status Change Pending)
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 1
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Document Control Information
Location: The released versions of this document are maintained by SWE DE and managed in the following
location:
[Polarion] VW AQ EOP / Documents & Pages / 02_Engineering / 12_SWE_Design
Version Date of Release
Description
(Change and Reasons for Change)
Author Reviewer Approver
001
2020-10-28 Initiation of draft version Taihyun Kyung - -
2020-11-30
Add flow diagram and sequence
diagram
Taihyun Kyung
Rasekar
Prashant
Hyojin Ahn
002
2021-02-15
Add evaluation criteria
Resolved defect - CR-0005
Taihyun Kyung - -
2021-02-17 Modify traceability management Taihyun Kyung - -
2021-02-26
Change the Customer
Requirement_CAN Timeout-0008
Add the Tolerance of Voltage-
CR-0009
Taihyun Kyung - -
2021-03-10
Changed low temperature warning
criteria - CR-0003
Taihyun Kyung - -
2021-03-12
Change and add component -
CR-0010
Taihyun Kyung - -
2021-04-09
OPU HW change to apply EMC
debugging(TL81000, CE) results-
CR-0012
Taihyun Kyung - -
2021-04-15
Change Target Milestone, Traceability
- CR-0010
Add description for Control Flow
Diagram and Sequence Diagram
Minsu Kim Sungjin Park Hyojin Ahn
2021-04-22 Resolved problem: CMNC-0033 Minsu Kim Sungjin Park Hyojin Ahn
003
2021-04-30
Change Static View Design and
Interface Design
Minsu Kim - -
2021-06-30
Change Static View Design, Dynamic
View and Interface Design
Minsu Kim - -
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 2
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table 1 Version History
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 3
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table of Contents
1 Function Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1 [SWDDS.2] RTE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.1 [SWDDS.2.1] RteSch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.1.1 [SWDDS.2.1.1] RteSch_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
1.1.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
1.1.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.1.1.2 [SWDDS.2.1.2] InitializeRteSchRteSw . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.1.1.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.1.1.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
1.1.1.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
1.1.1.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
1.1.1.3 [SWDDS.2.1.3] InitializeRteSchAppSw . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
1.1.1.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
1.1.1.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
1.1.1.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
1.1.1.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
1.1.1.4 [SWDDS.2.1.5] RteSch_MainFunc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
1.1.1.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
1.1.1.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
1.1.1.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.1.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.1.5 [SWDDS.2.1.6] RunRteSchBackground . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.1.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.1.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
1.1.1.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
1.1.1.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
1.1.1.6 [SWDDS.2.1.7] RteSch_Task1ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
1.1.1.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
1.1.1.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
1.1.1.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
1.1.1.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
1.1.1.7 [SWDDS.2.1.8] RteSch_Task5ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
1.1.1.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
1.1.1.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
1.1.1.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.1.1.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.1.1.8 [SWDDS.2.1.9] RteSch_Task10ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.1.1.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.1.1.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
1.1.1.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
1.1.1.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
1.1.1.9 [SWDDS.2.1.10] RteSch_Task20ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 4
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
1.1.1.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.1.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.1.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.1.10 [SWDDS.2.1.11] RteSch_Task50ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.1.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.1.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
1.1.1.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
1.1.1.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
1.1.1.11 [SWDDS.2.1.12] RteSch_Task100ms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
1.1.1.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
1.1.1.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.12 [SWDDS.2.1.13] RteSch_GetOpuTimCnt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.1.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.2 [SWDDS.2.2] RteApp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.2.1 [SWDDS.2.2.1] RteApp_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.2.2 [SWDDS.2.2.2] RteApp_ReadTgtSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.2.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.2.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
1.1.2.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
1.1.2.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
1.1.2.3 [SWDDS.2.2.3] RteApp_WriteTgtSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
1.1.2.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
1.1.2.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.2.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.2.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.2.4 [SWDDS.2.2.4] RteApp_ReadMsgSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.2.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.2.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
1.1.2.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
1.1.2.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
1.1.2.5 [SWDDS.2.2.5] RteApp_WriteMsgSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
1.1.2.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
1.1.2.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
1.1.2.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
1.1.2.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
1.1.2.6 [SWDDS.2.2.6] RteApp_ReadSpdOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 5
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
1.1.2.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.7 [SWDDS.2.2.7] RteApp_WriteSpdOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
1.1.2.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.2.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.2.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.2.8 [SWDDS.2.2.8] RteApp_ReadSpdFilt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.2.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.2.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
1.1.2.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
1.1.2.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
1.1.2.9 [SWDDS.2.2.9] RteApp_WriteSpdFilt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
1.1.2.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
1.1.2.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.10 [SWDDS.2.2.10] RteApp_ReadCtrState . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
1.1.2.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
1.1.2.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
1.1.2.11 [SWDDS.2.2.11] RteApp_WriteCtrState . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
1.1.2.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
1.1.2.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.2.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.2.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.2.12 [SWDDS.2.2.12] RteApp_ReadCtrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.2.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.2.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
1.1.2.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
1.1.2.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
1.1.2.13 [SWDDS.2.2.13] RteApp_WriteCtrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
1.1.2.13.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
1.1.2.13.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.13.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.13.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.14 [SWDDS.2.2.14] RteApp_ReadCurOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.14.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.14.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
1.1.2.14.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
1.1.2.14.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
1.1.2.15 [SWDDS.2.2.15] RteApp_WriteCurOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
1.1.2.15.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 6
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.15.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.15.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.15.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.16 [SWDDS.2.2.17] RteApp_ReadDcCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.16.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.16.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
1.1.2.16.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
1.1.2.16.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
1.1.2.17 [SWDDS.2.2.18] RteApp_WriteDcCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
1.1.2.17.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
1.1.2.17.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.2.17.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.2.17.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.2.18 [SWDDS.2.2.19] RteApp_WriteDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.2.18.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.2.18.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
1.1.2.18.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
1.1.2.18.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
1.1.2.19 [SWDDS.2.2.20] RteApp_ReadPcbTemp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
1.1.2.19.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
1.1.2.19.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.19.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.19.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.20 [SWDDS.2.2.21] RteApp_WritePcbTemp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.20.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.20.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
1.1.2.20.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
1.1.2.20.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
1.1.2.21 [SWDDS.2.2.22] RteApp_ReadMtrTrq . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
1.1.2.21.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
1.1.2.21.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.21.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.21.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.22 [SWDDS.2.2.23] RteApp_WriteMtrTrq . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.22.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.22.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
1.1.2.22.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
1.1.2.22.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
1.1.2.23 [SWDDS.2.2.24] RteApp_ReadBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
1.1.2.23.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
1.1.2.23.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.23.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.23.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.24 [SWDDS.2.2.25] RteApp_WriteBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.24.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.24.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 7
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.24.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
1.1.2.24.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
1.1.2.25 [SWDDS.2.2.26] RteApp_ReadMcuSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
1.1.2.25.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
1.1.2.25.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.25.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.25.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.26 [SWDDS.2.2.27] RteApp_WriteMcuSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.26.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.26.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
1.1.2.26.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
1.1.2.26.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
1.1.2.27 [SWDDS.2.2.28] RteApp_ReadEopState . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
1.1.2.27.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
1.1.2.27.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.27.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.27.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.28 [SWDDS.2.2.29] RteApp_WriteEopState . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.28.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.28.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
1.1.2.28.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
1.1.2.28.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
1.1.2.29 [SWDDS.2.2.30] RteApp_ReadCtrEna . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
1.1.2.29.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
1.1.2.29.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.2.29.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.2.29.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.2.30 [SWDDS.2.2.31] RteApp_WriteCtrEna . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.2.30.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.2.30.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
1.1.2.30.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
1.1.2.30.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
1.1.2.31 [SWDDS.2.2.32] RteApp_ReadCtrMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
1.1.2.31.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
1.1.2.31.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.2.31.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.2.31.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.2.32 [SWDDS.2.2.33] RteApp_ReadRefCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.2.32.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.2.32.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
1.1.2.32.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
1.1.2.32.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
1.1.2.33 [SWDDS.2.2.34] RteApp_ReadRefSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
1.1.2.33.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
1.1.2.33.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
1.1.2.33.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 8
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.33.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
1.1.2.34 [SWDDS.2.2.35] RteApp_WriteRefSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
1.1.2.34.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
1.1.2.34.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
1.1.2.34.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
1.1.2.34.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
1.1.2.35 [SWDDS.2.2.36] RteApp_ReadCurLmtUpp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
1.1.2.35.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
1.1.2.35.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.35.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.35.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.36 [SWDDS.2.2.37] RteApp_WriteCurLmtUpp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.36.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.36.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
1.1.2.36.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
1.1.2.36.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
1.1.2.37 [SWDDS.2.2.38] RteApp_ReadCurLmtLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
1.1.2.37.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
1.1.2.37.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.37.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.37.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.38 [SWDDS.2.2.39] RteApp_WriteCurLmtLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.38.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.38.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97
1.1.2.38.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97
1.1.2.38.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
1.1.2.39 [SWDDS.2.2.40] RteApp_ReadSpdErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
1.1.2.39.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
1.1.2.39.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
1.1.2.39.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
1.1.2.39.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
1.1.2.40 [SWDDS.2.2.41] RteApp_ReadDrvSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
1.1.2.40.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
1.1.2.40.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
1.1.2.40.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
1.1.2.40.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
1.1.2.41 [SWDDS.2.2.42] RteApp_WriteDrvSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
1.1.2.41.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
1.1.2.41.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.41.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.41.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.42 [SWDDS.2.2.43] RteApp_ReadSigRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.42.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.42.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
1.1.2.42.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
1.1.2.42.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 9
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.43 [SWDDS.2.2.44] RteApp_WriteSigRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
1.1.2.43.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
1.1.2.43.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.43.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.43.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.44 [SWDDS.2.2.45] RteApp_ReadOprMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.44.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.44.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
1.1.2.44.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
1.1.2.44.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
1.1.2.45 [SWDDS.2.2.46] RteApp_WriteOprMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
1.1.2.45.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
1.1.2.45.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.45.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.45.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.46 [SWDDS.2.2.47] RteApp_ReadFuncMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.46.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.46.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
1.1.2.46.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
1.1.2.46.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
1.1.2.47 [SWDDS.2.2.48] RteApp_WriteFuncMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
1.1.2.47.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
1.1.2.47.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.47.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.47.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.48 [SWDDS.2.2.49] RteApp_ReadAppMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.48.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.48.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
1.1.2.48.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
1.1.2.48.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
1.1.2.49 [SWDDS.2.2.50] RteApp_WriteAppMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
1.1.2.49.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
1.1.2.49.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.1.2.49.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.1.2.49.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.1.2.50 [SWDDS.2.2.51] RteApp_ReadOpuFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.1.2.50.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.1.2.50.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
1.1.2.50.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
1.1.2.50.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
1.1.2.51 [SWDDS.2.2.52] RteApp_WriteOpuFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
1.1.2.51.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116
1.1.2.51.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.1.2.51.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.1.2.51.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.1.2.52 [SWDDS.2.2.53] RteApp_ClrOpuFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 10
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.52.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.1.2.52.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119
1.1.2.52.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.1.2.52.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.1.2.53 [SWDDS.2.2.54] RteApp_GetOpuFltNo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.1.2.53.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.1.2.53.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.2.53.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.2.53.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.2.54 [SWDDS.2.2.55] App_GetOpuFltStored . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.2.54.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.2.54.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.54.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.54.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.55 [SWDDS.2.2.56] RteApp_ReadCurErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.55.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.55.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.55.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.55.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.56 [SWDDS.2.2.57] RteApp_ReadDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
1.1.2.56.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.56.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.56.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.56.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.57 [SWDDS.2.2.58] RteApp_WriteCtrMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.57.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
1.1.2.57.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.57.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.57.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.58 [SWDDS.2.2.59] RteApp_WriteRefCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.58.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.58.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.58.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.58.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.59 [SWDDS.2.2.60] RteApp_WriteSpdErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.2.59.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.2.59.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.2.59.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.2.59.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.3 [SWDDS.2.3] RteIo . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.3.1 [SWDDS.2.3.1] RteIo_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.3.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
1.1.3.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
1.1.3.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
1.1.3.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
1.1.3.2 [SWDDS.2.3.2] IntializeRteIoSrv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 11
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
1.1.3.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130
1.1.3.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
1.1.3.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
1.1.3.3 [SWDDS.2.3.3] RteIo_EnaGlobalInterrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
1.1.3.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
1.1.3.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132
1.1.3.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
1.1.3.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
1.1.3.4 [SWDDS.2.3.4] RteIo_DisGlobalInterrupt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
1.1.3.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
1.1.3.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.3.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.3.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.3.5 [SWDDS.2.3.5] RteIo_ChkWdtTimRdy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.3.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.3.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 135
1.1.3.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
1.1.3.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
1.1.3.6 [SWDDS.2.3.6] RteIo_RstWdtTim . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
1.1.3.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
1.1.3.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137
1.1.3.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
1.1.3.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
1.1.3.7 [SWDDS.2.3.7] RteIo_EnaTimRun . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
1.1.3.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
1.1.3.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
1.1.3.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
1.1.3.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
1.1.3.8 [SWDDS.2.3.8] RteIo_GetSlFocStaDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140
1.1.3.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140
1.1.3.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141
1.1.3.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
1.1.3.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
1.1.3.9 [SWDDS.2.3.9] RteIo_GetCtrState . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
1.1.3.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
1.1.3.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
1.1.3.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
1.1.3.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
1.1.3.10 [SWDDS.2.3.10] RteIo_GetSpdOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
1.1.3.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
1.1.3.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145
1.1.3.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145
1.1.3.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145
1.1.3.11 [SWDDS.2.3.11] RteIo_GetCurOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
1.1.3.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 12
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
1.1.3.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
1.1.3.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
1.1.3.12 [SWDDS.2.3.12] RteIo_GetCurErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
1.1.3.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
1.1.3.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
1.1.3.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
1.1.3.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
1.1.3.13 [SWDDS.2.3.13] RteIo_GetCtrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149
1.1.3.13.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149
1.1.3.13.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
1.1.3.13.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
1.1.3.13.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
1.1.3.14 [SWDDS.2.3.14] RteIo_GetDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
1.1.3.14.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
1.1.3.14.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.3.14.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.3.14.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.3.15 [SWDDS.2.3.15] RteIo_SetSlFocCtrDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.3.15.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.3.15.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
1.1.3.15.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
1.1.3.15.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
1.1.3.16 [SWDDS.2.3.16] RteIo_ClrSlFocFltSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
1.1.3.16.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154
1.1.3.16.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.3.16.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.3.16.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.3.17 [SWDDS.2.3.17] RteIo_PrechrgCurIntg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.3.17.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 156
1.1.3.17.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.3.17.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.3.17.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.3.18 [SWDDS.2.3.18] RteIo_GetPcbTempSig . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.3.18.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.3.18.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158
1.1.3.18.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
1.1.3.18.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
1.1.3.19 [SWDDS.2.3.19] RteIo_GetBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
1.1.3.19.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160
1.1.3.19.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161
1.1.3.19.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161
1.1.3.19.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161
1.1.3.20 [SWDDS.2.3.20] RteIo_ChkGdrvVlsLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162
1.1.3.20.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162
1.1.3.20.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 13
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.20.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
1.1.3.20.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
1.1.3.21 [SWDDS.2.3.21] RteIo_ChkCanReqMsg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
1.1.3.21.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
1.1.3.21.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
1.1.3.21.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
1.1.3.21.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
1.1.3.22 [SWDDS.2.3.22] RteIo_GetTgtSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
1.1.3.22.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
1.1.3.22.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166
1.1.3.22.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167
1.1.3.22.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167
1.1.3.23 [SWDDS.2.3.23] RteIo_GetCanBusSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167
1.1.3.23.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168
1.1.3.23.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
1.1.3.23.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
1.1.3.23.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
1.1.3.24 [SWDDS.2.3.24] RteIo_SetCanSlp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
1.1.3.24.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170
1.1.3.24.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
1.1.3.24.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
1.1.3.24.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
1.1.3.25 [SWDDS.2.3.25] RteIo_SendResMsg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
1.1.3.25.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
1.1.3.25.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
1.1.3.25.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
1.1.3.25.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
1.1.3.26 [SWDDS.2.3.26] RteIo_SaveEepromDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
1.1.3.26.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
1.1.3.26.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175
1.1.3.26.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175
1.1.3.26.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175
1.1.3.27 [SWDDS.2.3.27] RteIo_LoadEepromLong . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
1.1.3.27.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
1.1.3.27.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
1.1.3.27.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
1.1.3.27.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
1.1.3.28 [SWDDS.2.3.28] RteIo_GetCtrEna . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.28.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.28.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.28.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.28.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.29 [SWDDS.2.3.29] RteIo_LoadEepromByte . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.29.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.29.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.29.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 14
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.29.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.30 [SWDDS.2.3.30] RteIo_LoadEepromWord . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.30.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.30.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.3.30.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.30.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.31 [SWDDS.2.3.31] RteIo_RstOpuSw . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.31.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.31.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.31.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.3.31.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.4 [SWDDS.2.4] RteDiag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.4.1 [SWDDS.2.4.1] RteDiag_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.4.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
1.1.4.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
1.1.4.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
1.1.4.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
1.2 [SWDDS.3] BSW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181
1.2.1 [SWDDS.3.1] SCH . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181
1.2.1.1 [SWDDS.3.1.1] BswSch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181
1.2.1.1.1 [SWDDS.3.1.1.1] BswSch_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181
1.2.1.1.2 [SWDDS.3.1.1.2]BswSch_DispatchTask . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184
1.2.1.1.3 [SWDDS.3.1.1.3] BswSch_ChkTaskCnt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187
List of Tables
Table 1 Version History
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 15
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1 Function Description
1.1 [SWDDS.2] RTE
1.1.1 [SWDDS.2.1] RteSch
RteSch define task of EOP Software.
Tasks is divided into times such as 1ms, 5ms, 10ms, 20ms, 50ms, 100ms.
1.1.1.1 [SWDDS.2.1.1] RteSch_Init
1.1.1.1.1 Detailed Design
[SWDDS.2.1.1] RteSch_Init
Software Unit Information
Unit ID SWDDS.2.1.1 Unit Name RteSch_Init
Architecture ID SWADS.2.1.1 ASIL QM
Prototype void RteSch_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description RTE scheduler initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.5 main
Calling Function
SWDDS.2.1.2 InitializeRteSchRteSw
SWDDS.2.1.3 InitializeRteSchAppSw
SWDDS.2.3.7 RteIo_EnaTimRun
SWDDS.2.3.3 RteIo_EnaGlobalInterrupt
Function Execution Time N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 16
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.2.1.1
Target Milestone EBS2
Element RteSch
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.1.1.2 Static View Design
1.1.1.1.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 17
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.4 Interface Design
- N/A
1.1.1.2 [SWDDS.2.1.2] InitializeRteSchRteSw
1.1.1.2.1 Detailed Design
[SWDDS.2.1.2] initializeRteSchRteSw
Software Unit Information
Unit ID SWDDS.2.1.2 Unit Name InitializeRteSchRteSw
Architecture ID SWADS.2.1.2 ASIL QM
Prototype void InitializeRteSchRteSw( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Run-time environment initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.1 RteSch_Init
Calling Function
SWDDS.2.3.1 RteIo_Init
SWDDS.2.4.1 RteDiag_Init
SWDDS.2.2.1 RteApp_Init
Function Execution Time N/A
Requirement Id SWDDS.2.1.2
Target Milestone EBS2
Element RteSch
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 18
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.1.2.2 Static View Design
1.1.1.2.3 Dynamic View Design
- N/A
1.1.1.2.4 Interface Design
- N/A
1.1.1.3 [SWDDS.2.1.3] InitializeRteSchAppSw
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 19
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.3.1 Detailed Design
[SWDDS.2.1.3] initializeRteSchAppSw
Software Unit Information
Unit ID SWDDS.2.1.3 Unit Name InitializeRteSchAppSw
Architecture ID SWADS.2.1.3 ASIL QM
Prototype void InitializeRteSchAppSw( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Application software initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.1 RteSch_Init
Calling Function
SWDDS.1.1.1.1 AswSen_Init
SWDDS.1.2.1.1 AswCtr_Init
SWDDS.1.3.1.1 AswMng_Init
SWDDS.1.4.1.1 AswAct_Init
Function Execution Time N/A
Requirement Id SWDDS.2.1.3
Target Milestone EBS2
Element RteSch
Risk Low
Interoperability No
Criticality Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 20
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.1.3.2 Static View Design
1.1.1.3.3 Dynamic View Design
- N/A
1.1.1.3.4 Interface Design
- N/A
[Deleted] [SWDDS.2.1.4] IncreaseRteSchOpuTimCnt
1.1.1.4 [SWDDS.2.1.5] RteSch_MainFunc
1.1.1.4.1 Detailed Design
[SWDDS.2.1.5] RteSch_MainFunc
Software Unit Information
Unit ID SWDDS.2.1.5 Unit Name RteSch_MainFunc
Architecture ID SWADS.2.1.5 ASIL QM
Prototype void RteSch_MainFunc( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 21
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Scheduler main function
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.5 main
Calling Function
SWDDS.3.1.1.2 BswSch_DispatchTask
SWDDS.2.1.6 RunRteSchBackground
Function Execution Time N/A
Requirement Id SWDDS.2.1.5
Target Milestone EBS2
Element RteSch
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.4.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 22
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.4.3 Dynamic View Design
- N/A
1.1.1.4.4 Interface Design
- N/A
1.1.1.5 [SWDDS.2.1.6] RunRteSchBackground
1.1.1.5.1 Detailed Design
[SWDDS.2.1.6] RunRteSchBackground
Software Unit Information
Unit ID SWDDS.2.1.6 Unit Name RunRteSchBackground
Architecture ID SWADS.2.1.6 ASIL QM
Prototype void RunRteSchBackground( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 23
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Background task running
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.5 RteSch_MainFunc
Calling Function
SWDDS.2.3.5 RteIo_ChkWdtTimRdy
SWDDS.2.3.6 RteIo_RstWdtTim
Function Execution Time N/A
Requirement Id SWDDS.2.1.6
Target Milestone EBS2
Element RteSch
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.5.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 24
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.5.3 Dynamic View Design
- N/A
1.1.1.5.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 timer_flag SWDDS.2.3.5 IN tBool 0 1
Watchdog
timer not
ready
Watchdog
timer ready
FALSE - not
ready, TRUE -
timing ready
Timer
channel 3
flag
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 25
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.6 [SWDDS.2.1.7] RteSch_Task1ms
1.1.1.6.1 Detailed Design
[SWDDS.2.1.7] RteSch_Task1ms
Software Unit Information
Unit ID SWDDS.2.1.7 Unit Name RteSch_Task1ms
Architecture ID SWADS.2.1.7 ASIL QM
Prototype void RteSch_Task1ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 1ms task called from static scheduler
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
SWDDS.2.3.8 RteIo_GetSlFocStaDat
SWDDS.2.3.21 RteIo_ChkCanReqMsg
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 26
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function
SWDDS.1.1.6.2 MtrSpd_Measr
Function Execution Time N/A
Requirement Id SWDDS.2.1.7
Target Milestone EBS2
Element RteSch
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.6.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 27
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.6.3 Dynamic View Design
- N/A
1.1.1.6.4 Interface Design
- N/A
1.1.1.7 [SWDDS.2.1.8] RteSch_Task5ms
1.1.1.7.1 Detailed Design
[SWDDS.2.1.8] RteSch_Task5ms
Software Unit Information
Unit ID SWDDS.2.1.8 Unit Name RteSch_Task5ms
Architecture ID SWADS.2.1.8 ASIL QM
Prototype void RteSch_Task5ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 5ms task called from static scheduler
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 28
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
Calling Function
SWDDS.1.2.3.4 EopCtr_Run
SWDDS.1.4.2.2 MtrCtr_Set
Function Execution Time N/A
Requirement Id SWDDS.2.1.8
Target Milestone EBS2
Element RteSch
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.7.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 29
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.7.3 Dynamic View Design
- N/A
1.1.1.7.4 Interface Design
- N/A
1.1.1.8 [SWDDS.2.1.9] RteSch_Task10ms
1.1.1.8.1 Detailed Design
[SWDDS.2.1.9] RteSch_Task10ms
Software Unit Information
Unit ID SWDDS.2.1.9 Unit Name RteSch_Task10ms
Architecture ID SWADS.2.1.9 ASIL QM
Prototype void RteSch_Task10ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 30
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 10ms task called from static scheduler
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
Calling Function
SWDDS.1.1.8.2 ReqMsg_Recv
SWDDS.1.1.2.2 CtrSta_Chk
SWDDS.1.1.3.2 CurSig_Measr
SWDDS.1.1.4.2 DcVolt_Measr
SWDDS.1.2.2.3 DrvSta_Chk
SWDDS.1.4.3.2 ResMsg_Send
Function Execution
Time
N/A
Requirement Id SWDDS.2.1.9
Target Milestone EBS2
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 31
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element RteSch
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.1.8.2 Static View Design
1.1.1.8.3 Dynamic View Design
- N/A
1.1.1.8.4 Interface Design
- N/A
1.1.1.9 [SWDDS.2.1.10] RteSch_Task20ms
1.1.1.9.1 Detailed Design
[SWDDS.2.1.10] RteSch_Task20ms
Software Unit Information
Unit ID SWDDS.2.1.10 Unit Name RteSch_Task20ms
Architecture ID SWADS.2.1.10 ASIL QM
Prototype void RteSch_Task20ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 32
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read/Write Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 20ms task called from static scheduler
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
Calling Function
SWDDS.1.3.4.2 StartUp_Mng
SWDDS.1.1.7.2 MtrTrq_Cal
SWDDS.1.1.5.2 McuSta_Chk
SWDDS.1.2.4.2 SigRng_Chk
SWDDS.1.3.2.3 ModeChg_Mng
SWDDS.1.3.3.2 ShutDown_Mng
SWDDS.2.2.45 RteApp_ReadOprMode
Function
Execution Time
N/A
Requirement Id SWDDS.2.1.10
Target Milestone EBS2
Element RteSch
Risk Mid
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 33
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.9.2 Static View Design
1.1.1.9.3 Dynamic View Design
- N/A
1.1.1.9.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 g_eRteSchOprMode SWDDS.2.2.45 IN tOprMode 0 5
OPR
_MODE
_OFF
OPR
_MODE
_TEST
N/A
Current operating
mode
1.1.1.10 [SWDDS.2.1.11] RteSch_Task50ms
1.1.1.10.1 Detailed Design
[SWDDS.2.1.11] RteSch_Task50ms
Software Unit Information
Unit ID SWDDS.2.1.11 Unit Name RteSch_Task50ms
Architecture ID SWADS.2.1.11 ASIL QM
Prototype void RteSch_Task50ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 34
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read/Write Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 50ms task called from static scheduler
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
Calling Function SWDDS.1.1.9.2 TempSig_Measr
Function Execution Time N/A
Requirement Id SWDDS.2.1.11
Target Milestone EBS2
Element RteSch
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 35
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.10.2 Static View Design
1.1.1.10.3 Dynamic View Design
- N/A
1.1.1.10.4 Interface Design
- N/A
1.1.1.11 [SWDDS.2.1.12] RteSch_Task100ms
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 36
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.11.1 Detailed Design
[SWDDS.2.1.12] RteSch_Task100ms
Software Unit Information
Unit ID SWDDS.2.1.12 Unit Name RteSch_Task100ms
Architecture ID SWADS.2.1.12 ASIL QM
Prototype void RteSch_Task100ms( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteSchOprMode 0 ~ 5 Read/Write Current operating mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description 100ms task called from static scheduler
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.1.1.2 BswSch_DispatchTask
Calling Function SWDDS.2.1.4 IncreaseRteSchOpuTimCnt
Function Execution Time N/A
Requirement Id SWDDS.2.1.12
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 37
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Target Milestone EBS2
Element RteSch
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.11.2 Static View Design
1.1.1.11.3 Dynamic View Design
- N/A
1.1.1.11.4 Interface Design
- N/A
1.1.1.12 [SWDDS.2.1.13] RteSch_GetOpuTimCnt
1.1.1.12.1 Detailed Design
[SWDDS.2.1.13] RteSch_GetOpuTimCnt
1.1.1.12.2 Static View Design
- N/A
1.1.1.12.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 38
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.12.4 Interface Design
- N/A
1.1.2 [SWDDS.2.2] RteApp
Application data is initialized in the RteApp. And It is used to read and store obtained values in BSW.
Updated Application data is also use to operate in application software Layer.
1.1.2.1 [SWDDS.2.2.1] RteApp_Init
1.1.2.1.1 Detailed Design
[SWDDS.2.2.1] RteApp_Init
Software Unit Information
Unit ID SWDDS.2.2.1 Unit Name RteApp_Init
Architecture ID SWADS.2.2.1 ASIL QM
Prototype void RteApp_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16RteAppTgtSpd 0 ~ 3200 Write Target speed (rpm)
tU16 g_u16RteAppMsgSta 0 ~ 45056 Write
Received request message
status flag
tFrac16 g_f16RteAppSpdOut
-32758 ~
32767
Write Speed output (PU)
tS16 g_s16RteAppSpdFilt -6000 ~ 6000 Write Filtered speed (rpm)
tCtrState g_eRteAppCtrState 0 ~ 4 Write Control state
tU16 g_u16RteAppCtrFlt 0 ~ 65535 Write Control fault flag
tFrac16 g_f16RteAppCurOut
-32758 ~
32767
Write Current output (PU)
tFrac16 g_f16RteAppCurErr
-32758 ~
32767
Write Current error (PU)
tFrac16 g_f16RteAppDcCur 0 ~ 32767 Write DC input current (PU)
tFrac16 g_f16RteAppDcVolt 0 ~ 32767 Write DC link voltage (PU)
tFrac16 g_f16RteAppPcbTemp -1311 ~ 5570 Write PCB temperature (PU)
tFrac16 g_f16RteAppMtrTrq
-32768 ~
32767
Write Motor torque output (PU)
tFrac16 g_f16RteAppBatVolt 0 ~ 32767 Write Battery voltage (PU)
tU32 g_u32RteAppMcuSta 0 ~ 134217728 Write MCU status flag
tEopState g_eRteAppEopState 0 ~ 4 Write EOP control state
tBool g_bRteAppCtrEna 0 ~ 1 Write Control enable
tCtrMode g_eRteAppCtrMode 0 ~ 1 Write Sensorless FOC control mode
tFrac16 g_f16RteAppRefCur 0 ~ 32767 Write Reference current (PU)
tFrac16 g_f16RteAppRefSpd 0 ~ 19660 Write Reference speed (PU)
tFrac16 g_f16RteAppCurLmtUpp
-32768 ~
32767
Write Current limit - upper (PU)
tFrac16 g_f16RteAppCurLmtLow
-32768 ~
32767
Write Current limit - lower (PU)
-32768 ~
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 39
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 g_f16RteAppSpdErr
32767
Write Speed control error (PU)
tU32 g_u32RteAppDrvSta 0 ~ 16776960 Write Driving status flag
tU32 g_u32RteAppSigRng 0 ~ 255 Write Signal range check flag
tOprMode g_eRteAppOprMode 0 ~ 5 Write Operation mode
tFuncMode g_eRteAppFuncMode 0 ~ 2 Write Functional mode
tAppMode g_eRteAppAppMode 0 ~ 4 Write Application mode
tU16 g_u16RteAppOpuFlt 0 ~ 4095 Write OPU fault
tU16 g_u16RteAppOpuFltNo 0 ~ 65535 Write Number of OPU fault
tU32
g_au32RteAppFltFlagStored
[RTE_APP_OPU_FLT_STORE_NO]
0 ~
4294967295
Write Fault flag storage
tU32 g_u32RteAppPrevSigRng 0 ~ 255 Write
Previous signal range check
flag
tU32 g_u32RteAppPrevDrvSta 0 ~ 16776960 Write
Previous driving status check
flag
tU32 g_u32RteAppPrevMcuSta 0 ~ 134217728 Write
Previous MCU status check
flag
tU32 g_u32RteAppCombFltFlag
0 ~
4294967295
Write Combined fault flags
tU32 g_u32RteAppAccumFltFlag
0 ~
4294967295
Write Accumulated fault flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Application data initialization
Control Flow
Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 40
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.2 InitializeRteSchRteSw
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.2.2.1
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 41
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.2.1.2 Static View Design
1.1.2.1.3 Dynamic View Design
- N/A
1.1.2.1.4 Interface Design
- N/A
1.1.2.2 [SWDDS.2.2.2] RteApp_ReadTgtSpd
1.1.2.2.1 Detailed Design
[SWDDS.2.2.2] RteApp_ReadTgtSpd
Software Unit Information
Unit ID SWDDS.2.2.2 Unit Name RteApp_ReadTgtSpd
Architecture ID SWADS.2.2.2 ASIL QM
Prototype tS16 RteApp_ReadTgtSpd( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tS16 0 ~ 3200 Target speed (rpm)
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16RteAppTgtSpd 0 ~ 3200 Read Target speed (rpm)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Target speed reading

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 42
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.4 CheckDrvStaFlagClr
SWDDS.1.2.3.4 EopCtr_Run
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.2
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.2.2 Static View Design
1.1.2.2.3 Dynamic View Design
- N/A
1.1.2.2.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 43
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.3 [SWDDS.2.2.3] RteApp_WriteTgtSpd
1.1.2.3.1 Detailed Design
[SWDDS.2.2.3] RteApp_WriteTgtSpd
Software Unit Information
Unit ID SWDDS.2.2.3 Unit Name RteApp_WriteTgtSpd
Architecture ID SWADS.2.2.3 ASIL QM
Prototype void RteApp_WriteTgtSpd( tS16 target_speed )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_speed 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16RteAppTgtSpd 0 ~ 3200 Write Target speed (rpm)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Target speed writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.3
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 44
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.3.2 Static View Design
1.1.2.3.3 Dynamic View Design
- N/A
1.1.2.3.4 Interface Design
- N/A
1.1.2.4 [SWDDS.2.2.4] RteApp_ReadMsgSta
1.1.2.4.1 Detailed Design
[SWDDS.2.2.4] RteApp_ReadMsgSta
Software Unit Information
Unit ID SWDDS.2.2.4 Unit Name RteApp_ReadMsgSta
Architecture ID SWADS.2.2.4 ASIL QM
Prototype tU16 RteApp_ReadMsgSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 45056 Received message state flag
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppMsgSta 0 ~ 45056 Read Received request message status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Received message state flag reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.3 ModeChg_Mng
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 45
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.4
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.4.2 Static View Design
1.1.2.4.3 Dynamic View Design
- N/A
1.1.2.4.4 Interface Design
- N/A
1.1.2.5 [SWDDS.2.2.5] RteApp_WriteMsgSta
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 46
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.5.1 Detailed Design
[SWDDS.2.2.5] RteApp_WriteMsgSta
Software Unit Information
Unit ID SWDDS.2.2.5 Unit Name RteApp_WriteMsgSta
Architecture ID SWADS.2.2.5 ASIL QM
Prototype void RteApp_WriteMsgSta( tU16 state_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 state_flag 0 ~ 45056 IN received message state flag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppMsgSta 0 ~ 45056 Write Received request message status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Received message state flag writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.5
Target Milestone SBS2.1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 47
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.5.2 Static View Design
1.1.2.5.3 Dynamic View Design
- N/A
1.1.2.5.4 Interface Design
- N/A
1.1.2.6 [SWDDS.2.2.6] RteApp_ReadSpdOut
1.1.2.6.1 Detailed Design
[SWDDS.2.2.6] RteApp_ReadSpdOut
Software Unit Information
Unit ID SWDDS.2.2.6 Unit Name RteApp_ReadSpdOut
Architecture ID SWADS.2.2.6 ASIL QM
Prototype tFrac16 RteApp_ReadSpdOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32758 ~ 32767 Speed output (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppSpdOut -32758 ~ 32767 Read Speed output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed output reading
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.3.4 EopCtr_Run
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 48
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.1.2.3.12 ActEopCtrStateCurLmt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.6
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.6.2 Static View Design
1.1.2.6.3 Dynamic View Design
- N/A
1.1.2.6.4 Interface Design
- N/A
1.1.2.7 [SWDDS.2.2.7] RteApp_WriteSpdOut
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 49
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.1 Detailed Design
[SWDDS.2.2.7] RteApp_WriteSpdOut
Software Unit Information
Unit ID SWDDS.2.2.7 Unit Name RteApp_WriteSpdOut
Architecture ID SWADS.2.2.7 ASIL QM
Prototype void RteApp_WriteSpdOut( tFrac16 speed_output )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 speed_output -32758 ~ 32767 IN speed output (PU)
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppSpdOut -32758 ~ 32767 Write Speed output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed output writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.6.2 MtrSpd_Measr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.7
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 50
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.2 Static View Design
1.1.2.7.3 Dynamic View Design
- N/A
1.1.2.7.4 Interface Design
- N/A
1.1.2.8 [SWDDS.2.2.8] RteApp_ReadSpdFilt
1.1.2.8.1 Detailed Design
[SWDDS.2.2.8] RteApp_ReadSpdFilt
Software Unit Information
Unit ID SWDDS.2.2.8 Unit Name RteApp_ReadSpdFilt
Architecture ID SWADS.2.2.8 ASIL QM
Prototype tS16 RteApp_ReadSpdFilt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tS16 -6000 ~ 6000 Filtered speed (rpm)
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16RteAppSpdFilt -6000 ~ 6000 Read Filtered speed (rpm)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Filtered speed reading
Control Flow Diagram
(or Pseudo Code)

SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 51
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function
SWDDS.1.2.2.7 CheckDrvStaAtCurLmt
SWDDS.1.2.3.12 ActEopCtrStateCurLmt
SWDDS.1.4.3.2 ResMsg_Send
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.8
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.8.2 Static View Design
1.1.2.8.3 Dynamic View Design
- N/A
1.1.2.8.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 52
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.9 [SWDDS.2.2.9] RteApp_WriteSpdFilt
1.1.2.9.1 Detailed Design
[SWDDS.2.2.9] RteApp_WriteSpdFilt
Software Unit Information
Unit ID SWDDS.2.2.9 Unit Name RteApp_WriteSpdFilt
Architecture ID SWADS.2.2.9 ASIL QM
Prototype void RteApp_WriteSpdFilt( tS16 filtered_speed )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 filtered_speed -6000 ~ 6000 IN filtered speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16RteAppSpdFilt -6000 ~ 6000 Write Filtered speed (rpm)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Filtered speed writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.6.2 MtrSpd_Measr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.9
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 53
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.9.2 Static View Design
1.1.2.9.3 Dynamic View Design
- N/A
1.1.2.9.4 Interface Design
- N/A
1.1.2.10 [SWDDS.2.2.10] RteApp_ReadCtrState
1.1.2.10.1 Detailed Design
[SWDDS.2.2.10] RteApp_ReadCtrState
Software Unit Information
Unit ID SWDDS.2.2.10 Unit Name RteApp_ReadCtrState
Architecture ID SWADS.2.2.10 ASIL QM
Prototype tCtrState RteApp_ReadCtrState( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tCtrState 0 ~ 4 Control state
Global Variables
Data Type Name Range Read/Write Description
tCtrState g_eRteAppCtrState 0 ~ 4 Read Control state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control state reading
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.3 DrvSta_Chk
SWDDS.1.2.3.4 EopCtr_Run
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 54
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.1.2.3.9 ActEopCtrStateMaxSpd
SWDDS.1.3.3.2 ShutDown_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.10
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.10.2 Static View Design
1.1.2.10.3 Dynamic View Design
- N/A
1.1.2.10.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 55
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11 [SWDDS.2.2.11] RteApp_WriteCtrState
1.1.2.11.1 Detailed Design
[SWDDS.2.2.11] RteApp_WriteCtrState
Software Unit Information
Unit ID SWDDS.2.2.11 Unit Name RteApp_WriteCtrState
Architecture ID SWADS.2.2.11 ASIL QM
Prototype void RteApp_WriteCtrState( tCtrState control_state )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCtrState control_state 0 ~ 4 IN Control state
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tCtrState g_eRteAppCtrState 0 ~ 4 Write Control state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control state writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.2.2 CtrSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.11
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 56
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.2 Static View Design
1.1.2.11.3 Dynamic View Design
- N/A
1.1.2.11.4 Interface Design
- N/A
1.1.2.12 [SWDDS.2.2.12] RteApp_ReadCtrFlt
1.1.2.12.1 Detailed Design
[SWDDS.2.2.12] RteApp_ReadCtrFlt
Software Unit Information
Unit ID SWDDS.2.2.12 Unit Name RteApp_ReadCtrFlt
Architecture ID SWADS.2.2.12 ASIL QM
Prototype tU16 RteApp_ReadCtrFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 65535 Control fault flag
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppCtrFlt 0 ~ 65535 Read Control fault flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control fault flag reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.9 CheckDrvStaCtrFlt
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 57
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.12
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.12.2 Static View Design
1.1.2.12.3 Dynamic View Design
- N/A
1.1.2.12.4 Interface Design
- N/A
1.1.2.13 [SWDDS.2.2.13] RteApp_WriteCtrFlt
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 58
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.13.1 Detailed Design
[SWDDS.2.2.13] RteApp_WriteCtrFlt
Software Unit Information
Unit ID SWDDS.2.2.13 Unit Name RteApp_WriteCtrFlt
Architecture ID SWADS.2.2.13 ASIL QM
Prototype void RteApp_WriteCtrFlt( tU16 fault_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 fault_flag 0 ~ 65535 IN control fault flag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppCtrFlt 0 ~ 65535 Write Control fault flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control fault flag writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.2.2 CtrSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.13
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 59
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.13.2 Static View Design
1.1.2.13.3 Dynamic View Design
- N/A
1.1.2.13.4 Interface Design
- N/A
1.1.2.14 [SWDDS.2.2.14] RteApp_ReadCurOut
1.1.2.14.1 Detailed Design
[SWDDS.2.2.14] RteApp_ReadCurOut
Software Unit Information
Unit ID SWDDS.2.2.14 Unit Name RteApp_ReadCurOut
Architecture ID SWADS.2.2.14 ASIL QM
Prototype tFrac16 RteApp_ReadCurOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32758 ~ 32767 q-axis current output (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurOut -32758 ~ 32767 Read q-axis current output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description q-axis current output reading
Control Flow Diagram
(or Pseudo Code)

SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
SWDDS.1.2.2.6 CheckDrvStaAtSlRun
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 60
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function
SWDDS.1.2.2.7 CheckDrvStaAtCurLmt
SWDDS.1.2.3.10 ActEopCtrStateSpdChg
SWDDS.1.2.3.11 ActEopCtrStateCurFilt
SWDDS.1.2.3.16 CheckEopCtrAntiWindUp
SWDDS.1.4.3.2 ResMsg_Send
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.14
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.14.2 Static View Design
1.1.2.14.3 Dynamic View Design
- N/A
1.1.2.14.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 61
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.15 [SWDDS.2.2.15] RteApp_WriteCurOut
1.1.2.15.1 Detailed Design
[SWDDS.2.2.15] RteApp_WriteCurOut
Software Unit Information
Unit ID SWDDS.2.2.15 Unit Name RteApp_WriteCurOut
Architecture ID SWADS.2.2.15 ASIL QM
Prototype void RteApp_WriteCurOut( tFrac16 current_output )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 current_output -32758 ~ 32767 IN q-axis current output (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurOut -32758 ~ 32767 Read q-axis current output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description q-axis current output writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.3.3 GetCurSigCurOut
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.15
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 62
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.15.2 Static View Design
1.1.2.15.3 Dynamic View Design
- N/A
1.1.2.15.4 Interface Design
- N/A
[Deleted] [SWDDS.2.2.16] RteApp_WriteCurErr
1.1.2.16 [SWDDS.2.2.17] RteApp_ReadDcCur
1.1.2.16.1 Detailed Design
[SWDDS.2.2.17] RteApp_ReadDcCur
Software Unit Information
Unit ID SWDDS.2.2.17 Unit Name RteApp_ReadDcCur
Architecture ID SWADS.2.2.17 ASIL QM
Prototype tFrac16 RteApp_ReadDcCur( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 DC current input (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppDcCur 0 ~ 32767 Read DC current input (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC current input reading

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 63
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.3.2 ResMsg_Send
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.17
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.16.2 Static View Design
1.1.2.16.3 Dynamic View Design
- N/A
1.1.2.16.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 64
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.17 [SWDDS.2.2.18] RteApp_WriteDcCur
1.1.2.17.1 Detailed Design
[SWDDS.2.2.18] RteApp_WriteDcCur
Software Unit Information
Unit ID SWDDS.2.2.18 Unit Name RteApp_WriteDcCur
Architecture ID SWADS.2.2.18 ASIL QM
Prototype void RteApp_WriteDcCur( tFrac16 dc_current_input )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 dc_current_input 0 ~ 32767 IN DC current input (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppDcCur 0 ~ 32767 Write DC current input (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC current input writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.3.5 GetCurSigDcCur
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.18
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 65
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.17.2 Static View Design
1.1.2.17.3 Dynamic View Design
- N/A
1.1.2.17.4 Interface Design
- N/A
1.1.2.18 [SWDDS.2.2.19] RteApp_WriteDcVolt
1.1.2.18.1 Detailed Design
[SWDDS.2.2.19] RteApp_WriteDcVolt
Software Unit Information
Unit ID SWDDS.2.2.19 Unit Name RteApp_WriteDcVolt
Architecture ID SWADS.2.2.19 ASIL QM
Prototype void RteApp_WriteDcVolt( tFrac16 dc_voltage )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 dc_voltage 0 ~ 32767 IN DC link voltage (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppDcVolt 0 ~ 32767 Write DC link voltage (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC link voltage writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 66
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.4.2 DcVolt_Measr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.19
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.18.2 Static View Design
1.1.2.18.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 67
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.18.4 Interface Design
- N/A
1.1.2.19 [SWDDS.2.2.20] RteApp_ReadPcbTemp
1.1.2.19.1 Detailed Design
[SWDDS.2.2.20] RteApp_ReadPcbTemp
Software Unit Information
Unit ID SWDDS.2.2.20 Unit Name RteApp_ReadPcbTemp
Architecture ID SWADS.2.2.20 ASIL QM
Prototype tFrac16 RteApp_ReadPcbTemp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -1311 ~ 5570 PCB temperature (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppPcbTemp -1311 ~ 5570 Read PCB temperature (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description PCB temperature reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.6 CheckSigRngPcbTemp
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.20
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 68
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.19.2 Static View Design
1.1.2.19.3 Dynamic View Design
- N/A
1.1.2.19.4 Interface Design
- N/A
1.1.2.20 [SWDDS.2.2.21] RteApp_WritePcbTemp
1.1.2.20.1 Detailed Design
[SWDDS.2.2.21] RteApp_WritePcbTemp
Software Unit Information
Unit ID SWDDS.2.2.21 Unit Name RteApp_WritePcbTemp
Architecture ID SWADS.2.2.21 ASIL QM
Prototype void RteApp_WritePcbTemp( tFrac16 pcb_temperature )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 pcb_temperature -1311 ~ 5570 IN PCB temperature (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppPcbTemp -1311 ~ 5570 Write PCB temperature (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description PCB temperature writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 69
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.1.1.9.2 TempSig_Measr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.21
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.20.2 Static View Design
1.1.2.20.3 Dynamic View Design
- N/A
1.1.2.20.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 70
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.21 [SWDDS.2.2.22] RteApp_ReadMtrTrq
1.1.2.21.1 Detailed Design
[SWDDS.2.2.22] RteApp_ReadMtrTrq
Software Unit Information
Unit ID SWDDS.2.2.22 Unit Name RteApp_ReadMtrTrq
Architecture ID SWADS.2.2.22 ASIL QM
Prototype tFrac16 RteApp_ReadMtrTrq( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Motor torque (Nm)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppMtrTrq -32768 ~ 32767 Read Motor torque output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor torque reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.3.2 ResMsg_Send
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.22
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 71
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.21.2 Static View Design
1.1.2.21.3 Dynamic View Design
- N/A
1.1.2.21.4 Interface Design
- N/A
1.1.2.22 [SWDDS.2.2.23] RteApp_WriteMtrTrq
1.1.2.22.1 Detailed Design
[SWDDS.2.2.23] RteApp_WriteMtrTrq
Software Unit Information
Unit ID SWDDS.2.2.23 Unit Name RteApp_WriteMtrTrq
Architecture ID SWADS.2.2.23 ASIL QM
Prototype void RteApp_WriteMtrTrq( tFrac16 motor_torque )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 motor_torque -32768 ~ 32767 IN motor_torque: motor torque (Nm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppMtrTrq -32768 ~ 32767 Write Motor torque output (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor torque writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 72
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.7.2 MtrTrq_Cal
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.23
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.22.2 Static View Design
1.1.2.22.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 73
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.22.4 Interface Design
- N/A
1.1.2.23 [SWDDS.2.2.24] RteApp_ReadBatVolt
1.1.2.23.1 Detailed Design
[SWDDS.2.2.24] RteApp_ReadBatVolt
Software Unit Information
Unit ID SWDDS.2.2.24 Unit Name RteApp_ReadBatVolt
Architecture ID SWADS.2.2.24 ASIL QM
Prototype tFrac16 RteApp_ReadBatVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 Battery voltage (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppBatVolt 0 ~ 32767 Read Battery voltage (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Battery voltage reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.3 CheckSigRngBatVolt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.24
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 74
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.23.2 Static View Design
1.1.2.23.3 Dynamic View Design
- N/A
1.1.2.23.4 Interface Design
- N/A
1.1.2.24 [SWDDS.2.2.25] RteApp_WriteBatVolt
1.1.2.24.1 Detailed Design
[SWDDS.2.2.25] RteApp_WriteBatVolt
Software Unit Information
Unit ID SWDDS.2.2.25 Unit Name RteApp_WriteBatVolt
Architecture ID SWADS.2.2.25 ASIL QM
Prototype void RteApp_WriteBatVolt( tFrac16 battery_voltage )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 battery_voltage 0 ~ 32767 IN battery voltage (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppBatVolt 0 ~ 32767 Write Battery voltage (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Battery voltage writing
Control Flow Diagram

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 75
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.5.3 GetMcuStaBatVolt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.25
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.24.2 Static View Design
1.1.2.24.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 76
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.24.4 Interface Design
- N/A
1.1.2.25 [SWDDS.2.2.26] RteApp_ReadMcuSta
1.1.2.25.1 Detailed Design
[SWDDS.2.2.26] RteApp_ReadMcuSta
Software Unit Information
Unit ID SWDDS.2.2.26 Unit Name RteApp_ReadMcuSta
Architecture ID SWADS.2.2.26 ASIL QM
Prototype tU32 RteApp_ReadMcuSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU32 0 ~ 134217728 MCU status flag
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppMcuSta 0 ~ 134217728 Read MCU status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description MCU status flag reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.3 ModeChg_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.26
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 77
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.25.2 Static View Design
1.1.2.25.3 Dynamic View Design
- N/A
1.1.2.25.4 Interface Design
- N/A
1.1.2.26 [SWDDS.2.2.27] RteApp_WriteMcuSta
1.1.2.26.1 Detailed Design
[SWDDS.2.2.27] RteApp_WriteMcuSta
Software Unit Information
Unit ID SWDDS.2.2.27 Unit Name RteApp_WriteMcuSta
Architecture ID SWADS.2.2.27 ASIL QM
Prototype void RteApp_WriteMcuSta( tU32 status_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 status_flag 0 ~ 134217728 IN MCU status flag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppMcuSta 0 ~ 134217728 Write MCU status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description MCU status flag writing
Control Flow Diagram
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 78
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.5.2 McuSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.27
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.26.2 Static View Design
1.1.2.26.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 79
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.26.4 Interface Design
- N/A
1.1.2.27 [SWDDS.2.2.28] RteApp_ReadEopState
1.1.2.27.1 Detailed Design
[SWDDS.2.2.28] RteApp_ReadEopState
Software Unit Information
Unit ID SWDDS.2.2.28 Unit Name RteApp_ReadEopState
Architecture ID SWADS.2.2.28 ASIL QM
Prototype tEopState RteApp_ReadEopState( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tEopState 0 ~ 4 EOP control state
Global Variables
Data Type Name Range Read/Write Description
tEopState g_eRteAppEopState 0 ~ 4 Read EOP control state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EOP control state reading
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.3 DrvSta_Chk
SWDDS.1.1.6.2 MtrSpd_Measr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.28
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 80
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.27.2 Static View Design
1.1.2.27.3 Dynamic View Design
- N/A
1.1.2.27.4 Interface Design
- N/A
1.1.2.28 [SWDDS.2.2.29] RteApp_WriteEopState
1.1.2.28.1 Detailed Design
[SWDDS.2.2.29] RteApp_WriteEopState
Software Unit Information
Unit ID SWDDS.2.2.29 Unit Name RteApp_WriteEopState
Architecture ID SWADS.2.2.29 ASIL QM
Prototype void RteApp_WriteEopState( tEopState eop_state )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tEopState eop_state 0 ~ 4 IN eop_state: EOP control state
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tEopState g_eRteAppEopState 0 ~ 4 Write EOP control state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EOP control state writing
Control Flow Diagram

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 81
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.29
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.28.2 Static View Design
1.1.2.28.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 82
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.28.4 Interface Design
- N/A
1.1.2.29 [SWDDS.2.2.30] RteApp_ReadCtrEna
1.1.2.29.1 Detailed Design
[SWDDS.2.2.30] RteApp_ReadCtrEna
Software Unit Information
Unit ID SWDDS.2.2.30 Unit Name RteApp_ReadCtrEna
Architecture ID SWADS.2.2.30 ASIL QM
Prototype tBool RteApp_ReadCtrEna( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 Control enable
Global Variables
Data Type Name Range Read/Write Description
tBool g_bRteAppCtrEna 0 ~ 1 Read Control enable
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control enable reading
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.3 DrvSta_Chk
SWDDS.1.4.2.2 MtrCtr_Set
SWDDS.1.2.4.11 CheckSigRngProtMode
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.30
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 83
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
1.1.2.29.2 Static View Design
1.1.2.29.3 Dynamic View Design
- N/A
1.1.2.29.4 Interface Design
- N/A
1.1.2.30 [SWDDS.2.2.31] RteApp_WriteCtrEna
1.1.2.30.1 Detailed Design
[SWDDS.2.2.31] RteApp_WriteCtrEna
Software Unit Information
Unit ID SWDDS.2.2.31 Unit Name RteApp_WriteCtrEna
Architecture ID SWADS.2.2.31 ASIL QM
Prototype void RteApp_WriteCtrEna( tBool control_enable )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool control_enable 0 ~ 1 IN Control enable
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bRteAppCtrEna 0 ~ 1 Write Control enable
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control enable writing

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 84
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.31
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.30.2 Static View Design
1.1.2.30.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 85
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.30.4 Interface Design
- N/A
1.1.2.31 [SWDDS.2.2.32] RteApp_ReadCtrMode
1.1.2.31.1 Detailed Design
[SWDDS.2.2.32] RteApp_ReadCtrMode
Software Unit Information
Unit ID SWDDS.2.2.32 Unit Name RteApp_ReadCtrMode
Architecture ID SWADS.2.2.32 ASIL QM
Prototype tCtrMode RteApp_ReadCtrMode( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tCtrMode 0 ~ 1 Sensorless FOC control mode
Global Variables
Data Type Name Range Read/Write Description
tCtrMode g_eRteAppCtrMode 0 ~ 1 Read Sensorless FOC control mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed control mode reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.2.2 MtrCtr_Set
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.32
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 86
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.31.2 Static View Design
1.1.2.31.3 Dynamic View Design
- N/A
1.1.2.31.4 Interface Design
- N/A
1.1.2.32 [SWDDS.2.2.33] RteApp_ReadRefCur
1.1.2.32.1 Detailed Design
[SWDDS.2.2.33] RteApp_ReadRefCur
Software Unit Information
Unit ID SWDDS.2.2.33 Unit Name RteApp_ReadRefCur
Architecture ID SWADS.2.2.33 ASIL QM
Prototype tFrac16 RteApp_ReadRefCur( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 Reference current (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppRefCur 0 ~ 32767 Read Reference current (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Reference current reading
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 87
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.2.2 MtrCtr_Set
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.33
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.32.2 Static View Design
1.1.2.32.3 Dynamic View Design
- N/A
1.1.2.32.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 88
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.33 [SWDDS.2.2.34] RteApp_ReadRefSpd
1.1.2.33.1 Detailed Design
[SWDDS.2.2.34] RteApp_ReadRefSpd
Software Unit Information
Unit ID SWDDS.2.2.34 Unit Name RteApp_ReadRefSpd
Architecture ID SWADS.2.2.34 ASIL QM
Prototype tFrac16 RteApp_ReadRefSpd( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 19660 Reference speed (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppRefSpd 0 ~ 19660 Read Reference speed (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Reference speed reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.2.2 MtrCtr_Set
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.34
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 89
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.33.2 Static View Design
1.1.2.33.3 Dynamic View Design
- N/A
1.1.2.33.4 Interface Design
- N/A
1.1.2.34 [SWDDS.2.2.35] RteApp_WriteRefSpd
1.1.2.34.1 Detailed Design
[SWDDS.2.2.35] RteApp_WriteRefSpd
Software Unit Information
Unit ID SWDDS.2.2.35 Unit Name RteApp_WriteRefSpd
Architecture ID SWADS.2.2.35 ASIL QM
Prototype void RteApp_WriteRefSpd( tFrac16 reference_speed )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 reference_speed 0 ~ 19660 IN reference speed (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppRefSpd 0 ~ 19660 Write Reference speed (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Reference speed writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 90
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Runt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.35
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.34.2 Static View Design
1.1.2.34.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 91
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.34.4 Interface Design
- N/A
1.1.2.35 [SWDDS.2.2.36] RteApp_ReadCurLmtUpp
1.1.2.35.1 Detailed Design
[SWDDS.2.2.36] RteApp_ReadCurLmtUpp
Software Unit Information
Unit ID SWDDS.2.2.36 Unit Name RteApp_ReadCurLmtUpp
Architecture ID SWADS.2.2.36 ASIL QM
Prototype tFrac16 RteApp_ReadCurLmtUpp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Current limit upper (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurLmtUpp -32768 ~ 32767 Read Current limit - upper (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current limit upper reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.2.2 MtrCtr_Set
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.36
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 92
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.35.2 Static View Design
1.1.2.35.3 Dynamic View Design
- N/A
1.1.2.35.4 Interface Design
- N/A
1.1.2.36 [SWDDS.2.2.37] RteApp_WriteCurLmtUpp
1.1.2.36.1 Detailed Design
[SWDDS.2.2.37] RteApp_WriteCurLmtUpp
Software Unit Information
Unit ID SWDDS.2.2.37 Unit Name RteApp_WriteCurLmtUpp
Architecture ID SWADS.2.2.37 ASIL QM
Prototype void RteApp_WriteCurLmtUpp( tFrac16 current_limit )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 current_limit -32768 ~ 32767 IN current limit upper (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurLmtUpp -32768 ~ 32767 Write Current limit - upper (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current limit upper writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 93
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.17 SetEopCtrSpdCtrCurLmt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.37
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.36.2 Static View Design
1.1.2.36.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 94
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.36.4 Interface Design
- N/A
1.1.2.37 [SWDDS.2.2.38] RteApp_ReadCurLmtLow
1.1.2.37.1 Detailed Design
[SWDDS.2.2.38] RteApp_ReadCurLmtLow
Software Unit Information
Unit ID SWDDS.2.2.38 Unit Name RteApp_ReadCurLmtLow
Architecture ID SWADS.2.2.38 ASIL QM
Prototype tFrac16 RteApp_ReadCurLmtLow( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Current limit lower (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurLmtLow -32768 ~ 32767 Read Current limit - lower (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current limit lower reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.2.2 MtrCtr_Set
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.38
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 95
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.37.2 Static View Design
1.1.2.37.3 Dynamic View Design
- N/A
1.1.2.37.4 Interface Design
- N/A
1.1.2.38 [SWDDS.2.2.39] RteApp_WriteCurLmtLow
1.1.2.38.1 Detailed Design
[SWDDS.2.2.39] RteApp_WriteCurLmtLow
Software Unit Information
Unit ID SWDDS.2.2.39 Unit Name RteApp_WriteCurLmtLow
Architecture ID SWADS.2.2.39 ASIL QM
Prototype void RteApp_WriteCurLmtLow( tFrac16 current_limit )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 current_limit -32768 ~ 32767 IN current limit lower (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppCurLmtLow -32768 ~ 32767 Write Current limit - lower (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current limit lower writing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 96
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.17 SetEopCtrSpdCtrCurLmt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.39
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.38.2 Static View Design
1.1.2.38.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 97
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.38.4 Interface Design
- N/A
1.1.2.39 [SWDDS.2.2.40] RteApp_ReadSpdErr
1.1.2.39.1 Detailed Design
[SWDDS.2.2.40] RteApp_ReadSpdErr
Software Unit Information
Unit ID SWDDS.2.2.40 Unit Name RteApp_ReadSpdErr
Architecture ID SWADS.2.2.40 ASIL QM
Prototype tFrac16 RteApp_ReadSpdErr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Speed control error (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16RteAppSpdErr -32768 ~ 32767 Read Speed control error (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed control error reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.11 CheckSigRngProtMode
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.40
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 98
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.39.2 Static View Design
1.1.2.39.3 Dynamic View Design
- N/A
1.1.2.39.4 Interface Design
- N/A
1.1.2.40 [SWDDS.2.2.41] RteApp_ReadDrvSta
1.1.2.40.1 Detailed Design
[SWDDS.2.2.41] RteApp_ReadDrvSta
Software Unit Information
Unit ID SWDDS.2.2.41 Unit Name RteApp_ReadDrvSta
Architecture ID SWADS.2.2.41 ASIL QM
Prototype tU32 RteApp_ReadDrvSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU32 0 ~ 16776960 Driving status flag
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppDrvSta 0 ~ 16776960 Read Driving status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Driving status flag reading
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 99
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.1.3.2.3 ModeChg_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.41
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.40.2 Static View Design
1.1.2.40.3 Dynamic View Design
- N/A
1.1.2.40.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 100
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.41 [SWDDS.2.2.42] RteApp_WriteDrvSta
1.1.2.41.1 Detailed Design
[SWDDS.2.2.42] RteApp_WriteDrvSta
Software Unit Information
Unit ID SWDDS.2.2.42 Unit Name RteApp_WriteDrvSta
Architecture ID SWADS.2.2.42 ASIL QM
Prototype void RteApp_WriteDrvSta( tU32 status_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 status_flag 0 ~ 16776960 IN Driving status flag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppDrvSta 0 ~ 16776960 Write Driving status flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Driving status flag writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.42
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 101
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.41.2 Static View Design
1.1.2.41.3 Dynamic View Design
- N/A
1.1.2.41.4 Interface Design
- N/A
1.1.2.42 [SWDDS.2.2.43] RteApp_ReadSigRng
1.1.2.42.1 Detailed Design
[SWDDS.2.2.43] RteApp_ReadSigRng
Software Unit Information
Unit ID SWDDS.2.2.43 Unit Name RteApp_ReadSigRng
Architecture ID SWADS.2.2.43 ASIL QM
Prototype tU32 RteApp_ReadSigRng( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU32 0 ~ 255 Signal range checking flag
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppSigRng 0 ~ 255 Read Signal range check flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Signal range checking flag reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.3 ModeChg_Mng
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 102
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.43
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.42.2 Static View Design
1.1.2.42.3 Dynamic View Design
- N/A
1.1.2.42.4 Interface Design
- N/A
1.1.2.43 [SWDDS.2.2.44] RteApp_WriteSigRng
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 103
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.43.1 Detailed Design
[SWDDS.2.2.44] RteApp_WriteSigRng
Software Unit Information
Unit ID SWDDS.2.2.44 Unit Name RteApp_WriteSigRng
Architecture ID SWADS.2.2.44 ASIL QM
Prototype void RteApp_WriteSigRng( tU32 checking_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 checking_flag 0 ~ 255 IN Signal range check flag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32RteAppSigRng 0 ~ 255 Write Signal range check flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Signal range checking flag writing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.2 SigRng_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.44
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 104
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.43.2 Static View Design
1.1.2.43.3 Dynamic View Design
- N/A
1.1.2.43.4 Interface Design
- N/A
1.1.2.44 [SWDDS.2.2.45] RteApp_ReadOprMode
1.1.2.44.1 Detailed Design
[SWDDS.2.2.45] RteApp_ReadOprMode
Software Unit Information
Unit ID SWDDS.2.2.45 Unit Name RteApp_ReadOprMode
Architecture ID SWADS.2.2.45 ASIL QM
Prototype tOprMode RteApp_ReadOprMode( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tOprMode 0 ~ 5 Operating mode
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteAppOprMode 0 ~ 5 Read Operation mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Operating mode reading
Control Flow Diagram
(or Pseudo Code)

SWDDS.1.2.2.12 CheckDrvStaSpdErr
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 105
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function
SWDDS.1.2.3.11 ActEopCtrStateCurFilt
SWDDS.1.2.3.14 CheckEopCtrEnaEdge
SWDDS.1.3.2.3 ModeChg_Mng
SWDDS.2.1.10 RteSch_Task20ms
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.45
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.44.2 Static View Design
1.1.2.44.3 Dynamic View Design
- N/A
1.1.2.44.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 106
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.45 [SWDDS.2.2.46] RteApp_WriteOprMode
1.1.2.45.1 Detailed Design
[SWDDS.2.2.46] RteApp_WriteOprMode
Software Unit Information
Unit ID SWDDS.2.2.46 Unit Name RteApp_WriteOprMode
Architecture ID SWADS.2.2.46 ASIL QM
Prototype void RteApp_WriteOprMode( tOprMode operation_mode )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tOprMode operation_mode 0 ~ 5 IN Operation mode
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tOprMode g_eRteAppOprMode 0 ~ 5 Write Operation mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Operation mode writing
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.3.2.4 ChangeModeChgAppMode
SWDDS.1.3.4.2 StartUp_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.46
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 107
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.45.2 Static View Design
1.1.2.45.3 Dynamic View Design
- N/A
1.1.2.45.4 Interface Design
- N/A
1.1.2.46 [SWDDS.2.2.47] RteApp_ReadFuncMode
1.1.2.46.1 Detailed Design
[SWDDS.2.2.47] RteApp_ReadFuncMode
Software Unit Information
Unit ID SWDDS.2.2.47 Unit Name RteApp_ReadFuncMode
Architecture ID SWADS.2.2.47 ASIL QM
Prototype tFuncMode RteApp_ReadFuncMode( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFuncMode 0 ~ 2 Function mode
Global Variables
Data Type Name Range Read/Write Description
tFuncMode g_eRteAppFuncMode 0 ~ 2 Read Functional mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Function mode reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.13 CheckEopCtrEnaMode
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 108
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.47
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.46.2 Static View Design
1.1.2.46.3 Dynamic View Design
- N/A
1.1.2.46.4 Interface Design
- N/A
1.1.2.47 [SWDDS.2.2.48] RteApp_WriteFuncMode
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 109
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.47.1 Detailed Design
[SWDDS.2.2.48] RteApp_WriteFuncMode
Software Unit Information
Unit ID SWDDS.2.2.48 Unit Name RteApp_WriteFuncMode
Architecture ID SWADS.2.2.48 ASIL QM
Prototype void RteApp_WriteFuncMode( tFuncMode function_mode )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFuncMode function_mode 0 ~ 2 IN Function mode
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFuncMode g_eRteAppFuncMode 0 ~ 2 Write Functional mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Function mode writing
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.3.2.9 CheckModeChgSigRng
SWDDS.1.3.4.2 StartUp_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.48
Target Milestone SBS1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 110
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.47.2 Static View Design
1.1.2.47.3 Dynamic View Design
- N/A
1.1.2.47.4 Interface Design
- N/A
1.1.2.48 [SWDDS.2.2.49] RteApp_ReadAppMode
1.1.2.48.1 Detailed Design
[SWDDS.2.2.49] RteApp_ReadAppMode
Software Unit Information
Unit ID SWDDS.2.2.49 Unit Name RteApp_ReadAppMode
Architecture ID SWADS.2.2.49 ASIL QM
Prototype tAppMode RteApp_ReadAppMode( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tAppMode 0 ~ 4 Application mode
Global Variables
Data Type Name Range Read/Write Description
tAppMode g_eRteAppAppMode 0 ~ 4 Read Application mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Application mode reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.15 CheckEopCtrEnaAppMode
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 111
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.49
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.48.2 Static View Design
1.1.2.48.3 Dynamic View Design
- N/A
1.1.2.48.4 Interface Design
- N/A
1.1.2.49 [SWDDS.2.2.50] RteApp_WriteAppMode
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 112
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.49.1 Detailed Design
[SWDDS.2.2.50] RteApp_WriteAppMode
Software Unit Information
Unit ID SWDDS.2.2.50 Unit Name RteApp_WriteAppMode
Architecture ID SWADS.2.2.50 ASIL QM
Prototype void RteApp_WriteAppMode( tAppMode application_mode )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tAppMode application_mode 0 ~ 4 IN Application mode
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tAppMode g_eRteAppAppMode 0 ~ 4 Write Application mode
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Application mode writing
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.3.2.4 ChangeModeChgAppMode
SWDDS.1.3.4.2 StartUp_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.50
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 113
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.49.2 Static View Design
1.1.2.49.3 Dynamic View Design
- N/A
1.1.2.49.4 Interface Design
- N/A
1.1.2.50 [SWDDS.2.2.51] RteApp_ReadOpuFlt
1.1.2.50.1 Detailed Design
[SWDDS.2.2.51] RteApp_ReadOpuFlt
Software Unit Information
Unit ID SWDDS.2.2.51 Unit Name RteApp_ReadOpuFlt
Architecture ID SWADS.2.2.51 ASIL QM
Prototype tU16 RteApp_ReadOpuFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 4095 OPU fault
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppOpuFlt 0 ~ 4095 Read OPU fault
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description OPU fault reading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.3.2 ResMsg_Send
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 114
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.51
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.50.2 Static View Design
1.1.2.50.3 Dynamic View Design
- N/A
1.1.2.50.4 Interface Design
- N/A
1.1.2.51 [SWDDS.2.2.52] RteApp_WriteOpuFlt
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 115
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.51.1 Detailed Design
[SWDDS.2.2.52] RteApp_WriteOpuFlt
Software Unit Information
Unit ID SWDDS.2.2.52 Unit Name RteApp_WriteOpuFlt
Architecture
ID
SWADS.2.2.52 ASIL QM
Prototype tU16 RteApp_WriteOpuFlt( tU16 opu_fault )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
tU16 opu_fault 0 ~ 4095 IN OPU fault
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppOpuFlt 0 ~ 4095 Read/Write OPU fault
tU32 g_u32RteAppSigRng 0 ~ 255 Read Signal range check flag
tU32 g_u32RteAppDrvSta 0 ~ 16776960 Read Driving status flag
tU32 g_u32RteAppMcuSta 0 ~ 134217728 Read MCU status flag
tU32 g_u32RteAppCombFltFlag 0 ~ 4294967295 Read/Write Combined fault flags
tU32 g_u32RteAppAccumFltFlag 0 ~ 4294967295 Read/Write Accumulated fault flags
tU32 g_u32RteAppPrevSigRng 0 ~ 255 Read/Write Previous signal range check flag
tU32 g_u32RteAppPrevDrvSta 0 ~ 16776960 Read/Write Previous driving status check flag
tU32 g_u32RteAppPrevMcuSta 0 ~ 134217728 Read/Write Previous MCU status check flag
tU32
g_au32RteAppFltFlagStored
[RTE_APP_OPU_FLT_STORE_NO]
0 ~ 4294967295 Read/Write Fault flag storage
tU16 g_u16RteAppOpuFltNo 0 ~ 65535 Read/Write Number of OPU fault
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
OPU fault flag writing
- OPU flag changed checking
- Fault flags setting
- Fault flag increment checking
- Stored OPU flag shifting
- Number of fault increment
- Fault flag updating
1. RteApp_WriteOpuFlt checks if the previous OPU fault flags and current OPU fault flags are different.
2. RteApp_WriteOpuFlt gets real fault flags and combines all the fault flags.
3. RteApp_WriteOpuFlt checks if new fault flag is occurred(fault flag is increased).
4. RteApp_WriteOpuFlt shifts the stored combined fault flags and enters the new fault flags at the start of the array.
5. RteApp_WriteOpuFlt accumulates the faults flags to the end of the array.
6. RteApp_WriteOpuFlt increases the number of fault flags.
7. RteApp_WriteOpuFlt updates the previous fault flags.
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 116
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)
Called
Function
SWDDS.1.3.2.4 ChangeModeChgAppMode
Calling
Function
N/A
Function
Execution
Time
N/A
Requirement Id SWDDS.2.2.52
Target Milestone EBS2
Element RteApp
Risk Mid
Interoperability No
Criticality Mid
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 117
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity High
Verifiability Yes
1.1.2.51.2 Static View Design
1.1.2.51.3 Dynamic View Design
- N/A
1.1.2.51.4 Interface Design
- N/A
1.1.2.52 [SWDDS.2.2.53] RteApp_ClrOpuFlt
1.1.2.52.1 Detailed Design
[SWDDS.2.2.53] RteApp_ClrOpuFlt
Software Unit Information
Unit ID SWDDS.2.2.53 Unit Name App_ClrOpuFlt
Architecture ID SWADS.2.2.53 ASIL QM
Prototype void App_ClrOpuFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppOpuFlt 0 ~ 4095 Write OPU fault
tU32 g_u32RteAppPrevSigRng 0 ~ 255 Write Previous signal range check flag
tU32 g_u32RteAppPrevDrvSta 0 ~ 16776960 Write Previous driving status check flag
tU32 g_u32RteAppPrevMcuSta 0 ~ 134217728 Write Previous MCU status check flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 118
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current OPU fault flag clearing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.4.2 StartUp_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.53
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.52.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 119
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.52.3 Dynamic View Design
- N/A
1.1.2.52.4 Interface Design
- N/A
1.1.2.53 [SWDDS.2.2.54] RteApp_GetOpuFltNo
1.1.2.53.1 Detailed Design
[SWDDS.2.2.54] RteApp_GetOpuFltNo
Software Unit Information
Unit ID SWDDS.2.2.54 Unit Name App_GetOpuFltNo
Architecture ID SWADS.2.2.54 ASIL QM
Prototype tU16 App_GetOpuFltNo( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 32767 Number of OPU fault
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16RteAppOpuFltNo 0 ~ 32767 Read Number of OPU fault
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Number of OPU fault getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.2 ShutDown_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.2.54
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 120
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.53.2 Static View Design
1.1.2.53.3 Dynamic View Design
- N/A
1.1.2.53.4 Interface Design
- N/A
1.1.2.54 [SWDDS.2.2.55] App_GetOpuFltStored
1.1.2.54.1 Detailed Design
[SWDDS.2.2.55] App_getOpuFltStored
Software Unit Information
Unit ID SWDDS.2.2.55 Unit Name App_GetOpuFltStored
Architecture ID SWADS.2.2.55 ASIL QM
Prototype void App_GetOpuFltStored( tU32* flag_buffer )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU32* flag_buffer
0 ~
4294967295
OUT
stored OPU flag getting
buffer
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU32
g_au32RteAppFltFlagStored
[RTE_APP_OPU_FLT_STORE_NO]
0 ~
4294967295
Read Fault flag storage
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 121
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current OPU fault flag clearing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.4 SaveShutDownFltFlag
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.2.2.55
Target Milestone EBS2
Element RteApp
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 122
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.54.2 Static View Design
1.1.2.54.3 Dynamic View Design
- N/A
1.1.2.54.4 Interface Design
- N/A
1.1.2.55 [SWDDS.2.2.56] RteApp_ReadCurErr
1.1.2.55.1 Detailed Design
[SWDDS.2.2.56] RteApp_ReadCurErr
1.1.2.55.2 Static View Design
- N/A
1.1.2.55.3 Dynamic View Design
- N/A
1.1.2.55.4 Interface Design
- N/A
1.1.2.56 [SWDDS.2.2.57] RteApp_ReadDcVolt
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 123
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.56.1 Detailed Design
[SWDDS.2.2.57] RteApp_ReadDcVolt
Requirement Id SWDDS.2.2.57
Target Milestone SBS2.1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.56.2 Static View Design
- N/A
1.1.2.56.3 Dynamic View Design
- N/A
1.1.2.56.4 Interface Design
- N/A
1.1.2.57 [SWDDS.2.2.58] RteApp_WriteCtrMode
1.1.2.57.1 Detailed Design
[SWDDS.2.2.58] RteApp_WriteCtrMode
Requirement Id SWDDS.2.2.58
Target Milestone SBS2.1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 124
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.57.2 Static View Design
- N/A
1.1.2.57.3 Dynamic View Design
- N/A
1.1.2.57.4 Interface Design
- N/A
1.1.2.58 [SWDDS.2.2.59] RteApp_WriteRefCur
1.1.2.58.1 Detailed Design
[SWDDS.2.2.59] RteApp_WriteRefCur
Requirement Id SWDDS.2.2.59
Target Milestone SBS2.1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.58.2 Static View Design
- N/A
1.1.2.58.3 Dynamic View Design
- N/A
1.1.2.58.4 Interface Design
- N/A
1.1.2.59 [SWDDS.2.2.60] RteApp_WriteSpdErr
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 125
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.59.1 Detailed Design
[SWDDS.2.2.60] RteApp_WriteSpdErr
Requirement Id SWDDS.2.2.60
Target Milestone SBS2.1
Element RteApp
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.59.2 Static View Design
- N/A
1.1.2.59.3 Dynamic View Design
- N/A
1.1.2.59.4 Interface Design
- N/A
1.1.3 [SWDDS.2.3] RteIo
RteIo has the functions to get values from BSW.
Typically, It is used with RteApp to store in application data.
1.1.3.1 [SWDDS.2.3.1] RteIo_Init
1.1.3.1.1 Detailed Design
[SWDDS.2.3.1] RteIo_Init
Software Unit Information
Unit ID SWDDS.2.3.1 Unit Name RteIo_Init
Architecture
ID
SWADS.2.3.1 ASIL QM
Prototype void RteIo_Init( void )
Function Call Data Type Name Range IN/OUT Description
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 126
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tOpuHwId g_eRteIoOpuHwId
0u~2u,
OPU_HW_ID_UNDEFINED/
OPU_HW_ID_AQ301/
OPU_HW_ID_AQ451
Read/Write
OPU
hardware ID
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
RTE IO initialization
- Basic software HAL initialization
- Hardware ID checking and Calibration data initialization
- Basic software scheduler initialization
Control Flow
Diagram
(or Pseudo
Code)
Called
Function
SWDDS.2.1.2 InitializeRteSchRteSw
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 127
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling
Function
SWDDS.3.6.1.1 BswHal_Init
SWDDS.3.2.1.1 SlFoc_Init
SWDDS.3.3.1.1 CanMsg_Init
SWDDS.3.2.2.1 MtrDrv_Init
SWDDS.2.3.2 IntializeRteIoSrv
SWDDS.3.6.1.5 BswHal_GetHwId
SWDDS.4.1.1 CalData_Init
SWDDS.4.2.1 Param_Init
SWDDS.3.1.1.1 BswSch_Init
Function
Execution
Time
N/A
Requirement Id SWDDS.2.3.1
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.1.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 128
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.1.3 Dynamic View Design
- N/A
1.1.3.1.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 g_eRteIoOpuHwId SWDDS.3.6.1.5 IN tOpuHwId 0 2
OPU_HW_ID
_UNDEFINED
OPU
_HW_ID
_AQ451
N/A
OPU hardware
ID
2 opu_hardware_id SWDDS.4.1.1 OUT tOpuHwId 0 2
OPU_HW_ID
_UNDEFINED
OPU
_HW_ID
_AQ451
N/A
OPU hardware
ID
3 opu_hardware_id SWDDS.4.2.1 OUT tOpuHwId 0 2
OPU_HW_ID
_UNDEFINED
OPU
_HW_ID
_AQ451
N/A
OPU hardware
ID
1.1.3.2 [SWDDS.2.3.2] IntializeRteIoSrv
1.1.3.2.1 Detailed Design
[SWDDS.2.3.2] IntializeRteIoSrv
Software Unit Information
Unit ID SWDDS.2.3.2 Unit Name IntializeRteIoSrv
Architecture ID SWADS.2.3.2 ASIL QM
Prototype void IntializeRteIoSrv( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description BSW service initialization
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 129
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function
SWDDS.3.5.1.1 Nvm_Init
SWDDS.3.5.2.1 SlpWku_Init
Function Execution Time N/A
Requirement Id SWDDS.2.3.2
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.2.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 130
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.2.3 Dynamic View Design
- N/A
1.1.3.2.4 Interface Design
- N/A
1.1.3.3 [SWDDS.2.3.3] RteIo_EnaGlobalInterrupt
1.1.3.3.1 Detailed Design
[SWDDS.2.3.3] RteIo_EnaGlobalInterrupt
Software Unit Information
Unit ID SWDDS.2.3.3 Unit Name RteIo_EnaGlobalInterrupt
Architecture ID SWADS.2.3.3 ASIL QM
Prototype void RteIo_EnaGlobalInterrupt( void )
Function Call Data Type Name Range IN/OUT Description
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 131
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Global interrupt enabling
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.1 RteSch_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.3.3
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.3.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 132
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.3.3 Dynamic View Design
- N/A
1.1.3.3.4 Interface Design
- N/A
1.1.3.4 [SWDDS.2.3.4] RteIo_DisGlobalInterrupt
1.1.3.4.1 Detailed Design
[SWDDS.2.3.4] RteIo_DisGlobalInterrupt
Software Unit Information
Unit ID SWDDS.2.3.4 Unit Name RteIo_DisGlobalInterrupt
Architecture ID SWADS.2.3.4 ASIL QM
Prototype void RteIo_DisGlobalInterrupt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Global interrupt disabling
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.2 ShutDown_Mng
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.3.4
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 133
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.4.2 Static View Design
1.1.3.4.3 Dynamic View Design
- N/A
1.1.3.4.4 Interface Design
- N/A
1.1.3.5 [SWDDS.2.3.5] RteIo_ChkWdtTimRdy
1.1.3.5.1 Detailed Design
[SWDDS.2.3.5] RteIo_ChkWdtTimRdy
Software Unit Information
Unit ID SWDDS.2.3.5 Unit Name RteIo_ChkWdtTimRdy
Architecture ID SWADS.2.3.5 ASIL QM
Prototype tBool RteIo_ChkWdtTimRdy( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0~1, FALSE/ TRUE Timer channel 3 flag
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Watchdog timer reset timing ready checking
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 134
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.6 RunRteSchBackground
Calling Function SWDDS.3.6.4.3 Tim_GetCh3Flag
Function Execution Time N/A
Requirement Id SWDDS.2.3.5
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.5.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 135
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.5.3 Dynamic View Design
- N/A
1.1.3.5.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 timer_flag SWDDS.3.6.4.3 IN tBool 0 1
Not
ready
Watchdog timer
update timing ready
True /
False
Timer status
flag
1.1.3.6 [SWDDS.2.3.6] RteIo_RstWdtTim
1.1.3.6.1 Detailed Design
[SWDDS.2.3.6] RteIo_RstWdtTim
Software Unit Information
Unit ID SWDDS.2.3.6 Unit Name RteIo_RstWdtTim
Architecture ID SWADS.2.3.6 ASIL QM
Prototype void RteIo_RstWdtTim( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Watchdog timer reseting
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.2.1.6 RunRteSchBackground
SWDDS.1.3.3.2 ShutDown_Mng
SWDDS.1.3.3.4 SaveShutDownFltFlag
Calling Function SWDDS.3.6.5.2 Wdt_RstTim
Function Execution Time N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 136
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.2.3.6
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.6.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 137
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.6.3 Dynamic View Design
- N/A
1.1.3.6.4 Interface Design
- N/A
1.1.3.7 [SWDDS.2.3.7] RteIo_EnaTimRun
1.1.3.7.1 Detailed Design
[SWDDS.2.3.7] RteIo_EnaTimRun
Software Unit Information
Unit ID SWDDS.2.3.7 Unit Name RteIo_EnaTimRun
Architecture ID SWADS.2.3.7 ASIL QM
Prototype void RteIo_EnaTimRun( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Timer running and timer interrupt enabling
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.1 RteSch_Init
Calling Function SWDDS.3.6.4.2 Tim_EnaRunAndIrq
Function Execution Time N/A
Requirement Id SWDDS.2.3.7
Target Milestone EBS2
Element RteIo
Risk Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 138
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.7.2 Static View Design
1.1.3.7.3 Dynamic View Design
- N/A
1.1.3.7.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 139
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.8 [SWDDS.2.3.8] RteIo_GetSlFocStaDat
1.1.3.8.1 Detailed Design
[SWDDS.2.3.8] RteIo_GetSlFocStaDat
Software Unit Information
Unit ID SWDDS.2.3.8 Unit Name RteIo_GetSlFocStaDat
Architecture ID SWADS.2.3.8 ASIL QM
Prototype void RteIo_GetSlFocStaDat( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tCtrState g_stRteIoSlFocStaDat.eControlState
0 ~ 4,
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Control state
tFrac16 g_stRteIoSlFocStaDat.f16SpeedOutput -32768 ~ 32767 Write
Motor revolution
speed output (PU)
tFrac16 g_stRteIoSlFocStaDat.f16CurrentOutput -32768 ~ 32767 Write
q-axis current output
(PU)
tFrac16 g_stRteIoSlFocStaDat.f16CurrentError -32768 ~ 32767 Write
q-axis current
control error (PU)
tFrac16 g_stRteIoSlFocStaDat.f16DcVoltage 0 ~ 32767 Write
DC driving voltage
(PU)
tU16 g_stRteIoSlFocStaDat.u16FaultStatus 0 ~ 65535 Write Fault status flags
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC status data getting
Control Flow
Diagram
(or Pseudo
Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 140
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.2.1.7 RteSch_Task1ms
Calling Function SWDDS.3.2.1.9 SlFoc_GetStaDat
Function
Execution Time
N/A
Requirement Id SWDDS.2.3.8
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.8.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 141
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.8.3 Dynamic View Design
- N/A
1.1.3.8.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 sensorless_foc_data SWDDS.3.2.1.9 IN tSlFocStaDat N/A N/A N/A N/A N/A
Sensorless
FOC status
data
1.1.3.9 [SWDDS.2.3.9] RteIo_GetCtrState
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 142
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.9.1 Detailed Design
[SWDDS.2.3.9] RteIo_GetCtrState
Software Unit Information
Unit ID SWDDS.2.3.9 Unit Name RteIo_GetCtrState
Architecture ID SWADS.2.3.9 ASIL QM
Prototype tCtrState RteIo_GetCtrState( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tCtrState
0 ~ 4, CTR_STATE_SWTC_OFF/CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Control state
Global Variables
Data Type Name Range Read/Write Description
tCtrState g_stRteIoSlFocStaDat.eControlState
0 ~ 4,
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Read Control state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control state getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.2.2 CtrSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.3.9
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 143
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.9.2 Static View Design
1.1.3.9.3 Dynamic View Design
- N/A
1.1.3.9.4 Interface Design
- N/A
1.1.3.10 [SWDDS.2.3.10] RteIo_GetSpdOut
1.1.3.10.1 Detailed Design
[SWDDS.2.3.10] RteIo_GetSpdOut
Software Unit Information
Unit ID SWDDS.2.3.10 Unit Name RteIo_GetSpdOut
Architecture ID SWADS.2.3.10 ASIL QM
Prototype tFrac16 RteIo_GetSpdOut( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
tFrac16 -32768 ~ 32767 Speed output (PU)
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stRteIoSlFocStaDat.f16SpeedOutput
-32768 ~
32767
Read
Motor revolution speed
output (PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed output getting
Control Flow
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 144
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function
SWDDS.1.1.3.6 CalculateCurSigDcCurTrqSpdVolt
SWDDS.1.1.6.2 MtrSpd_Measr
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.2.3.10
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.10.2 Static View Design
1.1.3.10.3 Dynamic View Design
- N/A
1.1.3.10.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 145
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.11 [SWDDS.2.3.11] RteIo_GetCurOut
1.1.3.11.1 Detailed Design
[SWDDS.2.3.11] RteIo_GetCurOut
Software Unit Information
Unit ID SWDDS.2.3.11 Unit Name RteIo_GetCurOut
Architecture ID SWADS.2.3.11 ASIL QM
Prototype tFrac16 RteIo_GetCurOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 q-axis current output (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stRteIoSlFocStaDat.f16CurrentOutput -32768 ~ 32767 N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current output getting
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.1.3.3 GetCurSigCurOut
SWDDS.1.1.3.6 CalculateCurSigDcCurTrqSpdVolt
SWDDS.1.1.7.2 MtrTrq_Cal
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.3.11
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 146
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.11.2 Static View Design
1.1.3.11.3 Dynamic View Design
- N/A
1.1.3.11.4 Interface Design
- N/A
1.1.3.12 [SWDDS.2.3.12] RteIo_GetCurErr
1.1.3.12.1 Detailed Design
[SWDDS.2.3.12] RteIo_GetCurErr
Software Unit Information
Unit ID SWDDS.2.3.12 Unit Name RteIo_GetCurErr
Architecture ID SWADS.2.3.12 ASIL QM
Prototype tFrac16 RteIo_GetCurErr( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
tFrac16 -32768 ~ 32767 q-axis current control error (PU)
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stRteIoSlFocStaDat.f16CurrentError
-32768 ~
32767
Read
q-axis current control error
(PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current control error getting
Control Flow Diagram
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 147
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.3.4 GetCurSigCurErr
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.2.3.12
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.12.2 Static View Design
1.1.3.12.3 Dynamic View Design
- N/A
1.1.3.12.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 148
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.13 [SWDDS.2.3.13] RteIo_GetCtrFlt
1.1.3.13.1 Detailed Design
[SWDDS.2.3.13] RteIo_GetCtrFlt
Software Unit Information
Unit ID SWDDS.2.3.13 Unit Name RteIo_GetCtrFlt
Architecture ID SWADS.2.3.13 ASIL QM
Prototype tU16 RteIo_GetCtrFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 65535 Control fault flag
Global Variables
Data Type Name Range Read/Write Description
tU16 g_stRteIoSlFocStaDat.u16FaultStatus 0 ~ 65535 Read Fault status flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control fault flag getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.2.2 CtrSta_Chk
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.3.13
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 149
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.13.2 Static View Design
1.1.3.13.3 Dynamic View Design
- N/A
1.1.3.13.4 Interface Design
- N/A
1.1.3.14 [SWDDS.2.3.14] RteIo_GetDcVolt
1.1.3.14.1 Detailed Design
[SWDDS.2.3.14] RteIo_GetDcVolt
Software Unit Information
Unit ID SWDDS.2.3.14 Unit Name RteIo_GetDcVolt
Architecture ID SWADS.2.3.14 ASIL QM
Prototype tFrac16 RteIo_GetDcVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 DC link voltage (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stRteIoSlFocStaDat.f16DcVoltage 0 ~ 32767 Read DC driving voltage (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC link voltage getting
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.1.3.6 CalculateCurSigDcCurTrqSpdVolt
SWDDS.1.1.4.2 DcVolt_Measr
Calling Function N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 150
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Execution Time N/A
Requirement Id SWDDS.2.3.14
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.14.2 Static View Design
1.1.3.14.3 Dynamic View Design
- N/A
1.1.3.14.4 Interface Design
- N/A
1.1.3.15 [SWDDS.2.3.15] RteIo_SetSlFocCtrDat
1.1.3.15.1 Detailed Design
[SWDDS.2.3.15] RteIo_SetSlFocCtrDat
Software Unit Information
Unit ID SWDDS.2.3.15 Unit Name RteIo_SetSlFocCtrDat
Architecture ID SWADS.2.3.15 ASIL QM
Prototype void RteIo_SetSlFocCtrDat( tSlFocCtrDat control_data )
Data
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 151
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
Type
Name Range IN/OUT Description
tBool control_data.bControlEnable 0 ~ 1, FALSE / TRUE IN
sensorless FOC
control enable
tCtrMode control_data.eControlMode
0 ~ 1, CTR_MODE_SPD /
CTR_MODE_CUR
IN
sensorless FOC
control mode
tFrac16 control_data.f16ReferenceCurrent 0 ~ 32767 IN
Referernce current
(PU)
tFrac16 control_data.f16ReferenceSpeed 0 ~ 17476 IN
Referernce speed
(PU)
tFrac16 control_data.f16CurrentLimitUpper -32768 ~ 32767 IN
Current limit upper
(PU)
tFrac16 control_data.f16CurrentLimitLower -32768 ~ 32767 IN
Current limit lower
(PU)
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC control data setting
Control Flow
Diagram
(or Pseudo Code)

Called Function
SWDDS.1.4.2.1 MtrCtr_Init
SWDDS.1.4.2.2 MtrCtr_Set
Calling Function SWDDS.3.2.1.8 SlFoc_SetCtrDat
Function
Execution Time
N/A
Requirement Id SWDDS.2.3.15
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 152
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.15.2 Static View Design
1.1.3.15.3 Dynamic View Design
- N/A
1.1.3.15.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 control_data SWDDS.3.2.1.8 OUT tSlFocCtrDat N/A N/A N/A N/A N/A
sensorless FOC
control data
1.1.3.16 [SWDDS.2.3.16] RteIo_ClrSlFocFltSta
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 153
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.16.1 Detailed Design
[SWDDS.2.3.16] RteIo_ClrSlFocFltSta
Software Unit Information
Unit ID SWDDS.2.3.16 Unit Name RteIo_ClrSlFocFltSta
Architecture ID SWADS.2.3.16 ASIL QM
Prototype void RteIo_ClrSlFocFltSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC control fault clearing
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.4 CheckDrvStaFlagClr
SWDDS.1.4.2.2 MtrCtr_Set
SWDDS.1.3.4.2 StartUp_Mng
Calling Function SWDDS.3.2.1.10 SlFoc_ClrFltSta
Function Execution Time N/A
Requirement Id SWDDS.2.3.16
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 154
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.16.2 Static View Design
1.1.3.16.3 Dynamic View Design
- N/A
1.1.3.16.4 Interface Design
- N/A
1.1.3.17 [SWDDS.2.3.17] RteIo_PrechrgCurIntg
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 155
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.17.1 Detailed Design
[SWDDS.2.3.17] RteIo_PrechrgCurIntg
Software Unit Information
Unit ID SWDDS.2.3.17 Unit Name RteIo_PrechrgCurIntg
Architecture ID SWADS.2.3.17 ASIL QM
Prototype void RteIo_PrechrgCurIntg( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC current control integrator pre-charging
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.16 CheckEopCtrAntiWindUp
Calling Function SWDDS.3.2.1.11 SlFoc_PrechrgCurIntg
Function Execution Time N/A
Requirement Id SWDDS.2.3.17
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 156
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.17.2 Static View Design
1.1.3.17.3 Dynamic View Design
- N/A
1.1.3.17.4 Interface Design
- N/A
1.1.3.18 [SWDDS.2.3.18] RteIo_GetPcbTempSig
1.1.3.18.1 Detailed Design
[SWDDS.2.3.18] RteIo_GetPcbTempSig
Software Unit Information
Unit ID SWDDS.2.3.18 Unit Name RteIo_GetPcbTempSig
Architecture ID SWADS.2.3.18 ASIL QM
Prototype tFrac16 RteIo_GetPcbTempSig( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 PCB temperature signal (PU)
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 157
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description PCB temperature signal getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.9.2 TempSig_Measr
Calling Function SWDDS.3.6.1.4 BswHal_GetPcbTemp
Function Execution Time N/A
Requirement Id SWDDS.2.3.18
Target Milestone SBS1
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.18.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 158
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.18.3 Dynamic View Design
- N/A
1.1.3.18.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pcb_temperature SWDDS.3.6.1.4 IN tFrac16 0 32767 0 4.99985
0.000152588
/ Vpk
PCB
temperature
signal (PU)
1.1.3.19 [SWDDS.2.3.19] RteIo_GetBatVolt
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 159
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.19.1 Detailed Design
[SWDDS.2.3.19] RteIo_GetBatVolt
Software Unit Information
Unit ID SWDDS.2.3.19 Unit Name RteIo_GetBatVolt
Architecture ID SWADS.2.3.19 ASIL QM
Prototype tFrac16 RteIo_GetBatVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 32767 Battery voltage (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Battery voltage getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.5.3 GetMcuStaBatVolt
Calling Function SWDDS.3.6.1.3 BswHal_GetBatVolt
Function Execution Time N/A
Requirement Id SWDDS.2.3.19
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 160
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.19.2 Static View Design
1.1.3.19.3 Dynamic View Design
- N/A
1.1.3.19.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 battery_voltage SWDDS.3.6.1.3 IN tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Battery voltage
signal (PU)
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 161
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.20 [SWDDS.2.3.20] RteIo_ChkGdrvVlsLow
1.1.3.20.1 Detailed Design
[SWDDS.2.3.20] RteIo_ChkGdrvVlsLow
Software Unit Information
Unit ID SWDDS.2.3.20
Unit
Name
RteIo_ChkGdrvVlsLow
Architecture
ID
SWADS.2.3.20 ASIL QM
Prototype tBool RteIo_ChkGdrvVlsLow( void )
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data
Type
Possible
Return Value
Description
tBool
0 ~ 1, FALSE /
TRUE
Global
Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Gate driver VLS_OUT status checking
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.3.2.3 ModeChg_Mng
SWDDS.1.3.4.2 StartUp_Mng
Calling
Function
SWDDS.3.6.7.2 Gdu_ChkVlsLow
Function
Execution
Time
N/A
Requirement Id SWDDS.2.3.20
Target Milestone EBS2
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 162
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.20.2 Static View Design
1.1.3.20.3 Dynamic View Design
- N/A
1.1.3.20.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 checking_result SWDDS.3.6.7.2 IN tBool 0 1 Normal
Voltage
low
True /
False
LVS low level:
FALSE - normal,
TRUE - voltage low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 163
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.21 [SWDDS.2.3.21] RteIo_ChkCanReqMsg
1.1.3.21.1 Detailed Design
[SWDDS.2.3.21] RteIo_ChkCanReqMsg
Software Unit Information
Unit ID SWDDS.2.3.21 Unit Name RteIo_ChkCanReqMsg
Architecture ID SWADS.2.3.21 ASIL QM
Prototype void RteIo_ChkCanReqMsg( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN received request message checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.7 RteSch_Task1ms
Calling Function SWDDS.3.3.1.2 CanMsg_ChkReqDat
Function Execution Time N/A
Requirement Id SWDDS.2.3.21
Target Milestone SBS2.1
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 164
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.21.2 Static View Design
1.1.3.21.3 Dynamic View Design
- N/A
1.1.3.21.4 Interface Design
- N/A
1.1.3.22 [SWDDS.2.3.22] RteIo_GetTgtSpd
1.1.3.22.1 Detailed Design
[SWDDS.2.3.22] RteIo_GetTgtSpd
Software Unit Information
Unit ID SWDDS.2.3.22 Unit Name RteIo_GetTgtSpd
Architecture ID SWADS.2.3.22 ASIL QM
Prototype tBool RteIo_GetTgtSpd( tS16* target_speed, tBool* data_valid )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16* target_speed 0 ~ 5100 OUT target speed (rpm)
tBool* data_valid 0 ~ 1, FALSE/TRUE OUT FALSE: data invalid, TRUE: data valid
Function Call Data Type Possible Return Value Description
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 165
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return Value tBool 0 ~ 1, FALSE/TRUE FALSE: not updated, TRUE: data updated
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Target speed request getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function SWDDS.3.3.1.3 CanMsg_GetReqDat
Function Execution Time N/A
Requirement Id SWDDS.2.3.22
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.22.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 166
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.22.3 Dynamic View Design
- N/A
1.1.3.22.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 request_message SWDDS.3.3.1.3 IN tCanMsgReq* N/A N/A N/A N/A N/A
Request
message
storage
2 message_updated SWDDS.3.3.1.3 IN tBool 0 1
Message
not
updated
Message
updated
True /
False
Message
updated
status
1.1.3.23 [SWDDS.2.3.23] RteIo_GetCanBusSta
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 167
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.23.1 Detailed Design
[SWDDS.2.3.23] RteIo_GetCanBusSta
Software Unit Information
Unit ID SWDDS.2.3.23 Unit Name RteIo_GetCanBusSta
Architecture ID SWADS.2.3.23 ASIL QM
Prototype tU8 RteIo_GetCanBusSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU8 0 ~ 255 CAN bus status flags
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN bus status getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.5 CheckReqMsgCanBusSta
Calling Function SWDDS.3.6.10.9 MsCan_GetRxFlg
Function Execution Time N/A
Requirement Id SWDDS.2.3.23
Target Milestone SBS2.1
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 168
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.23.2 Static View Design
1.1.3.23.3 Dynamic View Design
- N/A
1.1.3.23.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 CAN0RFLG SWDDS.3.6.10.9 IN tU8 0 255
No CAN
bus flag
CAN bus
flag set
N/A
MSCAN data
receiving flag
1.1.3.24 [SWDDS.2.3.24] RteIo_SetCanSlp
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 169
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.24.1 Detailed Design
[SWDDS.2.3.24] RteIo_SetCanSlp
Software Unit Information
Unit ID SWDDS.2.3.24 Unit Name RteIo_SetCanSlp
Architecture ID SWADS.2.3.24 ASIL QM
Prototype void RteIo_SetCanSlp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN transceiver sleep mode setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.2 ShutDown_Mng
Calling Function SWDDS.3.5.2.2 SlpWku_SetCanSlp
Function Execution Time N/A
Requirement Id SWDDS.2.3.24
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 170
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.24.2 Static View Design
1.1.3.24.3 Dynamic View Design
- N/A
1.1.3.24.4 Interface Design
- N/A
1.1.3.25 [SWDDS.2.3.25] RteIo_SendResMsg
1.1.3.25.1 Detailed Design
[SWDDS.2.3.25] RteIo_SendResMsg
Software Unit Information
Unit ID SWDDS.2.3.25 Unit Name RteIo_SendResMsg
Architecture ID SWADS.2.3.25 ASIL QM
Prototype void RteIo_SendResMsg( tCanMsgRes response_message )
Data
Type
Name Range IN/OUT Description
tS16 response_message.s16ActualRotationalSpeed
-6000 ~
6000
IN
Actual rotational speed
(rpm)
Accumulated fault count
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 171
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
tU16 response_message.u16EepromFaultCount 0 ~ 65535 IN
in EEPROM
tFrac16 response_message.f16DcCurrentInput 0 ~ 32767 IN DC current input (PU)
tFrac16 response_message.f16CurrentOutputQ
-32768 ~
32767
IN q-axis current output (PU)
tFrac16 response_message.f16MotorTorque
-32768 ~
32767
IN Motor torque (Nm)
tU16 response_message.u16OpuFaultFlag 0 ~ 4095 IN OPU fault flag
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Response data sending
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.3.2 ResMsg_Send
Calling Function
SWDDS.3.3.1.4 CanMsg_SetResDat
SWDDS.3.3.1.5 CanMsg_SendResDat
Function Execution
Time
N/A
Requirement Id SWDDS.2.3.25
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 172
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.25.2 Static View Design
1.1.3.25.3 Dynamic View Design
- N/A
1.1.3.25.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 response_data SWDDS.3.3.1.4 OUT tCanMsgRes N/A N/A N/A N/A N/A
response
message
1.1.3.26 [SWDDS.2.3.26] RteIo_SaveEepromDat
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 173
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.26.1 Detailed Design
[SWDDS.2.3.26] RteIo_SaveEepromDat
Software Unit Information
Unit ID SWDDS.2.3.26 Unit Name RteIo_SaveEepromDat
Architecture ID SWADS.2.3.26 ASIL QM
Prototype tU8 RteIo_SaveEepromDat( tU16 eeprom_address, tU16 data_word[2u] )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU16 eeprom_address 0 ~ 511 IN
EEPROM memory address
(offset from EEPROM base
address)
tU16 data_word[2u] 0 ~ 65535 IN 2x 16-bit word data
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8
0 ~ 4, EEPROM_RET_OK/EEPROM_RET_ERASED/
EEPROM_RET_NOT_ERASED/EEPROM_RET_MISALIGN_ADDR/
EEPROM_RET_ACC_ERR
EEPROM save result
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EEPROM data saving
Control Flow
Diagram
(or Pseudo
Code)

Called Function
SWDDS.1.3.3.3 SaveShutDownFltCnt
SWDDS.1.3.3.4 SaveShutDownFltFlag
Calling Function SWDDS.3.5.1.2 Nvm_SaveEepromDat
Function
Execution Time
N/A
Requirement Id SWDDS.2.3.26
Target Milestone EBS2
Element RteIo
Risk Low
Interoperability No
Criticality Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 174
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.3.26.2 Static View Design
1.1.3.26.3 Dynamic View Design
- N/A
1.1.3.26.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 eeprom_address SWDDS.3.5.1.2 OUT tU16 0 511 0 511 N/A
EEPROM
memory
address
(offset from
EEPROM
base
address)
2 data_word[2u] SWDDS.3.5.1.2 OUT tU16 0 65535 0 65535 N/A
2x 16-bit
word data
3 writing_result SWDDS.3.5.1.2 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A
EEPROM
save result
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 175
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.27 [SWDDS.2.3.27] RteIo_LoadEepromLong
1.1.3.27.1 Detailed Design
[SWDDS.2.3.27] RteIo_LoadEepromLong
Software Unit Information
Unit ID SWDDS.2.3.27
Unit
Name
RteIo_LoadEepromLong
Architecture ID SWADS.2.3.27 ASIL QM
Prototype tU32 RteIo_LoadEepromLong( tU16 eeprom_address )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU16 eeprom_address 0 ~ 511 IN
EEPROM memory address (offset from EEPROM base
address)
Function Call
Return Value
Data
Type
Possible Return Value Description
tU32 0 ~ 4294967295 32-bit EEPROM data
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EEPROM 32-bit long word data loading
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.4.3.2 ResMsg_Send
SWDDS.1.3.3.3 SaveShutDownFltCnt
SWDDS.1.3.3.4 SaveShutDownFltFlag
Calling Function SWDDS.3.5.1.3 Nvm_LoadEepromLong
Function Execution
Time
N/A
Requirement Id SWDDS.2.3.27
Target Milestone EBS2
Element RteIo
Risk Low
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 176
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.3.27.2 Static View Design
1.1.3.27.3 Dynamic View Design
- N/A
1.1.3.27.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 eeprom_address SWDDS.3.5.1.3 OUT tU16 0 511 0 511 N/A
EEPROM
memory
address
(offset from
EEPROM
base
address)
2 long_data SWDDS.3.5.1.3 IN tU32 0 4294967295 0 4294967295 N/A
32-bit
EEPROM
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 177
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
data
1.1.3.28 [SWDDS.2.3.28] RteIo_GetCtrEna
1.1.3.28.1 Detailed Design
[SWDDS.2.3.28] RteIo_GetCtrEna
1.1.3.28.2 Static View Design
- N/A
1.1.3.28.3 Dynamic View Design
- N/A
1.1.3.28.4 Interface Design
- N/A
1.1.3.29 [SWDDS.2.3.29] RteIo_LoadEepromByte
1.1.3.29.1 Detailed Design
[SWDDS.2.3.29] RteIo_LoadEepromByte
1.1.3.29.2 Static View Design
- N/A
1.1.3.29.3 Dynamic View Design
- N/A
1.1.3.29.4 Interface Design
- N/A
1.1.3.30 [SWDDS.2.3.30] RteIo_LoadEepromWord
1.1.3.30.1 Detailed Design
[SWDDS.2.3.30] RteIo_LoadEepromWord
1.1.3.30.2 Static View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 178
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.3.30.3 Dynamic View Design
- N/A
1.1.3.30.4 Interface Design
- N/A
1.1.3.31 [SWDDS.2.3.31] RteIo_RstOpuSw
1.1.3.31.1 Detailed Design
[SWDDS.2.3.31] RteIo_RstOpuSw
1.1.3.31.2 Static View Design
- N/A
1.1.3.31.3 Dynamic View Design
- N/A
1.1.3.31.4 Interface Design
- N/A
1.1.4 [SWDDS.2.4] RteDiag
According to funtion of Diagonasis, Diagonasis data is defined and Initialiezed.
1.1.4.1 [SWDDS.2.4.1] RteDiag_Init
1.1.4.1.1 Detailed Design
[SWDDS.2.4.1] RteDiag_Init
Software Unit Information
Unit ID SWDDS.2.4.1 Unit Name RteDiag_Init
Architecture ID SWADS.2.4.1 ASIL QM
Prototype void RteDiag_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 179
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Diagnosis data initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.2 InitializeRteSchRteSw
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.2.4.1
Target Milestone SBS2.1
Element RteDiag
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.4.1.2 Static View Design
1.1.4.1.3 Dynamic View Design
- N/A
1.1.4.1.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 180
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2 [SWDDS.3] BSW
1.2.1 [SWDDS.3.1] SCH
1.2.1.1 [SWDDS.3.1.1] BswSch
BswSch checks time of task using timer and define schedules in the interrupt service routine so that the tasks
defined in Rtesch can be performed.
1.2.1.1.1 [SWDDS.3.1.1.1] BswSch_Init
1.2.1.1.1.1 Detailed Design
[SWDDS.3.1.1.1] BswSch_Init
Software Unit Information
Unit ID SWDDS.3.1.1.1 Unit Name BswSch_Init
Architecture ID SWADS.3.1.1.1 ASIL QM
Prototype void BswSch_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
Type
Name Range Read/Write Description
tSchState g_aeBswSchTaskState[0]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[0]
tSchState g_aeBswSchTaskState[1]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[1]
tSchState g_aeBswSchTaskState[2]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[2]
tSchState g_aeBswSchTaskState[3]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[3]
tSchState g_aeBswSchTaskState[4]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[4]
0 ~ 3,
SCH_STATE_BLOCKED/
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 181
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tSchState g_aeBswSchTaskState[5] SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[5]
tSchErr g_aeBswSchTaskErrors[0]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[0]
tSchErr g_aeBswSchTaskErrors[1]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[1]
tSchErr g_aeBswSchTaskErrors[2]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[2]
tSchErr g_aeBswSchTaskErrors[3]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[3]
tSchErr g_aeBswSchTaskErrors[4]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[4]
tSchErr g_aeBswSchTaskErrors[5]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[5]
tU16 g_au16BswSchTimeCount[0] 0 ~ 1 WRITE
Task time count
storage[0]
tU16 g_au16BswSchTimeCount[1] 0 ~ 5 WRITE
Task time count
storage[1]
tU16 g_au16BswSchTimeCount[2] 0 ~ 10 WRITE
Task time count
storage[2]
tU16 g_au16BswSchTimeCount[3] 0 ~ 20 WRITE
Task time count
storage[3]
tU16 g_au16BswSchTimeCount[4] 0 ~ 50 WRITE
Task time count
storage[4]
tU16 g_au16BswSchTimeCount[5] 0 ~ 100 WRITE
Task time count
storage[5]
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
BSW static scheduler initialization
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 182
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.1.1.1
Target Milestone EBS2
Element SCH
Risk Mid
Interoperability Yes
Criticality Low
Technical complexity Low
Verifiability Yes
1.2.1.1.1.2 Static View Design
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 183
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2.1.1.1.3 Dynamic View Design
- N/A
1.2.1.1.1.4 Interface Design
- N/A
1.2.1.1.2 [SWDDS.3.1.1.2]BswSch_DispatchTask
1.2.1.1.2.1 Detailed Design
[SWDDS.3.1.1.2] BswSch_DispatchTask
Software Unit Information
Unit ID SWDDS.3.1.1.2 Unit Name BswSch_DispatchTask
Architecture
ID
SWADS.3.1.1.2 ASIL QM
Prototype void BswSch_DispatchTask( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tSchState g_aeBswSchTaskState[0]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[0]
tSchState g_aeBswSchTaskState[1]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[1]
tSchState g_aeBswSchTaskState[2]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[2]
tSchState g_aeBswSchTaskState[3]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[3]
tSchState g_aeBswSchTaskState[4]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[4]
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 184
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tSchState g_aeBswSchTaskState[5]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[5]
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Scheduled task dispatching
Control
Flow
Diagram
(or Pseudo
Code)
1. BswSch_DispatchTask runs the task if the task state is ready.
2. BswSch_DispatchTask sets the task state as running during run and sets the task state as dormant after running.
3. BswSch_DispatchTask skips the next task state checking if 1ms or 5ms task is executed.

Called
Function
SWDDS.2.1.5 RteSch_MainFunc
Calling
Function
SWDDS.2.1.7 RteSch_Task1ms
SWDDS.2.1.8 RteSch_Task5ms
SWDDS.2.1.9 RteSch_Task10ms
SWDDS.2.1.10 RteSch_Task20ms
SWDDS.2.1.11 RteSch_Task50ms
SWDDS.2.1.12 RteSch_Task100ms
Function
Execution
Time
N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 185
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.1.1.2
Target Milestone EBS2
Element SCH
Risk Mid
Interoperability Yes
Criticality High
Technical complexity Mid
Verifiability Yes
1.2.1.1.2.2 Static View Design
1.2.1.1.2.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 186
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2.1.1.2.4 Interface Design
- N/A
1.2.1.1.3 [SWDDS.3.1.1.3] BswSch_ChkTaskCnt
1.2.1.1.3.1 Detailed Design
[SWDDS.3.1.1.3] BswSch_ChkTaskCnt
Software Unit Information
Unit ID SWDDS.3.1.1.3 Unit Name BswSch_ChkTaskCnt
Architecture
ID
SWADS.3.1.1.3 ASIL QM
Prototype void BswSch_ChkTaskCnt( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tSchState g_aeBswSchTaskState[0]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[0]
tSchState g_aeBswSchTaskState[1]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[1]
tSchState g_aeBswSchTaskState[2]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[2]
tSchState g_aeBswSchTaskState[3]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[3]
tSchState g_aeBswSchTaskState[4]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[4]
tSchState g_aeBswSchTaskState[5]
0 ~ 3,
SCH_STATE_BLOCKED/
SCH_STATE_DORMANT/
SCH_STATE_READY/
SCH_STATE_RUNNING
WRITE Task state storage[5]
0 ~ 2,
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 187
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tSchErr g_aeBswSchTaskErrors[0]
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[0]
tSchErr g_aeBswSchTaskErrors[1]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[1]
tSchErr g_aeBswSchTaskErrors[2]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[2]
tSchErr g_aeBswSchTaskErrors[3]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[3]
tSchErr g_aeBswSchTaskErrors[4]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[4]
tSchErr g_aeBswSchTaskErrors[5]
0 ~ 2,
SCH_ERROR_NONE/
SCH_ERROR_BLOCKED/
SCH_STATE_OVERRUN
WRITE Task error storage[5]
tU16 g_au16BswSchTimeCount[0] 0 ~ 1 WRITE Task time count storage[0]
tU16 g_au16BswSchTimeCount[1] 0 ~ 5 WRITE Task time count storage[1]
tU16 g_au16BswSchTimeCount[2] 0 ~ 10 WRITE Task time count storage[2]
tU16 g_au16BswSchTimeCount[3] 0 ~ 20 WRITE Task time count storage[3]
tU16 g_au16BswSchTimeCount[4] 0 ~ 50 WRITE Task time count storage[4]
tU16 g_au16BswSchTimeCount[5] 0 ~ 100 WRITE Task time count storage[5]
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Scheduled task dispatching
Control
Flow
Diagram
1. BswSch_ChkTaskCnt increases the task time count.
2. BswSch_ChkTaskCnt checks if the task time count is reached the task period.
3. BswSch_ChkTaskCnt sets the task state as ready if the task is not block and running.
4. BswSch_ChkTaskCnt sets the task error as block if the task is blocked.
5. BswSch_ChkTaskCnt sets the task error as overrun if the task is not dormant.
6. BswSch_ChkTaskCnt sets the task error as block if the task is blocked.
7. BswSch_ChkTaskCnt sets the task error as none the other cases.
8. BswSch_ChkTaskCnt clears the task count after the task count period reaching.
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 188
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.3.6.4.4 Tim_Ch0Isr
Calling
Function
N/A
Function
Execution
Time
N/A
Requirement Id SWDDS.3.1.1.3
Target Milestone EBS2
Element SCH
Risk Mid
Interoperability Yes
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 189
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity Mid
Verifiability Yes
1.2.1.1.3.2 Static View Design
1.2.1.1.3.3 Dynamic View Design
- N/A
1.2.1.1.3.4 Interface Design
- N/A
VW AQ EOP
Baseline /
Version / Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 190
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
VW AQ EOP
Software Detailed Design Specification(3/4)
Document Properties
Status: Open
Version: 003
Author: Kim Minsu
Created: 2020-12-17 22:33
Approved Versions
Current Document version 003 has not been approved.
Approved Versions:
001 (2021-01-06 15:49)
002 (2021-04-15 21:19)
002 (2021-04-22 10:38)
Document Signatures
Approved (Status Change Pending)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 1
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Document Control Information
Location: The released versions of this document are maintained by SWE DE and managed in the following location:
[Polarion] VW AQ EOP / Documents & Pages / 02_Engineering / 12_SWE_Design
Version Date of Release
Description
(Change and Reasons for Change)
Author Reviewer Approver
001
2020-10-28 Initiation of draft version Taihyun Kyung - -
2020-11-30
Add flow diagram and sequence
diagram
Taihyun Kyung
Rasekar
Prashant
Hyojin Ahn
002
2021-02-15
Add evaluation criteria
Resolved defect - CR-0005
Taihyun Kyung - -
2021-02-17 Modify traceability management Taihyun Kyung - -
2021-02-26
Change the Customer
Requirement_CAN Timeout-0008
Add the Tolerance of Voltage-
CR-0009
Taihyun Kyung - -
2021-03-10
Changed low temperature warning
criteria - CR-0003
Taihyun Kyung - -
2021-03-12
Change and add component -
CR-0010
Taihyun Kyung - -
2021-04-09
OPU HW change to apply EMC
debugging(TL81000, CE) results-
CR-0012
Taihyun Kyung - -
2021-04-15
Change Target Milestone, Traceability
- CR-0010
Add Description for Control Flow and
Sequence Diagram
Minsu Kim Sungjin Park Hyojin Ahn
2021-04-22 Resolved problem: CMNC-0033 Minsu Kim Sungjin Park Hyojin Ahn
003
2021-04-30
Change Static View Design, Dynamic
View Design and Interface Design
Minsu Kim - -
2021-06-30
Change Static View Design and
Interface Design
Minsu Kim - -
Table 1 Version History
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 2
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table of Contents
1 Function Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1.1 [SWDDS.3] BSW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1.1.1 [SWDDS.3.2] MTR . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1.1.1.1 [SWDDS.3.2.1] SlFoc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1.1.1.1.1 [SWDDS.3.2.1.1] SlFoc_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1.1.1.1.2 [SWDDS.3.2.1.2] InitializeSlFocSigFilt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
1.1.1.1.3 [SWDDS.3.2.1.3] InitializeSlFocSlObsrv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
1.1.1.1.4 [SWDDS.3.2.1.4] InitializeSlFocCurCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.1.1.1.5 [SWDDS.3.2.1.5] InitializeSlFocOplpStart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.1.1.6 [SWDDS.3.2.1.6] InitializeSlFocSpdCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
1.1.1.1.7 [SWDDS.3.2.1.7] SlFoc_MainFunc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
1.1.1.1.8 [SWDDS.3.2.1.8] SlFoc_SetCtrDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
1.1.1.1.9 [SWDDS.3.2.1.9] SlFoc_GetStaDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
1.1.1.1.10 [SWDDS.3.2.1.10] SlFoc_ClrFltSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
1.1.1.1.11 [SWDDS.3.2.1.11] SlFoc_PrechrgCurIntg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.1.1.12 [SWDDS.3.2.1.12] ActSlFocStateSwtcOff . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
1.1.1.1.13 [SWDDS.3.2.1.13] ActSlFocStateOffsCalib . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
1.1.1.1.14 [SWDDS.3.2.1.14] RunSlFocStateAlignOplp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
1.1.1.1.15 [SWDDS.3.2.1.15] ActSlFocStateInitAlign . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
1.1.1.1.16 [SWDDS.3.2.1.16] ActSlFocStateOplpStart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.1.1.17 [SWDDS.3.2.1.17] actSlFocStateSlRun . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
1.1.1.1.18 [SWDDS.3.2.1.18] CheckSlFocStateTransInitAlign . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
1.1.1.1.19 [SWDDS.3.2.1.19] CheckSlFocStateTransOplpStart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.1.1.20 [SWDDS.3.2.1.20] CheckSlFocStateTransSlRun . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
1.1.1.1.21 [SWDDS.3.2.1.21] DisableSlFocControl . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
1.1.1.1.22 [SWDDS.3.2.1.22] EnableSlFocControl . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
1.1.1.1.23 [SWDDS.3.2.1.23] SetSlFocCurCtrPreChrg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.1.1.24 [SWDDS.3.2.1.24] SetSlFocAngTrackObsrvPreChrg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.1.1.25 [SWDDS.3.2.1.25] CheckSlFocOffsRngErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
1.1.1.1.26 [SWDDS.3.2.1.26] CheckSlFocSlTransCond . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
1.1.1.1.27 [SWDDS.3.2.1.27] MeasureSlFocDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
1.1.1.1.28 [SWDDS.3.2.1.28] MeasureSlFocPhsCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
1.1.1.1.29 [SWDDS.3.2.1.29] CalibrateSlFocCurOffs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
1.1.1.1.30 [SWDDS.3.2.1.30] ConvertSlFocClarkTrnsf . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
1.1.1.1.31 [SWDDS.3.2.1.31] CalculateSlFocStartCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
1.1.1.1.32 [SWDDS.3.2.1.32] CalculateSlFocStartAng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
1.1.1.1.33 [SWDDS.3.2.1.33] CalculateSlFocCurErrAlbe . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
1.1.1.1.34 [SWDDS.3.2.1.34] RunSlFocSlObsrv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
1.1.1.1.35 [SWDDS.3.2.1.35] ConvertSlFocParkTrnsf . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
1.1.1.1.36 [SWDDS.3.2.1.36] CalculateSlFocCurErrDq . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119
1.1.1.1.37 [SWDDS.3.2.1.37] RunSlFocCurCtrD . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.1.1.1.38 [SWDDS.3.2.1.38] RunSlFocCurCtrQ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
1.1.1.1.39 [SWDDS.3.2.1.39] ConvertSlFocInvrsPark . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
1.1.1.1.40 [SWDDS.3.2.1.40] CompensateSlFocDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
1.1.1.1.41 [SWDDS.3.2.1.41] RunSlFocSpcVecPwm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134
1.1.1.1.42 [SWDDS.3.2.1.42] CheckSlFocFltCond . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137
1.1.1.1.43 [SWDDS.3.2.1.43] CheckSlFocFltCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
1.1.1.1.44 [SWDDS.3.2.1.44] CheckSlFocFltDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 3
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.45 [SWDDS.3.2.1.45] CheckSlFocFltRevRot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
1.1.1.1.46 [SWDDS.3.2.1.46] CheckSlFocFltGateDrv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
1.1.1.1.47 [SWDDS.3.2.1.47] RunSlFocSpdCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151
1.1.1.1.48 [SWDDS.3.2.1.48] SlFoc_DisSlRun . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.1.2 [SWDDS.3.2.2] MtrDrv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.1.2.1 [SWDDS.3.2.2.1] MtrDrv_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
1.1.1.2.2 [SWDDS.3.2.2.2] MtrDrv_GetDcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157
1.1.1.2.3 [SWDDS.3.2.2.3] MtrDrv_GetPhsCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
1.1.1.2.4 [SWDDS.3.2.2.4] MtrDrv_GetGdrvSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161
1.1.1.2.5 [SWDDS.3.2.2.5] MtrDrv_SetPwmDuty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
1.1.1.2.6 [SWDDS.3.2.2.6] MtrDrv_EnaPwmOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167
1.1.1.2.7 [SWDDS.3.2.2.7] MtrDrv_DisPwmOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
1.1.1.2.8 [SWDDS.3.2.2.8] MtrDrv_ClrGdrvFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170
1.1.2 [SWDDS.3.3] CAN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
1.1.2.1 [SWDDS.3.3.1] CanMsg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
1.1.2.1.1 [SWDDS.3.3.1.1] CanMsg_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
1.1.2.1.2 [SWDDS.3.3.1.2] CanMsg_ChkReqDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
1.1.2.1.3 [SWDDS.3.3.1.3] CanMsg_GetReqDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
1.1.2.1.4 [SWDDS.3.3.1.4] CanMsg_SetResDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178
1.1.2.1.5 [SWDDS.3.3.1.5] CanMsg_SendResDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
1.1.2.1.6 [SWDDS.3.3.1.6] SetCanMsgStaDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
1.1.2.1.7 [SWDDS.3.3.1.7] SetCanMsgDrvFltDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184
1.1.2.1.8 [SWDDS.3.3.1.8] SetCanMsgSenFltDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 4
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Figures
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 5
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Tables
Table 1 Version History
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 6
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1 Function Description
1.1 [SWDDS.3] BSW
1.1.1 [SWDDS.3.2] MTR
MTR manages the input/output signals and motor drive logic related to the motor drive.
1.1.1.1 [SWDDS.3.2.1] SlFoc
perform Sensorless FOC algorithm
- Sesorless estimation , Field-Oriented Control
1.1.1.1.1 [SWDDS.3.2.1.1] SlFoc_Init
1.1.1.1.1.1 Detailed Design
[SWDDS.3.2.1.1] SlFoc_Init
Software Unit Information
Unit ID SWDDS.3.2.1.1 Unit Name SlFoc_Init
Architecture ID SWADS.3.2.1.1 ASIL QM
Prototype void SlFoc_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bSlFocFirstDcVoltMeasr
0 ~ 1, Normal /
First measurement
Write
First DC driving
voltage
measurement
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC initialization
- Control handler initialization
- Variable initialization
1. SlFoc_Init initializes the signal filtering.
2. SlFoc_Init initializes the sensorless observer.
3. SlFoc_Init initializes the current control.
4. SlFoc_Init initializes the open-loop starting.
5. SlFoc_Init initializes the speed control.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 7
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
6. SlFoc_Init initializes the internal variables.
Called Function SWDDS.2.3.1 RteIo_Init
Calling Function
SWDDS.3.2.1.2 InitializeSlFocSigFilt
SWDDS.3.2.1.3 InitializeSlFocSlObsrv
SWDDS.3.2.1.4 InitializeSlFocCurCtr
SWDDS.3.2.1.5 InitializeSlFocOplpStart
SWDDS.3.2.1.6 InitializeSlFocSpdCtr
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.1
Target Milestone EBS2
Element MTR
Risk Low
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 8
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.1.2 Static View Design
1.1.1.1.1.3 Dynamic View Design
1. SlFoc_Init calls the signal filtering initialization.
2. SlFoc_Init calls the sensorless observer initialization.
3. SlFoc_Init calls the current control initialization.
4. SlFoc_Init calls the open-loop starting initialization.
5. SlFoc_Init calls the speed control initialization.
1.1.1.1.1.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 9
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.2 [SWDDS.3.2.1.2] InitializeSlFocSigFilt
1.1.1.1.2.1 Detailed Design
[SWDDS.3.2.1.2] InitializeSlFocSigFilt
Software Unit Information
Unit ID SWDDS.3.2.1.2 Unit Name InitializeSlFocSigFilt
Architecture ID SWADS.3.2.1.2 ASIL QM
Prototype void InitializeSlFocSigFilt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tFrac16 g_hndSlFocDcVoltFilt.trFiltCoeff.f16B0
1801
0.0549876058
Write
B0 coefficient of an IIR1
filter
tFrac16 g_hndSlFocDcVoltFilt.trFiltCoeff.f16B1
1801
0.0549876058
Write
B1 coefficient of an IIR1
filter
tFrac16 g_hndSlFocDcVoltFilt.trFiltCoeff.f16A1
-492
-0.0150247884
Write
A1 coefficient of an IIR1
filter
GDFLIB_FILTER_IIR1_T_F16 g_hndSlFocDcVoltFilt.f16FiltBufferX[0] 0 Read/Write
DC driving voltage filtering
handler
input buffer
GDFLIB_FILTER_IIR1_T_F16 g_hndSlFocDcVoltFilt.f16FiltBufferY[0] 0 Read/Write
DC driving voltage filtering
handler
output buffer
tU16 g_hndSlFocOffsFilt0.u16NSamples 4 Write
Current sensor offset 0 filter
Recalculated smoothing
factor
tFrac32 g_hndSlFocOffsFilt0.f32Acc 4 Write
Current sensor offset 0 filter
accumulator
tU16 g_hndSlFocOffsFilt1.u16NSamples 4 Write
Current sensor offset 1 filter
Recalculated smoothing
factor.
tFrac32 g_hndSlFocOffsFilt1.f32Acc 0 Write
Current sensor offset 1 filter
accumulator.
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16DcVoltIirB0
1801
0.0549876058
Read
DC driving voltage IIR
filtering coefficient B0
tFrac16 par_f16DcVoltIirB1
1801
0.0549876058
Read
DC driving voltage IIR
filtering coefficient B1
tFrac16 par_f16DcVoltIirA1
-492
-0.0150247884
Read
DC driving voltage IIR
filtering coefficient A1
tU16 par_u16CurSigOffsFiltNoSmpl 4 Read
Number of samples for
moving average filtering of
current sensor offset
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Input signal filter initialization
- DC driving voltage filter setting
- Current sensor offset 0 filter setting
- Current sensor offset 1 filter setting
1. InitializeSlFocSigFilt initializes the DC driving voltage IIR filter.
2. InitializeSlFocSigFilt initializes the moving average filter for the phase current offset 0 measurement.
3. InitializeSlFocSigFilt initializes the moving average filter for the phase current offset 1 measurement.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 10
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.3.2.1.1 SlFoc_Init
Calling
Function
SWDDS.3.6.14.1 GDFLIB_FilterIIR1Init_F16
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.2
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.2.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 11
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.2.3 Dynamic View Design
1. InitializeSlFocSigFilt calls the IIR filter initialization for the DC driving voltage filtering.
2. InitializeSlFocSigFilt calls the moving average filter initialization for the phase current offset measurement.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 12
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.1 IN/OUT
GDFLIB_FILTER_IIR1_T_F16
*
N/A N/A N/A N/A N/A
DC driving
voltage
filtering
handler
2 pParam SWDDS.3.6.14.2 IN/OUT
GDFLIB_FILTER_MA_
T_F16 *
N/A N/A N/A N/A N/A
Current
sensor 0
offset
filtering
handler
3 pParam SWDDS.3.6.14.2 IN/OUT
GDFLIB_FILTER_MA_
T_F16 *
N/A N/A N/A N/A N/A
Current
sensor 1
offset
filtering
handler
1.1.1.1.3 [SWDDS.3.2.1.3] InitializeSlFocSlObsrv
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 13
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.3.1 Detailed Design
[SWDDS.3.2.1.3] InitializeSlFocSlObsrv
Software Unit Information
Unit ID SWDDS.3.2.1.3 Unit Name InitializeSlFocSlObsrv
Architecture
ID
SWADS.3.2.1.3 ASIL QM
Prototype void InitializeSlFocSlObsrv( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tFrac16 g_hndSlFocBackEmfObsrv.f16UGain
29832
0.9104477612
Write
Scaled voltage
cross-coupling
constant
tFrac16 g_hndSlFocBackEmfObsrv.f16WIGain
9781
0.2985074627
Write
Scaled angular
velocity crosscoupling
constant
tFrac16 g_hndSlFocBackEmfObsrv.f16EGain
4506
0.1375426866
Write
Scaled back-EMF
cross-coupling
constant
tFrac16 g_hndSlFocBackEmfObsrv.f16IGain
3687
0.1125346622
Write
Scaled RL circuit
constant
tS16 g_hndSlFocBackEmfObsrv.s16Shift 0 Write
Scaling bitwise
shift applied to all
cross-coupling
constants
tFrac16 g_hndSlFocBackEmfObsrv.pParamD.f16CC1sc
22746
0.6941788027
Write
d-axis CC1
coefficient
tFrac16 g_hndSlFocBackEmfObsrv.pParamD.f16CC2sc
-17693
-0.5399555240
Write
d-axis CC2
coefficient
tFrac16 g_hndSlFocBackEmfObsrv.pParamD.f16UpperLimit
32767
0.999969
Write
d-axis Upper
Limit of the
controller
tFrac16 g_hndSlFocBackEmfObsrv.pParamD.f16LowerLimit
-32768
-1.0
Write
d-axis Lower
Limit of the
controller
tU16 g_hndSlFocBackEmfObsrv.pParamD.u16NShift 1 Write
d-axis Scaling
bitwise shift
applied to the
controller
coefficients
tFrac16 g_hndSlFocBackEmfObsrv.pParamQ.f16CC1sc
22746
0.6941788027
Write
q-axis CC1
coefficient
tFrac16 g_hndSlFocBackEmfObsrv.pParamQ.f16CC2sc
-17131
-0.5228196042
Write
q-axis CC2
coefficient
tFrac16 g_hndSlFocBackEmfObsrv.pParamQ.f16UpperLimit
32767
64.498Apk
Write
q-axis Upper
Limit of the
controller
tFrac16 g_hndSlFocBackEmfObsrv.pParamQ.f16LowerLimit
-32768
-64.5Apk
Write
q-axis Lower
Limit of the
controller
tFrac16 g_hndSlFocAngTrackObsrv.pParamPI.f16CC1sc
29596
0.903246809
Write PI CC1 coefficient
tFrac16 g_hndSlFocAngTrackObsrv.pParamPI.f16CC2sc
-28626
-0.8736379958
Write PI CC2 coefficient
tFrac16 g_hndSlFocAngTrackObsrv.pParamPI.f16UpperLimit
32767
0.999969
Write
PI Upper Limit of
the controller
tFrac16 g_hndSlFocAngTrackObsrv.pParamPI.f16LowerLimit
-32768
-1.0
Write
PI Lower Limit of
the controller
PI Scaling bitwise
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 14
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tU16 g_hndSlFocAngTrackObsrv.pParamPI.u16NShift 0 Write
shift applied to
the controller
coefficients
tFrac16 g_hndSlFocAngTrackObsrv.pParamInteg.f16C1
1228
0.0375
Write
Integrator
coefficient
tU16 g_hndSlFocAngTrackObsrv.pParamInteg.u16NShift 0 Write
Scaling bitwise
shift applied to
the integrator
coefficient f16C1
tFrac32 g_hndSlFocAngTrackObsrv.f32State 0 Read/Write
Angle tracking
observer handler
integrator state
value
tFrac16 g_hndSlFocAngTrackObsrv.f16InK1 0 Read/Write
Angle tracking
observer handler
input value in step
k-1
tU16 g_hndSlFocElecSpdFilt.u16NSamples 0 Write
Recalculated
smoothing factor
GDFLIB_FILTER_MA_T_F16 g_hndSlFocElecSpdFilt.f32Acc 0 Read/Write
Electric speed
filtering handler
filter accumulator
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16BemfObsrvIntgGainU
29832
0.9104477612
Read
Back-EMF
observer
integration gain U
tFrac16 par_f16BemfObsrvIntgGainWI
9781
0.2985074627
Read
Back-EMF
observer
integration gain
WI
tFrac16 par_f16BemfObsrvIntgGainE
4506
0.1375426866
Read
Back-EMF
observer
integration gain E
tFrac16 par_f16BemfObsrvIntgGainI
3687
0.1125346622
Read
Back-EMF
observer
integration gain I
tS16 par_s16BemfObsrvIntgShift 0 Read
Back-EMF
observer
integration gain
bit shift
tFrac16 par_f16BemfObsrvGainCc1sc
22746
0.6941788027
Read
Back-EMF
observer gain
CC1SC
tFrac16 par_f16BemfObsrvGainCc2sc
-17131
-0.5228196042
Read
Back-EMF
observer gain
CC2SC
tU16 par_u16BemfObsrvShift 0 Read
Back -MF
observer gain bit
shift
tFrac16 par_f16TrackObsrvSpdIntgCc1sc
22746
0.6941788027
Read
Electric speed
integration gain
CC1SC
tFrac16 par_f16TrackObsrvSpdIntgCc2sc
-17131
-0.5228196042
Read
Electric speed
integration gain
CC2SC
tU16 par_u16TrackObsrvSpdIntgShift 0 Read
Electric speed
integration gain
bit shift
tFrac16 par_f16TrackObsrvAngIntgC1
1228
0.0375
Read
Electric angle
integration gain
C1
tU16 par_u16TrackObsrvAngIntgShift 0 Read
Electric angle
integration gain
bit shift
Number of
samples for
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 15
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tU16 par_u16TrackObsrvFiltNoSmpl 0 Read moving average
filtering of electric
speed
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless observer initialization
- Back-EMF observer setting
- Angle tracking observer setting
- Estimated speed filter setting
Control Flow
Diagram
(or Pseudo
Code)
1. InitializeSlFocSlObsrv initializes the back EMF observer to calculate the estimation error.
2. InitializeSlFocSlObsrv initializes the angle tracking observer to estimate the electric angle and the electric speed.
3. InitializeSlFocSlObsrv initializes the moving average filter for the estimated electric speed.

Called
Function
SWDDS.3.2.1.1 SlFoc_Init
Calling
Function
SWDDS.3.6.14.3 AMCLIB_BemfObsrvDQInit_F16
SWDDS.3.6.14.4 AMCLIB_TrackObsrvInit_F16
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.3
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 16
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.3.2 Static View Design
1.1.1.1.3.3 Dynamic View Design
1. InitializeSlFocSlObsrv calls the back EMF observer initialization.
2. InitializeSlFocSlObsrv calls the angle tracking observer initialization.
3. InitializeSlFocSlObsrv calls the moving average filter initialization.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 17
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.3.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pCtrl SWDDS.3.6.14.3 IN/OUT
AMCLIB_BEMF_OBSRV_DQ_T_F16
*
N/A N/A N/A N/A N/A
Back-EMF
observer
handler
2 pCtrl SWDDS.3.6.14.4 IN/OUT AMCLIB_TRACK_OBSRV_T_F16 * N/A N/A N/A N/A N/A
Angle
tracking
observer
handler
3 pParam SWDDS.3.6.14.2 IN/OUT GDFLIB_FILTER_MA_T_F16 * N/A N/A N/A N/A N/A
Electric
speed
filtering
handler
1.1.1.1.4 [SWDDS.3.2.1.4] InitializeSlFocCurCtr
1.1.1.1.4.1 Detailed Design
[SWDDS.3.2.1.4] InitializeSlFocCurCtr
Software Unit Information
Unit ID SWDDS.3.2.1.4 Unit Name InitializeSlFocCurCtr
Architecture ID SWADS.3.2.1.4 ASIL QM
Prototype void InitializeSlFocCurCtr( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
Type
Name Range Read/Write Description
tFrac16 g_hndSlFocPiCurCtrD.f16CC1sc
10555
0.3221285509
Write
d-axis PI current controller CC1
coefficient
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 18
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tFrac16 g_hndSlFocPiCurCtrD.f16CC2sc
-9261
-0.2826501333
Write
d-axis PI current controller CC2
coefficient
tU16 g_hndSlFocPiCurCtrD.u16NShift 0 Write
d-axis PI current controller Scaling
bitwise shift applied to the controller
coefficients
tFrac16 g_hndSlFocPiCurCtrD.f16InErrK1 0 Write
d-axis PI current controller controller
input from the previous calculation step.
tFrac16 g_hndSlFocPiCurCtrD.f16UpperLimit
30310
0.925
Write d-axis PI current controller : Upper Limit
tFrac16 g_hndSlFocPiCurCtrD.f16LowerLimit
-30310
-0.925
Write d-axis PI current controller : Lower Limit
tFrac16 g_hndSlFocPiCurCtrQ.f16CC1sc
10555
0.3221285509
Write
q-axis PI current controller CC1
coefficient
tFrac16 g_hndSlFocPiCurCtrQ.f16CC2sc
-9261
-0.2826501333
Write
q-axis PI current controller CC2
coefficient
tU16 g_hndSlFocPiCurCtrQ.u16NShift 0 Write
q-axis PI current controller Scaling
bitwise shift applied to the controller
coefficients
tFrac16 g_hndSlFocPiCurCtrQ.f16InErrK1 0 Write
q-axis PI current controller controller
input from the previous calculation step.
tFrac16 g_hndSlFocPiCurCtrQ.f16UpperLimit
30310
0.925
Write q-axis PI current controller : Upper Limit
tFrac16 g_hndSlFocPiCurCtrQ.f16LowerLimit
-30310
-0.925
Write q-axis PI current controller : Lower Limit
tFrac16 g_hndSlFocDcVoltRipElim.f16ModIndex
28377
0.866
Write Inverse Modulation Index
tFrac16 g_hndSlFocDcVoltRipElim.f16ArgDcBusMsr 0 Write Measured DC bus voltage
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FocGainCc1scD
10555
0.3221285509
Read FOC control d-axis gain CC1SC
tFrac16 par_f16FocGainCc2scD
-9261
-0.2826501333
Read FOC control d-axis gain CC2SC
tU16 par_u16FocGainShiftD 0 Read FOC control d-axis gain bit shift
tFrac16 par_f16FocCtrInpLmt
30310
0.925
Read
FOC control input voltage limiting factor
for current sensing
tFrac16 par_f16FocGainCc1scQ
10555
0.3221285509
Read FOC control q-axis gain CC1SC
tFrac16 par_f16FocGainCc2scQ
-9261
-0.2826501333
Read FOC control q-axis gain CC2SC
tU16 par_u16FocGainShiftQ 0 Read FOC control q-axis gain bit shift
tFrac16 par_f16FocModulIndex
30310
0.925
Read FOC control PWM modulation index
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
PI current controller initialization
- d-axis PI current controller setting
- q-axis PI current controller setting
- DC driving voltage ripple compensation setting
1. InitializeSlFocCurCtr initializes the d-axis PI current control.
2. InitializeSlFocCurCtr initializes the q-axis PI current control.
3. InitializeSlFocCurCtr initializes the DC driving voltage compensation.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 19
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.3.2.1.1 SlFoc_Init
Calling Function
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.6 GFLIB_ControllerPIrAWInit_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.4
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 20
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.4.2 Static View Design
1.1.1.1.4.3 Dynamic View Design
1.InitializeSlFocCurCtr calls the PI control initialization to control d/q-axis current control.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 21
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.4.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16 30310 30310 0.925 0.925 N/A
FOC control
input
voltage
limiting
factor for
current
sensing
2
g_hndSlFocPiCurCtrD
.f16LowerLimit
SWDDS.3.6.14.38 IN tFrac16 -30310 -30310 -0.925 -0.925 N/A
d-axis PI
current
controller :
Lower Limit
3 pParam SWDDS.3.6.14.6 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
d-axis PI
current
control
handler
4 f16In1 SWDDS.3.6.14.38 OUT tFrac16 30310 30310 0.925 0.925 N/A
FOC control
input
voltage
limiting
factor for
current
sensing
5
g_hndSlFocPiCurCtrQ
.f16LowerLimit
SWDDS.3.6.14.38 IN tFrac16 -30310 -30310 -0.925 -0.925 N/A
q-axis PI
current
controller :
Lower Limit
6 pParam SWDDS.3.6.14.6 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
q-axis PI
current
control
handler
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 22
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.5 [SWDDS.3.2.1.5] InitializeSlFocOplpStart
1.1.1.1.5.1 Detailed Design
[SWDDS.3.2.1.5] InitializeSlFocOplpStart
Software Unit Information
Unit ID SWDDS.3.2.1.5 Unit Name InitializeSlFocOplpStart
Architecture ID SWADS.3.2.1.5 ASIL QM
Prototype void InitializeSlFocOplpStart( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac32 g_hndSlFocStartCurRamp.f32RampUp
332943
100.0Apk/sec
Write
Open-loop starting current Ramp up
increment coefficient
tFrac32 g_hndSlFocStartCurRamp.f32RampDown
332943
100.0Apk/sec
Write
Open-loop starting current Ramp decrement
coefficient.
tFrac32 g_hndSlFocStartCurRamp.f32State 0 Write Open-loop starting current Ramp state value
tFrac32 g_hndSlFocStartSpdRamp.f32RampUp
107374
3000rpm/sec
Write
Open-loop starting speed Ramp up
increment coefficien
tFrac32 g_hndSlFocStartSpdRamp.f32RampDown
107374
3000rpm/sec
Write
Open-loop starting speed Ramp decrement
coefficient.
tFrac32 g_hndSlFocStartSpdRamp.f32State 0 Write Open-loop starting speed Ramp state value
tFrac16 g_hndSlFocStartAngIntg.f16InK1 0 Write
Open-loop starting angle integrator input
value in step k-1
tFrac32 g_hndSlFocStartAngIntg.f32State 0 Write
Open-loop starting angle integrator
integrator state value
tFrac16 g_hndSlFocStartAngIntg.f16C1
983
0.03
Write
Open-loop starting angle integrator
coefficient
tU16 g_hndSlFocStartAngIntg.u16NShift 0 Write
Open-loop starting angle integrator Scaling
bitwise shift applied to the integrator
coefficient f16C1
Parameters
Data
Type
Name Range Read/Write Description
tFrac32 par_f32StartCurInc
332943
100.0Apk/sec
Read
Initial starting current increment rate
(PU/step)
tFrac32 par_f32StartSpdInc
107374
3000rpm/sec
Read
Initial starting speed increment rate
(PU/step)
tFrac16 par_f16TrackObsrvAngIntgC1
983
0.03
Read Electric angle integration gain C1
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Open-loop starting initialization
- Open-loop starting current ramp setting
- Open-loop starting speed ramp setting
- Open-loop starting angle integrator setting
1. InitializeSlFocOplpStart initializes the magnitude of the starting current ramp up.
2. InitializeSlFocOplpStart initializes the starting speed ramp up.
3. InitializeSlFocOplpStart initializes the open-loop starting electric angle integrator.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 23
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.3.2.1.1 SlFoc_Init
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.5
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.5.2 Static View Design
1.1.1.1.5.3 Dynamic View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 24
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.5.4 Interface Design
- N/A
1.1.1.1.6 [SWDDS.3.2.1.6] InitializeSlFocSpdCtr
1.1.1.1.6.1 Detailed Design
[SWDDS.3.2.1.6] InitializeSlFocSpdCtr
Software Unit Information
Unit ID SWDDS.3.2.1.6 Unit Name InitializeSlFocSpdCtr
Architecture ID SWADS.3.2.1.6 ASIL QM
Prototype void InitializeSlFocSpdCtr( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_hndSlFocSpdCtr.f16PropGain
21808
0.6655483475
Write PI speed controller : Proportional Gain
tS16 g_hndSlFocSpdCtr.s16PropGainShift -1 Write
PI speed controller : Proportional Gain
Shift
tFrac16 g_hndSlFocSpdCtr.f16IntegGain
24360
0.7434246397
Write PI speed controller : Integral Gain
tS16 g_hndSlFocSpdCtr.s16IntegGainShift -8 Write PI speed controller : Integral Gain Shift
tFrac32 g_hndSlFocSpdCtr.f32IntegPartK_1 0 Write
PI speed controller : integral part at step
k-1
tFrac16 g_hndSlFocSpdCtr.f16UpperLimit
11430
22.5Apk
Write PI speed controller : upper limit
tFrac16 g_hndSlFocSpdCtr.f16LowerLimit
-11430
-22.5Apk
Write PI speed controller : lower limit
tFrac32 g_hndSlFocSpdCtr.f32IntegPartK_1 0 Read/Write
Speed controller handler
integral part at step k-1
tFrac16 g_hndSlFocSpdCtr.f16InK_1 0 Read/Write
Speed controller handler
input error at step k-1
tU16 g_hndSlFocSpdCtr.u16LimitFlag 0 Read/Write
Speed controller handler
Limitation flag
tU16 g_u16SlFocSpdCtrCnt 0 Write Speed control interval time count
tFrac16 g_f16SlFocRefSpd 0 Write Reference speed setting (PU)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16SpdCtrPropGain
21808
0.6655483475
Read Speed control proportional gain
tS16 par_s16SpdCtrPropShift -1 Read Speed control proportional gain bit shift
tFrac16 par_f16SpdCtrIntgGain
24360
0.7434246397
Read Speed control integral gain
tS16 par_s16SpdCtrIntgShift -8 Read Speed control integral gain bit shift
tFrac16 par_f16EopCtrCurLmtMax
11430
22.5Apk
Read
Phase current limit at maximum speed
(PU)
Registers
Data
Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 25
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Type
N/A N/A N/A N/A N/A
Description
Speed control initialization
- PI speed controller handler initialization
- Internal variables initialization
Control Flow Diagram
(or Pseudo Code)
1. InitializeSlFocSpdCtr initializes speed control by setting control gains, current limit and internal state.
2. InitializeSlFocSpdCtr initializes the interval time count of the speed control timing.
3. InitializeSlFocSpdCtr initializes the reference speed.

Called Function SWDDS.3.2.1.1 SlFoc_Init
Calling Function
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.7 GFLIB_ControllerPIpAWInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.6
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 26
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.6.2 Static View Design
1.1.1.1.6.3 Dynamic View Design
1. InitializeSlFocSpdCtr calls the fixed-point negative function.
2. InitializeSlFocSpdCtr calls the PI control for speed control.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 27
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.6.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Phase
current limit
at maximum
speed (PU)
2
g_hndSlFocSpdCtr
.f16LowerLimit
SWDDS.3.6.14.38 IN tFrac16 -11430 -11430 -22.5 -22.5
0.00196838
/ Apk
PI speed
controller :
lower limit
3 pParam SWDDS.3.6.14.7 IN/OUT
GFLIB_CONTROLLER
_PIAW_P_T_F16 *
N/A N/A N/A N/A N/A
Speed
controller
handler
1.1.1.1.7 [SWDDS.3.2.1.7] SlFoc_MainFunc
1.1.1.1.7.1 Detailed Design
[SWDDS.3.2.1.7] SlFoc_MainFunc
Software Unit Information
Unit ID SWDDS.3.2.1.7 Unit Name SlFoc_MainFunc
Architecture
ID
SWADS.3.2.1.7 ASIL QM
Prototype void SlFoc_MainFunc( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Read/Write Elapse time count after state entered
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Read Sensorless FOC state
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tBool g_bSlFocPrevCtrEna
0 ~ 1
Disable / Enable
Write Previous control enabled state
tU16 g_u16SlFocSpdCtrCnt 0 ~ 10 Read/Write Speed control interval time count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC main function
- Preparation for control
- Sensorless FOC state handling
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 28
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
- Previous control enabled state updating
- Speed control
Control
Flow
Diagram
(or Pseudo
Code)
1. SlFoc_MainFunc measures the DC driving voltage.
2. SlFoc_MainFunc increases the elapse time count after specific state entering.
3. SlFoc_MainFunc checks the fault conditions.
4. SlFoc_MainFunc runs the specific action according to Sensorless FOC control state.
5. SlFoc_MainFunc runs the speed control if speed control time reaches the control time interval.

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 29
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called
Function
Calling
Function
SWDDS.3.2.1.27 MeasureSlFocDcVolt
SWDDS.3.2.1.42 CheckSlFocFltCond
SWDDS.3.2.1.12 ActSlFocStateSwtcOff
SWDDS.3.2.1.13 ActSlFocStateOffsCalib
SWDDS.3.2.1.15 ActSlFocStateInitAlign
SWDDS.3.2.1.16 ActSlFocStateOplpStart
SWDDS.3.2.1.17 ActSlFocStateSlRun
SWDDS.3.2.1.47 RunSlFocSpdCtr
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.7
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.7.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 30
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.7.3 Dynamic View Design
1. SlFoc_MainFunc calls the DC driving voltage measurement function in MtrDrv.
2. SlFoc_MainFunc calls the fault condition checking function.
3. SlFoc_MainFunc calls the switching off state handling function at switching off state.
4. SlFoc_MainFunc calls the phase current sensor offset handling function at current offset calibration state.
5. SlFoc_MainFunc calls the initial alignment state handling function at initial alignment state.
6. SlFoc_MainFunc calls the open-loop starting state handling function at open-loop starting state.
7. SlFoc_MainFunc calls the sensorless running state handling function at sensorless running state.
8. SlFoc_MainFunc calls the EOP motor speed control function at specific control time.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 31
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.7.4 Interface Design
- N/A
1.1.1.1.8 [SWDDS.3.2.1.8] SlFoc_SetCtrDat
1.1.1.1.8.1 Detailed Design
[SWDDS.3.2.1.8] SlFoc_SetCtrDat
Software Unit Information
Unit ID SWDDS.3.2.1.8 Unit Name SlFoc_SetCtrDat
Architecture ID SWADS.3.2.1.8 ASIL QM
Prototype void SlFoc_SetCtrDat( tSlFocCtrDat control_data )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tBool control_data.bControlEnable
0 ~ 1
Disable / Enable
IN
control data setting
Control enable
tCtrMode control_data.eControlMode
0 ~ 1
CTR_MODE_SPD/
CTR_MODE_CUR
IN control data setting : Control mode
tFrac16 control_data.f16ReferenceCurrent
0 ~ 32767
0 ~64.498Apk
IN
control data setting : Reference
current (PU)
tFrac16 control_data.f16ReferenceSpeed
-32768 ~ 32767
-6000 ~
5999.82rpm
IN
control data setting : Reference
speed (PU)
tFrac16 control_data.f16CurrentLimitUpper
-32768 ~ 32767
-64.5 ~ 64.498Apk
IN
control data setting : Current limit
upper (PU)
tFrac16 control_data.f16CurrentLimitLower
-32768 ~ 32767
-64.5 ~ 64.498Apk
IN
control data setting : Current limit
lower (PU)
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 32
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Type
Name Range Read/Write Description
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Write Control enable
tCtrMode g_eSlFocCtrMode
0 ~ 1
CTR_MODE_SPD/
CTR_MODE_CUR
Read/Write Control mode
tFrac16 g_f16SlFocRefSpd
0 ~ 19660
0 ~ 3600rpm
Write Reference speed setting (PU)
tFrac16 g_hndSlFocSpdCtr.f16UpperLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write Speed controller : Upper Limit (PU)
tFrac16 g_hndSlFocSpdCtr.f16LowerLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write Speed controller : Lower Limit PU)
tFrac16 g_stSlFocRefCur.f16Arg1
0
0.0Apk
Write Reference current : d-axis (PU)
tFrac16 g_stSlFocRefCur.f16Arg2
0 ~ 11430
0 ~ 22.5Apk
Write Reference current : q-axis (PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC control data setting
- Control enable setting
- Control mode change checking
- Control data setting
Control Flow Diagram
(or Pseudo Code)
1. SlFoc_SetCtrDat updates the sensorless FOC control enable setting.
2. SlFoc_SetCtrDat precharges the sensorless FOC control integrator if control enable input is changed.
3. SlFoc_SetCtrDat updates the sensorless FOC control mode.
4. SlFoc_SetCtrDat updates the reference speed and the current limit at speed control mode.
5. SlFoc_SetCtrDat updates the d/q-axis reference current at current control mode.
Called Function SWDDS.2.3.15 RteIo_SetSlFocCtrDat
Calling Function SWDDS.3.2.1.11 SlFoc_PrechrgCurIntg
Function Execution
Time
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 33
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.2.1.8
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.8.2 Static View Design
1.1.1.1.8.3 Dynamic View Design
1. SlFoc_SetCtrDat calls the integrator precharging to set current output value to the PI current and speed control integrator.
1.1.1.1.8.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 34
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.9 [SWDDS.3.2.1.9] SlFoc_GetStaDat
1.1.1.1.9.1 Detailed Design
[SWDDS.3.2.1.9] SlFoc_GetStaDat
Software Unit Information
Unit ID SWDDS.3.2.1.9 Unit Name SlFoc_GetStaDat
Architecture ID SWADS.3.2.1.9 ASIL QM
Prototype tSlFocStaDat SlFoc_GetStaDat( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
tCtrState .eControlState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Status data
Sensorless FOC state
tFrac16 .f16SpeedOutput
-32768 ~ 32767
-6000 ~ 5999.82rpm
Status data
Estimated electric speed (PU)
tFrac16 .f16CurrentOutput
-32768 ~ 32767
-64.5 ~ 64.4980Apk
Status data
q-axis current output (PU)
tFrac16 .f16CurrentError
-32768 ~ 32767
-64.5 ~ 64.498Apk
Status data
q-axis control error (PU)
tFrac16 .f16DcVoltage
0 ~ 32767
0 ~ 25.3992Vpk
Status data
DC driving voltage (PU)
tU16 .u16FaultStatus 0 ~ 65535
Status data
Fault status flags
Global Variables
Data
Type
Name Range Read/Write Description
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Read Sensorless FOC state
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~ 5999.82rpm
Read Estimated electric speed (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.4980Apk
Read
d/q-axis current output : q-axis
(PU)
tFrac16 g_stSlFocCurErr.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read Current control error : q-axis (PU)
tFrac16 g_f16SlFocDcVolt
0 ~ 32767
0 ~ 25.3992Vpk
Read DC driving voltage (PU)
tU16 g_u16SlFocFltSta 0 ~ 65535 Read Fault status flags
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC status data getting
1. SlFoc_GetStaDat updates the sensorless FOC control state.
2. SlFoc_GetStaDat updates the electric speed output, q-axis current output and q-axis current control error.
3. SlFoc_GetStaDat updates the DC driving voltage.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 35
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
4. SlFoc_GetStaDat updates the sensorless FOC fault flags.
Called Function SWDDS.2.3.8 RteIo_GetSlFocStaDat
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.9
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.9.2 Static View Design
1.1.1.1.9.3 Dynamic View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 36
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.9.4 Interface Design
- N/A
1.1.1.1.10 [SWDDS.3.2.1.10] SlFoc_ClrFltSta
1.1.1.1.10.1 Detailed Design
[SWDDS.3.2.1.10] SlFoc_ClrFltSta
Software Unit Information
Unit ID SWDDS.3.2.1.10 Unit Name SlFoc_ClrFltSta
Architecture ID SWADS.3.2.1.10 ASIL QM
Prototype void SlFoc_ClrFltSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC fault clearing
Control Flow Diagram
(or Pseudo Code)
1. SlFoc_ClrFltSta clears the gate driver fault.
2. SlFoc_ClrFltSta clears the sensorless FOC fault flags.
Called Function SWDDS.2.3.16 RteIo_ClrSlFocFltSta
Calling Function SWDDS.3.2.2.8 MtrDrv_ClrGdrvFlt
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.10
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 37
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
1.1.1.1.10.2 Static View Design
1.1.1.1.10.3 Dynamic View Design
1. SlFoc_ClrFltSta calls the gate driver fault clearing.
1.1.1.1.10.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 38
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.11 [SWDDS.3.2.1.11] SlFoc_PrechrgCurIntg
1.1.1.1.11.1 Detailed Design
[SWDDS.3.2.1.11] SlFoc_PrechrgCurIntg
Software Unit Information
Unit ID SWDDS.3.2.1.11 Unit Name SlFoc_PrechrgCurIntg
Architecture ID SWADS.3.2.1.11 ASIL QM
Prototype void SlFoc_PrechrgCurIntg( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocCtrInpDq.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read d/q-axis control input : d-axis (PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read d/q-axis control input : q-axis (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Read
d/q-axis current output : q-axis
(PU)
tFrac16 g_hndSlFocPiCurCtrD.f16CC1sc
10426
0.3181807092
Write
d-axis PI current controller CC1
coefficient
tFrac16 g_hndSlFocPiCurCtrD.f16CC2sc
-9391
-0.2865979751
Write
d-axis PI current controller CC2
coefficient
tU16 g_hndSlFocPiCurCtrD.u16NShift 0 Write
d-axis PI current controller Scaling
bitwise shift
applied to the controller coefficients
tFrac16 g_hndSlFocPiCurCtrD.f16InErrK1 0 Write
d-axis PI current controller controller
input from
the previous calculation step.
tFrac16 g_hndSlFocPiCurCtrD.f16UpperLimit
30310
0.925
Write
d-axis PI current controller : Upper
Limit
tFrac16 g_hndSlFocPiCurCtrD.f16LowerLimit
-30310
-0.925
Write
d-axis PI current controller : Lower
Limit
tFrac16 g_hndSlFocPiCurCtrQ.f16CC1sc
10426
0.3181807092
Write
q-axis PI current controller CC1
coefficient
tFrac16 g_hndSlFocPiCurCtrQ.f16CC2sc
-9391
-0.2865979751
Write
q-axis PI current controller CC2
coefficient
tU16 g_hndSlFocPiCurCtrQ.u16NShift 0 Write
q-axis PI current controller Scaling
bitwise shift
applied to the controller coefficients
tFrac16 g_hndSlFocPiCurCtrQ.f16InErrK1 0 Write
q-axis PI current controller controller
input from
the previous calculation step.
tFrac16 g_hndSlFocPiCurCtrQ.f16UpperLimit
30310
0.925
Write
q-axis PI current controller : Upper
Limit
tFrac16 g_hndSlFocPiCurCtrQ.f16LowerLimit
-30310
-0.925
Write
q-axis PI current controller : Lower
Limit
tFrac16 g_hndSlFocSpdCtr.f16PropGain
21808
0.6655483475
Write
PI speed controller : Proportional
Gain
tS16 g_hndSlFocSpdCtr.s16PropGainShift -1 Write
PI speed controller : Proportional
Gain Shift
tFrac16 g_hndSlFocSpdCtr.f16IntegGain
24360
Write PI speed controller : Integral Gain
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 39
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
0.7434246397
tS16 g_hndSlFocSpdCtr.s16IntegGainShift -8 Write
PI speed controller : Integral Gain
Shift
tFrac32 g_hndSlFocSpdCtr.f32IntegPartK_1 0 Write
PI speed controller : integral part at
step k-1
tFrac16 g_hndSlFocSpdCtr.f16UpperLimit
11430
22.5Apk
Write PI speed controller : upper limit
tFrac16 g_hndSlFocSpdCtr.f16LowerLimit
-11430
-22.5Apk
Write PI speed controller : lower limit
tFrac32 g_hndSlFocSpdCtr.f32IntegPartK_1 0 Read/Write
Speed controller handler integral part
at step k-1
tFrac16 g_hndSlFocSpdCtr.f16InK_1 0 Read/Write
Speed controller handler input error
at step k-1
tU16 g_hndSlFocSpdCtr.u16LimitFlag 0 Read/Write
Speed controller handler Limitation
flag
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless FOC current control integrator pre-charging
Control Flow
Diagram
(or Pseudo Code)
1. SlFoc_PrechrgCurIntg precharges the d/q-axis PI current control integrator with the d/q-axis control input voltage.
2. SlFoc_PrechrgCurIntg precharges the PI speed control integrator with the q-axis current output.
Called Function
SWDDS.2.3.17 RteIo_PrechrgCurIntg
SWDDS.3.2.1.8 SlFoc_SetCtrDat
Calling Function
SWDDS.3.6.14.5 GFLIB_ControllerPIrAWSetState_F16
SWDDS.3.6.14.30 GFLIB_ControllerPIpAWSetState_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.11
Target Milestone SBS1
Element MTR
Risk Mid
Interoperability Yes
Criticality High
Technical complexity Low
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 40
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
1.1.1.1.11.2 Static View Design
1.1.1.1.11.3 Dynamic View Design
1. SlFoc_PrechrgCurIntg calls the PI state setting function to precharge d/q-axis current control.
2. SlFoc_PrechrgCurIntg calls the PI state setting function to precharge speed control.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 41
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.11.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16ControllerPIrAWOut SWDDS.3.6.14.5 OUT tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d/q-axis
control
input :
Argument1
2 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
d-axis PI
current
control
handler
3 f16ControllerPIrAWOut SWDDS.3.6.14.5 OUT tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d/q-axis
control
input :
Argument2
4 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
q-axis PI
current
control
handler
5 f16ControllerPIpAWOut SWDDS.3.6.14.30 OUT tFrac16 -32767 32768 -6000 5999.82
0.183105 /
rpm
d/q-axis
current
output :
Argument2
6 pParam SWDDS.3.6.14.30 IN/OUT
GFLIB
_CONTROLLER
_PIAW_P_T_F16
*
N/A N/A N/A N/A N/A
Speed
controller
handler
1.1.1.1.12 [SWDDS.3.2.1.12] ActSlFocStateSwtcOff
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 42
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.12.1 Detailed Design
[SWDDS.3.2.1.12] ActSlFocStateSwtcOff
Software Unit Information
Unit ID SWDDS.3.2.1.12 Unit Name ActSlFocStateSwtcOff
Architecture ID SWADS.3.2.1.12 ASIL QM
Prototype void ActSlFocStateSwtcOff( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tBool g_bSlFocPrevCtrEna
0 ~ 1
Disable / Enable
Read Previous control enabled state
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Read/Write Elapse time count after state entered
tBool g_bSlFocFirstCurMeasr
0 ~ 1
FALSE / TRUE
Write First current measurement
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Sensorless FOC state
Parameters
Data
Type
Name Range Read/Write Description
tU16 par_u16FocEnaDlyTim 0 ~10 Read
FOC control enable delay time count
after disabled
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Switching output off state action
Control Flow
Diagram
(or Pseudo Code)
1. ActSlFocStateSwtcOff checks the Sensorless FOC control enabling edge.
2. ActSlFocStateSwtcOff sets the Sensorless FOC control state as current offset calibration state and initialize related variables if
enabling delay time finished.
3. ActSlFocStateSwtcOff sets related variables if the Sensorless FOC control disabling edge.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 43
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.1.22 EnableSlFocControl
SWDDS.3.2.1.21 DisableSlFocControl
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.12
Target Milestone SBS1
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.12.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 44
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.12.3 Dynamic View Design
1. ActSlFocStateSwtcOff calls Sensorless FOC enabling function to initialize related variable at the control enabling edge.
2. ActSlFocStateSwtcOff calls Sensorless FOC disabling function to initialize related variable at the control disabling edge.
1.1.1.1.12.4 Interface Design
- N/A
1.1.1.1.13 [SWDDS.3.2.1.13] ActSlFocStateOffsCalib
1.1.1.1.13.1 Detailed Design
[SWDDS.3.2.1.13] ActSlFocStateOffsCalib
Software Unit Information
Unit ID SWDDS.3.2.1.13 Unit Name ActSlFocStateOffsCalib
Architecture
ID
SWADS.3.2.1.13 ASIL QM
Prototype void ActSlFocStateOffsCalib( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Data Type Name Range Read/Write Description
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tU16 g_u16SlFocFltSta 0 ~ 65535 Read Fault status flags
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 45
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global
Variables
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Read/Write Elapse time count after state entered
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Sensorless FOC state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16CurSigOffsCalibCnt 0 ~ 100 Read Current sensor offset calibration count
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current sensor offset calibration state action
Control Flow
Diagram
(or Pseudo
Code)
1. ActSlFocStateOffsCalib runs the phase current sensor offset calibration.
2. ActSlFocStateOffsCalib checks the control enabled and no fault.
3. ActSlFocStateOffsCalib sets the Sensorless FOC control state as initial alignment state when the calibration is finished (by checking
count reached) and the current offset range is within the specific range.
4. ActSlFocStateOffsCalib disables the control if the control is disabled or fault detected or phase current offset range is over.
Called
Function
SWDDS.3.2.1.7 SlFoc_MainFunc
Calling
Function
SWDDS.3.2.1.29 CalibrateSlFocCurOffs
SWDDS.3.2.1.25 CheckSlFocOffsRngErr
SWDDS.3.2.1.21 DisableSlFocControl
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.13
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 46
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.13.2 Static View Design
1.1.1.1.13.3 Dynamic View Design
1. ActSlFocStateOffsCalib calls the phase current offset calibration function to filter the phase current signal during switching off.
2. ActSlFocStateOffsCalib calls the phase current offset range error function to check range of offset phase current.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 47
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.13.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 checking_result SWDDS.3.2.1.25 IN tBool 0 1
No
error
Error
(range
over)
N/A
Current
sensor
offset range
error
checking
1.1.1.1.14 [SWDDS.3.2.1.14] RunSlFocStateAlignOplp
1.1.1.1.14.1 Detailed Design
[SWDDS.3.2.1.14] RunSlFocStateAlignOplp
Software Unit Information
Unit ID SWDDS.3.2.1.14 Unit Name RunSlFocStateAlignOplp
Architecture ID SWADS.3.2.1.14 ASIL QM
Prototype void RunSlFocStateAlignOplp( tBool initial_alignment )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tBool initial_alignment 0 ~ 1 IN
FALSE - open-loop starting, TRUE - initial
alignment
Function Call
Data
Type
Possible Return Value Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 48
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return Value
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read/Write alpha/beta-axis control input : d-axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Write alpha/beta-axis control input : q-axis (PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Initial alignment state and open-loop starting running
Control Flow Diagram
(or Pseudo Code)
1. RunSlFocStateAlignOplp runs initial alignment by skipping the starting electric angel calculation if the input parameter is
true.
2. RunSlFocStateAlignOplp runs open-loop starting if the input parameter is false.
3. RunSlFocStateAlignOplp calculates the starting electric angle and the magnitude of excitation current.
4. RunSlFocStateAlignOplp calculates the current control error in alpha/beta-axis.
5. RunSlFocStateAlignOplp calculates the alpha/beta-axis control input voltage using PI current control.
6. RunSlFocStateAlignOplp compensates the DC driving voltage ripple.
7. RunSlFocStateAlignOplp sets the PWM duty using space vector PWM.

Called Function
SWDDS.3.2.1.15 ActSlFocStateInitAlign
SWDDS.3.2.1.16 ActSlFocStateOplpStart
Calling Function
SWDDS.3.2.1.32 CalculateSlFocStartAng
SWDDS.3.2.1.31 CalculateSlFocStartCur
SWDDS.3.2.1.33 CalculateSlFocCurErrAlbe
SWDDS.3.2.1.37 RunSlFocCurCtrD
SWDDS.3.2.1.38 RunSlFocCurCtrQ
SWDDS.3.2.1.40 CompensateSlFocDcVolt
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 49
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.3.2.1.41 RunSlFocSpcVecPwm
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.14
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.14.2 Static View Design
1.1.1.1.14.3 Dynamic View Design
1. RunSlFocStateAlignOplp calls the starting electric angle calculation under open-loop starting.
2. RunSlFocStateAlignOplp calls the starting current magnitude calculation.
3. RunSlFocStateAlignOplp calls the current control error calculation in alpha/beta-axis.
4. RunSlFocStateAlignOplp calls d/q-axis PI current control input voltage calculation to control alpha/beta-axis current.
5. RunSlFocStateAlignOplp calls the DC driving voltage compensation.
6. RunSlFocStateAlignOplp calls the space vector PWM and PWM duty setting.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 50
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.14.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 g_stSlFocCtrInpAlbe.f16Arg1 SWDDS.3.2.1.37 IN tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d-axis
calculated
control
input (PU)
2 g_stSlFocCtrInpAlbe.f16Arg2 SWDDS.3.2.1.38 IN tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
Calculated
q-axis or
beta-axis
control
input (PU)
3 d_axis_control_input SWDDS.3.2.1.38 OUT tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d-axis or
alpha-axis
control
input (PU)
1.1.1.1.15 [SWDDS.3.2.1.15] ActSlFocStateInitAlign
1.1.1.1.15.1 Detailed Design
[SWDDS.3.2.1.15] ActSlFocStateInitAlign
Software Unit Information
Unit ID SWDDS.3.2.1.15 Unit Name ActSlFocStateInitAlign
Architecture ID SWADS.3.2.1.15 ASIL QM
Prototype void ActSlFocStateInitAlign( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 51
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Initial alignment state action
Control Flow Diagram
(or Pseudo Code)
1. ActSlFocStateInitAlign measures the phase current and runs the Clark transformation.
2. ActSlFocStateInitAlign runs the initial alignment.
3. ActSlFocStateInitAlign checks the end of the initial alignment.
Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.1.28 MeasureSlFocPhsCur
SWDDS.3.2.1.30 ConvertSlFocClarkTrnsf
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.18 CheckSlFocStateTransInitAlign
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.15
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.15.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 52
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.15.3 Dynamic View Design
1.ActSlFocStateInitAlign calls the phase current measurement to get 3-phase current.
2. ActSlFocStateInitAlign calls Clark transformation to get alpha/beta-axis feedback current.
3. ActSlFocStateInitAlign calls the initial alignmement to align the rotor to the alpha-axis.
4. ActSlFocStateInitAlign calls state transition checking to check the end of the initial alignment state.
1.1.1.1.15.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 initial_alignment SWDDS.3.2.1.14 OUT tBool 0 1
Openloop
starting
Initial
align
N/A
Initial
alignment
state
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 53
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.16 [SWDDS.3.2.1.16] ActSlFocStateOplpStart
1.1.1.1.16.1 Detailed Design
[SWDDS.3.2.1.16] ActSlFocStateOplpStart
Software Unit Information
Unit ID SWDDS.3.2.1.16 Unit Name ActSlFocStateOplpStart
Architecture ID SWADS.3.2.1.16 ASIL QM
Prototype void ActSlFocStateOplpStart( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16SlFocStartSpd
0 ~ 3276
0 ~ 600rpm
Read Open-loop starting electric speed (PU)
tFrac16 g_f16SlFocAngDiff
-32768 ~ 32767
-180 ~ 179.995deg
Write Starting and estimated angle difference (PU)
tFrac16 g_f16SlFocStartAng
-32768 ~ 32767
-180 ~ 179.995deg
Read Open-loop starting electric angle (PU)
tFrac16 g_f16SlFocElecAng
-32768 ~ 32767
-180 ~ 179.995deg
Read Estimated electric angle (PU)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16StartEstSpdThrs
819
150rpm
Read Sensorless estimation start speed
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Open-loop starting state action
Control Flow Diagram
(or Pseudo Code)
1. ActSlFocStateOplpStart gets the 3-phase current and converts to alpha/beta-axis current.
2. ActSlFocStateOplpStart runs the initial starting.
3. ActSlFocStateOplpStart runs the sensorless observer if the starting speed is over the speed estimation speed threshold.
4. ActSlFocStateOplpStart pre-charges the sensorless observer if the estimation angle error is negative.
5. ActSlFocStateOplpStart pre-charges the sensorless observer if the starting speed is less than the threshold.
6. ActSlFocStateOplpStart checks the end of the initial starting state.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 54
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.1.28 MeasureSlFocPhsCur
SWDDS.3.2.1.30 ConvertSlFocClarkTrnsf
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.34 RunSlFocSlObsrv
SWDDS.3.6.14.35 MLIB_Sub_F16
SWDDS.3.2.1.24 SetSlFocAngTrackObsrvPreChrg
SWDDS.3.2.1.19 CheckSlFocStateTransOplpStart
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.16
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 55
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.16.2 Static View Design
1.1.1.1.16.3 Dynamic View Design
1. ActSlFocStateOplpStart calls the phase current measurement.
2. ActSlFocStateOplpStart calls Clark transformation to get alpha/beta-axis feedback current.
3. ActSlFocStateOplpStart calls the initial open-loop starting.
4. ActSlFocStateOplpStart calls the sensorless observer to estimate the electric angle and speed during initial open-loop starting.
5. ActSlFocStateOplpStart calls the sensorless observer precharging.
6. ActSlFocStateOplpStart calls the state transition condition checking.
7. ActSlFocStateOplpStart calls the fixed-point arithmetic for subtraction calculation.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 56
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.16.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 initial_alignment SWDDS.3.2.1.14 OUT tBool 0 1
Openloop
starting
Initial
align
N/A
Initial
alignment
state
2 f16In1 SWDDS.3.6.14.35 OUT tFrac16 -32768 32768 -180 179.995
0.00549316
/ deg
Open-loop
starting
electric
angle
3 f16In2 SWDDS.3.6.14.35 OUT tFrac16 -32768 32768 -180 179.995
0.00549316
/ deg
Estimated
electric
angle
4 g_f16SlFocAngDiff SWDDS.3.6.14.35 IN tFrac16 -32768 32768 -180 179.995
0.00549316
/ deg
Starting and
estimated
angle
difference
1.1.1.1.17 [SWDDS.3.2.1.17] actSlFocStateSlRun
1.1.1.1.17.1 Detailed Design
[SWDDS.3.2.1.17] actSlFocStateSlRun
Software Unit Information
Unit ID SWDDS.3.2.1.17 Unit Name ActSlFocStateSlRun
Architecture ID SWADS.3.2.1.17 ASIL QM
Prototype void ActSlFocStateSlRun( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 57
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tFrac16 g_stSlFocCtrInpDq.f16Arg1
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write d/q-axis control input : d-axis (PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg2
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write d/q-axis control input : q-axis (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless running state action
Control Flow Diagram
(or Pseudo Code)
1. ActSlFocStateSlRun gets the 3-phase current and converts to alpha/beta-axis current.
2. ActSlFocStateSlRun estimates the electric angle and speed using the sensorless observer.
3. ActSlFocStateSlRun calculates the d/q-axis feedback current using Park transformation.
4. ActSlFocStateSlRun calculates the d/q-axis current control error.
5. ActSlFocStateSlRun calculates the d/q-axis control input voltage using the d/q-axis PI current control.
6. ActSlFocStateSlRun calculate the alpha/beta-axis control input voltage using the inverse Park transformation.
7. ActSlFocStateSlRun compensates the DC driving voltage ripple.
8. ActSlFocStateSlRun calculates the PWM duty using space vector PWM and sets the PWM duty to the gate drivier.
9. ActSlFocStateSlRun checks the end of sensorless running state.

Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.1.28 MeasureSlFocPhsCur
SWDDS.3.2.1.30 ConvertSlFocClarkTrnsf
SWDDS.3.2.1.34 RunSlFocSlObsrv
SWDDS.3.2.1.35 ConvertSlFocParkTrnsf
SWDDS.3.2.1.36 CalculateSlFocCurErrDq
SWDDS.3.2.1.37 RunSlFocCurCtrD
SWDDS.3.2.1.38 RunSlFocCurCtrQ
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 58
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.3.2.1.39 ConvertSlFocInvrsPark
SWDDS.3.2.1.40 CompensateSlFocDcVolt
SWDDS.3.2.1.41 RunSlFocSpcVecPwm
SWDDS.3.2.1.20 CheckSlFocStateTransSlRun
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.17
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.17.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 59
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.17.3 Dynamic View Design
1. ActSlFocStateSlRun calls the phase current measurement to get the 3-phase current.
2. ActSlFocStateSlRun calls the Clark transformation to calculate the alpha/beta-axis feedback current.
3. ActSlFocStateSlRun calls the sensorless observer to estimate the electric angle and speed.
4. ActSlFocStateSlRun calls the Park transformation to convert d/q-axis feedback current.
5. ActSlFocStateSlRun calls the d/q-axis current control error calculation.
6. ActSlFocStateSlRun calls the d/q-axis PI current control to calculate the d/q-axis control input voltage.
7. ActSlFocStateSlRun calls the inverse Park transformation to convert the alpha/beta-axis control input voltage.
8. ActSlFocStateSlRun calls the DC driving voltage compensation.
9. ActSlFocStateSlRun calls the space vector PWN to calculate the PWM duty and to set the PWM duty to the gate driver.
10. ActSlFocStateSlRun calls the state transition checking to check the end of the sensorless running state.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 60
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.17.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 g_stSlFocCtrInpDq.f16Arg1 SWDDS.3.2.1.37 IN tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d-axis
calculated
control
input (PU)
2 g_stSlFocCtrInpDq.f16Arg2 SWDDS.3.2.1.38 IN tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
Calculated
q-axis or
beta-axis
control
input (PU)
3 d_axis_control_input SWDDS.3.2.1.38 OUT tFrac16 -32767 32768 -25.4 25.3992
0.000775146
/ Vpk
d-axis or
alpha-axis
control
input (PU)
1.1.1.1.18 [SWDDS.3.2.1.18] CheckSlFocStateTransInitAlign
1.1.1.1.18.1 Detailed Design
[SWDDS.3.2.1.18] CheckSlFocStateTransInitAlign
Software Unit Information
Unit ID SWDDS.3.2.1.18 Unit Name CheckSlFocStateTransInitAlign
Architecture ID SWADS.3.2.1.18 ASIL QM
Prototype void CheckSlFocStateTransInitAlign( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tU16 g_u16SlFocFltSta 0 ~ 65535 Read Fault status flags
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Read/Write
Elapse time count after state
entered
0 ~ 4
CTR_STATE_SWTC_OFF/
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 61
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tCtrState g_eSlFocCtrState
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Sensorless FOC state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16StartAlginCnt 1 Read Initial starting alignment count
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description State transition checking at initial alignment state
Control Flow
Diagram
(or Pseudo Code)
1. CheckSlFocStateTransInitAlign checks if the control is enabled and fault is not detected.
2. CheckSlFocStateTransInitAlign sets the Sensorless FOC control state as the open-loop starting state if the initial alignment
time is ended.
3. CheckSlFocStateTransInitAlign disables the control if the control is disabled or fault is detected.

Called Function SWDDS.3.2.1.15 ActSlFocStateInitAlign
Calling Function SWDDS.3.2.1.21 DisableSlFocControl
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.18
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 62
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.18.2 Static View Design
1.1.1.1.18.3 Dynamic View Design
1. CheckSlFocStateTransInitAlign calls the control disable if control disabling setting or fault is detected.
1.1.1.1.18.4 Interface Design
- N/A
1.1.1.1.19 [SWDDS.3.2.1.19] CheckSlFocStateTransOplpStart
1.1.1.1.19.1 Detailed Design
[SWDDS.3.2.1.19] CheckSlFocStateTransOplpStart
Software Unit Information
Unit ID SWDDS.3.2.1.19 Unit Name CheckSlFocStateTransOplpStart
Architecture
ID
SWADS.3.2.1.19 ASIL QM
Prototype void CheckSlFocStateTransOplpStart( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Data Type Possible Return ValueDescription
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 63
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return Value void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tU16 g_u16SlFocFltSta 0 ~ 65535 Read/Write Fault status flags
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Read/Write
Elapse time
count after state
entered
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write
Sensorless FOC
state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16StartTimOut 50000 Read
Initial starting
time-out count
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description State transition checking at open-loop starting state
Control
Flow
Diagram
(or Pseudo
Code)
1. CheckSlFocStateTransOplpStart checks if the control is enabled and fault is not detected.
2. CheckSlFocStateTransOplpStart checks the starting time-out if the sensorless running state
transition is enabled.
3. CheckSlFocStateTransOplpStart sets the sensorless FOC control state as the sensorless running
state and precharges the current control if the sensorless running transition condition is met.
4. CheckSlFocStateTransOplpStart disables the control if the state transition time-out is detected.
Called
Function
SWDDS.3.2.1.16 ActSlFocStateOplpStart
SWDDS.3.2.1.26 CheckSlFocSlTransCond
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 64
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling
Function
SWDDS.3.2.1.23 SetSlFocCurCtrPreChrg
SWDDS.3.2.1.21 DisableSlFocControl
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.19
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.19.2 Static View Design
1.1.1.1.19.3 Dynamic View Design
1. CheckSlFocStateTransOplpStart calls the sensorless running state transition condition checking.
2. CheckSlFocStateTransOplpStart calls the current control precharging at the sensorless FOC control state transition to the
sensorless running state.
3. CheckSlFocStateTransOplpStart calls the control disabling if the state transition time-out is occurred.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 65
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.19.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 checking_result SWDDS.3.2.1.26 IN tBool 0 1
Conidtion
does not
meet
Condition
meet
N/A
Sensorless
control
transition
checking
result
1.1.1.1.20 [SWDDS.3.2.1.20] CheckSlFocStateTransSlRun
1.1.1.1.20.1 Detailed Design
[SWDDS.3.2.1.20] CheckSlFocStateTransSlRun
Software Unit Information
Unit ID SWDDS.3.2.1.20 Unit Name CheckSlFocStateTransSlRun
Architecture ID SWADS.3.2.1.20 ASIL QM
Prototype void CheckSlFocStateTransSlRun( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 66
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables tBool g_bSlFocCtrEna
0 ~ 1
Disable / Enable
Read Control enable
tU16 g_u16SlFocFltSta 0 ~ 65535 Read/Write Fault status flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description State transition checking at sensorless running state
Control Flow Diagram
(or Pseudo Code)
1. CheckSlFocStateTransSlRun disables the sensorless FOC control if control disabling is set or fault is detected.
Called Function SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function SWDDS.3.2.1.21 DisableSlFocControl
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.20
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.20.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 67
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.20.3 Dynamic View Design
1. CheckSlFocStateTransSlRun calls the sensorless FOC control disabling under control disabled.
1.1.1.1.20.4 Interface Design
- N/A
1.1.1.1.21 [SWDDS.3.2.1.21] DisableSlFocControl
1.1.1.1.21.1 Detailed Design
[SWDDS.3.2.1.21] DisableSlFocControl
Software Unit Information
Unit ID SWDDS.3.2.1.21 Unit Name DisableSlFocControl
Architecture ID SWADS.3.2.1.21 ASIL QM
Prototype void DisableSlFocControl( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocPwmDuty.f16Arg1
0 ~ 32767
0 ~ 0.999969
Write
PWM duty setting : phase U
(PU)
tFrac16 g_stSlFocPwmDuty.f16Arg2
0 ~ 32767
0 ~ 0.999969
Write
PWM duty setting : phase V
(PU)
tFrac16 g_stSlFocPwmDuty.f16Arg3
0 ~ 32767
0 ~ 0.999969
Write
PWM duty setting : phase W
(PU)
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~ 5999.82rpm
Write Estimated electric speed (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
d/q-axis current output : daxis
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
d/q-axis current output : qaxis
(PU)
tFrac16 g_stSlFocCurOutPhs3.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
3-phase current output : phase
U (PU)
tFrac16 g_stSlFocCurOutPhs3.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
3-phase current output : phase
V (PU)
-32768 ~ 32767 3-phase current output : phase
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 68
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 g_stSlFocCurOutPhs3.f16Arg3
-64.5 ~ 64.498Apk
Write
W (PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg1
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write
d/q-axis control input : d-axis
(PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg2
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write
d/q-axis control input : q-axis
(PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write
alpha/beta-axis control input :
alpha-axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Write
alpha/beta-axis control input :
beta-axis (PU)
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Write
Elapse time count after state
entered
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Sensorless FOC state
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC control disabling
- Motor driver output turning off
- Variable initialization
- State transition to switching output off state
Control Flow
Diagram
(or Pseudo
Code)
1. DisableSlFocControl sets PWM duty as half value(0.5) and sets the PWM duty to output to the gate driver.
2. DisableSlFocControl sets the estimated electric speed, d/q-axis current output, 3-phase current output, d/q-axis control input
voltage and alpha/beta-axis control input voltage as 0.
3. DisableSlFocControl sets the elapse time count as 0 and sets the sensorless FOC control state as the switching off state.
Called Function
SWDDS.3.2.1.12 ActSlFocStateSwtcOff
SWDDS.3.2.1.13 ActSlFocStateOffsCalib
SWDDS.3.2.1.18 CheckSlFocStateTransInitAlign
SWDDS.3.2.1.19 CheckSlFocStateTransOplpStart
SWDDS.3.2.1.20 CheckSlFocStateTransSlRun
Calling Function
SWDDS.3.2.2.5 MtrDrv_SetPwmDuty
SWDDS.3.2.2.7 MtrDrv_DisPwmOut
Function
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 69
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Execution Time
Requirement Id SWDDS.3.2.1.21
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.21.2 Static View Design
1.1.1.1.21.3 Dynamic View Design
1. DisableSlFocControl calls the PWM duty setting to set the PWM duty as half value.
2. DisableSlFocControl calls the PWM output disabling.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 70
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.21.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pwm_duty SWDDS.3.2.2.5 OUT SWLIBS_3Syst_F16 16384 16384 0.5 0.5
0.0000305176
/ N/A
PWM duty
setting
1.1.1.1.22 [SWDDS.3.2.1.22] EnableSlFocControl
1.1.1.1.22.1 Detailed Design
[SWDDS.3.2.1.22] EnableSlFocControl
Software Unit Information
Unit ID SWDDS.3.2.1.22 Unit Name EnableSlFocControl
Architecture ID SWADS.3.2.1.22 ASIL QM
Prototype void EnableSlFocControl( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
Type
Name Range Read/Write Description
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
tFrac16 g_f16SlFocElecAng
-32768 ~ 32767
-180 ~ 179.995deg
Write Estimated electric angle (PU)
tFrac16 g_stSlFocRefCur.f16Arg1
0
0Apk
Write Reference current : d-axis (PU)
tFrac16 g_stSlFocRefCur.f16Arg2
-11430 ~ 11430
-22.5 ~ 22.5Apk
Write Reference current : q-axis (PU)
tFrac16 g_f16SlFocStartCur
0 ~ 10160
0 ~ 20.0Apk
Write
Open-loop starting current
magnitude (PU)
tFrac16 g_f16SlFocStartSpd
0 ~ 3276
0 ~ 600rpm
Write
Open-loop starting electric speed
(PU)
tFrac16 g_f16SlFocStartAng
-32768 ~ 32767
-180 ~ 179.995deg
Write
Open-loop starting electric angle
(PU)
tFrac16 g_f16SlFocAngDiff
-32768 ~ 32767
Write
Starting and estimated angle
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 71
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
-180 ~ 179.995deg difference (PU)
tU16 g_u16SlFocCondHoldCnt 0 ~ 65535 Write Condition hold time count
tU16 g_u16SlFocPhsCurOvrCntU 0 ~ 65535 Write U-phase current over count
tU16 g_u16SlFocPhsCurOvrCntV 0 ~ 65535 Write V-phase current over count
tU16 g_u16SlFocPhsCurOvrCntW 0 ~ 65535 Write W-phase current over count
tU16 g_u16SlFocPhsCurOvrCntD 0 ~ 65535 Write d-axis current over count
tU16 g_u16SlFocPhsCurOvrCntQ 0 ~ 65535 Write q-axis current over count
tU16 g_u16SlFocDcVoltOvrCnt 0 ~ 65535 Write DC driving voltage over count
tU16 g_u16SlFocDcVoltUndCnt 0 ~ 65535 Write DC driving voltage under count
tU16 g_u16SlFocRevRotCnt 0 ~ 65535 Write Reverse rotation detection count
tFrac32 g_hndSlFocPiCurCtrD.f32Acc
-2147483648 ~
2147483647
Read/Write
d-axis PI current control handler :
internal controller accumulator
tFrac32 g_hndSlFocPiCurCtrQ.f32Acc
-2147483648 ~
2147483647
Read/Write
q-axis PI current control handler :
internal controller accumulator
tFrac32 g_hndSlFocStartCurRamp.f32State
-2147483648 ~
2147483647
Write
Open-loop starting current ramp
state value
tFrac32 g_hndSlFocStartSpdRamp.f32State
-2147483648 ~
2147483647
Write
Open-loop starting speed ramp
state value
tFrac16 g_hndSlFocStartAngIntg.f16InK1 -32768 ~ 32767 Write
Open-loop starting angle integrator
: input value in step k-1
tFrac32 g_hndSlFocStartAngIntg.f32State
-2147483648 ~
2147483647
Write
Open-loop starting angle integrator
: state value
tFrac16 g_stSlFocPwmDuty.f16Arg1
0 ~ 32767
0 ~ 0.999969
Write PWM duty setting : argument1
tFrac16 g_stSlFocPwmDuty.f16Arg2
0 ~ 32767
0 ~ 0.999969
Write PWM duty setting : argument2
tFrac16 g_stSlFocPwmDuty.f16Arg3
0 ~ 32767
0 ~ 0.999969
Write PWM duty setting : argument3
tU16 g_u16SlFocStateElapCnt 0 ~ 65535 Write
Elapse time count after state
entered
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Write Sensorless FOC state
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16StartMinSpd
546
100rpm
Read Initial starting minimum speed
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC control enabling
- Fault clearing
- Variable initialization
- Open-loop starting ramp-up initialization
- Motor driver output turning on
- State transition to current sensor offset calibration state
1. EnableSlFocControl clears the gate driver fault.
2. EnableSlFocControl sets the estimated electric angle, reference current, open-loop starting related variables and fault checking
count as 0.
3. EnableSlFocControl sets the d/q-axis PI current control integrator as 0.
4. EnableSlFocControl sets the starting current ramping, the starting speed ramping and angle integrator as 0.
5. EnableSlFocControl sets the PMW duty as half value, sets the PWM duty to the gate driver and enables the PWM output.
6. EnableSlFocControl sets the elapse time as 0 and set the sensorless FOC control state as phase current offset calibration state.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 72
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.3.2.1.12 ActSlFocStateSwtcOff
Calling Function
SWDDS.3.2.2.8 MtrDrv_ClrGdrvFlt
SWDDS.3.6.14.5 GFLIB_ControllerPIrAWSetState_F16
SWDDS.3.6.14.13 MLIB_ShL_F32
SWDDS.3.2.2.5 MtrDrv_SetPwmDuty
SWDDS.3.2.2.6 MtrDrv_EnaPwmOut
Function
Execution Time
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 73
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.2.1.22
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.22.2 Static View Design
1.1.1.1.22.3 Dynamic View Design
1. EnableSlFocControl calls the gate driver fault clearing.
2. EnableSlFocControl calls PI control integrator setting to clear d/q-axis PI current control integrator.
3. EnableSlFocControl calls the PWM duty setting.
4. EnableSlFocControl calls the PWM output enabling.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 74
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.22.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1
f16Controller
PIrAWOut
SWDDS.3.6.14.5 OUT tFrac16 0 0 0.0 0.0
0.000775146
/ Vpk
Required
output of the
GFLIB
_ControllerPIrAW.
2 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
d-axis PI current
control handler
3
f16Controller
PIrAWOut
SWDDS.3.6.14.5 OUT tFrac16 0 0 0.0 0.0
0.000775146
/ Vpk
Required output
of the GFLIB
_ControllerPIrAW.
4 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A
q-axis PI current
control handler
5 f32In1 SWDDS.3.6.14.13 OUT tFrac32 546 546 100 100
0.183105 /
rpm
Initial starting
minimum speed
6 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A
The shift amount
value.
7
g_hndSlFoc
StartSpdRamp
.f32State
SWDDS.3.6.14.13 IN tFrac32 35782656 35782656 100 100
0.183105 /
rpm
Open-loop
starting speed
ramp state value
8 pwm_duty SWDDS.3.2.2.5 OUT
SWLIBS
_3Syst_F16
0 32767 0 0.999969
0.0000305176
/ N/A
PWM duty
setting
1.1.1.1.23 [SWDDS.3.2.1.23] SetSlFocCurCtrPreChrg
1.1.1.1.23.1 Detailed Design
[SWDDS.3.2.1.23] SetSlFocCurCtrPreChrg
Software Unit Information
Unit ID SWDDS.3.2.1.23 Unit Name SetSlFocCurCtrPreChrg
Architecture ID SWADS.3.2.1.23 ASIL QM
Prototype void SetSlFocCurCtrPreChrg( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac32 g_hndSlFocPiCurCtrD.f32Acc
-2147483648 ~
2147483647
Read/Write
d-axis PI current control handler : internal
controller accumulator
tFrac32 g_hndSlFocPiCurCtrQ.f32Acc
-2147483648 ~
2147483647
Read/Write
q-axis PI current control handler : internal
controller accumulator
Data
Type
Name Range Read/Write Description
tBool par_bStartCurPreChrgEna
1
Read
Current control integrator pre-charge
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 75
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters Enable enable
tFrac16 par_f16StartCurPreChrgD
-19
-0.0006
Read
d-axis current control integrator precharge
tFrac16 par_f16StartCurPreChrgQ
1212
0.037
Read
q-axis current control integrator precharge
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current control integrator pre-charging at sensorless control transition
Control Flow
Diagram
(or Pseudo Code)
1. SetSlFocCurCtrPreChrg sets the d/q-axis PI current control integrator as precharing values if the current control precharging
is enabled.
Called Function SWDDS.3.2.1.19 CheckSlFocStateTransOplpStart
Calling Function SWDDS.3.6.14.5 GFLIB_ControllerPIrAWSetState_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.23
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.23.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 76
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.23.3 Dynamic View Design
1. SetSlFocCurCtrPreChrg calls the PI control integrator setting to precharge the integrator as setting values.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 77
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.23.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16ControllerPIrAWOut SWDDS.3.6.14.5 OUT tFrac16 -19 -19 -19 -19 N/A
d-axis
current
control
integrator
pre-charge
2 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB_CONTROLLER
_PIAW_R_T_F16 *
N/A N/A N/A N/A N/A
d-axis PI
current
control
handler
3 f16ControllerPIrAWOut SWDDS.3.6.14.5 OUT tFrac16 1212 1212 1212 1212 N/A
q-axis
current
control
integrator
pre-charge
4 pParam SWDDS.3.6.14.5 IN/OUT
GFLIB_CONTROLLER
_PIAW_R_T_F16 *
N/A N/A N/A N/A N/A
q-axis PI
current
control
handler
1.1.1.1.24 [SWDDS.3.2.1.24] SetSlFocAngTrackObsrvPreChrg
1.1.1.1.24.1 Detailed Design
[SWDDS.3.2.1.24] SetSlFocAngTrackObsrvPreChrg
Software Unit Information
Unit ID SWDDS.3.2.1.24 Unit Name SetSlFocAngTrackObsrvPreChrg
Architecture ID SWADS.3.2.1.24 ASIL QM
Prototype void SetSlFocAngTrackObsrvPreChrg( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
Type
Name Range Read/Write Description
tFrac16 g_f16SlFocStartSpd
0 ~ 3276
0 ~ 600rpm
Read/Write
Open-loop starting electric speed
(PU)
tFrac16 g_f16SlFocStartAng
-32768 ~ 32767
-180 ~
179.995deg
Read/Write
Open-loop starting electric angle
(PU)
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~
5999.82rpm
Read/Write Estimated electric speed (PU)
tFrac16 g_f16SlFocElecAng
-32768 ~ 32767
-180 ~
179.995deg
Read/Write Estimated electric angle (PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write
alpha/beta-axis current output :
alpha-axis (PU)
-32768 ~ 32767 alpha/beta-axis current output :
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 78
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tFrac16 g_stSlFocCurOutAlbe.f16Arg2
-64.5 ~ 64.498Apk
Read/Write
beta axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read/Write
alpha/beta-axis control input :
alpha-axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read/Write
alpha/beta-axis control input :
beta-axis (PU)
tFrac32 g_hndSlFocBackEmfObsrv.pParamD.f32Acc
-2147483648 ~
2147483647
Read/Write
Back-EMF observer handler : daxis
controller accumulator
tFrac32 g_hndSlFocBackEmfObsrv.pParamQ.32Acc
-2147483648 ~
2147483647
Read/Write
Back-EMF observer handler : qaxis
integrator accumulator
tFrac32 g_hndSlFocAngTrackObsrv.pParamPI.f32Acc
-2147483648 ~
2147483647
Read/Write
Angle tracking observer handler :
controller accumulator
tFrac32 g_hndSlFocAngTrackObsr.pParamInteg.32Acc
-2147483648 ~
2147483647
Read/Write
Angle tracking observer handler :
integrator accumulator
tFrac32 g_hndSlFocElecSpdFiltf.32Acc
-2147483648 ~
2147483647
Read/Write
Electric speed filtering handler :
filter accumulator
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Estimated electric angle and speed pre-charging at open-loop starting
- Estimated electric angle and speed setting with starting values
- Back-EMF observer pre-charging
- Angle tracking observer pre-charging
- Electric speed filtering pre-charging
Control Flow
Diagram
(or Pseudo
Code)
1. SetSlFocAngTrackObsrvPreChrg sets the estimated electric angle as the starting electric angle.
2. SetSlFocAngTrackObsrvPreChrg sets the estimated electric speed as the starting electric speed.
3. SetSlFocAngTrackObsrvPreChrg sets the back EMF observer as the starting electric angle and speed.
4. SetSlFocAngTrackObsrvPreChrg sets the angle tracking observer as the starting electric angle and speed.
5. SetSlFocAngTrackObsrvPreChrg sets the speed filtering as the starting electric speed.

Called Function SWDDS.3.2.1.16 ActSlFocStateOplpStart
Calling Function
SWDDS.3.6.14.23 AMCLIB_BemfObsrvDQSetState_F16
SWDDS.3.6.14.24 AMCLIB_TrackObsrvSetState_F16
SWDDS.3.6.14.10 GDFLIB_FilterMASetState_F16
Function
Execution Time
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 79
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.2.1.24
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.24.2 Static View Design
1.1.1.1.24.3 Dynamic View Design
1. SetSlFocAngTrackObsrvPreChrg calls the back EMF observer state setting to precharge the starting electric angle and speed.
2. SetSlFocAngTrackObsrvPreChrg calls the angle tracking observer state setting to precharge the starting electric angle and
speed.
3. SetSlFocAngTrackObsrvPreChrg calls the filter state setting to precharge the starting electric speed.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 80
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.24.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pIAB SWDDS.3.6.14.23 OUT
SWLIBS_2Syst_F16
*
-32767 32768 -64.5 64.4980
0.00196838
/ Apk
alpha/betaaxis
current
output
2 pUAB SWDDS.3.6.14.23 OUT
SWLIBS_2Syst_F16
*
-32767 32768 -25.4 25.4
0.000775146
/ Vpk
alpha/betaaxis
control
input
3 f16Velocity SWDDS.3.6.14.23 OUT tFrac16 0 32768 0.0 5999.82
0.183105 /
rpm
Open-loop
starting
electric
speed
4 f16Phase SWDDS.3.6.14.23 OUT tFrac16 -32768 32768 -180 179.995
0.00549316
/ deg
Open-loop
starting
electric
angle
5 pCtrl SWDDS.3.6.14.23 IN/OUT
AMCLIB_BEMF
_OBSRV_DQ_T_F16
*
N/A N/A N/A N/A N/A
Back-EMF
observer
handler
6 f16PosOut SWDDS.3.6.14.24 OUT tFrac16 -32768 32768 -180 179.995
0.00549316
/ deg
Estimated
electric
angle
7 f16VelocityOut SWDDS.3.6.14.24 OUT tFrac16 0 32768 0.0 5999.82
0.183105 /
rpm
Estimated
electric
speed
8 pCtrl SWDDS.3.6.14.24 IN/OUT
AMCLIB_TRACK
_OBSRV_T_F16 *
N/A N/A N/A N/A N/A
Angle
tracking
observer
handler
9 f16FilterMAOut SWDDS.3.6.14.10 OUT tFrac16 0 32768 0.0 5999.82
0.183105 /
rpm
Open-loop
starting
electric
speed
10 pParam SWDDS.3.6.14.10 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Electric
speed
filtering
handler
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 81
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.25 [SWDDS.3.2.1.25] CheckSlFocOffsRngErr
1.1.1.1.25.1 Detailed Design
[SWDDS.3.2.1.25] CheckSlFocOffsRngErr
Software Unit Information
Unit ID SWDDS.3.2.1.25 Unit Name CheckSlFocOffsRngErr
Architecture ID SWADS.3.2.1.25 ASIL QM
Prototype tBool CheckSlFocOffsRngErr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call Data Type Possible Return Value Description
Return Value tBool
0 ~ 1
No error / Error
FALSE - no error, TRUE - error
(range over)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocCurOffs.f16Arg1
-32767 ~
32768
-5.0 ~
4.99985Vpk
Read
Current sensor
offset :
sensor 0 (PU)
tFrac16 g_stSlFocCurOffs.f16Arg2
-32767 ~
32768
-5.0 ~
4.99985Vpk
Read
Current sensor
offset :
sensor 1 (PU)
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16CurSigOffsOvrThrs
5734
0.875Vpk
Read
Current sensor
offset range over
threshold (PU)
tFrac16 par_f16CurSigOffsUndThrs
-5734
-0.875Vpk
Read
Current sensor
offset range
under threshold
(PU)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current sensor offset range error checking
1. CheckSlFocOffsRngErr checks if the first phase current offset is over or under the specific
range.
2. CheckSlFocOffsRngErr checks if the second phase current offset is over or under the
specific range.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 82
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.3.2.1.13 ActSlFocStateOffsCalib
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.25
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 83
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.25.2 Static View Design
1.1.1.1.25.3 Dynamic View Design
1.1.1.1.25.4 Interface Design
- N/A
1.1.1.1.26 [SWDDS.3.2.1.26] CheckSlFocSlTransCond
1.1.1.1.26.1 Detailed Design
[SWDDS.3.2.1.26] CheckSlFocSlTransCond
Software Unit Information
Unit ID SWDDS.3.2.1.26 Unit Name CheckSlFocSlTransCond
Architecture ID SWADS.3.2.1.26 ASIL QM
Prototype tBool CheckSlFocSlTransCond( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool
0 ~ 1
Conidtion not meet / Condition meet
FALSE - condition does not meet, TRUE - condition meet
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16SlFocStartSpd
0 ~ 3276
0 ~ 600rpm
Read Open-loop starting electric speed (PU)
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~ 5999.82rpm
Read Estimated electric speed (PU)
tU16 g_u16SlFocCondHoldCnt 0 ~ 65535 Read/Write Condition hold time count
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16StartMaxSpd
3276
600rpm
Read Initial starting maximum speed (PU)
tFrac16 par_f16StartSlCtrSpdThrs
1911
350rpm
Read Sensorless control transition speed (PU)
tU16 par_u16StartHoldCnt 25 Read Condition hold time count
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensorless control transition condition checking
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 84
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
1. CheckSlFocSlTransCond checks if the starting speed is reached to specific speed.
2. CheckSlFocSlTransCond checks the estimated electric speed is continuously greater than or equal to specified threshold for
given hold count.

Called Function SWDDS.3.2.1.19 CheckSlFocStateTransOplpStart
Calling Function SWDDS.3.6.14.32 MLIB_MulSat_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.26
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.26.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 85
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.26.3 Dynamic View Design
1. CheckSlFocSlTransCond calls the fixed-point arithmetic multiplication function.
1.1.1.1.26.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.32 OUT tFrac16 32,440 32,440 0.99 0.99 N/A
Maximum
open-loop
speed
reaching
detection
speed ratio
2 f16In2 SWDDS.3.6.14.32 OUT tFrac16 3276 3276 600 600
0.183105 /
rpm
Initial
starting
maximum
speed
Fractional
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 86
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3 f16Out SWDDS.3.6.14.32 IN tFrac16 3233 3233 594 594
0.183105 /
rpm
multiplication
of the input
arguments
1.1.1.1.27 [SWDDS.3.2.1.27] MeasureSlFocDcVolt
1.1.1.1.27.1 Detailed Design
[SWDDS.3.2.1.27] MeasureSlFocDcVolt
Software Unit Information
Unit ID SWDDS.3.2.1.27 Unit Name MeasureSlFocDcVolt
Architecture ID SWADS.3.2.1.27 ASIL QM
Prototype void MeasureSlFocDcVolt( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tBool g_bSlFocFirstDcVoltMeasr
0 ~ 1
Normal / First
measurement
Read/Write
First DC driving voltage
measurement
tFrac16 g_f16SlFocDcVolt
0 ~ 32767
0 ~ 25.3992Vpk
Write DC driving voltage (PU)
tFrac16 g_hndSlFocDcVoltFilt.f16FiltBufferX[0] -32768 ~ 32768 Write
DC driving voltage filtering
: Input buffer of an IIR1 filter
tFrac32 g_hndSlFocDcVoltFilt.f32FiltBufferY[0]
-2147483648 ~
2147483647
Write
DC driving voltage filtering
: Internal accumulator buffer
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC driving voltage measurement
Control Flow
Diagram
(or Pseudo Code)
1. MeasureSlFocDcVolt gets the measured DC driving voltage.
2. MeasureSlFocDcVolt filters the measured DC driving voltage after the first measurement.
3. MeasureSlFocDcVolt sets the internal state and output of the filter as the measured DC driving voltage at the first
measurement.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 87
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.2.2 MtrDrv_GetDcVolt
SWDDS.3.6.14.8 GDFLIB_FilterIIR1_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.27
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.27.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 88
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.27.3 Dynamic View Design
1. MeasureSlFocDcVolt calls the DC driving voltage measurement.
2. MeasureSlFocDcVolt calls the filter state setting to set the initial DC driving voltage to reduce filter settling time.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 89
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.27.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.8 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Measured
DC driving
voltage
2 pParam SWDDS.3.6.14.8 IN/OUT
GDFLIB_FILTER_IIR1_T_F16
*
N/A N/A N/A N/A N/A
DC driving
voltage
filtering
handler
3 g_f16SlFocDcVolt SWDDS.3.6.14.8 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
DC driving
voltage
4 dc_voltage SWDDS.3.2.2.2 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Measured
DC driving
voltage (PU)
1.1.1.1.28 [SWDDS.3.2.1.28] MeasureSlFocPhsCur
1.1.1.1.28.1 Detailed Design
[SWDDS.3.2.1.28] MeasureSlFocPhsCur
Software Unit Information
Unit ID SWDDS.3.2.1.28 Unit Name MeasureSlFocPhsCur
Architecture ID SWADS.3.2.1.28 ASIL QM
Prototype void MeasureSlFocPhsCur( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocCurOutPhs3.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write 3-phase current output : phase U (PU)
tFrac16 g_stSlFocCurOffs.f16Arg1
-5734 ~ 5734
-0.875 ~ 0.875Vpk
Read Current sensor offset : sensor 0
tFrac16 g_stSlFocCurOutPhs3.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write 3-phase current output : phase V (PU)
tFrac16 g_stSlFocCurOffs.f16Arg2
-5734 ~ 5734
-0.875 ~ 0.875Vpk
Read Current sensor offset : sensor 1
tFrac16 g_stSlFocCurOutPhs3.f16Arg3
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write 3-phase current output : phase W (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Phase current measurement
- Current sense amplifier signal measurement
- Current conversion from 2 sense signal to 3-phase current
1. MeasureSlFocPhsCur gets the 3-phase current.
2. MeasureSlFocPhsCur sets the phase U current as the first offset compensated measured current.
3. MeasureSlFocPhsCur sets the phase V current as the second offset compensated measured current if reverse direction
setting is false.
4. MeasureSlFocPhsCur calculates the phase W current if reverse direction setting is false.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 90
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
5. MeasureSlFocPhsCur sets the phase W current as the second offset compensated measured current if reverse direction
setting is true.
6. MeasureSlFocPhsCur calculates the phase V current if reverse direction setting is true.

Called Function
SWDDS.3.2.1.15 ActSlFocStateInitAlign
SWDDS.3.2.1.16 ActSlFocStateOplpStart
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.2.2.3 MtrDrv_GetPhsCur
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.33 MLIB_AddSat_F16
SWDDS.3.6.14.38 MLIB_Neg_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.28
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 91
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.28.2 Static View Design
1.1.1.1.28.3 Dynamic View Design
1. MeasureSlFocPhsCur calls the phase current measurement.
2. MeasureSlFocPhsCur calls the fixed-point arithmetic functions for addition, subtraction and negative.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 92
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.28.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 phase_current SWDDS.3.2.2.3 IN SWLIBS_2Syst_F16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal
2 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument1
3 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
sensor
offset :
argument1
4
g_stSlFocCurOutPhs3
.f16Arg1
SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument1
5 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument2
6 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
sensor
offset :
argument2
7
g_stSlFocCurOutPhs3
.f16Arg2
SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
8 f16In1 SWDDS.3.6.14.33 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument1
9 f16In2 SWDDS.3.6.14.33 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
10
g_stSlFocCurOutPhs3
.f16Arg3
SWDDS.3.6.14.33 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
11 f16In1 SWDDS.3.6.14.38 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
12
g_stSlFocCurOutPhs3
.f16Arg3
SWDDS.3.6.14.38 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
13 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument2
14 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
sensor
offset :
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 93
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
argument2
15
g_stSlFocCurOutPhs3
.f16Arg3
SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
16 f16In1 SWDDS.3.6.14.33 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument1
17 f16In2 SWDDS.3.6.14.33 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
18
g_stSlFocCurOutPhs3
.f16Arg2
SWDDS.3.6.14.33 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
19 f16In1 SWDDS.3.6.14.38 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
20
g_stSlFocCurOutPhs3
.f16Arg2
SWDDS.3.6.14.38 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
1.1.1.1.29 [SWDDS.3.2.1.29] CalibrateSlFocCurOffs
1.1.1.1.29.1 Detailed Design
[SWDDS.3.2.1.29] CalibrateSlFocCurOffs
Software Unit Information
Unit ID SWDDS.3.2.1.29 Unit Name CalibrateSlFocCurOffs
Architecture ID SWADS.3.2.1.29 ASIL QM
Prototype void CalibrateSlFocCurOffs( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tBool g_bSlFocFirstCurMeasr
0 ~ 1
Normal / First
measurement
Read/Write First current measurement
tFrac16 g_stSlFocCurOffs.f16Arg1 -5734 ~ 5734 Write Current sensor offset : sensor 0
tFrac32 g_hndSlFocOffsFilt0.f32Acc -32768 ~ 32767 Read/Write
Current sensor 0 offset filtering handler :
filter accumulator
tFrac16 g_stSlFocCurOffs.f16Arg2 -5734 ~ 5734 Write Current sensor offset : sensor 1
tFrac32 g_hndSlFocOffsFilt1.f32Acc -32768 ~ 32767 Read/Write
Current sensor 1 offset filtering handler :
filter accumulator
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 94
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Current sensor offset calibration
- Current sense amplifier signal measurement
- Current sense amplifier signal(offset) filtering
Control Flow
Diagram
(or Pseudo Code)
1. CalibrateSlFocCurOffs gets the measured phase current.
2. CalibrateSlFocCurOffs filters the phase current after the first measurement.
3. CalibrateSlFocCurOffs sets the filter state as the measured phase current at the first measurement.
Called Function SWDDS.3.2.1.13 ActSlFocStateOffsCalib
Calling Function
SWDDS.3.2.2.3 MtrDrv_GetPhsCur
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.3.6.14.10 GDFLIB_FilterMASetState_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.29
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 95
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.29.2 Static View Design
1.1.1.1.29.3 Dynamic View Design
1. CalibrateSlFocCurOffs calls the moving average filter.
2. CalibrateSlFocCurOffs calls the moving average filter state setting to substitute the filtered output as the first measured signal.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 96
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.29.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 phase_current SWDDS.3.2.2.3 IN SWLIBS_2Syst_F16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal
2 f16In SWDDS.3.6.14.9 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument1
3 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Current
sensor 0
offset
filtering
handler
4
g_stSlFocCurOffs
.f16Arg1
SWDDS.3.6.14.9 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
sensor
offset :
argument1
5 f16In SWDDS.3.6.14.9 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument2
GDFLIB_FILTER
Current
sensor 1
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 97
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
6 pParam SWDDS.3.6.14.9 IN/OUT
_MA_T_F16 *
N/A N/A N/A N/A N/A offset
filtering
handler
7
g_stSlFocCurOffs
.f16Arg2
SWDDS.3.6.14.9 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
sensor
offset :
argument2
8 f16FilterMAOut SWDDS.3.6.14.10 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument1
9 pParam SWDDS.3.6.14.10 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Current
sensor 0
offset
filtering
handler
10 f16FilterMAOut SWDDS.3.6.14.10 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Measured
current
sense
amplifier
signal :
argument2
11 pParam SWDDS.3.6.14.10 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Current
sensor 1
offset
filtering
handler
1.1.1.1.30 [SWDDS.3.2.1.30] ConvertSlFocClarkTrnsf
1.1.1.1.30.1 Detailed Design
[SWDDS.3.2.1.30] ConvertSlFocClarkTrnsf
Software Unit Information
Unit ID SWDDS.3.2.1.30 Unit Name ConvertSlFocClarkTrnsf
Architecture ID SWADS.3.2.1.30 ASIL QM
Prototype void ConvertSlFocClarkTrnsf( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocCurOutAlbe.f16Arg1
-32768 ~ 32767
-64.5 ~
64.498Apk
Write
alpha/beta-axis current output : alpha-axis
(PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Write
alpha/beta-axis current output : beta-axis
(PU)
tFrac16 g_stSlFocCurOutPhs3.f16Arg1
-32768 ~ 32767
-64.5 ~
64.498Apk
Read 3-phase current output : phase U (PU)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 98
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 g_stSlFocCurOutPhs3.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Read 3-phase current output : phase V (PU)
tFrac16 g_stSlFocCurOutPhs3.f16Arg3
-32768 ~ 32767
-64.5 ~
64.498Apk
Read 3-phase current output : phase W (PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Clark transformation
Control Flow Diagram
(or Pseudo Code)
1. ConvertSlFocClarkTrnsf converts the 3-phase current to the alpha/beta-axis current using Clark transformation.

Called Function
SWDDS.3.2.1.15 ActSlFocStateInitAlign
SWDDS.3.2.1.16 ActSlFocStateOplpStart
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function SWDDS.3.6.14.11 GMCLIB_Clark
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.30
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.30.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 99
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.30.3 Dynamic View Design
1. ConvertSlFocClarkTrnsf calls the Clark transformation.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 100
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.30.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pIn SWDDS.3.6.14.11 OUT
const
SWLIBS_3Syst_
F16 *
-32767 32768 -64.5 64.4980
0.00196838
/ Apk
alpha/betaaxis
current
output (PU)
2 pOut SWDDS.3.6.14.11 IN
SWLIBS_2Syst_F16
*
-32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output (PU)
1.1.1.1.31 [SWDDS.3.2.1.31] CalculateSlFocStartCur
1.1.1.1.31.1 Detailed Design
[SWDDS.3.2.1.31] CalculateSlFocStartCur
Software Unit Information
Unit ID SWDDS.3.2.1.31 Unit Name CalculateSlFocStartCur
Architecture ID SWADS.3.2.1.31 ASIL QM
Prototype void CalculateSlFocStartCur( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac32 g_hndSlFocStartCurRamp.f32State
0 ~
665845760
Read
Open-loop starting current ramping handler :
Ramp state value
tFrac16 g_f16SlFocStartCur
0 ~ 10160
0 ~ 20.0Apk
Write Open-loop starting current magnitude (PU)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16StartExcCur
10160
20.0Apk
Read Initial starting excitation current (PU)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Magnitude of open-loop starting current calculation
- Starting current ramping up
1. CalculateSlFocStartCur calculates the ramped magnitude of the starting current using ramping function.
2. CalculateSlFocStartCur shifts bit by 16, before and after the ramp calculation to increase the resolution.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 101
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.3.2.1.14 RunSlFocStateAlignOplp
Calling Function
SWDDS.3.6.14.13 MLIB_ShL_F32
SWDDS.3.6.14.14 GFLIB_Ramp_F32
SWDDS.3.6.14.15 MLIB_ShR_F32
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.31
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.31.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 102
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.31.3 Dynamic View Design
1. CalculateSlFocStartCur calls the fixed-point arithmetic function to shift bits.
2. CalculateSlFocStartCur calls the ramp function to calculate ramped magnitude of the start current.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 103
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.31.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f32In1 SWDDS.3.6.14.13 OUT tFrac32 10160 10160 20.0 20.0
0.00196838
/ Apk
Initial
starting
excitation
current
2 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A
The shift
amount
value.
3 starting_current SWDDS.3.6.14.13 IN tFrac32 665845760 665845760 20.0 20.0
0.00196838
/ Apk
Ramped
magnitude
of starting
current
4 f32In SWDDS.3.6.14.14 OUT tFrac32 665845760 665845760 20.0 20.0
0.00196838
/ Apk
Ramped
magnitude
of starting
current
5 pParam SWDDS.3.6.14.14 IN/OUT
GFLIB_RAMP
_T_F32 *
N/A N/A N/A N/A N/A
Open-loop
starting
current
ramping
handler
6 starting_current SWDDS.3.6.14.14 IN tFrac32 0 665845760 0.0 20.0
0.00196838
/ Apk
Ramped
magnitude
of starting
current
7 f32In1 SWDDS.3.6.14.15 OUT tFrac32 0 665845760 0.0 20.0
0.00196838
/ Apk
Ramped
magnitude
of starting
current
8 u16In2 SWDDS.3.6.14.15 OUT tU16 16 16 16 16 N/A
The shift
amount
value.
9 starting_current SWDDS.3.6.14.15 IN tFrac32 0 10160 0.0 20.0
0.00196838
/ Apk
Ramped
magnitude
of starting
current
1.1.1.1.32 [SWDDS.3.2.1.32] CalculateSlFocStartAng
1.1.1.1.32.1 Detailed Design
[SWDDS.3.2.1.32] CalculateSlFocStartAng
Software Unit Information
Unit ID SWDDS.3.2.1.32 Unit Name CalculateSlFocStartAng
Architecture ID SWADS.3.2.1.32 ASIL QM
Prototype void CalculateSlFocStartAng( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 104
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data
Type
Name Range Read/Write Description
tFrac32 g_hndSlFocStartSpdRamp.f32State 0 ~ 214695936 Read/Write
Open-loop starting speed
ramping handler
tFrac16 g_f16SlFocStartSpd
0 ~ 3276
0 ~ 600rpm
Read/Write
Open-loop starting electric speed
(PU)
tFrac16 g_f16SlFocStartAng
-32768 ~ 32767
-180 ~ 179.995deg
Write
Open-loop starting electric angle
(PU)
tFrac32 g_hndSlFocStartAngIntg.f32State
-2147483648 ~
2147483647
Read/Write
Open-loop starting angle
integrator handler
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16StartMaxSpd
3276
600rpm
Read Initial starting maximum speed
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Open-loop starting electric speed and angle calculation
Control Flow
Diagram
(or Pseudo Code)
1. CalculateSlFocStartAng calculates the ramped starting electric speed using ramping function.
2. CalculateSlFocStartAng shifts bit by 16, before and after the ramp calculation to increase the resolution.
3. CalculateSlFocStartAng integrates the start electric speed to calculate the electric angle.

Called Function SWDDS.3.2.1.14 RunSlFocStateAlignOplp
Calling Function
SWDDS.3.6.14.13 MLIB_ShL_F32
SWDDS.3.6.14.14 GFLIB_Ramp_F32
SWDDS.3.6.14.15 MLIB_ShR_F32
SWDDS.3.6.14.16 GFLIB_IntegratorTR_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.32
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 105
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.32.2 Static View Design
1.1.1.1.32.3 Dynamic View Design
1. CalculateSlFocStartAng calls the fixed-point arithmetic function to shift bits.
2. CalculateSlFocStartAng calls the ramping function to increase the starting electric speed gradually.
3. CalculateSlFocStartAng calls the integration function to calculate the starting electric angle.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 106
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.32.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f32In1 SWDDS.3.6.14.13 OUT tFrac32 3276 3276 600 600
0.183105 /
rpm
Initial
starting
maximum
speed
2 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A
The shift
amount
value.
3 starting_speed SWDDS.3.6.14.13 IN tFrac32 214695936 214695936 600 600
0.183105 /
rpm
Ramped
starting
speed
4 f32In SWDDS.3.6.14.14 OUT tFrac32 214695936 214695936 600 600
0.183105 /
rpm
Ramped
starting
speed
5 pParam SWDDS.3.6.14.14 IN/OUT
GFLIB_RAMP
_T_F32 *
N/A N/A N/A N/A N/A
Open-loop
starting
speed
ramping
handler
6 starting_speed SWDDS.3.6.14.14 IN tFrac32 0 214695936 0 600
0.183105 /
rpm
Ramped
starting
speed
7 f32In1 SWDDS.3.6.14.15 OUT tFrac32 0 214695936 0 600
0.183105 /
rpm
Ramped
starting
speed
8 u16In2 SWDDS.3.6.14.15 OUT tU16 16 16 16 16 N/A
The shift
amount
value.
9 f16In SWDDS.3.6.14.16 OUT tFrac16 0 3276 600 600
0.183105 /
rpm
Open-loop
starting
electric
speed
10 pParam SWDDS.3.6.14.16 OUT
GFLIB
_INTEGRATOR
_TR_T_F16 *
N/A N/A N/A N/A N/A
Open-loop
starting
angle
integrator
handler
11 g_f16SlFocStartAng SWDDS.3.6.14.16 IN tFrac32 -32768 32768 -180 179.995
0.00549316
/ deg
Open-loop
starting
electric
angle
12 starting_speed SWDDS.3.6.14.15 IN tFrac32 0 214748365 0 600 N/A
Starting
speed (PU)
1.1.1.1.33 [SWDDS.3.2.1.33] CalculateSlFocCurErrAlbe
1.1.1.1.33.1 Detailed Design
[SWDDS.3.2.1.33] CalculateSlFocCurErrAlbe
Software Unit Information
Unit ID SWDDS.3.2.1.33 Unit Name CalculateSlFocCurErrAlbe
Architecture ID SWADS.3.2.1.33 ASIL QM
Prototype void CalculateSlFocCurErrAlbe( void )
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 107
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_f16SlFocStartAng
-32768 ~ 32767
-180 ~
179.995deg
Read Open-loop starting electric angle (PU)
tFrac16 g_f16SlFocStartCur
0 ~ 10160
0 ~ 20.0Apk
Read
Open-loop starting current magnitude
(PU)
tFrac16 g_stSlFocCurErr.f16Arg1
-32768 ~ 32767
-64.5 ~
64.498Apk
Write Current control error : alpha-axis (PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read
alpha/beta-axis current output : alphaaxis
(PU)
tFrac16 g_stSlFocCurErr.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Write Current control error : beta-axis (PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read
alpha/beta-axis current output : betaaxis
(PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Alpha/beta-axis current control error calculation
- sin and cos value of starting electric angle calculation
- alpha/beta-axis reference current calculation
- alpha/beta-axis current control error calculation
Control Flow
Diagram
(or Pseudo Code)
1. CalculateSlFocCurErrAlbe calculates the sin and cos value of the starting electric angle.
2. CalculateSlFocCurErrAlbe calculates the alpha/beta-axis reference current from the sin and cos value and the magnitude of
the starting current.
3. CalculateSlFocCurErrAlbe calculates the alpha/beta-axis current control error by subtracting the feedback current from the
reference current.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 108
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.1.14 RunSlFocStateAlignOplp
Calling Function
SWDDS.3.6.14.17 GFLIB_Sin
SWDDS.3.6.14.18 GFLIB_Cos
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.34 MLIB_SubSat_F16
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.33
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 109
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.33.2 Static View Design
1.1.1.1.33.3 Dynamic View Design
1. CalculateSlFocCurErrAlbe calls the fixed-point arithmetic to calculate sin and cos value of the starting electric angle.
2. CalculateSlFocCurErrAlbe calls the fixed-point arithmetic to calculate current control error using subtraction.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 110
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.33.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.17 OUT tFrac16 -32768 32768 -180 179.995
0.00549316 /
deg
Open-loop
starting
electric
angle
2 sin_theta SWDDS.3.6.14.17 IN tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin value of
starting
electric
angle
3 f16In SWDDS.3.6.14.18 OUT tFrac16 -32768 32768 -180 179.995
0.00549316 /
deg
Open-loop
starting
electric
angle
4 cos_theta SWDDS.3.6.14.18 IN tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
cos value of
starting
electric
angle
5 f16In1 SWDDS.3.6.14.32 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
Open-loop
starting
current
magnitude
6 f16In2 SWDDS.3.6.14.32 OUT tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
cos value of
starting
electric
angle
7 reference_current.f16Arg1 SWDDS.3.6.14.32 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
reference
current :
argument1
8 f16In1 SWDDS.3.6.14.32 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
Open-loop
starting
current
magnitude
9 f16In2 SWDDS.3.6.14.32 OUT tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin value of
starting
electric
angle
10 reference_current.f16Arg2 SWDDS.3.6.14.32 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
reference
current :
argument2
11 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
reference
current :
argument1
12 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
current
output :
argument1
13 g_stSlFocCurErr.f16Arg1 SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
Current
control error
: argument1
14 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
reference
current :
argument2
15 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
current
output :
argument2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 111
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
16 g_stSlFocCurErr.f16Arg2 SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
Current
control error
: argument2
17 pParam SWDDS.3.6.14.17 OUT
const
GFLIB_SIN_T_
F16 *const
-32768 32767 -1 0.999969 N/A
sin value of
electric
angle
18 pParam SWDDS.3.6.14.18 OUT
const
GFLIB_COS_T_
F16 *const
-32768 32767 -1 0.999969 N/A
cos value of
electric
angle
1.1.1.1.34 [SWDDS.3.2.1.34] RunSlFocSlObsrv
1.1.1.1.34.1 Detailed Design
[SWDDS.3.2.1.34] RunSlFocSlObsrv
Software Unit Information
Unit ID SWDDS.3.2.1.34 Unit Name RunSlFocSlObsrv
Architecture ID SWADS.3.2.1.34 ASIL QM
Prototype void RunSlFocSlObsrv( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocCurOutAlbe.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
alpha/beta-axis current output :
alpha-axis (PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
alpha/beta-axis current output :
beta-axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read
alpha/beta-axis control input :
alpha-axis (PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read
alpha/beta-axis control input :
beta-axis (PU)
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~
5999.82rpm
Read Estimated electric speed (PU)
tFrac16 g_f16SlFocElecAng
-32768 ~ 32767
-180 ~ 179.995deg
Read Estimated electric angle (PU)
tFrac32 g_hndSlFocBackEmfObsrv.pParamD.f32Acc
-2147483648 ~
2147483647
Read/Write
Back-EMF observer handler : daxis
controller accumulator
tFrac32 g_hndSlFocBackEmfObsrv.pParamQ.32Acc
-2147483648 ~
2147483647
Read/Write
Back-EMF observer handler : qaxis
integrator accumulator
tFrac32 g_hndSlFocAngTrackObsrv.pParamPI.f32Acc
-2147483648 ~
2147483647
Read/Write
Angle tracking observer handler :
controller accumulator
tFrac32 g_hndSlFocAngTrackObsr.pParamInteg.32Acc
-2147483648 ~
2147483647
Read/Write
Angle tracking observer handler :
integrator accumulator
tFrac32 g_hndSlFocElecSpdFiltf.32Acc
-2147483648 ~
2147483647
Read/Write
Electric speed filtering handler :
filter accumulator
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 112
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless observer running
- Estimation error calculation using back-EMF observer
- Electric speed and angle estimation using angle tracking observer
- Estimated electric speed filtering
Control Flow
Diagram
(or Pseudo
Code)
1. RunSlFocSlObsrv calculates the estimation error using back EMF observer.
2. RunSlFocSlObsrv estimates the electric angle and speed using the angle tracking observer.
3. RunSlFocSlObsrv filters the estimated electric speed using the moving average filter.
Called Function
SWDDS.3.2.1.16 ActSlFocStateOplpStart
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.6.14.25 AMCLIB_BemfObsrvDQ_F16
SWDDS.3.6.14.26 AMCLIB_TrackObsrv_F16
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.34
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 113
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.34.2 Static View Design
1.1.1.1.34.3 Dynamic View Design
1. RunSlFocSlObsrv calls the back EMF observer to calculate the estimation error.
2. RunSlFocSlObsrv calls the angle tracking observer to estimate the electric angle and electric speed.
3. RunSlFocSlObsrv calls the moving average filter to filter the estimated electric spe
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 114
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.34.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pIAB SWDDS.3.6.14.25 OUT
SWLIBS_2Syst_F16
*
-32767 32768 -64.5 64.4980
0.00196838 /
Apk
lpha/betaaxis
current
output
2 pUAB SWDDS.3.6.14.25 OUT
SWLIBS_2Syst_F16
*
-32767 32767 -25.4 25.3992
0.000775146
/ Vpk
alpha/betaaxis
control
input
3 f16Velocity SWDDS.3.6.14.25 OUT tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Estimated
electric
speed
4 f16Phase SWDDS.3.6.14.25 OUT tFrac16 -32768 32768 -180 179.995
0.00549316 /
deg
Estimated
electric
angle
5 pCtrl SWDDS.3.6.14.25 IN/OUT
AMCLIB_BEMF
_OBSRV_DQ_T_F16
*
N/A N/A N/A N/A N/A
Back-EMF
observer
handler
6 gamma_delta_error SWDDS.3.6.14.25 IN tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
Back-EMF
observer
estimation
error
7 f16PhaseErr SWDDS.3.6.14.26 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838 /
Apk
Back-EMF
observer
estimation
error
8 pPosEst SWDDS.3.6.14.26 OUT tFrac16 * -32768 32768 -180 179.995
0.00549316 /
deg
Estimated
electric
angle
9 pVelocityEst SWDDS.3.6.14.26 OUT tFrac16 * -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Estimated
electric
speed
10 pCtrl SWDDS.3.6.14.26 IN/OUT
AMCLIB_TRACK
_OBSRV_T_F16 *
N/A N/A N/A N/A N/A
Angle
tracking
observer
handler
11 f16In SWDDS.3.6.14.9 OUT tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Estimated
electric
speed
12 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Electric
speed
filtering
handler
13 g_f16SlFocElecSpd SWDDS.3.6.14.9 IN tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Estimated
electric
speed
1.1.1.1.35 [SWDDS.3.2.1.35] ConvertSlFocParkTrnsf
1.1.1.1.35.1 Detailed Design
[SWDDS.3.2.1.35] ConvertSlFocParkTrnsf
Software Unit Information
Unit ID SWDDS.3.2.1.35 Unit Name ConvertSlFocParkTrnsf
Architecture ID SWADS.3.2.1.35 ASIL QM
Prototype void ConvertSlFocParkTrnsf( void )
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 115
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocSinCos.f16Arg1
-32768 ~ 32767
-1.0 ~ 0.999969
Read/Write
sin and cos of electric angle for
transformation : sin (PU)
tFrac16 g_f16SlFocElecAng
-32768 ~ 32767
-180 ~
179.995deg
Read Estimated electric angle (PU)
tFrac16 g_stSlFocSinCos.f16Arg2
-32768 ~ 32767
-1.0 ~ 0.999969
Read/Write
sin and cos of electric angle for
transformation : cos (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg1
-32768 ~ 32767
-64.5 ~
64.498Apk
Write d/q-axis current output : d-axis (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Write d/q-axis current output : q-axis (PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg1
-32768 ~ 32767
-64.5 ~
64.498Apk
Read
alpha/beta-axis current output : alpha-axis
(PU)
tFrac16 g_stSlFocCurOutAlbe.f16Arg2
-32768 ~ 32767
-64.5 ~
64.498Apk
Read
alpha/beta-axis current output : beta-axis
(PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Park transformation
- sin and cos value of estimated electric angle storing
- Park transformation
Control Flow
Diagram
(or Pseudo Code)
1. ConvertSlFocParkTrnsf calculates the sin and cos value of the estimated electric angle.
2. ConvertSlFocParkTrnsf converts from alpha/beta-axis current to d/q-axis current using Park transformation.

Called Function SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.6.14.17 GFLIB_Sin
SWDDS.3.6.14.18 GFLIB_Cos
SWDDS.3.6.14.27 GMCLIB_Park
Function Execution
Time
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 116
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.2.1.35
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.35.2 Static View Design
1.1.1.1.35.3 Dynamic View Design
1. ConvertSlFocParkTrnsf calls the fixed-point arithmetic sin and cos function.
2. ConvertSlFocParkTrnsf calls the Park transformation.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 117
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.35.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.17 OUT tFrac16 -32768 32768 -180 179.995
0.00549316 /
deg
Estimated
electric angle
2
g_stSlFocSinCos
.f16Arg1
SWDDS.3.6.14.17 IN tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin and cos of
electric angle
for
transformation
: argument1
3 f16In SWDDS.3.6.14.18 OUT tFrac16 -32768 32768 -180 179.995
0.00549316 /
deg
Estimated
electric angle
4
g_stSlFocSinCos
.f16Arg2
SWDDS.3.6.14.18 IN tFrac16 -32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin and cos of
electric angle
for
transformation
: argument2
5 pOut SWDDS.3.6.14.27 IN/OUT
SWLIBS
_2Syst_F16 *
-32767 32768 -64.5 64.4980
0.00196838 /
Apk
d/q-axis
current output
6 pInAngle SWDDS.3.6.14.27 OUT
SWLIBS
_2Syst_F16 *
-32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin and cos of
electric angle
for
transformation
7 pIn SWDDS.3.6.14.27 OUT
SWLIBS
_2Syst_F16 *
-32767 32768 -64.5 64.4980
0.00196838 /
Apk
alpha/betaaxis
current
output
8 pParam SWDDS.3.6.14.17 OUT
const
GFLIB_SIN_T_
F16 *const
-32768 32767 -1 0.999969 N/A
sin value of
electric angle
9 pParam SWDDS.3.6.14.18 OUT
const
GFLIB_COS_T_
F16 *const
-32768 32767 -1 0.999969 N/A
cos value of
electric angle
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 118
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.36 [SWDDS.3.2.1.36] CalculateSlFocCurErrDq
1.1.1.1.36.1 Detailed Design
[SWDDS.3.2.1.36] CalculateSlFocCurErrDq
Software Unit Information
Unit ID SWDDS.3.2.1.36 Unit Name CalculateSlFocCurErrDq
Architecture ID SWADS.3.2.1.36 ASIL QM
Prototype void CalculateSlFocCurErrDq( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocCurErr.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write Current control error : d-axis (PU)
tFrac16 g_stSlFocCurErr.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write Current control error : q-axis (PU)
tFrac16 g_stSlFocRefCur.f16Arg1
0
0.0Apk
Read Reference current : d-axis (PU)
tFrac16 g_stSlFocRefCur.f16Arg2
-11430 ~ 11430
-22.5 ~ 22.5Apk
Read Reference current : q-axis (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read d/q-axis current output : d-axis (PU)
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read d/q-axis current output : q-axis (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
d/q-axis current control error calculation
- d/q-axis current control error calculation
Control Flow Diagram
(or Pseudo Code)
1. CalculateSlFocCurErrDq calculates the d/q-axis current control error.

Called Function SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function SWDDS.3.6.14.34 MLIB_SubSat_F16
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.36
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 119
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.36.2 Static View Design
1.1.1.1.36.3 Dynamic View Design
1. CalculateSlFocCurErrDq calls the fixed-point arithmetic subtraction function.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 120
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.36.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Reference
current :
argument1
2 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
d/q-axis
current
output :
argument1
3 g_stSlFocCurErr.f16Arg1 SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
control error
: argument1
4 f16In1 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Reference
current :
argument2
5 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
d/q-axis
current
output :
argument2
6 g_stSlFocCurErr.f16Arg2 SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current
control error
: argument2
1.1.1.1.37 [SWDDS.3.2.1.37] RunSlFocCurCtrD
1.1.1.1.37.1 Detailed Design
[SWDDS.3.2.1.37] RunSlFocCurCtrD
Software Unit Information
Unit ID SWDDS.3.2.1.37 Unit Name RunSlFocCurCtrD
Architecture ID SWADS.3.2.1.37 ASIL QM
Prototype tFrac16 RunSlFocCurCtrD( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Data
Possible Return Value Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 121
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return Value
Type
tFrac16
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Calculated d-axis or alpha-axis control input (PU)
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_f16SlFocDcVolt
0 ~ 32767
0 ~ 25.3992Vpk
Read DC driving voltage (PU)
tFrac16 g_hndSlFocPiCurCtrD.f16UpperLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write
d-axis PI current control handler :
UpperLimit (PU)
tFrac16 g_hndSlFocPiCurCtrD.f16LowerLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
d-axis PI current control handler :
LowerLimit (PU)
tFrac16 g_stSlFocCurErr.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
Current control error : d-axis or alphaaxis
(PU)
tFrac32 g_hndSlFocPiCurCtrD.f32Acc
-2147483648 ~
2147483647
Read/Write
d-axis PI current control handler :
internal controller accumulator
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FocPhsVoltLmt
18919
0.577367
Read
FOC control phase voltage limiting
factor
tFrac16 par_f16FocCtrInpLmt
30310
0.925
Read
FOC control input voltage limiting
factor for current sensing
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
d-axis or alpha-axis current control logic running
- d-axis voltage limit calculation
- d-axis control input calculation
Control Flow
Diagram
(or Pseudo Code)
1. RunSlFocCurCtrD calculates the maximum applicable phase voltage from DC driving voltage.
2. RunSlFocCurCtrD sets the upper and lower d-axis PI current control limits.
3. RunSlFocCurCtrD calculates the d-axis control input voltage using d-axis PI current control.
Called Function
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.38 MLIB_Neg_F16
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 122
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.3.6.14.19 GFLIB_ControllerPIrAW_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.37
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.37.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 123
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.37.3 Dynamic View Design
1. RunSlFocCurCtrD calls the fixed-point arithmetic subtraction, multiplication and negative function to calculate DC phase voltage
limit.
2. RunSlFocCurCtrD calls the PI current control.
1.1.1.1.37.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.32 OUT tFrac16 18919 18919 0.577367 0.577367 N/A
FOC control
phase voltage
limiting factor
2 f16In2 SWDDS.3.6.14.32 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
DC driving
voltage
3 voltage_limit SWDDS.3.6.14.32 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis phase
voltage(control
input) limit
4 f16In1 SWDDS.3.6.14.32 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis phase
voltage(control
input) limit
5 f16In2 SWDDS.3.6.14.32 OUT tFrac16 30310 30310 0.925 0.925 N/A
FOC control
input voltage
limiting factor
for current
sensing
6
g_hndSlFocPiCurCtrD
.f16UpperLimit
SWDDS.3.6.14.32 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis PI
current control
handler :
UpperLimit
7 f16In1 SWDDS.3.6.14.38 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis PI
current control
handler :
UpperLimit
8
g_hndSlFocPiCurCtrD
.f16LowerLimit
SWDDS.3.6.14.38 IN tFrac16 -32768 0 -25.4 0.0
0.000775146
/ Vpk
d-axis PI
current control
handler :
LowerLimit
9 f16InErr SWDDS.3.6.14.19 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current control
error :
argument1
GFLIB
d-axis PI
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 124
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
10 pParam SWDDS.3.6.14.19 IN/OUT
_CONTROLLER
_PIAW_R_T_F16
*
N/A N/A N/A N/A N/A current control
handler
11 control_input SWDDS.3.6.14.19 IN tFrac16 -32767 32767 -25.4 25.3992
0.000775146
/ Vpk
d-axis
calculated
control input
1.1.1.1.38 [SWDDS.3.2.1.38] RunSlFocCurCtrQ
1.1.1.1.38.1 Detailed Design
[SWDDS.3.2.1.38] RunSlFocCurCtrQ
Software Unit Information
Unit ID SWDDS.3.2.1.38 Unit Name RunSlFocCurCtrQ
Architecture ID SWADS.3.2.1.38 ASIL QM
Prototype tFrac16 RunSlFocCurCtrQ( tFrac16 d_axis_control_input )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 d_axis_control_input
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
IN d-axis or alpha-axis control input (PU)
Function Call
Return Value
Data
Type
Possible Return Value Description
tFrac16
-32768 ~ 32767
-25.4 ~ 25.3992Vpk
Calculated q-axis or beta-axis control input (PU)
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_hndSlFocPiCurCtrD.f16UpperLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
d-axis PI current control handler :
UpperLimit (PU)
tFrac16 g_hndSlFocPiCurCtrQ.f16UpperLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read/Write
q-axis PI current control handler :
UpperLimit (PU)
tFrac16 g_hndSlFocPiCurCtrQ.f16LowerLimit
-32768 ~ 32767
-64.5 ~ 64.498Apk
Write
q-axis PI current control handler :
LowerLimit (PU)
tFrac16 g_stSlFocCurErr.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read Current control error : q-axis (PU)
tFrac32 g_hndSlFocPiCurCtrQ.f32Acc
-2147483648 ~
2147483647
Read/Write
q-axis PI current control handler :
internal controller accumulator
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
q-axis or beta-axis current control logic running
- q-axis voltage limit calculation
- q-axis control input calculation
1. RunSlFocCurCtrQ calculates the q-axis applicable phase current limit.
2. RunSlFocCurCtrQ sets the upper and lower q-axis PI current control limit.
3. RunSlFocCurCtrQ calculates the q-axis control input voltage.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 125
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.6.14.37 MLIB_Mul_F16
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.20 GFLIB_Sqrt_F16
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.19 GFLIB_ControllerPIrAW_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.38
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity High
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 126
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.38.2 Static View Design
1.1.1.1.38.3 Dynamic View Design
1. RunSlFocCurCtrQ calls the fixed-point multiplication, subtraction and square root function to calculate the q-axis voltage limit.
2. RunSlFocCurCtrQ calls the fixed-point negative function.
3. RunSlFocCurCtrQ calls the PI current control.
1.1.1.1.38.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Phase
voltage(control
input) limit
2 f16In2 SWDDS.3.6.14.37 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Phase
voltage(control
input) limit
3 voltage_square SWDDS.3.6.14.37 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Square of
phase voltage
input limit
4 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis control
input
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 127
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
5 f16In2 SWDDS.3.6.14.37 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
d-axis control
input
6 d_input_square SWDDS.3.6.14.37 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Square of daxis
control
input
7 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Square of
phase voltage
input limit
8 f16In2 SWDDS.3.6.14.34 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
Square of daxis
control
input
9 voltage_remain SWDDS.3.6.14.34 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
q-axis phase
voltage remain
10 f16In SWDDS.3.6.14.20 OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
q-axis phase
voltage remain
11 voltage_remain SWDDS.3.6.14.20 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
q-axis phase
voltage remain
12 f16In1 SWDDS.3.6.14.38 IN/OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
q-axis PI
current control
handler :
UpperLimit
13
g_hndSlFocPiCurCtrQ
.f16LowerLimit
SWDDS.3.6.14.38 IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
q-axis PI
current control
handler :
LowerLimit
14 f16InErr SWDDS.3.6.14.19 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Current control
error :
argument2
15 pParam SWDDS.3.6.14.19 IN/OUT
GFLIB
_CONTROLLER
_PIAW
_R_T_F16 *
N/A N/A N/A N/A N/A
q-axis PI
current control
handler
16 control_input SWDDS.3.6.14.19 IN tFrac16 -32767 32767 -25.4 25.3992
0.000775146
/ Vpk
q-axis control
input with
voltage limit
1.1.1.1.39 [SWDDS.3.2.1.39] ConvertSlFocInvrsPark
1.1.1.1.39.1 Detailed Design
[SWDDS.3.2.1.39] ConvertSlFocInvrsPark
Software Unit Information
Unit ID SWDDS.3.2.1.39 Unit Name ConvertSlFocInvrsPark
Architecture ID SWADS.3.2.1.39 ASIL QM
Prototype void ConvertSlFocInvrsPark( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Write
alpha/beta-axis control input : alpha-axis
(PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Write
alpha/beta-axis control input : beta-axis
(PU)
-32768 ~ 32767 sin and cos of electric angle for
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 128
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tFrac16 g_stSlFocSinCos.f16Arg1
-1.0 ~ 0.999969
Read
transformation : sin (PU)
tFrac16 g_stSlFocSinCos.f16Arg2
-32768 ~ 32767
-1.0 ~ 0.999969
Read
sin and cos of electric angle for
transformation : cos (PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg1
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read d/q-axis control input : d-axis (PU)
tFrac16 g_stSlFocCtrInpDq.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read d/q-axis control input : q-axis (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Inverse Park transformation
Control Flow
Diagram
(or Pseudo
Code)
1. ConvertSlFocInvrsPark converts from the d/q-axis control input voltage to the alpha/beta-axis control input voltage using inverse
Park transformation with sin and cos value of the estimated electric angle.

Called Function SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function SWDDS.3.6.14.28 GMCLIB_ParkInv
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.39
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.39.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 129
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.39.3 Dynamic View Design
1. ConvertSlFocInvrsPark calls the inverse Park transformation.
1.1.1.1.39.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pOut SWDDS.3.6.14.28 IN/OUT
SWLIBS_2Syst_F16
*
-32767 32767 -25.4 25.3992
0.000775146
/ Vpk
alpha/betaaxis
control
input
2 pInAngle SWDDS.3.6.14.28 OUT
SWLIBS_2Syst_F16
*
-32767 32768 -1.0 0.999969
0.0000305176
/ N/A
sin and cos of
electric angle
for
transformation
3 pIn SWDDS.3.6.14.28 OUT
SWLIBS_2Syst_F16
*
-32767 32767 -25.4 25.3992
0.000775146
/ Vpk
d/q-axis
control input
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 130
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.40 [SWDDS.3.2.1.40] CompensateSlFocDcVolt
1.1.1.1.40.1 Detailed Design
[SWDDS.3.2.1.40] CompensateSlFocDcVolt
Software Unit Information
Unit ID SWDDS.3.2.1.40 Unit Name CompensateSlFocDcVolt
Architecture ID SWADS.3.2.1.40 ASIL QM
Prototype void CompensateSlFocDcVolt( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_hndSlFocDcVoltRipElim.f16ArgDcBusMsr
0 ~ 32767
0 ~
25.3992Vpk
Read/Write
DC voltage
ripple
elimination
handler :
Measured DC
bus voltage
(PU)
tFrac16 g_f16SlFocDcVolt
0 ~ 32767
0 ~
25.3992Vpk
Read
DC driving
voltage (PU)
tFrac16 g_stSlFocCtrInpCompn.f16Arg1
-32768 ~
32767
-25.4 ~
25.3992Vpk
Write
DC driving
voltage
compensated
control input
: alpha-axis
(PU)
tFrac16 g_stSlFocCtrInpCompn.f16Arg2
-32768 ~
32767
-25.4 ~
25.3992Vpk
Write
DC driving
voltage
compensated
control input
: beta-axis
(PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg1
-32768 ~
32767
-25.4 ~
25.3992Vpk
Read
alpha/betaaxis
control
input : alphaaxis
(PU)
tFrac16 g_stSlFocCtrInpAlbe.f16Arg2
-32768 ~
32767
-25.4 ~
25.3992Vpk
Read
alpha/betaaxis
control
input : alphaaxis
(PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC driving voltage compensation
1. CompensateSlFocDcVolt compensates the alpha/beta-axis control input voltage with DC driving
voltage using DC driving voltage compensation function.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 131
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function SWDDS.3.6.14.21 GMCLIB_ElimDcBusRip
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.40
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.40.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 132
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.40.3 Dynamic View Design
1. CompensateSlFocDcVolt calls the DC driving voltage compensation.
1.1.1.1.40.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pOut SWDDS.3.6.14.21 IN SWLIBS_2Syst_F16 * -32767 32767 -25.4 25.3992
0.000775146
/ Vpk
DC driving
voltage
compensated
control input
2 pIn SWDDS.3.6.14.21 OUT SWLIBS_2Syst_F16 * -32767 32767 -25.4 25.3992
0.000775146
/ Vpk
alpha/betaaxis
control
input
3 pParam SWDDS.3.6.14.21 OUT
GMCLIB_ELIMDCBUSRIP_T_F16
*
N/A N/A N/A N/A N/A
DC voltage
ripple
elimination
handler
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 133
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.41 [SWDDS.3.2.1.41] RunSlFocSpcVecPwm
1.1.1.1.41.1 Detailed Design
[SWDDS.3.2.1.41] RunSlFocSpcVecPwm
Software Unit Information
Unit ID SWDDS.3.2.1.41 Unit Name RunSlFocSpcVecPwm
Architecture ID SWADS.3.2.1.41 ASIL QM
Prototype void RunSlFocSpcVecPwm( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocPwmDuty.f16Arg1
0 ~ 32767
0 ~
0.999969
Read/Write
PWM duty
setting :
phase U (PU)
tFrac16 g_stSlFocPwmDuty.f16Arg2
0 ~ 32767
0 ~
0.999969
Read/Write
PWM duty
setting :
phase V (PU)
tFrac16 g_stSlFocPwmDuty.f16Arg3
0 ~ 32767
0 ~
0.999969
Read/Write
PWM duty
setting :
phase W (PU)
tFrac16 g_stSlFocCtrInpCompn.f16Arg1
-32768 ~
32767
-25.4 ~
25.3992Vpk
Read
DC driving
voltage
compensated
control input :
alpha-axis
(PU)
tFrac16 g_stSlFocCtrInpCompn.f16Arg2
-32768 ~
32767
-25.4 ~
25.3992Vpk
Read
DC driving
voltage
compensated
control input :
beta-axis
(PU)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Space vector PWM calculation and PWM output setting
Control Flow Diagram
(or Pseudo Code)
1. RunSlFocSpcVecPwm calculates the PWM duty using space vector PWM.
2. RunSlFocSpcVecPwm sets the PWM duty to the gate driver.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 134
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function
SWDDS.3.2.1.14 RunSlFocStateAlignOplp
SWDDS.3.2.1.17 ActSlFocStateSlRun
Calling Function
SWDDS.3.6.14.22 GMCLIB_SvmStd
SWDDS.3.2.2.5 MtrDrv_SetPwmDuty
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.41
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.41.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 135
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.41.3 Dynamic View Design
1. RunSlFocSpcVecPwm calls space vector PWM to calculate the PWM duty.
2. RunSlFocSpcVecPwm calls the PWM duty setting function.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 136
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.41.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pOut SWDDS.3.6.14.22 IN/OUT
SWLIBS_3Syst_F16
*
0 32767 0 0.999969
0.0000305176
/ N/A
PWM duty
setting
2 pIn SWDDS.3.6.14.22 OUT
SWLIBS_2Syst_F16
*
-32767 32767 -25.4 25.3992
0.000775146
/ Vpk
DC driving
voltage
compensated
control input
3 pwm_duty SWDDS.3.2.2.5 OUT SWLIBS_3Syst_F16 0 32767 0 0.999969
0.0000305176
/ N/A
PWM duty
setting
4 u16SvmSector SWDDS.3.6.14.22 IN tU16 -32768 32767 -14.6647 14.6642
0.000447531
/ Vpk
DC voltage
compensated
voltage input
(PU)
1.1.1.1.42 [SWDDS.3.2.1.42] CheckSlFocFltCond
1.1.1.1.42.1 Detailed Design
[SWDDS.3.2.1.42] CheckSlFocFltCond
Software Unit Information
Unit ID SWDDS.3.2.1.42 Unit Name CheckSlFocFltCond
Architecture ID SWADS.3.2.1.42 ASIL QM
Prototype void CheckSlFocFltCond( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_stSlFocCurOutPhs3.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read 3-phase current output : phase U (PU)
tU16 g_u16SlFocPhsCurOvrCntU 0 ~ 65535 Read/Write U-phase current over count
tFrac16 g_stSlFocCurOutPhs3.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read 3-phase current output : phase V (PU)
tU16 g_u16SlFocPhsCurOvrCntV 0 ~ 65535 Read/Write V-phase current over count
tFrac16 g_stSlFocCurOutPhs3.f16Arg3
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read 3-phase current output : phase W (PU)
tU16 g_u16SlFocPhsCurOvrCntW 0 ~ 65535 Read/Write W-phase current over count
tFrac16 g_stSlFocCurOutDq.f16Arg1
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
d/q-axis current output :
d-axis (PU)
tU16 g_u16SlFocPhsCurOvrCntD 0 ~ 65535 Read/Write d-axis current over count
tFrac16 g_stSlFocCurOutDq.f16Arg2
-32768 ~ 32767
-64.5 ~ 64.498Apk
Read
d/q-axis current output :
q-axis (PU)
tU16 g_u16SlFocPhsCurOvrCntQ 0 ~ 65535 Read/Write q-axis current over count
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Fault condition checking
- U-phase current range checking
- V-phase current range checking
- W-phase current range checking
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 137
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description
- d-axis current range checking
- q-axis current range checking
- DC driving voltage range checking
- Reverse rotation checking
- Gate driver fault checking
Control Flow Diagram
(or Pseudo Code)
1. CheckSlFocFltCond checks the phase U current range.
2. CheckSlFocFltCond checks the phase V current range.
3. CheckSlFocFltCond checks the phase W current range.
4. CheckSlFocFltCond checks the d-axis current range.
5. CheckSlFocFltCond checks the q-axis current range.
6. CheckSlFocFltCond checks the DC driving voltage range.
7. CheckSlFocFltCond checks the reverse rotation.
8. CheckSlFocFltCond checks the gate driver fault.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 138
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function SWDDS.3.2.1.7 SlFoc_MainFunc
Calling Function
SWDDS.3.2.1.43 CheckSlFocFltCur
SWDDS.3.2.1.44 CheckSlFocFltDcVolt
SWDDS.3.2.1.45 CheckSlFocFltRevRot
SWDDS.3.2.1.46 CheckSlFocFltGateDrv
Function Execution Time N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 139
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.2.1.42
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity High
Verifiability Yes
1.1.1.1.42.2 Static View Design
1.1.1.1.42.3 Dynamic View Design
1. CheckSlFocFltCond calls the current range checking.
2. CheckSlFocFltCond calls the DC driving voltage range checking.
3. CheckSlFocFltCond calls the reverse rotation checking.
4. CheckSlFocFltCond calls the gate driver fault checking.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 140
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.42.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 current SWDDS.3.2.1.43 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument1
2 checking_count SWDDS.3.2.1.43 IN/OUT tU16* 0 65535 0 65535 N/A
U-phase
current over
count
3 checking_result SWDDS.3.2.1.43 IN tBool 0 1 Normal
Fault
(range
over)
N/A
U-phase
current
range
checking
result
4 current SWDDS.3.2.1.43 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument2
5 checking_count SWDDS.3.2.1.43 IN/OUT tU16* 0 65535 0 65535 N/A
V-phase
current over
count
6 checking_result SWDDS.3.2.1.43 IN tBool 0 1 Normal
Fault
(range
over)
N/A
V-phase
current
range
checking
result
7 current SWDDS.3.2.1.43 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
3-phase
current
output :
argument3
8 checking_count SWDDS.3.2.1.43 IN/OUT tU16* 0 65535 0 65535 N/A
W-phase
current over
count
9 checking_result SWDDS.3.2.1.43 IN tBool 0 1 Normal
Fault
(range N/A
W-phase
current
range
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 141
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
over) checking
result
10 current SWDDS.3.2.1.43 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
d/q-axis
current
output :
argument1
11 checking_count SWDDS.3.2.1.43 IN/OUT tU16* 0 65535 0 65535 N/A
d-axis
current over
count
12 checking_result SWDDS.3.2.1.43 IN tBool 0 1 Normal
Fault
(range
over)
N/A
d-axis
current
range
checking
result
13 current SWDDS.3.2.1.43 OUT tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
d/q-axis
current
output :
argument2
14 checking_count SWDDS.3.2.1.43 IN/OUT tU16* 0 65535 0 65535 N/A
q-axis
current over
count
15 checking_result SWDDS.3.2.1.43 IN tBool 0 1 Normal
Fault
(range
over)
N/A
q-axis
current
range
checking
result
1.1.1.1.43 [SWDDS.3.2.1.43] CheckSlFocFltCur
1.1.1.1.43.1 Detailed Design
[SWDDS.3.2.1.43] CheckSlFocFltCur
Software Unit Information
Unit ID SWDDS.3.2.1.43 Unit Name CheckSlFocFltCur
Architecture ID SWADS.3.2.1.43 ASIL QM
Prototype tBool CheckSlFocFltCur( tFrac16 current, tU16* checking_count )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 current
-32768 ~ 32767
-64.5 ~
64.498Apk
IN current (PU)
tU16* checking_count 0 ~ 65535 IN/OUT fault checking count
Function Call
Return Value
Data
Type
Possible Return Value Description
tBool
0 ~ 1
Normal / Fault (range over)
FALSE - normal, TRUE - fault (range over)
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16CurSigPhsPeakThrs
25401
50.0Apk
Read Peak phase current over threshold (PU)
tU16 par_u16CurSigPhsPeakChkCnt 5 Read
Peak phase current over detection condition
hold count
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 142
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current range checking
Control Flow
Diagram
(or Pseudo Code)
1. CheckSlFocFltCur checks if the absolute value of the current is continuously over the specific threshold for a given count.

Called Function SWDDS.3.2.1.42 CheckSlFocFltCond
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.43
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.43.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 143
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.43.3 Dynamic View Design
1.1.1.1.43.4 Interface Design
- N/A
1.1.1.1.44 [SWDDS.3.2.1.44] CheckSlFocFltDcVolt
1.1.1.1.44.1 Detailed Design
[SWDDS.3.2.1.44] CheckSlFocFltDcVolt
Software Unit Information
Unit ID SWDDS.3.2.1.44 Unit Name CheckSlFocFltDcVolt
Architecture ID SWADS.3.2.1.44 ASIL QM
Prototype void CheckSlFocFltDcVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16SlFocDcVolt
0 ~ 32767
0 ~ 25.3992Vpk
Read
DC driving
voltage (PU)
tU16 g_u16SlFocDcVoltOvrCnt 0 ~ 65535 Read/Write
DC driving
voltage over
count
tU16 g_u16SlFocDcVoltUndCnt 0 ~ 65535 Read/Write
DC driving
voltage under
count
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Data Type Name Range Read/Write Description
tFrac16 par_f16DcVoltPeakOvrThrs
30961
24.0Vpk
Read
Peak DC voltage
over threshold
(PU)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 144
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
tU16 par_u16DcVoltPeakOvrChkCnt 10 Read
Peak DC voltage
over detection
condition hold
count
tFrac16 par_f16DcVoltPeakUndThrs
7740
6.0Vpk
Read
Peak DC voltage
under threshold
(PU)
tU16 par_u16DcVoltPeakUndChkCnt 5000 Read
Peak DC voltage
under detection
condition hold
count
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
DC driving voltage range checking
- DC driving voltage over checking
- DC driving voltage under checking
Control Flow
Diagram
(or Pseudo
Code)
1. CheckSlFocFltDcVolt checks if the DC driving voltage is continuously over the specific
threshold for a given count.
2. CheckSlFocFltDcVolt checks if the DC driving voltage is continuously under the specific
threshold for a given count.
Called Function SWDDS.3.2.1.42 CheckSlFocFltCond
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 145
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.1.44
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity High
Verifiability Yes
1.1.1.1.44.2 Static View Design
1.1.1.1.44.3 Dynamic View Design
1.1.1.1.44.4 Interface Design
- N/A
1.1.1.1.45 [SWDDS.3.2.1.45] CheckSlFocFltRevRot
1.1.1.1.45.1 Detailed Design
[SWDDS.3.2.1.45] CheckSlFocFltRevRot
Software Unit Information
Unit ID SWDDS.3.2.1.45 Unit Name CheckSlFocFltRevRot
Architecture ID SWADS.3.2.1.45 ASIL QM
Prototype void CheckSlFocFltRevRot( void )
Data
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 146
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tFrac16 g_stSlFocCtrInpDq.f16Arg2
-32768 ~ 32767
-25.4 ~
25.3992Vpk
Read d/q-axis control input : q-axis (PU)
tU16 g_u16SlFocRevRotCnt 0 ~ 65535 Read/Write Reverse rotation detection count
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16MtrSpdRevRotVoltThrsQ
-3870
-3.0Vpk
Read
Reverse rotation detection q-axis voltage
threshold (PU)
tU16 par_u16MtrSpdRevRotChkCnt 100 Read
Reverse rotation detection condition hold
count
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Reverse rotation checking
Control Flow
Diagram
(or Pseudo Code)
1. CheckSlFocFltRevRot checks if the q-axis control input voltage is continuously over the specific threshold for a given count.

Called Function SWDDS.3.2.1.42 CheckSlFocFltCond
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.1.45
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 147
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.45.2 Static View Design
1.1.1.1.45.3 Dynamic View Design
1.1.1.1.45.4 Interface Design
- N/A
1.1.1.1.46 [SWDDS.3.2.1.46] CheckSlFocFltGateDrv
1.1.1.1.46.1 Detailed Design
[SWDDS.3.2.1.46] CheckSlFocFltGateDrv
Software Unit Information
Unit ID SWDDS.3.2.1.46 Unit Name CheckSlFocFltGateDrv
Architecture ID SWADS.3.2.1.46 ASIL QM
Prototype void CheckSlFocFltGateDrv( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16SlFocFltSta 0 ~ 65535 Write Fault status flags
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Gate driver fault checking
1. CheckSlFocFltGateDrv checks if any of the gate driver fault status flag is set.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 148
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.1.42 CheckSlFocFltCond
Calling Function SWDDS.3.2.2.4 MtrDrv_GetGdrvSta
Function Execution Time N/A
Requirement Id SWDDS.3.2.1.46
Target Milestone EBS2
Element MTR
Risk Low
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.1.46.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 149
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.46.3 Dynamic View Design
1. CheckSlFocFltGateDrv calls the gate driver status flag checked.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 150
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.46.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 g_u16SlFocFltSta SWDDS.3.2.2.4 IN tU16 0 15872 0 15872 N/A
Gate driver
state
1.1.1.1.47 [SWDDS.3.2.1.47] RunSlFocSpdCtr
1.1.1.1.47.1 Detailed Design
[SWDDS.3.2.1.47] RunSlFocSpdCtr
Software Unit Information
Unit ID SWDDS.3.2.1.47 Unit Name RunSlFocSpdCtr
Architecture
ID
SWADS.3.2.1.47 ASIL QM
Prototype void RunSlFocSpdCtr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tCtrState g_eSlFocCtrState
0 ~ 4
CTR_STATE_SWTC_OFF/
CTR_STATE_OFFS_CALIB/
CTR_STATE_INIT_ALIGN/
CTR_STATE_OPLP_START/
CTR_STATE_SL_RUN
Read Sensorless FOC state
tFrac16 g_hndSlFocSpdCtr.f16InK_1 -32768 ~ 32767 Read/Write
Speed controller handler
input error at step k-1
tFrac16 g_f16SlFocRefSpd
0 ~ 19660
0 ~ 3600rpm
Read Reference speed setting (PU)
tFrac16 g_f16SlFocElecSpd
-32768 ~ 32767
-6000 ~ 5999.82rpm
Read Estimated electric speed (PU)
tFrac16 g_stSlFocRefCur.f16Arg1
0
0.0Apk
Write Reference current : d-axis (PU)
tFrac16 g_stSlFocRefCur.f16Arg2
-11430 ~ 11430
-22.5 ~ 22.5Apk
Write Reference current : q-axis (PU)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16StartSpdPreChrg
1638
0.05
Read Speed control integrator pre-charge
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed control logic running
1. RunSlFocSpdCtr sets the PI speed control state and the reference current as 0 if the sensorless FOC control state is switching off
state.
2. RunSlFocSpdCtr sets the reference speed as 0 if the sensorless FOC control state is current offset calibration state or initial
alignment state.
3. RunSlFocSpdCtr sets the PI speed control state and the reference current as precharge value if the sensorless FOC control state is
open-loop starting state.
4. RunSlFocSpdCtr calculates the speed control error and the reference current using the PI speed control if the sensorless FOC
control state is sensorless running state.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 151
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called
Function
SWDDS.3.2.1.7 SlFoc_MainFunc
Calling
Function
SWDDS.3.6.14.30 GFLIB_ControllerPIpAWSetState_F16
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.29 GFLIB_ControllerPIpAW_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.3.2.1.47
Target Milestone SBS1
Element MTR
Risk Mid
Interoperability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 152
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.1.1.47.2 Static View Design
1.1.1.1.47.3 Dynamic View Design
1. RunSlFocSpdCtr calls the PI control state setting to clear as 0 or to precharge with the given value.
2. RunSlFocSpdCtr calls the fixed-point subtraction function to calculate the speed control error.
3. RunSlFocSpdCtr calls the PI control to calculate the reference current.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 153
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.47.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
f16Controller
PIpAWOut
SWDDS.3.6.14.30 OUT tFrac16 0 0 0.0 0.0
0.00196838
/ Apk
Required output of the
GFLIB_ControllerPIpAW
2 pParam SWDDS.3.6.14.30 IN/OUT
GFLIB
_CONTROLLER
_PIAW_P_T_F16
*
N/A N/A N/A N/A N/A
Speed controller
handler
3
f16Controller
PIpAWOut
SWDDS.3.6.14.30 OUT tFrac16 1638 1638 0.05 0.05 N/A
Speed control
integrator pre-charge
4 pParam SWDDS.3.6.14.30 IN/OUT
GFLIB
_CONTROLLER
_PIAW_P_T_F16
*
N/A N/A N/A N/A N/A
Speed controller
handler
5 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 32768 0 5999.82
0.183105 /
rpm
Reference speed
setting
6 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Estimated electric
speed
7 speed_error SWDDS.3.6.14.34 IN tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Speed control error
8 f16InErr SWDDS.3.6.14.29 OUT tFrac16 -32767 32768 -6000.0 5999.82
0.183105 /
rpm
Speed control error
9 pParam SWDDS.3.6.14.29 IN/OUT
GFLIB
_CONTROLLER
_PIAW_P_T_F16
*
N/A N/A N/A N/A N/A
Speed controller
handler
10 reference_current SWDDS.3.6.14.29 IN tFrac16 -32767 32768 -64.5 64.4980
0.00196838
/ Apk
Calculated reference
current
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 154
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.48 [SWDDS.3.2.1.48] SlFoc_DisSlRun
1.1.1.1.48.1 Detailed Design
[SWDDS.3.2.1.48] SlFoc_DisSlRun
1.1.1.1.48.2 Static View Design
- N/A
1.1.1.1.48.3 Dynamic View Design
- N/A
1.1.1.1.48.4 Interface Design
- N/A
1.1.1.2 [SWDDS.3.2.2] MtrDrv
Update measured variables in MCU Hardware relate to motor driving
- DC voltage, Phase current, Gate driver state
Set/ disable PWM duty to control motor
1.1.1.2.1 [SWDDS.3.2.2.1] MtrDrv_Init
1.1.1.2.1.1 Detailed Design
[SWDDS.3.2.2.1] MtrDrv_Init
Software Unit Information
Unit ID SWDDS.3.2.2.1 Unit Name MtrDrv_Init()
Architecture ID SWADS.3.2.2.1 ASIL QM
Prototype void MtrDrv_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return ValueDescription
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor driver interface initialization
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 155
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function SWDDS.2.3.1 RteIo_Init
Calling Function SWDDS.3.2.2.7 MtrDrv_DisPwmOut
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.2.1
Target Milestone SBS2.1
Element MTR
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.1.2.1.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 156
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.1.3 Dynamic View Design
- N/A
1.1.1.2.1.4 Interface Design
- N/A
1.1.1.2.2 [SWDDS.3.2.2.2] MtrDrv_GetDcVolt
1.1.1.2.2.1 Detailed Design
[SWDDS.3.2.2.2] MtrDrv_GetDcVolt
Software Unit Information
Unit ID SWDDS.3.2.2.2 Unit Name MtrDrv_GetDcVolt
Architecture ID SWADS.3.2.2.2 ASIL QM
Prototype tFrac16 MtrDrv_GetDcVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16
0 ~ 32757
0.0 ~ 25.3992Vpk
DC link voltage (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16DcVoltOffs 0 Read DC driving voltage offset
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor driving voltage getting
Control Flow Diagram
(or Pseudo Code)
1. MtrDrv_GetDcVolt gets A/D converted result of index 1 of ADC1.
2. MtrDrv_GetDcVolt compensates the DC driving voltage offset.

Called Function SWDDS.3.2.1.27 MeasureSlFocDcVolt
Calling Function SWDDS.3.6.8.5 Adc_GetResult1
Function Execution Time N/A
Requirement Id SWDDS.3.2.2.2
Target Milestone EBS2
Element MTR
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 157
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.2.2.2 Static View Design
1.1.1.2.2.3 Dynamic View Design
- N/A
1.1.1.2.2.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 result_index SWDDS.3.6.8.5 OUT tU16 1 1 1 1 N/A ADC result list index
2 dc_driving_voltage SWDDS.3.6.8.5 IN tFrac16 0 32767 0.0 25.3992 0.000775146 / Vpk DC link voltage
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 158
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.3 [SWDDS.3.2.2.3] MtrDrv_GetPhsCur
1.1.1.2.3.1 Detailed Design
[SWDDS.3.2.2.3] MtrDrv_GetPhsCur
Software Unit Information
Unit ID SWDDS.3.2.2.3 Unit Name MtrDrv_GetPhsCur
Architecture ID SWADS.3.2.2.3 ASIL QM
Prototype SWLIBS_2Syst_F16 MtrDrv_GetPhsCur( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
SWLIBS_2Syst_F16
-32768 ~ 32767
-64.5 ~ 64.4980Apk
Phase current (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Phase current getting
Control Flow Diagram
(or Pseudo Code)
1. MtrDrv_GetPhsCur gets the first phase current signal from ADC.
2. MtrDrv_GetPhsCur gets the second phase current signal from ADC.

Called Function
SWDDS.3.2.1.28 MeasureSlFocPhsCur
SWDDS.3.2.1.29 CalibrateSlFocCurOffs
Calling Function SWDDS.3.6.8.6 Adc_GetCurSen
Function Execution Time N/A
Requirement Id SWDDS.3.2.2.3
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 159
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
1.1.1.2.3.2 Static View Design
1.1.1.2.3.3 Dynamic View Design
- N/A
1.1.1.2.3.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 second_list SWDDS.3.6.8.6 OUT tBool 0 0
ADC
list 0
ADC list
0
N/A
FALSE - ADC list 0,
TRUE - ADC list 1
2 phase_current.f16Arg1 SWDDS.3.6.8.6 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Dual-shunt current
sense amplifier signal
output : argument1
3 second_list SWDDS.3.6.8.6 OUT tBool 1 1
ADC
list 1
ADC list
1
N/A
FALSE - ADC list 0,
TRUE - ADC list 1
4 phase_current.f16Arg2 SWDDS.3.6.8.6 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Dual-shunt current
sense amplifier signal
output : argument2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 160
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.4 [SWDDS.3.2.2.4] MtrDrv_GetGdrvSta
1.1.1.2.4.1 Detailed Design
[SWDDS.3.2.2.4] MtrDrv_GetGdrvSta
Software Unit Information
Unit ID SWDDS.3.2.2.4
Unit
Name
MtrDrv_GetGdrvSta
Architecture ID SWADS.3.2.2.4 ASIL QM
Prototype tU16 MtrDrv_GetGdrvSta( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
tU16 0 ~ 3584 Gate driver state
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
Byte GDUF_GHHDIF_MASK 2u Read GDU High VHD Supply Interrupt Flag mask
Byte GDUF_GHHDF_MASK 64u Read GDU High VHD Supply Flag mask
Byte GDUF_GLVLSIF_MASK 1u Read GDU Low VLS Supply Interrupt Flag mask
Byte GDUF_GLVLSF_MASK 32u Read GDU Low VLS Supply Flag mask
Byte GDUDSE_GDLSIF0_MASK 1u Read
GDU Low-Side Driver 0 Desaturation Interrupt Flag
mask
Byte GDUDSE_GDHSIF0_MASK 16u Read
GDU High-Side Driver 0 Desaturation Interrupt Flags
mask
Byte GDUDSE_GDLSIF1_MASK 2u Read
GDU Low-Side Driver 1 Desaturation Interrupt Flag
mask
Byte GDUDSE_GDHSIF1_MASK 32u Read
GDU High-Side Driver 1 Desaturation Interrupt Flags
mask
Byte GDUDSE_GDLSIF2_MASK 4u Read
GDU Low-Side Driver 2 Desaturation Interrupt Flag
mask
Byte GDUDSE_GDHSIF2_MASK 64u Read
GDU High-Side Driver 2 Desaturation Interrupt Flags
mask
Description
Gate driver state getting
- Gate driver flag register checking
- Gate driver desaturation error flag register checking
1. MtrDrv_GetGdrvSta gets the gate driver status flags.
2. MtrDrv_GetGdrvSta checks the gate driver over voltage detection.
3. MtrDrv_GetGdrvSta checks the gate driver under voltage detection.
4. MtrDrv_GetGdrvSta get the gate driver DESAT detection flags.
5. MtrDrv_GetGdrvSta checks the DESAT detection in phase U.
6. MtrDrv_GetGdrvSta checks the DESAT detection in phase V.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 161
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
7. MtrDrv_GetGdrvSta checks the DESAT detection in phase W.

Called Function SWDDS.3.2.1.46 CheckSlFocFltGateDrv
Calling Function
SWDDS.3.6.7.3 Gdu_GetStaFlag
SWDDS.3.6.7.4 Gdu_GetDesatFlag
Function Execution
Time
N/A
Requirement Id SWDDS.3.2.2.4
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 162
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity High
Verifiability Yes
1.1.1.2.4.2 Static View Design
1.1.1.2.4.3 Dynamic View Design
- N/A
1.1.1.2.4.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
1
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 gate_driver_status SWDDS.3.6.7.3 IN tU8 0 251 0 251 N/A Gate driver flag register checking
2 gate_driver_status SWDDS.3.6.7.4 IN tU8 0 119 0 119 N/A
Gate driver desaturation error flag
register checking
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 163
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.5 [SWDDS.3.2.2.5] MtrDrv_SetPwmDuty
1.1.1.2.5.1 Detailed Design
[SWDDS.3.2.2.5] MtrDrv_SetPwmDuty
Software Unit Information
Unit ID SWDDS.3.2.2.5 Unit Name MtrDrv_SetPwmDuty
Architecture ID SWADS.3.2.2.5 ASIL QM
Prototype void MtrDrv_SetPwmDuty( SWLIBS_3Syst_F16 pwm_duty )
Function Call
Parameters
Data Type Name Range IN/OUT Description
SWLIBS_3Syst_F16 pwm_duty 0 ~ 32767 IN PWM duty
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tBool par_bMtrRevDir
0 ~ 1
Normal / Reverse direction
Read Reverse directional driving
Registers
Data Type Name Range Read/Write Description
Word PMFVAL0 0 ~ 2500 Write PMF Value 0 Register
Word PMFVAL2 0 ~ 2500 Write PMF Value 2 Register
Word PMFVAL4 0 ~ 2500 Write PMF Value 4 Register
Word PMFMODA 2500 Read PMF modulo counter A Register
Bit PTUC_PTULDOK 0x01 Write PTU Module Control Register
Description PWM duty output setting
Control Flow
Diagram
(or Pseudo
Code)
1. MtrDrv_SetPwmDuty sets the phase U PWM duty to PWM value 0.
2. MtrDrv_SetPwmDuty sets the phase V PWM duty to PWM value 2 and the phase W PWM duty to PWM value 4 if the reverse
direction setting is false.
3. MtrDrv_SetPwmDuty sets the phase W PWM duty to PWM value 2 and the phase V PWM duty to PWM value 4 if the reverse
direction setting is true.
4. MtrDrv_SetPwmDuty sets the PWM load OK register to make the PWM duty effective.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 164
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.3.2.2.6 MtrDrv_EnaPwmOut
SWDDS.3.2.2.7 MtrDrv_DisPwmOut
SWDDS.3.2.1.21 DisableSlFocControl
SWDDS.3.2.1.22 EnableSlFocControl
SWDDS.3.2.1.41 RunSlFocSpcVecPwm
Calling
Function
SWDDS.3.6.14.37 MLIB_Mul_F16
Function
Execution Time
N/A
Requirement Id SWDDS.3.2.2.5
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 165
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.5.2 Static View Design
1.1.1.2.5.3 Dynamic View Design
- N/A
1.1.1.2.5.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32768 -32767 32768 N/A PWM duty : argument1
2 f16In2 SWDDS.3.6.14.37 OUT tFrac16 2500 2500 2500 2500 N/A PMF modulo counter A Register
3 PMFVAL0 SWDDS.3.6.14.37 IN tFrac16 0 2500 0 2500 N/A PMF Value 0 Register
4 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32768 -32767 32768 N/A PWM duty : argument2
5 f16In2 SWDDS.3.6.14.37 OUT tFrac16 2500 2500 2500 2500 N/A PMF modulo counter A Register
6 PMFVAL2 SWDDS.3.6.14.37 IN tFrac16 0 2500 0 2500 N/A PMF Value 2 Register
7 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32768 -32767 32768 N/A PWM duty : argument3
8 f16In2 SWDDS.3.6.14.37 OUT tFrac16 2500 2500 2500 2500 N/A PMF modulo counter A Register
9 PMFVAL4 SWDDS.3.6.14.37 IN tFrac16 0 2500 0 2500 N/A PMF Value 4 Register
10 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32768 -32767 32768 N/A PWM duty : argument3
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 166
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
11 f16In2 SWDDS.3.6.14.37 OUT tFrac16 2500 2500 2500 2500 N/A PMF modulo counter A Register
12 PMFVAL4 SWDDS.3.6.14.37 IN tFrac16 0 2500 0 2500 N/A PMF Value 4 Register
13 f16In1 SWDDS.3.6.14.37 OUT tFrac16 0 32768 -32767 32768 N/A PWM duty : argument2
14 f16In2 SWDDS.3.6.14.37 OUT tFrac16 2500 2500 2500 2500 N/A PMF modulo counter A Register
15 PMFVAL2 SWDDS.3.6.14.37 IN tFrac16 0 2500 0 2500 N/A PMF Value 2 Register
1.1.1.2.6 [SWDDS.3.2.2.6] MtrDrv_EnaPwmOut
1.1.1.2.6.1 Detailed Design
[SWDDS.3.2.2.6] MtrDrv_EnaPwmOut
Software Unit Information
Unit ID SWDDS.3.2.2.6 Unit Name MtrDrv_EnaPwmOut
Architecture ID SWADS.3.2.2.6 ASIL QM
Prototype void MtrDrv_EnaPwmOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
Byte PMFCFG2_MSK 0x00 Write PMF Configure 2 Register mask
Description PWM output enabling
Control Flow Diagram
(or Pseudo Code)
1. MtrDrv_EnaPwmOut sets the PWM duty as half value.
2. MtrDrv_EnaPwmOut sets the PWM mask register as enabling all the PWM.
3. MtrDrv_EnaPwmOut updates the PWM duty setting.

Called Function SWDDS.3.2.1.22 EnableSlFocControl
Calling Function SWDDS.3.2.2.5 MtrDrv_SetPwmDuty
Function Execution Time N/A
Requirement Id SWDDS.3.2.2.6
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 167
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
1.1.1.2.6.2 Static View Design
1.1.1.2.6.3 Dynamic View Design
- N/A
1.1.1.2.6.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pwm_duty SWDDS.3.2.2.5 OUT SWLIBS_3Syst_F16 16384 16384 16384 16384 N/A PWM output duty setting
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 168
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.7 [SWDDS.3.2.2.7] MtrDrv_DisPwmOut
1.1.1.2.7.1 Detailed Design
[SWDDS.3.2.2.7] MtrDrv_DisPwmOut
Software Unit Information
Unit ID SWDDS.3.2.2.7 Unit Name MtrDrv_DisPwmOut
Architecture ID SWADS.3.2.2.7 ASIL QM
Prototype void MtrDrv_DisPwmOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
Byte PMFCFG2_MSK 0x3f Write PMF Configure 2 Register mask
Description PWM output disabling
Control Flow Diagram
(or Pseudo Code)
1. MtrDrv_DisPwmOut sets the PWM duty as half value.
2. MtrDrv_DisPwmOut sets the PWM mask register as disabling all the PWM.
3. MtrDrv_DisPwmOut updates the PWM duty setting.

Called Function SWDDS.3.2.1.21 DisableSlFocControl
Calling Function SWDDS.3.2.2.5 MtrDrv_SetPwmDuty
Function Execution Time N/A
Requirement Id SWDDS.3.2.2.7
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 169
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.7.2 Static View Design
1.1.1.2.7.3 Dynamic View Design
- N/A
1.1.1.2.7.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pwm_duty SWDDS.3.2.2.5 OUT SWLIBS_3Syst_F16 16384 16384 16384 16384 N/A PWM output duty setting
1.1.1.2.8 [SWDDS.3.2.2.8] MtrDrv_ClrGdrvFlt
1.1.1.2.8.1 Detailed Design
[SWDDS.3.2.2.8] MtrDrv_ClrGdrvFlt
Software Unit Information
Unit ID SWDDS.3.2.2.8 Unit Name MtrDrv_ClrGdrvFlt
Architecture ID SWADS.3.2.2.8 ASIL QM
Prototype void MtrDrv_ClrGdrvFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 170
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Gate driver fault clearing
Control Flow Diagram
(or Pseudo Code)
1. MtrDrv_ClrGdrvFlt clears the gate driver fault flags.

Called Function
SWDDS.3.2.1.10 SlFoc_ClrFltSta
SWDDS.3.2.1.22 EnableSlFocControl
Calling Function SWDDS.3.6.7.5 Gdu_ClrFlt
Function Execution Time N/A
Requirement Id SWDDS.3.2.2.8
Target Milestone EBS2
Element MTR
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.2.8.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 171
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.8.3 Dynamic View Design
- N/A
1.1.1.2.8.4 Interface Design
- N/A
1.1.2 [SWDDS.3.3] CAN
CAN has a function to manage CAN communication.
1.1.2.1 [SWDDS.3.3.1] CanMsg
Check received CAN ID Rearrange received CAN Message to defined data
- status data, driving fault, sensor fault
1.1.2.1.1 [SWDDS.3.3.1.1] CanMsg_Init
1.1.2.1.1.1 Detailed Design
[SWDDS.3.3.1.1] CanMsg_Init
Software Unit Information
Unit ID SWDDS.3.3.1.1 Unit Name CanMsg_Init
Architecture ID SWADS.3.3.1.1 ASIL QM
Prototype void CanMsg_Init( void )
Function Call Data Type Name Range IN/OUT Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 172
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgReqRxData[8u] 0 ~ 255 Write CAN received request data storage
tU8 g_au8CanMsgResTxData[8u] 0 ~ 255 Write CAN response transmission data storage
tU16 g_u16CanMsgRxDataNo 0 ~ 8 Write CAN received data number
tU16 g_u16CanMsgRxTimeStamp 0 ~ 65535 Write CAN received time stamp
tBool g_bCanMsgUpdated
0 ~ 1
FALSE / TRUE
Write FALSE - not updated, TRUE - updated
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN message initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.1
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 173
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.1.2 Static View Design
1.1.2.1.1.3 Dynamic View Design
- N/A
1.1.2.1.1.4 Interface Design
- N/A
1.1.2.1.2 [SWDDS.3.3.1.2] CanMsg_ChkReqDat
1.1.2.1.2.1 Detailed Design
[SWDDS.3.3.1.2] CanMsg_ChkReqDat
Software Unit Information
Unit ID SWDDS.3.3.1.2 Unit Name CanMsg_ChkReqDat
Architecture ID SWADS.3.3.1.2 ASIL QM
Prototype void CanMsg_ChkReqDat( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgReqRxData 0 ~ 255 Read CAN received request data storage
tU16 g_u16CanMsgRxDataNo 0 ~ 8 Read/Write CAN received data number
tU16 g_u16CanMsgRxTimeStamp 0 ~ 65535 Read/Write CAN received time stamp
tBool g_bCanMsgUpdated
0 ~ 1
FALSE / TRUE
Write FALSE - not updated, TRUE - updated
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN request message checking

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 174
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.21 RteIo_ChkCanReqMsg
Calling Function
SWDDS.3.6.10.2 MsCan_ChkRxRdy
SWDDS.3.6.10.3 MsCan_GetRxId
SWDDS.3.6.10.4 MsCan_GetRxDat
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.2
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.1.2.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 175
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.2.3 Dynamic View Design
- N/A
1.1.2.1.2.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 checking_result SWDDS.3.6.10.2 IN tBool 0 1
Not
updated
Message
updated
N/A
MSCAN data
received data ready
checking
2 received_identifier SWDDS.3.6.10.3 IN tU32 0 536870911 0 536870911 N/A
Received data
identifier
3 received_data SWDDS.3.6.10.4 OUT tU8 0 255 0 255 N/A
CAN received
request data
storage
4 received_number SWDDS.3.6.10.4 OUT tU16* 0 8 0 8 N/A
CAN received data
number
5 received_time_stamp SWDDS.3.6.10.4 OUT tU16* 0 65535 0 65535 N/A
CAN received time
stamp
1.1.2.1.3 [SWDDS.3.3.1.3] CanMsg_GetReqDat
1.1.2.1.3.1 Detailed Design
[SWDDS.3.3.1.3] CanMsg_GetReqDat
Software Unit Information
Unit ID SWDDS.3.3.1.3 Unit Name CanMsg_GetReqDat
Architecture ID SWADS.3.3.1.3 ASIL QM
Prototype tBool CanMsg_GetReqDat( tCanMsgReq* request_message )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCanMsgReq* request_message N/A OUT request message from TCU
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 176
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
tBool
0 ~ 1
FALSE / TRUE
FALSE - not updated, TRUE - message updated
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgReqRxData[3] 0 ~ 255 Read CAN received request data storage[3]
tBool g_bCanMsgUpdated
0 ~ 1
FALSE / TRUE
Read/Write FALSE - not updated, TRUE - updated
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
CAN request message getting
- Target speed input getting
- Received message updated checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.22 RteIo_GetTgtSpd
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.3
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.1.3.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 177
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.3.3 Dynamic View Design
- N/A
1.1.2.1.3.4 Interface Design
- N/A
1.1.2.1.4 [SWDDS.3.3.1.4] CanMsg_SetResDat
1.1.2.1.4.1 Detailed Design
[SWDDS.3.3.1.4] CanMsg_SetResDat
Software Unit Information
Unit ID SWDDS.3.3.1.4 Unit Name CanMsg_SetResDat
Architecture ID SWADS.3.3.1.4 ASIL QM
Prototype void CanMsg_SetResDat( tCanMsgRes response_data )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCanMsgRes response_data -6000 ~ 6000 IN
response data -
s16ActualRotationalSpeed
tCanMsgRes response_data 0 ~ 65535 IN response data - u16EepromFaultCount
tCanMsgRes response_data 0 ~ 32767 IN response data - f16DcCurrentInput
tCanMsgRes response_data
-32768 ~
32767
IN response data - f16CurrentOutputQ
tCanMsgRes response_data
-32768 ~
32767
IN response data - f16MotorTorque
tCanMsgRes response_data 0 ~ 4095 IN response data - u16OpuFaultFlag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgResTxData[8u] 0 ~ 255 Write CAN response transmission data storage
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN response message setting
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 178
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.25 RteIo_SendResMsg
Calling Function
SWDDS.3.3.1.6 SetCanMsgStaDat
SWDDS.3.3.1.7 SetCanMsgDrvFltDat
SWDDS.3.3.1.8 SetCanMsgSenFltDat
Function Execution
Time
N/A
Requirement Id SWDDS.3.3.1.4
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.1.4.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 179
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.4.3 Dynamic View Design
- N/A
1.1.2.1.4.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 response_data SWDDS.3.3.1.6 OUT tCanMsgRes N/A N/A N/A N/A structure response data
2 response_data SWDDS.3.3.1.7 OUT tCanMsgRes N/A N/A N/A N/A structure response data
3 response_data SWDDS.3.3.1.8 OUT tCanMsgRes N/A N/A N/A N/A structure response data
1.1.2.1.5 [SWDDS.3.3.1.5] CanMsg_SendResDat
1.1.2.1.5.1 Detailed Design
[SWDDS.3.3.1.5] CanMsg_SendResDat
Software Unit Information
Unit ID SWDDS.3.3.1.5 Unit Name CanMsg_SendResDat
Architecture ID SWADS.3.3.1.5 ASIL QM
Prototype void CanMsg_SendResDat( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgResTxData 0 ~ 255 Write CAN response transmission data storage
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 180
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN response message sending
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.25 RteIo_SendResMsg
Calling Function SWDDS.3.6.10.7 MsCan_SendTxDat
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.5
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.1.5.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 181
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.5.3 Dynamic View Design
- N/A
1.1.2.1.5.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 transmit_identifier SWDDS.3.6.10.7 OUT tU32 0 536870911 0 536870911 N/A
Response
transmission
identifier to TCU
2 extended_identifier SWDDS.3.6.10.7 OUT tBool 0 1
Standard
ID
Extended
ID
N/A FALSE - standard
3 transmit_data[8u] SWDDS.3.6.10.7 OUT tU8 0 255 0 255 N/A
CAN response
transmission data
storage
4 transmit_number SWDDS.3.6.10.7 OUT tU16 0 8 0 8 N/A
Number of response
data
1.1.2.1.6 [SWDDS.3.3.1.6] SetCanMsgStaDat
1.1.2.1.6.1 Detailed Design
[SWDDS.3.3.1.6] SetCanMsgStaDat
Software Unit Information
Unit ID SWDDS.3.3.1.6 Unit Name SetCanMsgStaDat
Architecture ID SWADS.3.3.1.6 ASIL QM
Prototype void SetCanMsgStaDat( tCanMsgRes response_data )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCanMsgRes response_data -6000 ~ 6000 IN response data - s16ActualRotationalSpeed
tCanMsgRes response_data 0 ~ 65535 IN response data - u16EepromFaultCount
tCanMsgRes response_data 0 ~ 32767 IN response data - f16DcCurrentInput
tCanMsgRes response_data
-32768 ~
32767
IN response data - f16CurrentOutputQ
tCanMsgRes response_data
-32768 ~
32767
IN response data - f16MotorTorque
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgResTxData[1u] 0 ~ 255 Write
CAN response transmission data
storage[1]
tU8 g_au8CanMsgResTxData[2u] 0 ~ 255 Write
CAN response transmission data
storage[2]
tU8 g_au8CanMsgResTxData[3u] 0 ~ 255 Write
CAN response transmission data
storage[3]
tU8 g_au8CanMsgResTxData[4u] 0 ~ 255 Write
CAN response transmission data
storage[4]
tU8 g_au8CanMsgResTxData[5u] 0 ~ 255 Write
CAN response transmission data
storage[5]
tU8 g_au8CanMsgResTxData[6u] 0 ~ 255 Write
CAN response transmission data
storage[6]
Parameters
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 182
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tU16 par_u16PrdctInfoSwVer 0 ~ 255 Read Software version
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN response message status data setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.4 CanMsg_SetResDat
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.3.1.6
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.1.6.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 183
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.6.3 Dynamic View Design
- N/A
1.1.2.1.6.4 Interface Design
- N/A
1.1.2.1.7 [SWDDS.3.3.1.7] SetCanMsgDrvFltDat
1.1.2.1.7.1 Detailed Design
[SWDDS.3.3.1.7] SetCanMsgDrvFltDat
Software Unit Information
Unit ID SWDDS.3.3.1.7 Unit Name SetCanMsgDrvFltDat
Architecture ID SWADS.3.3.1.7 ASIL QM
Prototype void SetCanMsgDrvFltDat( tCanMsgRes response_data )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCanMsgRes response_data 0 ~ 4095 IN response data - u16OpuFaultFlag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgResTxData[0u] 0 ~ 3 Write CAN response transmission data storage[0]
tU8 g_au8CanMsgResTxData[6u] 0 ~ 255 Write CAN response transmission data storage[6]
tU8 g_au8CanMsgResTxData[7u] 0 ~ 255 Write CAN response transmission data storage[7]
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN response message driving fault data setting
Control Flow Diagram
1. SetCanMsgDrvFltDat checks the protect mode flag and sets ProtectMode signal the CAN message.
2. SetCanMsgDrvFltDat checks the gate driver under/over voltage flag and sets GateDrv_UV_OV signal the CAN message.
3. SetCanMsgDrvFltDat checks the short circuit flag and sets Short_Circuit signal the CAN message.
4. SetCanMsgDrvFltDat checks the over-current flag and sets Over_current signal the CAN message.
5. SetCanMsgDrvFltDat checks the low current flag and sets Low_Current signal the CAN message.
6. SetCanMsgDrvFltDat checks the speed error flag and sets Speed_Error signal the CAN message.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 184
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.4 CanMsg_SetResDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.7
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 185
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.7.2 Static View Design
1.1.2.1.7.3 Dynamic View Design
- N/A
1.1.2.1.7.4 Interface Design
- N/A
1.1.2.1.8 [SWDDS.3.3.1.8] SetCanMsgSenFltDat
1.1.2.1.8.1 Detailed Design
[SWDDS.3.3.1.8] SetCanMsgSenFltDat
Software Unit Information
Unit ID SWDDS.3.3.1.8 Unit Name SetCanMsgSenFltDat
Architecture ID SWADS.3.3.1.8 ASIL QM
Prototype void SetCanMsgSenFltDat( tCanMsgRes response_data )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCanMsgRes response_data 0 ~ 4095 IN response data - u16OpuFaultFlag
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU8 g_au8CanMsgResTxData[0u] 0 ~ 3 Write CAN response transmission data storage[0]
tU8 g_au8CanMsgResTxData[7u] 0 ~ 255 Write CAN response transmission data storage[7]
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Sensorless FOC control data setting
- Control enable setting
- Control mode change checking
- Control data setting
1. SetCanMsgSenFltDat checks if any fault flag is set and sets FaultStatus signal the CAN message.
2. SetCanMsgSenFltDat checks the over voltage flag and sets Over_Voltage signal the CAN message.
3. SetCanMsgSenFltDat checks the under voltage flag and sets Under_Voltage signal the CAN message.
4. SetCanMsgSenFltDat checks the warning temperature flag and sets Warn_Temp signal the CAN message.
5. SetCanMsgSenFltDat checks the over temperature flag and sets Over_Temp signal the CAN message.
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 186
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.4 CanMsg_SetResDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.3.1.8
Target Milestone EBS2
Element CAN
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 187
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.8.2 Static View Design
1.1.2.1.8.3 Dynamic View Design
- N/A
1.1.2.1.8.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-30
Page 188
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Unit ID
VW AQ EOP
Software Detailed Design Specification(4/4)
Document Properties
Status: Open
Version: 003
Author: Kim Minsu
Created: 2020-12-17 22:39
Approved Versions
Current Document version 003 has not been approved.
Approved Versions:
001 (2021-01-06 15:50)
002 (2021-04-15 21:22)
002 (2021-04-22 10:18)
Document Signatures
Approved (Status Change Pending)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 1
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Document Control Information
Location: The released versions of this document are maintained by SWE DE and managed in the following location:
[Polarion] VW AQ EOP / Documents & Pages / 02_Engineering / 12_SWE_Design
Version Date of Release
Description
(Change and Reasons for Change)
Author Reviewer Approver
001
2020-10-28 Initiation of draft version Taihyun Kyung - -
2020-11-30
Add flow diagram and sequence
diagram
Taihyun Kyung
Rasekar
Prashant
Hyojin Ahn
002
2021-02-15
Add evaluation criteria
Resolved defect - CR-0005
Taihyun Kyung - -
2021-02-17 Modify traceability management Taihyun Kyung - -
2021-02-26
Change the Customer
Requirement_CAN Timeout-0008
Add the Tolerance of Voltage-
CR-0009
Taihyun Kyung - -
2021-03-10
Changed low temperature warning
criteria - CR-0003
Taihyun Kyung - -
2021-03-12
Change and add component -
CR-0010
Taihyun Kyung - -
2021-04-09
OPU HW change to apply EMC
debugging(TL81000, CE) results-
CR-0012
Taihyun Kyung - -
2021-04-15
Change Target Milestone, Traceability
- CR-0010
Add description for Control Flow
Diagram and Sequence Diagram
Minsu Kim Sungjin Park Hyojin Ahn
2021-04-22 Resolved problem: CMNC-0033 Minsu Kim Sungjin Park Hyojin Ahn
003 2021-04-27 Change Static View Design Minsu Kim - -
Table 1 Version History
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 2
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table of Contents
1 Function Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
1.1 [SWDDS.3] BSW . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
1.1.1 [SWDDS.3.5] SRV . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
1.1.1.1 [SWDDS.3.5.1] Nvm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
1.1.1.1.1 [SWDDS.3.2.1.1] Nvm_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8
1.1.1.1.2 [SWDDS.3.2.1.2] Nvm_SaveEepromDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9
1.1.1.1.3 [SWDDS.3.2.1.3] Nvm_LoadEepromLong . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12
1.1.1.2 [SWDDS.3.5.2] SlpWku . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
1.1.1.2.1 [SWDDS.3.5.2.1] SlpWku_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
1.1.1.2.2 [SWDDS.3.5.2.2] SlpWku_SetCanSlp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.1.2 [SWDDS.3.6] HAL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.2.1 [SWDDS.3.6.1] BswHal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.2.1.1 [SWDDS.3.6.1.1] BswHal_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.1.2.1.2 [SWDDS.3.6.1.2] InitializeBswHalMtrCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
1.1.2.1.3 [SWDDS.3.6.1.3] BswHal_GetBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
1.1.2.1.4 [SWDDS.3.6.1.4] BswHal_GetPcbTemp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
1.1.2.1.5 [SWDDS.3.6.1.5] BswHal_GetHwId . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
1.1.2.2 [SWDDS.3.6.2] Cpmu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
1.1.2.2.1 [SWDDS.3.6.2.1] Cpmu_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
1.1.2.2.2 [SWDDS.3.6.2.2] Cpmu_SetCfgPrtct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.1.2.2.3 [SWDDS.3.6.2.3] Cpmu_GetRstFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
1.1.2.3 [SWDDS.3.6.3] Pim . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
1.1.2.3.1 [SWDDS.3.6.3.1] Pim_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
1.1.2.3.2 [SWDDS.3.6.3.2] InitializePimModule . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
1.1.2.3.3 [SWDDS.3.6.3.3] InitializePimDioPort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
1.1.2.3.4 [SWDDS.3.6.3.4] InitializePimAnaPort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
1.1.2.3.5 [SWDDS.3.6.3.5] InitializePimUnusedDigPort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
1.1.2.4 [SWDDS.3.6.4] Tim . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41
1.1.2.4.1 [SWDDS.3.6.4.1] Tim_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41
1.1.2.4.2 [SWDDS.3.6.4.2] Tim_EnaRunAndIrq . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
1.1.2.4.3 [SWDDS.3.6.4.3] Tim_GetCh3Flag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
1.1.2.4.4 [SWDDS.3.6.4.4] Tim_Ch0Isr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
1.1.2.4.5 [SWDDS.3.6.4.5] Tim_Ch3Isr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
1.1.2.5 [SWDDS.3.6.5] Wdt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.5.1 [SWDDS.3.6.5.1] Wdt_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
1.1.2.5.2 [SWDDS.3.6.5.2] Wdt_RstTim . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
1.1.2.6 [SWDDS.3.6.6] Pmf . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
1.1.2.6.1 [SWDDS.3.6.6.1] Pmf_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52
1.1.2.6.2 [SWDDS.3.6.6.2] Pmf_SetWrtPrtct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
1.1.2.6.3 [SWDDS.3.6.6.3] Pmf_ClrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
1.1.2.7 [SWDDS.3.6.7] Gdu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
1.1.2.7.1 [SWDDS.3.6.7.1] Gdu_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
1.1.2.7.2 [SWDDS.3.6.7.2] Gdu_ChkVlsLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
1.1.2.7.3 [SWDDS.3.6.7.3] Gdu_GetStaFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
1.1.2.7.4 [SWDDS.3.6.7.4] Gdu_GetDesatFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
1.1.2.7.5 [SWDDS.3.6.7.5] Gdu_ClrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 3
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.6 [SWDDS.3.6.7.6] Gdu_SetWrtPrtct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
1.1.2.8 [SWDDS.3.6.8] Adc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
1.1.2.8.1 [SWDDS.3.6.8.1] Adc_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
1.1.2.8.2 [SWDDS.3.6.8.2] InitializeAdcConv0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
1.1.2.8.3 [SWDDS.3.6.8.3] InitializeAdcConv1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
1.1.2.8.4 [SWDDS.3.6.8.4] Adc_GetResult0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
1.1.2.8.5 [SWDDS.3.6.8.5] Adc_GetResult1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
1.1.2.8.6 [SWDDS.3.6.8.6] Adc_GetCurSen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
1.1.2.8.7 [SWDDS.3.6.8.7] Adc_GetErrCnt1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
1.1.2.8.8 [SWDDS.3.6.8.8] Adc_DoneIsr1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
1.1.2.8.9 [SWDDS.3.6.8.9] Adc_GetErrCnt0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
1.1.2.8.10 [SWDDS.3.6.8.10] Adc_ErrIsr0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
1.1.2.8.11 [SWDDS.3.6.8.11] Adc_ErrIsr1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
1.1.2.9 [SWDDS.3.6.9] Ptu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
1.1.2.9.1 [SWDDS.3.6.9.1] Ptu_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
1.1.2.10 [SWDDS.3.6.10] MsCan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
1.1.2.10.1 [SWDDS.3.6.10.1] MsCan_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
1.1.2.10.2 [SWDDS.3.6.10.2] MsCan_ChkRxRdy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
1.1.2.10.3 [SWDDS.3.6.10.3] MsCan_GetRxId . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
1.1.2.10.4 [SWDDS.3.6.10.4] MsCan_GetRxDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
1.1.2.10.5 [SWDDS.3.6.10.5] SetMsCanTxId . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
1.1.2.10.6 [SWDDS.3.6.10.6] SetMsCanTransmitDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
1.1.2.10.7 [SWDDS.3.6.10.7] MsCan_SendTxDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
1.1.2.10.8 [SWDDS.3.6.10.8] SetMsCanBaudRate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
1.1.2.10.9 [SWDDS.3.6.10.9] MsCan_GetRxFlg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
1.1.2.11 [SWDDS.3.6.11] Eeprom . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
1.1.2.11.1 [SWDDS.3.6.11.1] Eeprom_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
1.1.2.11.2 [SWDDS.3.6.11.2] CheckEepromPrevCmd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
1.1.2.11.3 [SWDDS.3.6.11.3] ExecuteEepromCmd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
1.1.2.11.4 [SWDDS.3.6.11.4] Eeprom_VerifySectionErased . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
1.1.2.11.5 [SWDDS.3.6.11.5] Eeprom_ProgramDat . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111
1.1.2.11.6 [SWDDS.3.6.11.6] Eeprom_EraseSector . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
1.2 [SWDDS.4] CFG . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116
1.2.1 [SWDDS.4.1] CalData . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116
1.2.1.1 [SWDDS.4.1.1] CalData_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116
1.2.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117
1.2.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.2 [SWDDS.4.2] Param . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.2.1 [SWDDS.4.2.1] Param_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
1.2.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119
1.2.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.2.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.3 [SWDDS.5] Main . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
1.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
1.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 4
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 5
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Figures
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 6
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Tables
Table 1 Version History
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 7
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1 Function Description
1.1 [SWDDS.3] BSW
1.1.1 [SWDDS.3.5] SRV
SRV provides various service routines such as NVM access, sleep setting, memory checking and resource usage
checking.
1.1.1.1 [SWDDS.3.5.1] Nvm
Save/ Load data to EEPROM
1.1.1.1.1 [SWDDS.3.2.1.1] Nvm_Init
1.1.1.1.1.1 Detailed Design
[SWDDS.3.5.1.1] Nvm_Init
Software Unit Information
Unit ID SWDDS.3.5.1.1 Unit Name Nvm_Init
Architecture ID SWADS.3.5.1.1 ASIL QM
Prototype void Nvm_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Non-volatile memory initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.2 IntializeRteIoSrv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.5.1.1
Target Milestone SBS2.1
Element SRV
Risk Low
Interoperability Yes
Criticality Mid
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 8
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.1.1.1.2 Static View Design
1.1.1.1.1.3 Dynamic View Design
- N/A
1.1.1.1.1.4 Interface Design
- N/A
1.1.1.1.2 [SWDDS.3.2.1.2] Nvm_SaveEepromDat
1.1.1.1.2.1 Detailed Design
[SWDDS.3.5.1.2] Nvm_SaveEepromDat
Software Unit Information
Unit ID SWDDS.3.5.1.2 Unit Name Nvm_SaveEepromDat
Architecture ID SWADS.3.5.1.2 ASIL QM
Prototype tU8 Nvm_SaveEepromDat( tU16 eeprom_address, tU16 data_word[2u] )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 eeprom_address 0 ~ 511 IN Eeprom_address
tU16 data_word[0u] 0 ~ 65535 IN 16-bit word data
tU16 data_word[1u] 0 ~ 65535 IN 16-bit word data
Function Call
Return Value
Data Type Possible Return Value Description
tU8 writing_result EEPROM Return status
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Non-volatile memory data saving

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 9
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.26 RteIo_SaveEepromDat
Calling Function
SWDDS.3.6.11.6 Eeprom_EraseSector
SWDDS.3.6.11.5 Eeprom_ProgramDat
Function Execution Time N/A
Requirement Id SWDDS.3.5.1.2
Target Milestone SBS2.1
Element SRV
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.1.2.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 10
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.2.3 Dynamic View Design
- N/A
1.1.1.1.2.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 memory_address SWDDS.3.6.11.6 OUT tU32 0 511 0 511 N/A memory address
2 writing_result SWDDS.3.6.11.6 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A
EEPROM writing
result
3 memory_address SWDDS.3.6.11.5 OUT tU32 0 511 0 511 N/A memory address
4 data_word SWDDS.3.6.11.5 OUT
const
tU16*
0 65535 0 65535 N/A
programmed data
words (array)
5 number_of_words SWDDS.3.6.11.5 OUT tU16 1 4 1 4 N/A
number of data
words (1 ~ 4)
6 writing_result SWDDS.3.6.11.5 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A
EEPROM writing
result
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 11
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.3 [SWDDS.3.2.1.3] Nvm_LoadEepromLong
1.1.1.1.3.1 Detailed Design
[SWDDS.3.5.1.3] Nvm_LoadEepromLong
Software Unit Information
Unit ID SWDDS.3.5.1.3 Unit Name Nvm_LoadEepromLong
Architecture ID SWADS.3.5.1.3 ASIL QM
Prototype
tU32 Nvm_LoadEepromLong(
tU16 eeprom_address )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 eeprom_address 0 ~ 511 IN Eeprom_address
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EEPROM 32-bit long word data loading
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.27 RteIo_LoadEepromLong
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.5.1.3
Target Milestone SBS2.1
Element SRV
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 12
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.1.3.2 Static View Design
1.1.1.1.3.3 Dynamic View Design
- N/A
1.1.1.1.3.4 Interface Design
- N/A
1.1.1.2 [SWDDS.3.5.2] SlpWku
Set sleep and wake-up
1.1.1.2.1 [SWDDS.3.5.2.1] SlpWku_Init
1.1.1.2.1.1 Detailed Design
[SWDDS.3.5.2.1] SlpWku_Init
Software Unit Information
Unit ID SWDDS.3.5.2.1 Unit Name SlpWku_Init
Architecture ID SWADS.3.5.2.1 ASIL QM
Prototype void SlpWku_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte PIM_PORT_OUT_CAN_ENA 1 Write Enable CAN transceiver
byte PIM_PORT_OUT_CAN_NSTB 1 Write Disable CAN transceiver sleep mode
Description Sleep and wake-up initialization
Control Flow Diagram

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 13
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.2 IntializeRteIoSrv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.5.2.1
Target Milestone EBS2
Element SRV
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.1.2.1.2 Static View Design
1.1.1.2.1.3 Dynamic View Design
- N/A
1.1.1.2.1.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 14
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.2 [SWDDS.3.5.2.2] SlpWku_SetCanSlp
1.1.1.2.2.1 Detailed Design
[SWDDS.3.5.2.2] SlpWku_SetCanSlp
Software Unit Information
Unit ID SWDDS.3.5.2.2 Unit Name SlpWku_SetCanSlp
Architecture ID SWADS.3.5.2.2 ASIL QM
Prototype void SlpWku_SetCanSlp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte PIM_PORT_OUT_CAN_NSTB 0 Write Disable CAN transceiver sleep mode
Description Entering into CAN sleep mode
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.24 RteIo_SetCanSlp
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.5.2.2
Target Milestone EBS2
Element SRV
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 15
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.1.2.2.2 Static View Design
1.1.1.2.2.3 Dynamic View Design
- N/A
1.1.1.2.2.4 Interface Design
- N/A
1.1.2 [SWDDS.3.6] HAL
HAL configures and manages peripherals such as various CPMU, PIM, TIM, MsCAN, Wdt, EEPROM, PMF, PTU, GDU,
and ADC
1.1.2.1 [SWDDS.3.6.1] BswHal
Initialize all register of MCU hardware Get sensing values from MCU Hardware
-Battery voltage, PCB Temperature , HW_ID, CAN Transceiver error Set ouptut voltage level of Test point according to
input value
1.1.2.1.1 [SWDDS.3.6.1.1] BswHal_Init
1.1.2.1.1.1 Detailed Design
[SWDDS.3.6.1.1] BswHal_Init
Software Unit Information
Unit ID SWDDS.3.6.1.1 Unit Name BswHal_Init
Architecture ID SWADS.3.6.1.1 ASIL QM
Prototype void BswHal_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 16
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description BSW HAL initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function
SWDDS.3.6.2.1 Cpmu_Init
SWDDS.3.6.3.1 Pim_Init
SWDDS.3.6.4.1 Tim_Init
SWDDS.3.6.1.2 InitializeBswHalMtrCtr
SWDDS.3.6.10.1 MsCan_Init
SWDDS.3.6.11.1 Eeprom_Init
SWDDS.3.6.5.1 Wdt_Init
SWDDS.3.6.2.2 Cpmu_SetCfgPrtct
Function Execution Time N/A
Requirement Id SWDDS.3.6.1.1
Target Milestone SBS1
Element HAL
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 17
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.1.2 Static View Design
1.1.2.1.1.3 Dynamic View Design
- N/A
1.1.2.1.1.4 Interface Design
- N/A
1.1.2.1.2 [SWDDS.3.6.1.2] InitializeBswHalMtrCtr
1.1.2.1.2.1 Detailed Design
[SWDDS.3.6.1.2] InitializeBswHalMtrCtr
Software Unit Information
Unit ID SWDDS.3.6.1.2 Unit Name InitializeBswHalMtrCtr
Architecture ID SWADS.3.6.1.2 ASIL QM
Prototype void InitializeBswHalMtrCtr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Motor control peripheral initialization
- Peripheral initialization
- Write protection setting

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 18
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.1 BswHal_Init
Calling Function
SWDDS.3.6.6.1 Pmf_Init
SWDDS.3.6.9.1 Ptu_Init
SWDDS.3.6.7.1 Gdu_Init
SWDDS.3.6.8.1 Adc_Init
SWDDS.3.6.6.2 Pmf_SetWrtPrtct
SWDDS.3.6.7.6 Gdu_SetWrtPrtct
Function Execution Time N/A
Requirement Id SWDDS.3.6.1.2
Target Milestone SBS1
Element HAL
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.1.2.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 19
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.2.3 Dynamic View Design
- N/A
1.1.2.1.2.4 Interface Design
- N/A
1.1.2.1.3 [SWDDS.3.6.1.3] BswHal_GetBatVolt
1.1.2.1.3.1 Detailed Design
[SWDDS.3.6.1.3] BswHal_GetBatVolt
Software Unit Information
Unit ID SWDDS.3.6.1.3 Unit Name BswHal_GetBatVolt
Architecture ID SWADS.3.6.1.3 ASIL QM
Prototype tFrac16 BswHal_GetBatVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16
0 ~ 32757
0.0 ~ 29.4991Vpk
Battery voltage signal (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16McuStaBatVoltOffs
-32767 ~ 32768
-29.5 ~ 29.4991Vpk
Read Battery voltage offset (PU)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Battery voltage measurement signal getting
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 20
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.19 RteIo_GetBatVolt
Calling Function
SWDDS.3.6.8.4 Adc_GetResult0
SWDDS.3.6.14.34 MLIB_SubSat_F16
Function Execution Time N/A
Requirement Id SWDDS.3.6.1.3
Target Milestone SBS1
Element HAL
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.1.3.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 21
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.3.3 Dynamic View Design
- N/A
1.1.2.1.3.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 result_index SWDDS.3.6.8.4 OUT tU16 2 2 2 2 N/A ADC result list index
2 battery_voltage SWDDS.3.6.8.4 IN tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Battery voltage (PU)
3 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Battery voltage (PU)
4 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32768 32767 -29.5 29.4991
0.000900269 /
Vpk
Battery voltage
offset (PU)
5 battery_voltage SWDDS.3.6.14.34 IN tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Battery voltage (PU)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 22
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.4 [SWDDS.3.6.1.4] BswHal_GetPcbTemp
1.1.2.1.4.1 Detailed Design
[SWDDS.3.6.1.4] BswHal_GetPcbTemp
Software Unit Information
Unit ID SWDDS.3.6.1.4 Unit Name BswHal_GetPcbTemp
Architecture ID SWADS.3.6.1.4 ASIL QM
Prototype tFrac16 BswHal_GetPcbTemp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16
0 ~ 32767
0.0 ~ 4.99985Vpk
PCB temperature signal (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description PCB temperature measurement signal getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.18 RteIo_GetPcbTempSig
Calling Function SWDDS.3.6.8.4 Adc_GetResult0
Function Execution Time N/A
Requirement Id SWDDS.3.6.1.4
Target Milestone SBS1
Element HAL
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 23
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.4.2 Static View Design
1.1.2.1.4.3 Dynamic View Design
- N/A
1.1.2.1.4.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 result_index SWDDS.3.6.8.4 OUT tU16 1 1 1 1 N/A ADC result list index
2 pcb_temperature SWDDS.3.6.8.4 IN tFrac16 0 32767 0.0 4.99985
0.000152588 /
Vpk
PCB temperature
(PU)
1.1.2.1.5 [SWDDS.3.6.1.5] BswHal_GetHwId
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 24
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.1.5.1 Detailed Design
[SWDDS.3.6.1.5] BswHal_GetHwId
Software Unit Information
Unit ID SWDDS.3.6.1.5 Unit Name BswHal_GetHwId
Architecture ID SWADS.3.6.1.5 ASIL QM
Prototype tOpuHwId BswHal_GetHwId( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tOpuHwId
0 ~ 2,
OPU_HW_ID_UNDEFINED / OPU_HW_ID_AQ301 / OPU_HW_ID_AQ451
OPU hardware ID
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Hardware ID setting input status getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.1.5
Target Milestone SBS1
Element HAL
Risk Mid
Interoperability No
Criticality Mid
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 25
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.2.1.5.2 Static View Design
1.1.2.1.5.3 Dynamic View Design
- N/A
1.1.2.1.5.4 Interface Design
- N/A
1.1.2.2 [SWDDS.3.6.2] Cpmu
Set internal functionality and value of MCU Hardware
1.1.2.2.1 [SWDDS.3.6.2.1] Cpmu_Init
1.1.2.2.1.1 Detailed Design
[SWDDS.3.6.2.1] Cpmu_Init
Software Unit Information
Unit ID SWDDS.3.6.2.1 Unit Name Cpmu_Init
Architecture ID SWADS.3.6.2.1 ASIL QM
Prototype void Cpmu_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 26
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global
Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte CPMUVREGCTL_EXTXON 0x00u~0x01u Write
External voltage
regulator Enable for
VDDX domain
byte CPMUVREGCTL_INTXON 0x00u~0x01u Write
Internal voltage
regulator Enable for
VDDX domain
byte CPMUVREGCTL_EXTCON 0x00u Write
External voltage
regulator Enable for
VDDC domain
byte CPMUPOSTDIV_POSTDIV 0x00u Write
CPMU Post Divider
Register
byte CPMUSYNR 0x00u Write
CPMU Synthesizer
Register
byte CPMUREFDIV_REFDIV 15u Write
CPMU Reference
Divider Register -
Finer granularity for
the IPLL multiplier
step
byte CPMUREFDIV_REFFRQ 0x03u Write
CPMU Reference
Divider Register -
IPLL optimal stability
and lock time
configuration
byte CPMUOSC2_OMRE 0x01u Write
This bit enables the
oscillator clock
monitor reset
byte CPMUOSC2_OSCMOD 0x01u Write
This bit selects the
mode of the external
oscillator
(XOSCLCP)
byte CPMUOSC_OSCE 0x01u Write Oscillator Enable Bit
byte CPMUSYNR_SYNDIV 39u Write
CPMU Synthesizer
Register -
Multiplication factor
of the IPLL
byte CPMUSYNR_VCOFRQ 0x03u Write
CPMU Synthesizer
Register - VCO
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 27
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
frequency range
byte CPMUPLL_FM 0x03u Write
CPMU PLL Control
Register - PLL
Frequency
Modulation Enable
byte CPMUIFLG 0xffu Write
CPMU Interrupt
Flags Register
byte CPMUHTCTL_HTE 0x01u Write
High Temperature
Sensor/Bandgap
Voltage Enable Bit
byte CPMUIFLG_UPOSC
0 ~ 1
Oscillatoe not
qualified/qualified
Read Oscillator Status Bit
byte CPMUIFLG_LOCK
0 ~ 1
VCO clock unlock /
lock
Read Lock Status Bit
byte CPMURFLG 0x60u Write
CPMU Reset Flags
Register
byte CPMUHTCTL_VSEL 0x01u Write
Voltage Access
Select Bit
byte CPMUHTCTL_HTIF 0x01u Write
High Temperature
Interrupt Flag
Description
CPMU initialization
- External BJT turning on
- Clock setting
- Oscillator setting
- Interrupt flag clearing
- High temperature sensor enabling
- Waiting for oscillator to start up and PLL to lock
- Reset flag checking and clear
- High temperature sensor enabling
Control Flow
Diagram
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 28
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
Called
Function
SWDDS.3.6.1.1 BswHal_Init
Calling
Function
N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.6.2.1
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 29
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.2.1.2 Static View Design
1.1.2.2.1.3 Dynamic View Design
- N/A
1.1.2.2.1.4 Interface Design
- N/A
1.1.2.2.2 [SWDDS.3.6.2.2] Cpmu_SetCfgPrtct
1.1.2.2.2.1 Detailed Design
[SWDDS.3.6.2.2] Cpmu_SetCfgPrtct
Software Unit Information
Unit ID SWDDS.3.6.2.2 Unit Name Cpmu_SetCfgPrtct
Architecture ID SWADS.3.6.2.2 ASIL QM
Prototype void Cpmu_SetCfgPrtct( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CPMUPROT_PROT 0x01u Write Clock Configuration Registers Protection Bit
Description Clock configuration protection setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.2.1 BswHal_Init
Calling Function N/A
Function Execution Time N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 30
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.6.2.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.2.2.2 Static View Design
1.1.2.2.2.3 Dynamic View Design
- N/A
1.1.2.2.2.4 Interface Design
- N/A
1.1.2.2.3 [SWDDS.3.6.2.3] Cpmu_GetRstFlag
1.1.2.2.3.1 Detailed Design
[SWDDS.3.6.2.3] Cpmu_GetRstFlag
Software Unit Information
Unit ID SWDDS.3.6.2.3 Unit Name Cpmu_GetRstFlag
Architecture ID SWADS.3.6.2.3 ASIL QM
Prototype tU8 Cpmu_GetRstFlag( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU8 0 ~ 107 MCU reset flag
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 31
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description MCU reset flag getting
Control Flow
Diagram
(or Pseudo Code)
Called Function N/A
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.2.3
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.2.3.2 Statc View Design
1.1.2.2.3.3 Interface Design
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 32
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.3 [SWDDS.3.6.3] Pim
Set Input/output port of MCU Hardware
- PIM Module, Digital / Analog / Unused port
1.1.2.3.1 [SWDDS.3.6.3.1] Pim_Init
1.1.2.3.1.1 Detailed Design
[SWDDS.3.6.3.1] Pim_Init
Software Unit Information
Unit ID SWDDS.3.6.3.1 Unit Name Pim_Init
Architecture ID SWADS.3.6.3.1 ASIL QM
Prototype void Pim_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Port integration module initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.1 BswHal_Init
Calling Function
SWDDS.3.6.3.2 InitializePimModule
SWDDS.3.6.3.3 InitializePimDioPort
SWDDS.3.6.3.4 InitializePimAnaPort
SWDDS.3.6.3.5 InitializePimUnusedDigPort
Function Execution Time N/A
Requirement Id SWDDS.3.6.3.1
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 33
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element HAL
Risk Low
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.3.1.2 Static View Design
1.1.2.3.1.3 Dynamic View Design
- N/A
1.1.2.3.1.4 Interface Design
- N/A
1.1.2.3.2 [SWDDS.3.6.3.2] InitializePimModule
1.1.2.3.2.1 Detailed Design
[SWDDS.3.6.3.2] InitializePimModule
Software Unit Information
Unit ID SWDDS.3.6.3.2
Unit
Name
InitializePimModule
Architecture ID SWADS.3.6.3.2 ASIL QM
Prototype void InitializePimModule( void )
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 34
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte MODRR0_S0L0RR 0x00u Write SS0 based on SPI0RR
byte MODRR0_SCI1RR 0x01u Write TXD1 on PS3, RXD1 on PS2
byte MODRR0_SPI0RR 0x00u Write
MISO0 on PS2, MOSI0 on PS3, SCK0 on PS4, SS0 on
PS5
byte MODRR0_SPI0SSRR 0x06u Write standalone usage of SCI0 on external pins
byte MODRR1_PWM54RR 0x00u Write PWM1_4 and PWM1_5 to GDU
byte MODRR1_PWM32RR 0x00u Write PWM1_2 and PWM1_3 to GDU
byte MODRR1_PWM10RR 0x00u Write PWM1_0 and PWM1_1 to GDU
byte ECLKCTL_NECLK 0x00u Write ECLK setting
byte IRQCR 0x00u Write External IRQ pin disabled
byte PIMMISC_OCPE1 0x00u Write PP0 over-current detector disabled
Description
PIM module initialization
- Module routing register 0 setting
- PWM module routing register setting
- ELCK port setting
- External interrupt and over-current detector setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.3.1 Pim_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.3.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 35
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.3.2.2 Static View Design
1.1.2.3.2.3 Dynamic View Design
- N/A
1.1.2.3.2.4 Interface Design
- N/A
1.1.2.3.3 [SWDDS.3.6.3.3] InitializePimDioPort
1.1.2.3.3.1 Detailed Design
[SWDDS.3.6.3.3] InitializePimDioPort
Software Unit Information
Unit ID SWDDS.3.6.3.3 Unit Name InitializePimDioPort
Architecture ID SWADS.3.6.3.3 ASIL QM
Prototype void InitializePimDioPort( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte PTS_PTS2 0x01u Write Set initial PS2 output as high
byte DDRS_DDRS2 0x01u Write PS2 set as output
byte PTS_PTS3 0x01u Write Set initial PS3 output as high
byte DDRS_DDRS3 0x01u Write PS3 set as output
byte DDRS_DDRS4 0x00u Write PS4 set as input
byte PERS_PERS4 0x01u Write PS4 set pull enable
byte PPSS_PPSS4 0x00u Write PS4 set polarity (pull-up)
byte DDRT_DDRT0 0x00u Write PT0 set as input
byte PERT_PERT0 0x01u Write PT0 set pull enable
byte PPST_PPST0 0x00u Write PT0 set polarity (pull-up)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 36
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte PTT_PTT1 0x00u Write Set initial PT1 output as low
byte DDRT_DDRT1 0x01u Write PT1 set as output
Description
Digital input and output port initialization
- CAN_ENA port setting
- CAN_NSTB port setting
- CAN_NERR port setting
- DI_HWID1 port setting
- MCU_TP port setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.3.1 Pim_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.3.3
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.3.3.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 37
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.3.3.3 Dynamic View Design
- N/A
1.1.2.3.3.4 Interface Design
- N/A
1.1.2.3.4 [SWDDS.3.6.3.4] InitializePimAnaPort
1.1.2.3.4.1 Detailed Design
[SWDDS.3.6.3.4] InitializePimAnaPort
Software Unit Information
Unit ID SWDDS.3.6.3.4 Unit Name InitializePimAnaPort
Architecture ID SWADS.3.6.3.4 ASIL QM
Prototype void InitializePimAnaPort( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte DIENADL 0x00u Write AN0_[0..4] and AN1_[1..3] digital input enable
byte DDRADH_DDRADH0 0x00u Write AN1_3 configured as input
byte DIENADH_DIENADH0 0x01u Write AN1_3 configured as Digital input
byte PERADH_PERADH0 0x01u Write AN1_3 pull-down setting
byte PPSADH_PPSADH0 0x01u Write AN1_3 polarity select (pull-down)
Description
Analog input port initialization
- AN0_[0..4] and AN1_[1..3]
- DI_HWID (PAD8/KWAD8/AN1_3) port setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.3.1 Pim_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.3.4
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 38
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.3.4.2 Static View Design
1.1.2.3.4.3 Dynamic View Design
- N/A
1.1.2.3.4.4 Interface Design
- N/A
1.1.2.3.5 [SWDDS.3.6.3.5] InitializePimUnusedDigPort
1.1.2.3.5.1 Detailed Design
[SWDDS.3.6.3.5] InitializePimUnusedDigPort
Software Unit Information
Unit ID SWDDS.3.6.3.5 Unit Name InitializePimUnusedDigPort
Architecture ID SWADS.3.6.3.5 ASIL QM
Prototype void InitializePimUnusedDigPort( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Data Type Name Range Read/Write Description
byte DDRP_DDRP0 0x00u Write PP0 direction setting
byte PERP_PERP0 0x01u Write PP0 pull enable
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 39
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
byte PPSP_PPSP0 0x01u Write PP0 polarity select (pull-down)
byte DDRP_DDRP1 0x00u Write PP1 direction setting
byte PERP_PERP1 0x01u Write PP1 pull enable
byte PPSP_PPSP1 0x01u Write PP1 polarity select (pull-down)
byte DDRP_DDRP2 0x00u Write PP2 direction setting
byte PERP_PERP2 0x01u Write PP2 pull enable
byte PPSP_PPSP2 0x01u Write PP2 polarity select (pull-down)
byte DDRS_DDRS5 0x00u Write PS5 direction setting
byte PERS_PERS5 0x01u Write PS5 pull enable
byte PPSS_PPSS5 0x01u Write PS5 polarity select (pull-down)
byte DDRT_DDRT2 0x00u Write PT2 direction setting
byte PERT_PERT2 0x01u Write PT2 pull enable
byte PPST_PPST2 0x01u Write PT2 polarity select (pull-down)
byte DDRT_DDRT3 0x00u Write PT3 direction setting
byte PERT_PERT3 0x01u Write PT3 pull enable
byte PPST_PPST3 0x01u Write PT3 polarity select (pull-down)
Description
Unused digital port initialization
- Port P setting
- Port S setting
- Port T setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.3.1 Pim_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.3.5
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 40
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.3.5.2 Static View Design
1.1.2.3.5.3 Dynamic View Design
- N/A
1.1.2.3.5.4 Interface Design
- N/A
1.1.2.4 [SWDDS.3.6.4] Tim
Initialize timer 0 channel 0 for the static scheduler
Initialize timer 0 channel 3 for the watchdog update timing checking
Call the task counting routine of the static scheduler
Set the watchdog update timing flag
1.1.2.4.1 [SWDDS.3.6.4.1] Tim_Init
1.1.2.4.1.1 Detailed Design
[SWDDS.3.6.4.1] Tim_Init
Software Unit Information
Unit ID SWDDS.3.6.4.1 Unit Name Tim_Init
Architecture ID SWADS.3.6.4.1 ASIL QM
Prototype void Tim_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tBool g_bTimCh3Flag
0~1, FALSE
/TRUE
Write Timer channel 3 flag
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Data
Type
Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 41
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
byte TIM0TIOS_IOS0 0x01u Write
Input Capture or Output Compare Channel
Configuration Bit 0
byte TIM0OCPD_OCPD0 0x01u Write Output Compare Pin Disconnect Bit 0
byte TIM0TSCR2 0x06u Write Timer System Control Register 2
Word TIM0TC0 625u Write Timer Input Capture/Output Compare Register 0
byte TIM0TCTL2 0x01u Write Timer Control Register 2
byte INT_CFADDR_INT_CFADDR 0x0e Write
Interrupt Request Configuration Data Register
Select Bits
byte INT_CFDATA3_PRIOLVL 5u Write Interrupt Request Priority Level Bits
byte INT_CFDATA0_PRIOLVL 3u Write Interrupt Request Priority Level Bits
byte TIM0TIOS_IOS3 0x01u Write
Input Capture or Output Compare Channel
Configuration Bit 3
byte TIM0OCPD_OCPD3 0x01u Write Output Compare Pin Disconnect Bit 3
Word TIM0TC3 6250u Write Timer Input Capture/Output Compare Register 3
Description
S12ZVM timer module initialization
- Variable initialization
- Timer 0 initialization
- Timer 3 initialization
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.1 BswHal_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.4.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 42
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.4.1.2 Static View Design
1.1.2.4.1.3 Dynamic View Design
- N/A
1.1.2.4.1.4 Interface Design
- N/A
1.1.2.4.2 [SWDDS.3.6.4.2] Tim_EnaRunAndIrq
1.1.2.4.2.1 Detailed Design
[SWDDS.3.6.4.2] Tim_EnaRunAndIrq
Software Unit Information
Unit ID SWDDS.3.6.4.2 Unit Name Tim_EnaRunAndIrq
Architecture ID SWADS.3.6.4.2 ASIL QM
Prototype void Tim_EnaRunAndIrq( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte TIM0TIE_C0I 0x01u Write Input Capture/Output Compare Interrupt Enable Bit 0
byte TIM0TIE_C3I 0x01u Write Input Capture/Output Compare Interrupt Enable Bit 3
byte TIM0TSCR1 0x00u Write Timer System Control Register1
Description
Timer running and timer interrupt enabling
- Timer interrupt enabling
- timer running
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.7 RteIo_EnaTimRun
Calling Function N/A
Function Execution Time N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 43
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.6.4.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.4.2.2 Static View Design
1.1.2.4.2.3 Dynamic View Design
- N/A
1.1.2.4.2.4 Interface Design
- N/A
1.1.2.4.3 [SWDDS.3.6.4.3] Tim_GetCh3Flag
1.1.2.4.3.1 Detailed Design
[SWDDS.3.6.4.3] Tim_GetCh3Flag
Software Unit Information
Unit ID SWDDS.3.6.4.3 Unit Name Tim_GetCh3Flag
Architecture ID SWADS.3.6.4.3 ASIL QM
Prototype tBool Tim_GetCh3Flag( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0~1, FALSE /TRUE Timer channel 3 flag
Global Variables
Data Type Name Range Read/Write Description
tBool g_bTimCh3Flag 0~1, FALSE /TRUE Read/Write Timer channel 3 flag
Parameters
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 44
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Timer channel 3 flag getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.5 RteIo_ChkWdtTimRdy
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.4.3
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.4.3.2 Static View Design
1.1.2.4.3.3 Dynamic View Design
- N/A
1.1.2.4.3.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 45
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.4.4 [SWDDS.3.6.4.4] Tim_Ch0Isr
1.1.2.4.4.1 Detailed Design
[SWDDS.3.6.4.4] Tim_Ch0Isr
Software Unit Information
Unit ID SWDDS.3.6.4.4 Unit Name Tim_Ch0Isr
Architecture ID SWADS.3.6.4.4 ASIL QM
Prototype INTERRUPT void Tim_Ch0Isr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
Word TIM0TC0 0 ~ 65535 Read/Write Timer Input Capture/Output Compare Register 0
byte TIM0TFLG1_C0F 0x01u Write Input Capture/Output Compare Channel interrupt flag 0
Description
Timer channe
l 0 interrupt service routine
Control Flow Diagram
(or Pseudo Code)
1. Tim_Ch0Isr calls the static scheduler.
2. Tim_Ch0Isr updates the next timer interrupt time count.
3. Tim_Ch0Isr clears the interrupt flag.

Called Function N/A
Calling Function SWDDS.3.1.1.3 BswSch_ChkTaskCnt
Function Execution Time N/A
Requirement Id SWDDS.3.6.4.4
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality High
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 46
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
1.1.2.4.4.2 Static View Design
1.1.2.4.4.3 Dynamic View Design
- N/A
1.1.2.4.4.4 Interface Design
- N/A
1.1.2.4.5 [SWDDS.3.6.4.5] Tim_Ch3Isr
1.1.2.4.5.1 Detailed Design
[SWDDS.3.6.4.5] Tim_Ch3Isr
Software Unit Information
Unit ID SWDDS.3.6.4.5 Unit Name Tim_Ch3Isr
Architecture ID SWADS.3.6.4.5 ASIL QM
Prototype INTERRUPT void Tim_Ch3Isr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 47
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
Word TIM0TC3 0 ~ 65535 Read/Write Timer Input Capture/Output Compare Register 3
byte TIM0TFLG1_C3F 0x01u Write Input Capture/Output Compare Channel interrupt flag 3
Description Timer channel 3 interrupt service routine
Control Flow Diagram
(or Pseudo Code)
1. Tim_Ch3Isr updates the next timer interrupt time count.
2. Tim_Ch3Isr sets the watchdog updating flag.
3. Tim_Ch3Isr clears the interrupt flag.
Called Function N/A
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.4.5
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality High
Technical complexity Low
Verifiability Yes
1.1.2.4.5.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 48
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.4.5.3 Dynamic View Design
- N/A
1.1.2.4.5.4 Interface Design
- N/A
1.1.2.5 [SWDDS.3.6.5] Wdt
Initialize MCU internal watchdog timer
Reset the watchdog timer
1.1.2.5.1 [SWDDS.3.6.5.1] Wdt_Init
1.1.2.5.1.1 Detailed Design
[SWDDS.3.6.5.1] Wdt_Init
Software Unit Information
Unit ID SWDDS.3.6.5.1 Unit Name Wdt_Init
Architecture ID SWADS.3.6.5.1 ASIL QM
Prototype void Wdt_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CPMUCLKS_COPOSCSEL1 0x00u Write COP Clock Select 1
byte CPMUCLKS_COPOSCSEL0 0x00u Write COP Clock Select 0
byte CPMUCOP 0 ~ 7 Write CPMU COP Control Register
Description Watchdog timer initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.1 BswHal_Init
Calling Function N/A
Function Execution Time N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 49
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.6.5.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.5.1.2 Static View Design
1.1.2.5.1.3 Dynamic View Design
- N/A
1.1.2.5.1.4 Interface Design
- N/A
1.1.2.5.2 [SWDDS.3.6.5.2] Wdt_RstTim
1.1.2.5.2.1 Detailed Design
[SWDDS.3.6.5.2] Wdt_RstTim
Software Unit Information
Unit ID SWDDS.3.6.5.2 Unit Name Wdt_RstTim
Architecture ID SWADS.3.6.5.2 ASIL QM
Prototype void Wdt_RstTim( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 50
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description Watchdog timer reseting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.6 RteIo_RstWdtTim
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.5.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.5.2.2 Static View Design
1.1.2.5.2.3 Dynamic View Design
- N/A
1.1.2.5.2.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 51
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.6 [SWDDS.3.6.6] Pmf
Initialize PMF
Get and clear PMF fault
1.1.2.6.1 [SWDDS.3.6.6.1] Pmf_Init
1.1.2.6.1.1 Detailed Design
[SWDDS.3.6.6.1] Pmf_Init
Software Unit Information
Unit ID SWDDS.3.6.6.1 Unit Name Pmf_Init
Architecture ID SWADS.3.6.6.1 ASIL QM
Prototype void Pmf_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte PMFCFG0_EDGEA 0x00u Write Edge-Aligned or Center-Aligned PWM for Pair A
byte PMFCFG0_EDGEB 0x00u Write Edge-Aligned or Center-Aligned PWM for Pair B
byte PMFCFG0_EDGEC 0x00u Write Edge-Aligned or Center-Aligned PWM for Pair C
byte PMFCFG0_INDEPA 0x00u Write Independent or Complimentary Operation for Pair A
byte PMFCFG0_INDEPB 0x00u Write Independent or Complimentary Operation for Pair B
byte PMFCFG0_INDEPC 0x00u Write Independent or Complimentary Operation for Pair C
byte PMFCFG1_ENCE 0x00u Write Enable Commutation Event
byte PMFCFG1_TOPNEGA 0x00u Write Pair A Top-Side PWM Polarity
byte PMFCFG1_BOTNEGA 0x00u Write Pair A Bottom-Side PWM Polarity
byte PMFCFG1_TOPNEGB 0x00u Write Pair B Top-Side PWM Polarity
byte PMFCFG1_BOTNEGB 0x00u Write Pair B Bottom-Side PWM Polarity
byte PMFCFG1_TOPNEGC 0x00u Write Pair C Top-Side PWM Polarity
byte PMFCFG1_BOTNEGC 0x00u Write Pair C Bottom-Side PWM Polarity
byte PMFCFG2_REV 0x01u Write PMF Configure 2 Register - reload event: PWM A
byte PMFCFG3_PMFWAI 0x00u Write PMF Stops While in WAIT Mode
byte PMFCFG3_PMFFRZ 0x00u Write PMF Stops While in FREEZE Mode
byte PMFFEN 0x00u Write PMF Fault Enable Register
byte PMFFMOD 0x00u Write PMF Fault Mode Register
byte PMFFIE 0x00u Write PMF Fault Interrupt Enable Register
byte PMFQSMP0 0x00u Write PMF Fault Qualifying Samples Register 0
byte PMFQSMP1 0x00u Write PMF Fault Qualifying Samples Register 1
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 52
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte PMFOUTC 0x00u Write PMF Output Control Register
byte PMFOUTB 0x00u Write PMF Output Control Bit Register
byte PMFCCTL 0x00u Write PMF Correction Control Register
byte PMFROIE 0x00u Write PMF Reload Overrun Interrupt Enable Register
byte PMFICCTL 0x00u Write PMF Internal Correction Control Register
byte PMFCINV 0x00u Write PMF Compare Invert Register
Word PMFDTMA 20u Write PMF deadtime A Register
Word PMFVAL0 0 ~ 2500 Write PMF Value 0 Registe
Word PMFVAL2 0 ~ 2500 Write PMF Value 2 Registe
Word PMFVAL4 0 ~ 2500 Write PMF Value 4 Registe
Word PMFMODA 2500 Read PMF modulo counter A Register
byte PMFENCA_LDOKA 0x01u Write Load Okay A
byte PMFENCA_PWMENA 0x01u Write PWM Generator A Enable
byte PMFENCA_GLDOKA 0x01u Write Global Load Okay A
byte PMFFQCA_LDFQA 0x03u Write Load Frequency A
byte PMFFQCA_HALFA 0x01u Write Half Cycle Reload A
byte PMFFQCA_PRSCA 0x00u Write Prescaler A
Description
PMF initialization
- PMF configure 0 register setting
- PMF configure 1 register setting
- PMF configure 2 register setting
- PMF configure 3 register setting
- PMF fault setting
- PMF Output control setting
- PMF reload overrun interrupt setting
- PMF internal correction control setting
- PMF compare invert setting
- PWM period and output duty setting
- PMF frequency control setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 53
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.6.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.6.1.2 Static View Design
1.1.2.6.1.3 Dynamic View Design
- N/A
1.1.2.6.1.4 Interface Design
- N/A
1.1.2.6.2 [SWDDS.3.6.6.2] Pmf_SetWrtPrtct
1.1.2.6.2.1 Detailed Design
[SWDDS.3.6.6.2] Pmf_SetWrtPrtct
Software Unit Information
Unit ID SWDDS.3.6.6.2 Unit Name Pmf_SetWrtPrtct
Architecture ID SWADS.3.6.6.2 ASIL QM
Prototype void Pmf_SetWrtPrtct( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 54
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte PMFCFG0_WP 0x01u Write Write Protect
Description PMF write protection setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.6.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.6.2.2 Static View Design
1.1.2.6.2.3 Dynamic View Design
- N/A
1.1.2.6.2.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 55
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.6.3 [SWDDS.3.6.6.3] Pmf_ClrFlt
1.1.2.6.3.1 Detailed Design
[SWDDS.3.6.6.3] Pmf_ClrFlt
1.1.2.6.3.2 Static View Design
- N/A
1.1.2.6.3.3 Dynamic View Design
- N/A
1.1.2.6.3.4 Interface Design
- N/A
1.1.2.7 [SWDDS.3.6.7] Gdu
Initialize gate drive unit
Check gate driver low voltage
Check and clear GDU fault flag
1.1.2.7.1 [SWDDS.3.6.7.1] Gdu_Init
1.1.2.7.1.1 Detailed Design
[SWDDS.3.6.7.1] Gdu_Init
Software Unit Information
Unit ID SWDDS.3.6.7.1 Unit Name Gdu_Init
Architecture ID SWADS.3.6.7.1 ASIL QM
Prototype void Gdu_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tU8 par_u8GdrvDesatBlkTim2 0x04u Read GDU DESAT blank time 2
tU8 par_u8GdrvDesatBlkTim1 0x03u Read GDU DESAT blank time 1
tU8 par_u8GdrvSlewRate 0x00u Read MOSFET slew rate control
tU8 par_u8GdrvDesatLvl 0x07u Read Gate driver DESAT level
Data Type Name Range Read/Write Description
byte GDUE_GCPE 0x01u Write GDU Charge Pump Enable
byte GDUE_GCSE0 0x01u Write GDU Current Sense Amplifier 0 Enable
byte GDUE_GCSE1 0x01u Write GDU Current Sense Amplifier 1 Enable
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 56
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
byte GDUE_GBOE 0x00u Write GDU Boost Converter Enable
byte GDUF 0xffu Write GDU Flag Register
byte GDUCLK2_GCPCD 0x04u Write GDU Charge Pump Clock Divider
byte GDUCTR_GHHDLVL 0x01u Write GDU High HD Level Select
byte GDUCTR_GBKTIM2 0x04u Write GDU Blanking Time
byte GDUCTR_GBKTIM1 0x03u Write GDU Blanking Time
byte GDUIE 0x00u Write GDU Interrupt Enable Register
byte GDUSRC_GSRCLS 0x00u Write GDU Slew Rate Control Register - low side
byte GDUSRC_GSRCHS 0x00u Write GDU Slew Rate Control Register - high side
byte GDUCLK1_GBOCD 0x0au Write GDU Boost Option Clock Divider
byte GDUCLK1_GBODC 0x00u Write GDU Boost Option Clock Duty Cycle
byte GDUBCL_GBCL 0x0fu Write GDU Boost Current Limit Register
byte GDUPHMUX 0x00u Write GDU Phase Mux Register
byte GDUCSO_GCSO1 0x00u Write GDU Current Sense Amplifier 1 Offset
byte GDUCSO_GCSO0 0x00u Write GDU Current Sense Amplifier 0 Offset
byte GDUDSLVL_GDSLHS 0x07u Write GDU Desaturation Level for High-Side Drivers
byte GDUDSLVL_GDSLLS 0x07u Write GDU Desaturation Level for Low-Side Drivers
byte GDUOC0 0x00u Write GDU Overcurrent Register 0
byte GDUOC1 0x00u Write GDU Overcurrent Register 1
byte GDUDSE 0x77u Write GDU Desaturation Error Flag Register
Description
GDU initialization
- GDU module enable register setting
- GDU flag resister clearing
- GDU charge pump clock setting
- GDU control register setting
- GDU interrupt enable setting
- GDU slew rate control
- GDU boost option clock control and current limit setting
- GDU phase multiplexer setting
- GDU current sense offset setting
- GDU DESAT level setting
- GDU over-current setting
- GDU DESAT error clearing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
Calling Function N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 57
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.7.1.2 Static View Design
1.1.2.7.1.3 Dynamic View Design
- N/A
1.1.2.7.1.4 Interface Design
- N/A
1.1.2.7.2 [SWDDS.3.6.7.2] Gdu_ChkVlsLow
1.1.2.7.2.1 Detailed Design
[SWDDS.3.6.7.2] Gdu_ChkVlsLow
Software Unit Information
Unit ID SWDDS.3.6.7.2 Unit Name Gdu_ChkVlsLow
Architecture ID SWADS.3.6.7.2 ASIL QM
Prototype tBool Gdu_ChkVlsLow( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool
0 ~ 1,
Normal / Low voltage
FALSE - VLS_OUT above VLVLSD,
TRUE - VLS_OUT below V_LVLSA
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 58
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte GDUF_GLVLSF
0 ~ 1,
Normal / Low voltage
Read/Write GDU Low VLS Supply Flag
Description VLS_OUT low voltage checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.20 RteIo_ChkGdrvVlsLow
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.7.2.2 Static View Design
1.1.2.7.2.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 59
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.2.4 Interface Design
- N/A
1.1.2.7.3 [SWDDS.3.6.7.3] Gdu_GetStaFlag
1.1.2.7.3.1 Detailed Design
[SWDDS.3.6.7.3] Gdu_GetStaFlag
Software Unit Information
Unit ID SWDDS.3.6.7.3 Unit Name Gdu_GetStaFlag
Architecture ID SWADS.3.6.7.3 ASIL QM
Prototype tU8 Gdu_GetStaFlag( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU8 N/A GDU flag resister
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte GDUF 0 ~ 251 Read GDU Flag Register
Description Gate driver state getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.2.4 MtrDrv_GetGdrvSta
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.3
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 60
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.3.2 Static View Design
1.1.2.7.3.3 Dynamic View Design
- N/A
1.1.2.7.3.4 Interface Design
- N/A
1.1.2.7.4 [SWDDS.3.6.7.4] Gdu_GetDesatFlag
1.1.2.7.4.1 Detailed Design
[SWDDS.3.6.7.4] Gdu_GetDesatFlag
Software Unit Information
Unit ID SWDDS.3.6.7.4 Unit Name Gdu_GetDesatFlag
Architecture ID SWADS.3.6.7.4 ASIL QM
Prototype tU8 Gdu_GetDesatFlag( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU8 N/A GDU DESAT error flag resister
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte GDUDSE 0 ~ 119 Read GDU Desaturation Error Flag Register
Description Gate driver DESAT error flag getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.2.4 MtrDrv_GetGdrvSta
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.4
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 61
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.7.4.2 Static View Design
1.1.2.7.4.3 Dynamic View Design
- N/A
1.1.2.7.4.4 Interface Design
- N/A
1.1.2.7.5 [SWDDS.3.6.7.5] Gdu_ClrFlt
1.1.2.7.5.1 Detailed Design
[SWDDS.3.6.7.5] Gdu_ClrFlt
Software Unit Information
Unit ID SWDDS.3.6.7.5 Unit Name Gdu_ClrFlt
Architecture ID SWADS.3.6.7.5 ASIL QM
Prototype void Gdu_ClrFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte GDUF 0xffu Write GDU Flag Register
byte GDUDSE 0xffu Write GDU Desaturation Error Flag Register
Description Gate driver fault clearing

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 62
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.2.8 MtrDrv_ClrGdrvFlt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.5
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.7.5.2 Static View Design
1.1.2.7.5.3 Dynamic View Design
- N/A
1.1.2.7.5.4 Interface Design
- N/A
1.1.2.7.6 [SWDDS.3.6.7.6] Gdu_SetWrtPrtct
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 63
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.6.1 Detailed Design
[SWDDS.3.6.7.6] Gdu_SetWrtPrtct
Software Unit Information
Unit ID SWDDS.3.6.7.6 Unit Name Gdu_SetWrtPrtct
Architecture ID SWADS.3.6.7.6 ASIL QM
Prototype void Gdu_SetWrtPrtct( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte GDUE_GWP 0x01u Write GDU Write Protect
Description Gate driver write protection setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.7.6
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 64
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.7.6.2 Static View Design
1.1.2.7.6.3 Dynamic View Design
- N/A
1.1.2.7.6.4 Interface Design
- N/A
1.1.2.8 [SWDDS.3.6.8] Adc
Initialize ADC0 and ADC1
Get AD converted result
Run ADC error interrupt
Run ADC done interrupt
1.1.2.8.1 [SWDDS.3.6.8.1] Adc_Init
1.1.2.8.1.1 Detailed Design
[SWDDS.3.6.8.1] Adc_Init
Software Unit Information
Unit ID SWDDS.3.6.8.1 Unit Name Adc_Init
Architecture ID SWADS.3.6.8.1 ASIL QM
Prototype void Adc_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16AdcErrCnt0 0u Write ADC0 error count
tU16 g_u16AdcErrCnt1 0u Write ADC1 error count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description A/D converter initialization

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 65
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
Calling Function
SWDDS.3.6.8.2 InitializeAdcConv0
SWDDS.3.6.8.3 InitializeAdcConv1
Function Execution Time N/A
Requirement Id SWDDS.3.6.8.1
Target Milestone EBS2
Element HAL
Risk Low
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.8.1.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 66
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.1.3 Dynamic View Design
- N/A
1.1.2.8.1.4 Interface Design
- N/A
1.1.2.8.2 [SWDDS.3.6.8.2] InitializeAdcConv0
1.1.2.8.2.1 Detailed Design
[SWDDS.3.6.8.2] InitializeAdcConv0
Software Unit Information
Unit ID SWDDS.3.6.8.2 Unit Name InitializeAdcConv0
Architecture ID SWADS.3.6.8.2 ASIL QM
Prototype void InitializeAdcConv0( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU8 g_au8AdcCommandList0 0 ~ 255 Read ADC0 command list
tU16 g_au16AdcResultList0 0 ~ 65520 Read ADC0 result list
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte BATE_BSUAE 0x01u Write BATS VSUP ADC Connection Enable
byte ADC0CTL_0_ACC_CFG 0x03u Write
ADC1 Control Register 0 - Handling Restart
Requests during End Of List Command
Type Execution
byte ADC0CTL_0_STR_SEQA 0x01u Write
ADC1 Control Register 0 - ADCFLWCTL
Register Access Configuration
byte ADC0TIM 0x02u Write ADC0 Timing Register
byte ADC0FMT_DJM 0x00u Write Result Register Data Justification
byte ADC0FMT_SRES 0x04u Write ADC Resolution Select
pointer ADC0CBP g_au8AdcCommandList0 Write ADC0 Command Base Pointer Register 0
pointer ADC0RBP g_au16AdcResultList0 Write ADC0 Result Base Pointer Register 0
byte ADC0CROFF1 0x00u Write
ADC0 Command and Result Offset Register
1
byte INT_CFADDR_INT_CFADDR 0x0c Write
Interrupt Request Configuration Data
Register Select Bits
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 67
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte INT_CFDATA3_PRIOLVL 2u Write Interrupt Request Priority Level Bits
byte ADC0CTL_0_ADC_EN 0x01u Write ADC1 Control Register 0 - ADC Enable Bit
byte ADC0EIE 0xeeu Write ADC0 Error Interrupt Enable Register
Description A/D converter 0 initialization
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.3.6.8.1 Adc_Init
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.6.8.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.8.2.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 68
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.2.3 Dynamic View Design
- N/A
1.1.2.8.2.4 Interface Design
- N/A
1.1.2.8.3 [SWDDS.3.6.8.3] InitializeAdcConv1
1.1.2.8.3.1 Detailed Design
[SWDDS.3.6.8.3] InitializeAdcConv1
Software Unit Information
Unit ID SWDDS.3.6.8.3 Unit Name InitializeAdcConv1
Architecture ID SWADS.3.6.8.3 ASIL QM
Prototype void InitializeAdcConv1( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU8 g_au8AdcCommandList1 0 ~ 255 Read ADC1 command list
tU16 g_au16AdcResultList1 0 ~ 65520 Read ADC1 result list
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte ADC1CTL_0_ACC_CFG 0x03u Write
ADC1 Control Register 1 - Handling Restart
Requests during End Of List Command
Type Execution
byte ADC1CTL_0_STR_SEQA 0x01u Write
ADC1 Control Register 1 - ADCFLWCTL
Register Access Configuration
byte ADC1TIM 0x02u Write ADC1 Timing Register
byte ADC1FMT_DJM 0x00u Write Result Register Data Justification
byte ADC1FMT_SRES 0x04u Write ADC Resolution Select
byte ADC1CONIE_1_CON_IE1 0x01u Write
ADC1 Conversion Interrupt Enable Register
1 - Conversion Interrupt 1 Enable
pointer ADC1CBP g_au8AdcCommandList1 Write ADC1 Command Base Pointer Register 0
pointer ADC1RBP g_au16AdcResultList1 Write ADC1 Result Base Pointer Register
byte ADC1CROFF1 0x00u Write
ADC1 Command and Result Offset Register
1
byte INT_CFADDR_INT_CFADDR 0x08 Write
Interrupt Request Configuration Data
Register Select Bits
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 69
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte INT_CFDATA7_PRIOLVL 2u Write Interrupt Request Priority Level Bits
byte INT_CFADDR_INT_CFADDR 0x08 Write
Interrupt Request Configuration Data
Register Select Bits
byte INT_CFDATA5_PRIOLVL 6u Write Interrupt Request Priority Level Bits
byte ADC1CTL_0_ADC_EN 0x01u Write ADC1 Control Register 0 ADC Enable Bit
byte ADC1EIE 0xeeu Write ADC1 Error Interrupt Enable Register
Description A/D converter 1 initialization
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.3.6.8.1 Adc_Init
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.6.8.3
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.8.3.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 70
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.3.3 Dynamic View Design
- N/A
1.1.2.8.3.4 Interface Design
- N/A
1.1.2.8.4 [SWDDS.3.6.8.4] Adc_GetResult0
1.1.2.8.4.1 Detailed Design
[SWDDS.3.6.8.4] Adc_GetResult0
Software Unit Information
Unit ID SWDDS.3.6.8.4 Unit Name Adc_GetResult0
Architecture ID SWADS.3.6.8.4 ASIL QM
Prototype tS16 Adc_GetResult0( tU16 result_index )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 result_index 0 ~ 3 IN ADC result list index
Function Call
Return Value
Data Type Possible Return Value Description
tS16 N/A ADC0 conversion result
Global Variables
Data Type Name Range Read/Write Description
tU16 g_au16AdcResultList0[] 0 ~ 32760 Read ADC0 result list
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description ADC0 conversion result uni-polar value getting
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.3.6.1.3 BswHal_GetBatVolt
SWDDS.3.6.1.4 BswHal_GetPcbTemp
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.8.4
Target Milestone SBS1
Element HAL
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 71
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.8.4.2 Static View Design
1.1.2.8.4.3 Dynamic View Design
- N/A
1.1.2.8.4.4 Interface Design
- N/A
1.1.2.8.5 [SWDDS.3.6.8.5] Adc_GetResult1
1.1.2.8.5.1 Detailed Design
[SWDDS.3.6.8.5] Adc_GetResult1
Software Unit Information
Unit ID SWDDS.3.6.8.5 Unit Name Adc_GetResult1
Architecture ID SWADS.3.6.8.5 ASIL QM
Prototype tS16 Adc_GetResult1( tU16 result_index )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 result_index 0 ~ 3 IN ADC result list index
Function Call
Return Value
Data Type Possible Return Value Description
tS16 N/A ADC1 conversion result
Global Variables
Data Type Name Range Read/Write Description
tU16 g_au16AdcResultList1[] 0 ~ 32760 Read ADC1 result list
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description ADC1 conversion result uni-polar value getting

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 72
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.2.2 MtrDrv_GetDcVolt
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.8.5
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.8.5.2 Static View Design
1.1.2.8.5.3 Dynamic View Design
- N/A
1.1.2.8.5.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 73
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.6 [SWDDS.3.6.8.6] Adc_GetCurSen
1.1.2.8.6.1 Detailed Design
[SWDDS.3.6.8.6] Adc_GetCurSen
Software Unit Information
Unit ID SWDDS.3.6.8.6 Unit Name Adc_GetCurSen
Architecture ID SWADS.3.6.8.6 ASIL QM
Prototype tS16 Adc_GetCurSen( tBool second_list )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool second_list
0 ~ 1
FALSE / TRUE
IN
FALSE - ADC list 0,
TREU - ADC list 1
Function Call
Return Value
Data Type Possible Return Value Description
tS16 -16376 ~ 16376 Offset compensated value
Global Variables
Data Type Name Range Read/Write Description
tU16 g_au16AdcResultList0[] 0 ~ 32760 Read ADC0 result list
tU16 g_au16AdcResultList1[] 0 ~ 32760 Read ADC1 result list
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description ADC current sense amplifier result getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.2.2.3 MtrDrv_GetPhsCur
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.8.6
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 74
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.8.6.2 Static View Design
1.1.2.8.6.3 Dynamic View Design
- N/A
1.1.2.8.6.4 Interface Design
- N/A
1.1.2.8.7 [SWDDS.3.6.8.7] Adc_GetErrCnt1
1.1.2.8.7.1 Detailed Design
[SWDDS.3.6.8.7] Adc_GetErrCnt1
Software Unit Information
Unit ID SWDDS.3.6.8.7 Unit Name Adc_GetErrCnt1
Architecture ID SWADS.3.6.8.7 ASIL QM
Prototype tU16 Adc_GetErrCnt1( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 65535 Error count
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16AdcErrCnt1 0 ~ 65535 Read ADC1 error count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 75
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description ADC1 conversion error count getting
Control Flow Diagram
(or Pseudo Code)

Called Function N/A
Calling Function N/A
Function Execution Time N/A
1.1.2.8.7.2 Static View Design
1.1.2.8.7.3 Dynamic View Design
- N/A
1.1.2.8.7.4 Interface Design
- N/A
1.1.2.8.8 [SWDDS.3.6.8.8] Adc_DoneIsr1
1.1.2.8.8.1 Detailed Design
[SWDDS.3.6.8.8] Adc_DoneIsr1
Software Unit Information
Unit ID SWDDS.3.6.8.8
Unit
Name
Adc_DoneIsr1
Architecture ID SWADS.3.6.8.8 ASIL QM
Prototype INTERRUPT void Adc_DoneIsr1(void)
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Data
Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 76
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Type
byte ADC1CONIF_1_CON_IF1 0x01u Write
ADC1 Conversion Interrupt Flag Register 1 - Conversion
Interrupt 1 Flag
Description ADC1 done interrupt service routine
Control Flow
Diagram
(or Pseudo Code)
1. Adc_DoneIsr1 calls the sensorless FOC main function.
2. Adc_DoneIsr1 clears the interrupt flag.
Called Function N/A
Calling Function SWDDS.3.2.1.7 SlFoc_MainFunc
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.8.8
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality High
Technical complexity Low
Verifiability Yes
1.1.2.8.8.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 77
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.8.3 Dynamic View Design
- N/A
1.1.2.8.8.4 Interface Design
- N/A
1.1.2.8.9 [SWDDS.3.6.8.9] Adc_GetErrCnt0
1.1.2.8.9.1 Detailed Design
[SWDDS.3.6.8.9] Adc_GetErrCnt0
Software Unit Information
Unit ID SWDDS.3.6.8.9 Unit Name Adc_GetErrCnt0
Architecture
ID
SWADS.3.6.8.9 ASIL QM
Prototype tU16 Adc_GetErrCnt0( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Data Type Possible Return Value Description
tU16 0 ~ 65535 Error count
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 78
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Value
Global
Variables
Data Type Name Range Read/Write Description
tU16 g_u16AdcErrCnt0 0 ~ 65535 Read ADC0 error count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description ADC0 conversion error count getting
Control
Flow
Diagram
(or Pseudo
Code)
Called
Function
N/A
Calling
Function
N/A
Function
Execution
Time
N/A
1.1.2.8.9.2 Static View Design
- N/A
1.1.2.8.9.3 Dynamic View Design
- N/A
1.1.2.8.9.4 Interface Design
- N/A
1.1.2.8.10 [SWDDS.3.6.8.10] Adc_ErrIsr0
1.1.2.8.10.1 Detailed Design
[SWDDS.3.6.8.10]Adc_ErrIsr0
Software Unit Information
Unit ID [SWDDS.3.6.8.10] Unit Name Adc_ErrIsr0
Architecture ID [SWADS.3.6.8.10] ASIL QM
Prototype INTERRUPT void Adc_ErrIsr0( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Varialbles Data Type Name Range Read/ Write Description
N/A N/A N/A N/A N/A
Parameters Data Type Name Range Read/ Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 79
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers Data Type Name Range Read/ Write Description
tU8 ADC0EIF 0~254 Read/ Write ADC0 Error Interrupt Flag
Register
Description ADC0 error interrupt service routine
Control Flow
Diagram
(or Pseudo Code)
Called Function N/A
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.6.8.10
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.2.8.10.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 80
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.10.3 Dynamic View Design
- N/A
1.1.2.8.10.4 Interface Design
- N/A
1.1.2.8.11 [SWDDS.3.6.8.11] Adc_ErrIsr1
[SWDDS.3.6.8.11]Adc_ErrIsr1
Software Unit Information
Unit ID [SWDDS.3.6.8.11] Unit Name Adc_ErrIsr1
Architecture ID [SWADS.3.6.8.11] ASIL QM
Prototype INTERRUPT void Adc_ErrIsr1( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Varialbles Data Type Name Range Read/ Write Description
N/A N/A N/A N/A N/A
Parameters Data Type Name Range Read/ Write Description
N/A N/A N/A N/A N/A
Registers Data Type Name Range Read/ Write Description
tU8 ADC1EIF 0~254 Read/ Write ADC1 Error Interrupt Flag
Register
Description ADC1 error interrupt service routine
Control Flow
Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 81
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function N/A
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.3.6.8.11
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
1.1.2.8.11.1 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 82
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.8.11.2 Dynamic View Design
- N/A
1.1.2.8.11.3 Interface Design
- N/A
1.1.2.9 [SWDDS.3.6.9] Ptu
Initialize the programmable trigger unit
Get and clear PTU fault
1.1.2.9.1 [SWDDS.3.6.9.1] Ptu_Init
1.1.2.9.1.1 Detailed Design
[SWDDS.3.6.9.1] Ptu_Init
Software Unit Information
Unit ID SWDDS.3.6.9.1 Unit Name Ptu_Init
Architecture ID SWADS.3.6.9.1 ASIL QM
Prototype void Ptu_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU16 g_au16PtuTrigEventList 0~ 785 Read TG0 - event list 0 and 1
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
pointer PTUPTR &g_au16PtuTrigEventList Write PTU Pointer Register
byte TG0L1IDX 0 ~ 255 Write
Trigger Generator 0 List 1 Index
Register
byte TG1L0IDX 0 ~ 255 Write
Trigger Generator 1 List 0 Index
Register
byte TG1L1IDX 0 ~ 255 Write
Trigger Generator 1 List 1 Index
Register
byte PTUE_PTUFRZ 0x00u Write PTU Stop in Freeze Mode
byte PTUE_TG0EN 0x01u Write Trigger Generator 0 Enable
byte PTUE_TG1EN 0x01u Write Trigger Generator 1 Enable
byte PTUC_PTULDOK 0x01u Write Load Okay
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 83
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte PTUDEBUG_PTUREPE 0x00u Write PTU PTURE Pin Enable
Description
PTU initialization
- PTU trigger event list setting
- PTU module enable setting
- PTU module control setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.2 InitializeBswHalMtrCtr
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.9.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.9.1.2 Static View Design
1.1.2.9.1.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 84
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.9.1.4 Interface Design
- N/A
1.1.2.10 [SWDDS.3.6.10] MsCan
Initialize the CAN port
Receive CAN message
Transmit CAN message
1.1.2.10.1 [SWDDS.3.6.10.1] MsCan_Init
1.1.2.10.1.1 Detailed Design
[SWDDS.3.6.10.1] MsCan_Init
Software Unit Information
Unit ID SWDDS.3.6.10.1 Unit Name MsCan_Init
Architecture
ID
SWADS.3.6.10.1 ASIL QM
Prototype void MsCan_Init( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tU32 g_au32MsCanAccepId
0x00000000uL,
0x00000000uL
Read
CAN
acceptance
identifier and
mask
tU32 g_au32MsCanAcceptMask
0xffffffffuL,
0xffffffffuL
Read
CAN
acceptance
mask
(0 -
matched, 1 -
ignored)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Data Type Name Range Read/Write Description
byte CAN0CTL1_CANE 0x01u Write
MSCAN
Enable
byte CAN0CTL0_INITRQ 0x00u~0x01u Write
Initialization
Mode
Request
byte CAN0CTL1_INITAK
0 ~ 1
Not
acknowledge /
Acknowledge
Read
Initialization
Mode
Acknowledge
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 85
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
byte CAN0CTL0_CSWAI 0x00u Write
CAN Stops in
Wait Mode
byte CAN0CTL0_TIME 0x01u Write Timer Enable
byte CAN0CTL0_WUPE 0x00u Write
Wake-Up
Enable
byte CAN0CTL1_CLKSRC 0x01u Write
MSCAN
Clock Source
byte CAN0CTL1_LOOPB 0x00u Write
Loop Back
Self Test
Mode
byte CAN0CTL1_LISTEN 0x00u Write
Listen Only
Mode
byte CAN0CTL1_BORM 0x01u Write
Bus-Off
Recovery
Mode
byte CAN0CTL1_WUPM 0x00u Write
Wake-Up
Mode
byte CAN0BTR0_SJW 0 ~ 3 Write CAN SJW
byte CAN0BTR1_SAMP 1u Write Sampling
byte CAN0IDAC_IDAM 0x00u Write
2x 16-bit
acceptance
filter
byte CAN0IDAC_IDHIT 0x00u Write filter 0 hit
byte CAN0MISC_BOHOLD 0x00u Write
Bus-off
State Hold
Until User
Request
byte CAN0IDAR3 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 3
byte CAN0IDAR2 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 2
byte CAN0IDAR1 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 1
byte CAN0IDAR0 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 0
byte CAN0IDMR3 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 3
byte CAN0IDMR2 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 2
byte CAN0IDMR1 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 1
byte CAN0IDMR0 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 0
byte CAN0IDAR7 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 7
MSCAN0
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 86
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
byte CAN0IDAR6 0 ~ 255 Write
Identifier
Acceptance
Register 6
byte CAN0IDAR5 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 5
byte CAN0IDAR4 0 ~ 255 Write
MSCAN0
Identifier
Acceptance
Register 4
byte CAN0IDMR7 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 7
byte CAN0IDMR6 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 6
byte CAN0IDMR5 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 5
byte CAN0IDMR4 0 ~ 255 Write
MSCAN0
Identifier
Mask
Register 4
Description
MSCAN initialization
- Assert CANE
- Write to the configuration registers in initialization mode
- CANCTL0 register setting
- CANCTL1 register setting
- Baud rate setting
- Acceptance identifier and mask setting
- Clear INITRQ to leave initialization mode
Control
Flow
Diagram

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 87
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.3.6.1.1 BswHal_Init
SWDDS.5 main
Calling
Function
SWDDS.3.6.10.8 SetMsCanBaudRate
Function
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 88
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Execution
Time
N/A
Requirement Id SWDDS.3.6.10.1
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.10.1.2 Static View Design
1.1.2.10.1.3 Dynamic View Design
- N/A
1.1.2.10.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 baud_rate SWDDS.3.6.10.8 OUT tMsCanBaudRate 0 5
CAN_BAUDRATE
_1MBPS
CAN_BAUDRATE
_50KBPS
N/A
CAN baud
rate
1.1.2.10.2 [SWDDS.3.6.10.2] MsCan_ChkRxRdy
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 89
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.2.1 Detailed Design
[SWDDS.3.6.10.2] MsCan_ChkRxRdy
Software Unit Information
Unit ID SWDDS.3.6.10.2 Unit Name MsCan_ChkRxRdy
Architecture ID SWADS.3.6.10.2 ASIL QM
Prototype tBool MsCan_ChkRxRdy( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 FALSE - not ready, TRUE -ready
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0RFLG_RXF
0 ~ 1
Not ready / Ready
Read Receive Buffer Full
Description MSCAN data received data ready checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.2 CanMsg_ChkReqDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.2
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 90
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.2.2 Static View Design
1.1.2.10.2.3 Dynamic View Design
- N/A
1.1.2.10.2.4 Interface Design
- N/A
1.1.2.10.3 [SWDDS.3.6.10.3] MsCan_GetRxId
1.1.2.10.3.1 Detailed Design
[SWDDS.3.6.10.3] MsCan_GetRxId
Software Unit Information
Unit ID SWDDS.3.6.10.3 Unit Name MsCan_GetRxId
Architecture ID SWADS.3.6.10.3 ASIL QM
Prototype tU32 MsCan_GetRxId( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU32 0 ~ 536870911 Received identifier
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0RXIDR1_IDE
0 ~ 1
Standard ID / Extended ID
Read ID Extended
byte CAN0RXIDR0 0 ~ 255 Read MSCAN0 Receive Identifier Register 0
byte CAN0RXIDR1 0 ~ 255 Read MSCAN0 Receive Identifier Register 1
byte CAN0RXIDR2 0 ~ 255 Read MSCAN0 Receive Identifier Register 2
byte CAN0RXIDR3 0 ~ 255 Read MSCAN0 Receive Identifier Register 3
Description MSCAN Received identifier getting
Control Flow Diagram
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 91
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.2 CanMsg_ChkReqDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.3
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.3.2 Static View Design
1.1.2.10.3.3 Dynamic View Design
- N/A
1.1.2.10.3.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 92
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.4 [SWDDS.3.6.10.4] MsCan_GetRxDat
1.1.2.10.4.1 Detailed Design
[SWDDS.3.6.10.4] MsCan_GetRxDat
Software Unit Information
Unit ID SWDDS.3.6.10.4 Unit Name MsCan_GetRxDat
Architecture ID SWADS.3.6.10.4 ASIL QM
Prototype void MsCan_GetRxDat( tU8 received_data[8], tU16* received_number, tU16* received_time_stamp )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU8 received_data 0 ~ 255 OUT received data (8 bytes)
tU16* received_number 0 ~ 8 OUT number of received data
tU16* received_time_stamp 0 ~ 65535 OUT received time stamp
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0RXDSR0 0 ~ 255 Read MSCAN0 Receive Data Segment Register 0
byte CAN0RXDSR1 0 ~ 255 Read MSCAN0 Receive Data Segment Register 1
byte CAN0RXDSR2 0 ~ 255 Read MSCAN0 Receive Data Segment Register 2
byte CAN0RXDSR3 0 ~ 255 Read MSCAN0 Receive Data Segment Register 3
byte CAN0RXDSR4 0 ~ 255 Read MSCAN0 Receive Data Segment Register 4
byte CAN0RXDSR5 0 ~ 255 Read MSCAN0 Receive Data Segment Register 5
byte CAN0RXDSR6 0 ~ 255 Read MSCAN0 Receive Data Segment Register 6
byte CAN0RXDSR7 0 ~ 255 Read MSCAN0 Receive Data Segment Register 7
byte CAN0RXDLR_DLC 0 ~ 8 Read received number of data
Word CAN0RXTSR 0 ~ 65535 Read MSCAN0 Receive Time Stamp Register
byte CAN0RFLG_RXF 0x01u Write Receive Buffer Full
Description MSCAN data receiving
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.2 CanMsg_ChkReqDat
Calling Function N/A
Function Execution Time N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 93
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.6.10.4
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.4.2 Static View Design
1.1.2.10.4.3 Dynamic View Design
- N/A
1.1.2.10.4.4 Interface Design
- N/A
1.1.2.10.5 [SWDDS.3.6.10.5] SetMsCanTxId
1.1.2.10.5.1 Detailed Design
[SWDDS.3.6.10.5] SetMsCanTxId
Software Unit Information
Unit ID SWDDS.3.6.10.5 Unit Name SetMsCanTxId
Architecture ID SWADS.3.6.10.5 ASIL QM
Prototype void SetMsCanTxId( tU32 transmit_identifier, tBool extended_identifier )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 transmit_identifier 0 ~ 536870911 IN transmission identifier
tBool extended_identifier
0 ~ 1
Standard ID / Extended ID
IN
FALSE - standard ID,
TRUE- extended ID
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 94
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0TXIDR0 0 ~ 255 Write MSCAN0 Transmit Identifier Register 0
byte CAN0TXIDR1 0 ~ 255 Write MSCAN0 Transmit Identifier Register 1
byte CAN0TXIDR2 0 ~ 255 Write MSCAN0 Transmit Identifier Register 2
byte CAN0TXIDR3 0 ~ 255 Write MSCAN0 Transmit Identifier Register 3
byte CAN0TXIDR1_IDE 0x00u~0x01u Write ID Extended
byte CAN0TXIDR1_SRR 0x00u~0x01u Write Substitute Remote Request
Description
MSCAN transmission identifier setting
- Transmission identifier setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.10.7 MsCan_SendTxDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.5
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 95
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.5.2 Static View Design
1.1.2.10.5.3 Dynamic View Design
- N/A
1.1.2.10.5.4 Interface Design
- N/A
1.1.2.10.6 [SWDDS.3.6.10.6] SetMsCanTransmitDat
1.1.2.10.6.1 Detailed Design
[SWDDS.3.6.10.6] SetMsCanTransmitDat
Software Unit Information
Unit ID SWDDS.3.6.10.6 Unit Name SetMsCanTransmitDat
Architecture ID SWADS.3.6.10.6 ASIL QM
Prototype void SetMsCanTransmitDat( tU8 transmit_data[8u], tU16 transmit_number )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU8 transmit_data 0 ~ 255 IN transmission data (8 bytes)
tU16 transmit_number 0 ~ 8 IN number of transmission data
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0TXDSR0 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 0
byte CAN0TXDSR1 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 1
byte CAN0TXDSR2 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 2
byte CAN0TXDSR3 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 3
byte CAN0TXDSR4 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 4
byte CAN0TXDSR5 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 5
byte CAN0TXDSR6 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 6
byte CAN0TXDSR7 0 ~ 255 Write MSCAN0 Transmit Data Segment Register 7
byte CAN0TXDLR 0 ~ 8 Write MSCAN0 Transmit Data Length Register
Description
MSCAN transmission data setting
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 96
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
- Transmission data setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.10.7 MsCan_SendTxDat
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.6
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.6.2 Static View Design
1.1.2.10.6.3 Dynamic View Design
- N/A
1.1.2.10.6.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 97
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.7 [SWDDS.3.6.10.7] MsCan_SendTxDat
1.1.2.10.7.1 Detailed Design
[SWDDS.3.6.10.7] MsCan_SendTxDat
Software Unit Information
Unit ID SWDDS.3.6.10.7 Unit Name MsCan_SendTxDat
Architecture ID SWADS.3.6.10.7 ASIL QM
Prototype
tU8 MsCan_SendTxDat( tU32 transmit_identifier, tBool extended_identifier, tU8 transmit_data[8u], tU16
transmit_number )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU32 transmit_identifier 0 ~ 536870911 IN transmission identifier
tBool extended_identifier
0 ~ 1
Standard ID / Extended ID
IN
FALSE - standard ID,
TRUE- extended ID
tU8 transmit_data 0 ~ 255 IN transmission data (8 bytes)
tU16 transmit_number 0 ~ 8 IN number of transmission data
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8 N/A Error count
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte CAN0TBSEL 0 ~ 7 Read/Write MSCAN0 Transmit Buffer Selection
byte CAN0TFLG 0 ~ 7 Read/Write MSCAN0 Transmitter Flag Register
byte CAN0TXTBPR 0x00u Write MSCAN0 Transmit Buffer Priority
Description MSCAN transmission data sending
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 98
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.3.1.5 CanMsg_SendResDat
Calling Function
SWDDS.3.6.10.5 SetMsCanTxId
SWDDS.3.6.10.6 SetMsCanTransmitDat
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.7
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.7.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 99
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.10.7.3 Dynamic View Design
- N/A
1.1.2.10.7.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 transmit_identifier SWDDS.3.6.10.5 OUT tU32 0 536870911 0 536870911 N/A
transmission
identifier
2 extended_identifier SWDDS.3.6.10.5 OUT tBool 0 1
Standard
ID
Extended
ID
N/A
Standard ID and
extended ID
selection
3 transmit_data[8u] SWDDS.3.6.10.6 OUT tU8 0 255 0 255 N/A
transmission data
(8 bytes)
4 transmit_number SWDDS.3.6.10.6 OUT tU16 0 8 0 8 N/A
number of
transmission data
1.1.2.10.8 [SWDDS.3.6.10.8] SetMsCanBaudRate
1.1.2.10.8.1 Detailed Design
[SWDDS.3.6.10.8] SetMsCanBaudRate
Software Unit Information
Unit ID SWDDS.3.6.10.8 Unit Name SetMsCanBaudRate
Architecture ID SWADS.3.6.10.8 ASIL QM
Prototype void SetMsCanBaudRate( tMsCanBaudRate baud_rate )
Data Type Name Range IN/OUT Description
0 ~ 5
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 100
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Parameters tMsCanBaudRate baud_rate
CAN_BAUDRATE_1MBPS/
CAN_BAUDRATE_500KBPS/
CAN_BAUDRATE_250KBPS/
CAN_BAUDRATE_100KBPS/
CAN_BAUDRATE_50KBPS
IN
baud rate setting
(CAN_BAUDRATE_1MBPS ~
CAN_BAUDRATE_50KBPS)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
byte CAN0BTR0_BRP 3u, 7u, 15u, 19u, 39u Write baud rate prescaler
byte CAN0BTR1_TSEG_10 6u, 14u Write TSEG1
byte CAN0BTR1_TSEG_20 1u, 3u Write TSEG2
Description CAN data transmission interrupt service routine
Control Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.3.6.10.1 MsCan_Init
Calling
Function
N/A
Function
Execution Time
N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 101
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.3.6.10.8
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.8.2 Static View Design
1.1.2.10.8.3 Dynamic View Design
- N/A
1.1.2.10.8.4 Interface Design
- N/A
1.1.2.10.9 [SWDDS.3.6.10.9] MsCan_GetRxFlg
1.1.2.10.9.1 Detailed Design
[SWDDS.3.6.10.9] MsCan_GetRxFlg
Software Unit Information
Unit ID SWDDS.3.6.10.9 Unit Name MsCan_GetRxFlg
Architecture ID SWADS.3.6.10.9 ASIL QM
Prototype tU8 MsCan_GetRxFlg( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU8 0 ~ 255 MSCAN data receiving flag
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 102
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
byte CAN0RFLG 0 ~ 255 Read MSCAN0 Receiver Flag Register
Description MSCAN data receiving flag getting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.23 RteIo_GetCanBusSta
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.3.6.10.9
Target Milestone EBS2
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.10.9.2 Static View Design
1.1.2.10.9.3 Dynamic View Design
- N/A
1.1.2.10.9.4 Interface Design
- N/A
1.1.2.11 [SWDDS.3.6.11] Eeprom
Verify EEPROM section erased
Program EEPROM data
Erase EEPROM sector
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 103
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.1 [SWDDS.3.6.11.1] Eeprom_Init
1.1.2.11.1.1 Detailed Design
[SWDDS.3.6.11.1] Eeprom_Init
Software Unit Information
Unit ID SWDDS.3.6.11.1 Unit Name Eeprom_Init
Architecture ID SWADS.3.6.11.1 ASIL QM
Prototype void Eeprom_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FSTAT_CCIF
0 ~ 1
Previous command in progress /
done
Read
Command Complete Interrupt
Flag
byte FCLKDIV 0x27u Write Flash Clock Divider Register
Description EEPROM initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.3.6.1.1 BswHal_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.1
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 104
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Low
Technical complexity Low
Verifiability Yes
1.1.2.11.1.2 Static View Design
1.1.2.11.1.3 Dynamic View Design
- N/A
1.1.2.11.1.4 Interface Design
- N/A
1.1.2.11.2 [SWDDS.3.6.11.2] CheckEepromPrevCmd
1.1.2.11.2.1 Detailed Design
[SWDDS.3.6.11.2] CheckEepromPrevCmd
Software Unit Information
Unit ID SWDDS.3.6.11.2 Unit Name CheckEepromPrevCmd
Architecture ID SWADS.3.6.11.2 ASIL QM
Prototype void CheckEepromPrevCmd( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FSTAT_CCIF
0 ~ 1
Previous command in progress /
done
Read
Command Complete Interrupt
Flag
byte FSTAT 0x30u Write Flash Status Register
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 105
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description EEPROM previous command checking
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.3.6.11.4 Eeprom_VerifySectionErased
SWDDS.3.6.11.5 Eeprom_ProgramDat
SWDDS.3.6.11.6 Eeprom_EraseSector
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.2
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.11.2.2 Static View Design
1.1.2.11.2.3 Dynamic View Design
- N/A
1.1.2.11.2.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 106
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.3 [SWDDS.3.6.11.3] ExecuteEepromCmd
1.1.2.11.3.1 Detailed Design
[SWDDS.3.6.11.3] ExecuteEepromCmd
Software Unit Information
Unit ID SWDDS.3.6.11.3 Unit Name ExecuteEepromCmd
Architecture ID SWADS.3.6.11.3 ASIL QM
Prototype tU8 ExecuteEepromCmd( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8
0 ~ 4
EEPROM_RET_OK / EEPROM_RET_ERASED /
EEPROM_RET_NOT_ERASED /
EEPROM_RET_MISALIGN_ADDR
/ EEPROM_RET_ACC_ERR
Execution result
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FSTAT_CCIF
0 ~ 1
Previous command in progress / done
Read/Write
Command Complete Interrupt
Flag
byte FSTAT 0 ~ 187 Read Flash Status Register
Description
EEPROM command execution
- Flash command execution
- Error checking
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.3.6.11.4 Eeprom_VerifySectionErased
SWDDS.3.6.11.5 Eeprom_ProgramDat
SWDDS.3.6.11.6 Eeprom_EraseSector
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 107
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.3
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.11.3.2 Static View Design
1.1.2.11.3.3 Dynamic View Design
- N/A
1.1.2.11.3.4 Interface Design
- N/A
1.1.2.11.4 [SWDDS.3.6.11.4] Eeprom_VerifySectionErased
1.1.2.11.4.1 Detailed Design
[SWDDS.3.6.11.4] Eeprom_VerifySectionErased
Software Unit Information
Unit ID SWDDS.3.6.11.4 Unit Name Eeprom_VerifySectionErased
Architecture ID SWADS.3.6.11.4 ASIL QM
Prototype tU8 Eeprom_VerifySectionErased( tU32 memory_address, tU16 number_of_words )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU32 memory_address 0 ~ 511 IN memory address
tU16 number_of_words 1 ~ 4 IN number of data words (1 ~ 4)
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 108
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8
0 ~ 4
EEPROM_RET_OK / EEPROM_RET_ERASED /
EEPROM_RET_NOT_ERASED /
EEPROM_RET_MISALIGN_ADDR
/ EEPROM_RET_ACC_ERR
Execution result
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FCCOBIX 0x02u Write Flash CCOB Index Register
byte FCCOB0HI 0x10u Write
Flash Common Command Object
Register High
byte FCCOB0LO 0 ~ 255 Write
Flash Common Command Object
Register Low
Word FCCOB1 0 ~ 65535 Write
Flash Common Command Object
Register
Word FCCOB2 0 ~ 65535 Write
Flash Common Command Object
Register
byte FSTAT_MGSTAT
0 ~ 3
No error /
non-correctable error /
error in read or blank check /
error in read or blank check
Read
Memory Controller Command Completion
Status Flag
Description
EEPROM section erased checking
- Address alignment checking
- Previous command in progress checking
- Flash common command object setting
- Flash command execution
- Erased checking
Control Flow
Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 109
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.3.6.11.5 Eeprom_ProgramDat
Calling Function
SWDDS.3.6.11.2 CheckEepromPrevCmd
SWDDS.3.6.11.3 ExecuteEepromCmd
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.4
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.11.4.2 Static View Design
1.1.2.11.4.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 110
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.4.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 execution_result SWDDS.3.6.11.3 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A Execution result
1.1.2.11.5 [SWDDS.3.6.11.5] Eeprom_ProgramDat
1.1.2.11.5.1 Detailed Design
[SWDDS.3.6.11.5] Eeprom_ProgramDat
Software Unit Information
Unit ID SWDDS.3.6.11.5 Unit Name Eeprom_ProgramDat
Architecture ID SWADS.3.6.11.5 ASIL QM
Prototype tU8 Eeprom_ProgramDat( tU32 memory_address, const tU16* data_word, tU16 number_of_words )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU32 memory_address 0 ~ 511 IN memory address
const
tU16*
data_word 0 ~ 65535 IN programmed data words (array)
tU16 number_of_words 1 ~ 4 IN number of data words (1 ~ 4)
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8
0 ~ 4
EEPROM_RET_OK / EEPROM_RET_ERASED /
EEPROM_RET_NOT_ERASED /
EEPROM_RET_MISALIGN_ADDR
/ EEPROM_RET_ACC_ERR
Execution result
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FCCOBIX 2 ~ 5 Write Flash CCOB Index Register
byte FCCOB0HI 0x11u Write
Flash Common Command Object
Register High
byte FCCOB0LO 0 ~ 255 Write
Flash Common Command Object
Register Low
Word FCCOB1 0 ~ 65535 Write
Flash Common Command Object
Register
Word FCCOB2 0 ~ 65535 Write
Flash Common Command Object
Register
Word FCCOB3 0 ~ 65535 Write
Flash Common Command Object
Register
Word FCCOB4 0 ~ 65535 Write
Flash Common Command Object
Register
Word FCCOB5 0 ~ 65535 Write
Flash Common Command Object
Register
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 111
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description
EEPROM data programming
- Address alignment checking
- Memory section erased checking
- Previous command in progress checking
- Flash common command object setting
- Data setting
- Flash command execution
Control Flow
Diagram
(or Pseudo Code)
1. Eeprom_ProgramDat checks the EEPROM memory address alignment.
2. Eeprom_ProgramDat checks if the given EEPROM memory address is erased.
3. Eeprom_ProgramDat waits for previous memory command ending.
4. Eeprom_ProgramDat sets the EEPROM command and data.
5. Eeprom_ProgramDat executes the EEPROM programming commands.

Called Function SWDDS.3.5.1.2 Nvm_SaveEepromDat
Calling Function
SWDDS.3.6.11.4 Eeprom_VerifySectionErased
SWDDS.3.6.11.2 CheckEepromPrevCmd
SWDDS.3.6.11.3 ExecuteEepromCmd
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.5
Target Milestone SBS2.1
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 112
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
1.1.2.11.5.2 Static View Design
1.1.2.11.5.3 Dynamic View Design
- N/A
1.1.2.11.5.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 memory_address SWDDS.3.6.11.4 OUT tU32 0 511 0 511 N/A memory address
2 number_of_words SWDDS.3.6.11.4 OUT tU16 1 4 1 4 N/A
number of data
words
3 execution_result SWDDS.3.6.11.4 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A Execution result
4 execution_result SWDDS.3.6.11.3 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A Execution result
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 113
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.6 [SWDDS.3.6.11.6] Eeprom_EraseSector
1.1.2.11.6.1 Detailed Design
[SWDDS.3.6.11.6] Eeprom_EraseSector
Software Unit Information
Unit ID SWDDS.3.6.11.6 Unit Name Eeprom_EraseSector
Architecture ID SWADS.3.6.11.6 ASIL QM
Prototype tU8 Eeprom_EraseSector( tU32 memory_address )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tU32 memory_address 0 ~ 510 IN memory address
Function Call
Return Value
Data
Type
Possible Return Value Description
tU8
0 ~ 4
EEPROM_RET_OK / EEPROM_RET_ERASED /
EEPROM_RET_NOT_ERASED /
EEPROM_RET_MISALIGN_ADDR
/ EEPROM_RET_ACC_ERR
Execution result
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
byte FCCOBIX 0x01u Write Flash CCOB Index Register
byte FCCOB0HI 0x12u Write
Flash Common Command Object
Register High
byte FCCOB0LO 0 ~ 255 Write
Flash Common Command Object
Register Low
Word FCCOB1 0 ~ 65535 Write
Flash Common Command Object
Register
Description
EEPROM sector erasing
- Address alignment checking
- Previous command in progress checking
- Flash common command object setting
- Flash command execution
Control Flow
Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 114
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.3.5.1.2 Nvm_SaveEepromDat
Calling Function
SWDDS.3.6.11.2 CheckEepromPrevCmd
SWDDS.3.6.11.3 ExecuteEepromCmd
Function Execution
Time
N/A
Requirement Id SWDDS.3.6.11.6
Target Milestone SBS2.1
Element HAL
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
1.1.2.11.6.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 115
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.1.2.11.6.3 Dynamic View Design
- N/A
1.1.2.11.6.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 execution_result SWDDS.3.6.11.3 IN tU8 0 4
EEPROM
_RET_OK
EEPROM_RET
_ACC_ERR
N/A Execution result
1.2 [SWDDS.4] CFG
1.2.1 [SWDDS.4.1] CalData
Initialize calibration data according to hardware ID
1.2.1.1 [SWDDS.4.1.1] CalData_Init
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 116
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2.1.1.1 Detailed Design
[SWDDS.4.1.1] CalData_Init
Software Unit Information
Unit ID SWDDS.4.1.1 Unit Name CalData_Init
Architecture ID SWADS.4.1.1 ASIL QM
Prototype void CalData_Init( tOpuHwId opu_hardware_id )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tOpuHwId opu_hardware_id
0 ~ 2,
OPU_HW_ID_UNDEFINED/
OPU_HW_ID_AQ301/
OPU_HW_ID_AQ451
IN OPU hardware ID setting
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Calibration data initialization depending on hardware ID
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.4.1.1
Target Milestone EBS2
Element CalData
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 117
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2.1.1.2 Static View Design
1.2.1.1.3 Dynamic View Design
- N/A
1.2.1.1.4 Interface Design
- N/A
1.2.2 [SWDDS.4.2] Param
Define parameter data
Set direction of motor rotation according to Hardware ID
1.2.2.1 [SWDDS.4.2.1] Param_Init
1.2.2.1.1 Detailed Design
[SWDDS.4.2.1] Param_Init
Software Unit Information
Unit ID SWDDS.4.2.1 Unit Name Param_Init
Architecture ID SWADS.4.2.1 ASIL QM
Prototype void Param_Init( tOpuHwId opu_hardware_id )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tOpuHwId opu_hardware_id
0 ~ 2,
OPU_HW_ID_UNDEFINED/
OPU_HW_ID_AQ301/
OPU_HW_ID_AQ451
IN OPU hardware ID setting
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tBool par_bMtrRevDir
0 ~ 1,
FALSE/TRUE
Write Reverse directional driving
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 118
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description Parameter initialization depending on hardware ID
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.3.1 RteIo_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.4.2.1
Target Milestone EBS2
Element Param
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.2.2.1.2 Static View Design
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 119
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.2.2.1.3 Dynamic View Design
- N/A
1.2.2.1.4 Interface Design
- N/A
1.3 [SWDDS.5] Main
Main initializes OPU related peripherals, and executes Run Background routine.
1.3.1 Detailed Design
[SWDDS.5] Main
Software Unit Information
Unit ID SWDDS.5 Unit Name main
Architecture ID SWADS.5 ASIL QM
Prototype void main( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Main function
- OPU initialization
- Infinite loop for background processing
Control Flow Diagram
(or Pseudo Code)
Called Function N/A
Calling Function
SWDDS.2.1.1 RteSch_Init
SWDDS.2.1.5 RteSch_MainFunc
Function Execution Time N/A
Requirement Id SWDDS.5
Target Milestone EBS2
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 120
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element Main
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
1.3.2 Static View Design
1.3.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 121
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.3.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version
/ Date
003
Software Detailed Design Specification
Updated Date 2021-04-27
Page 122
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
VW AQ EOP
Software Detailed Design Specification(1/4)
Document Properties
Status: Open
Version: 003
Author: Kim Minsu
Created: 2020-12-17 22:27
Approved Versions
Current Document version 003 has not been approved.
Approved Versions:
001 (2021-01-06 15:50)
002 (2021-04-15 21:13)
002 (2021-04-22 10:16)
Document Signatures
Approved (Status Change Pending)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 1
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Document Control Information
Location: The released versions of this document are maintained by SWE DE and managed in the following location:
[Polarion] VW AQ EOP / Documents & Pages / 02_Engineering / 12_SWE_Design
Version Date of Release
Description
(Change and Reasons for Change)
Author Reviewer Approver
001
2020-10-28 Initiation of draft version Taihyun Kyung - -
2020-11-30
Add flow diagram and sequence
diagram
Taihyun Kyung
Rasekar
Prashant
Hyojin Ahn
002
2021-02-15
Add evalution criteria
Resolved defect - CR-0005
Taihyun Kyung - -
2021-02-17 Modify traceability management Taihyun Kyung - -
2021-02-26
Change the Customer
Requirement_CAN Timeout-0008
Add the Tolerance of Voltage-
CR-0009
Taihyun Kyung - -
2021-03-10
Changed low temperature warning
criteria - CR-0003
Taihyun Kyung - -
2021-03-12
Change and add component -
CR-0010
Taihyun Kyung - -
2021-04-09
OPU HW change to apply EMC
debugging(TL81000, CE) results-
CR-0012
Taihyun Kyung - -
2021-04-15
Change Target Milestone, Traceability
- CR-0010
Add description for Control Flow
Diagram and Sequence Diagram
Minsu Kim Sungjin Park Hyojin Ahn
2021-04-22 Resolved problem: CMNC-0033 Minsu Kim Sungjin Park Hyojin Ahn
003
2021-04-30
Change Static View Design, Dynamic
View Design and Interface Design
Minsu Kim - -
2021-05-11 Fixed typo Minsu Kim - -
2021-05-25
Resolve defect of SWQT (Protect
mode) - CR-0025
Minsu Kim - -
2021-06-30
Apply template :
VW_AQ_EOP_SWDDS_Template V0.1
Minsu Kim - -
2021-06-30
Change Static View Design, Dynamic
View Design and Interface Design
Minsu Kim - -
Table 1 Version History
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 2
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table of Contents
1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.1 Purpose . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.2 Scope . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3 Strategy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3.1 Traceability Management . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3.1.1 Software detailed design identifier notation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3.2 Sequence Diagram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3.3 Diagram Notation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1.3.4 Evaluation Criteria . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.4 Terms, Acronyms and Abbreviations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
1.5 References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
2 Software Hierarchy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
3 Function Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
3.1 [SWDDS.1.1] AswSen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
3.1.1 [SWDDS.1.1.1] AswSen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
3.1.1.1 [SWDDS.1.1.1.1] AswSen_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
3.1.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
3.1.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3.1.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3.1.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3.1.1.2 [SWDDS.1.1.1.2] AswSen_FilterInpSig . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3.1.1.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3.1.1.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
3.1.1.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
3.1.1.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
3.1.2 [SWDDS.1.1.2] CtrSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
3.1.2.1 [SWDDS.1.1.2.1] CtrSta_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
3.1.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
3.1.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
3.1.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
3.1.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
3.1.2.2 [SWDDS.1.1.2.2] CtrSta_Chk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
3.1.2.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
3.1.2.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
3.1.2.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
3.1.2.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
3.1.3 [SWDDS.1.1.3] CurSig . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
3.1.3.1 [SWDDS.1.1.3.1] CurSig_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
3.1.3.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
3.1.3.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
3.1.3.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
3.1.3.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
3.1.3.2 [SWDDS.1.1.3.2] CurSig_Measr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
3.1.3.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
3.1.3.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28
3.1.3.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
3.1.3.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
3.1.3.3 [SWDDS.1.1.3.3] GetCurSigCurOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
3.1.3.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
3.1.3.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
3.1.3.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
3.1.3.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
3.1.3.4 [SWDDS.1.1.3.5] GetCurSigDcCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
3.1.3.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 3
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
3.1.3.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
3.1.3.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
3.1.3.5 [SWDDS.1.1.3.6] CalculateCurSigDcCurTrqSpdVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
3.1.3.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33
3.1.3.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
3.1.3.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
3.1.3.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36
3.1.3.6 [SWDDS.1.1.3.7] CalcCurSigDcCurCompnIntpSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
3.1.3.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
3.1.3.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
3.1.3.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
3.1.3.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
3.1.3.7 [SWDDS.1.1.3.8] CalcCurSigDcCurCompnIntpCurQ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
3.1.3.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
3.1.3.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
3.1.3.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
3.1.3.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
3.1.3.8 [SWDDS.1.1.3.9] CalculateCurSigDcCurCompn . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
3.1.3.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
3.1.3.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
3.1.3.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
3.1.3.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
3.1.4 [SWDDS.1.1.4] DcVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
3.1.4.1 [SWDDS.1.1.4.1] DcVolt_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
3.1.4.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
3.1.4.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
3.1.4.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
3.1.4.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
3.1.4.2 [SWDDS.1.1.4.2] DcVolt_Measr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
3.1.4.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
3.1.4.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.4.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.4.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.5 [SWDDS.1.1.5] McuSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.5.1 [SWDDS.1.1.5.1] McuSta_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.5.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
3.1.5.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58
3.1.5.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
3.1.5.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
3.1.5.2 [SWDDS.1.1.5.2] McuSta_Chk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
3.1.5.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
3.1.5.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
3.1.5.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
3.1.5.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
3.1.5.3 [SWDDS.1.1.5.3] GetMcuStaBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
3.1.5.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
3.1.5.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
3.1.5.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
3.1.5.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62
3.1.6 [SWDDS.1.1.6] MtrSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
3.1.6.1 [SWDDS.1.1.6.1] MtrSpd_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
3.1.6.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
3.1.6.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
3.1.6.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
3.1.6.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
3.1.6.2 [SWDDS.1.1.6.2] MtrSpd_Measr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 4
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.6.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
3.1.6.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
3.1.6.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
3.1.6.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
3.1.7 [SWDDS.1.1.7] MtrTrq . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
3.1.7.1 [SWDDS.1.1.7.1] MtrTrq_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
3.1.7.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
3.1.7.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
3.1.7.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
3.1.7.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
3.1.7.2 [SWDDS.1.1.7.2] MtrTrq_Cal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
3.1.7.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
3.1.7.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
3.1.7.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
3.1.7.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
3.1.8 [SWDDS.1.1.8] ReqMsg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
3.1.8.1 [SWDDS.1.1.8.1] ReqMsg_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
3.1.8.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
3.1.8.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
3.1.8.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
3.1.8.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
3.1.8.2 [SWDDS.1.1.8.2] ReqMsg_Recv . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
3.1.8.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
3.1.8.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
3.1.8.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
3.1.8.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
3.1.8.3 [SWDDS.1.1.8.3] CheckReqMsgTgtSpdRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77
3.1.8.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
3.1.8.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
3.1.8.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
3.1.8.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
3.1.8.4 [SWDDS.1.1.8.4] CheckReqMsgRxTimOut . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
3.1.8.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
3.1.8.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80
3.1.8.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
3.1.8.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
3.1.8.5 [SWDDS.1.1.8.5] CheckReqMsgCanBusSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
3.1.8.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
3.1.8.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.8.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.8.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.9 [SWDDS.1.1.9] TempSig . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.9.1 [SWDDS.1.1.9.1] TempSig_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.9.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
3.1.9.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
3.1.9.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
3.1.9.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
3.1.9.2 [SWDDS.1.1.9.2] TempSig_Measr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
3.1.9.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
3.1.9.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
3.1.9.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
3.1.9.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
3.1.9.3 [SWDDS.1.1.9.3] InterpolateTempSigPcbTemp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
3.1.9.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
3.1.9.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
3.1.9.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
3.1.9.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 5
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2 [SWDDS.1.2] AswCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
3.2.1 [SWDDS.1.2.1] AswCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
3.2.1.1 [SWDDS.1.2.1.1] AswCtr_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
3.2.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
3.2.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
3.2.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
3.2.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
3.2.2 [SWDDS.1.2.2] DrvSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
3.2.2.1 [SWDDS.1.2.2.1] DrvSta_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
3.2.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
3.2.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
3.2.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
3.2.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
3.2.2.2 [SWDDS.1.2.2.2] ClearDrvStaHoldCnt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
3.2.2.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
3.2.2.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
3.2.2.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
3.2.2.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
3.2.2.3 [SWDDS.1.2.2.3] DrvSta_Chk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
3.2.2.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
3.2.2.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
3.2.2.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
3.2.2.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
3.2.2.4 [SWDDS.1.2.2.4] CheckDrvStaFlagClr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
3.2.2.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
3.2.2.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
3.2.2.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
3.2.2.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
3.2.2.5 [SWDDS.1.2.2.5] CheckDrvStaAtCtrEna . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
3.2.2.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101
3.2.2.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102
3.2.2.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
3.2.2.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
3.2.2.6 [SWDDS.1.2.2.6] CheckDrvStaAtSlRun . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
3.2.2.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
3.2.2.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
3.2.2.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
3.2.2.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
3.2.2.7 [SWDDS.1.2.2.7] CheckDrvStaAtCurLmt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
3.2.2.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
3.2.2.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
3.2.2.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
3.2.2.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107
3.2.2.8 [SWDDS.1.2.2.8] CheckDrvStaShrtCir . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
3.2.2.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108
3.2.2.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
3.2.2.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109
3.2.2.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
3.2.2.9 [SWDDS.1.2.2.9] CheckDrvStaCtrFlt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
3.2.2.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
3.2.2.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112
3.2.2.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
3.2.2.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
3.2.2.10 [SWDDS.1.2.2.10] CheckDrvStaLowCur . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
3.2.2.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113
3.2.2.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114
3.2.2.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 6
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
3.2.2.11 [SWDDS.1.2.2.11] CheckDrvStaMtrSpdRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
3.2.2.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
3.2.2.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116
3.2.2.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117
3.2.2.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117
3.2.2.12 [SWDDS.1.2.2.12] CheckDrvStaSpdErr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
3.2.2.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
3.2.2.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
3.2.2.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120
3.2.2.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
3.2.2.13 [SWDDS.1.2.2.13] CheckDrvStaCurOvr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
3.2.2.13.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121
3.2.2.13.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123
3.2.2.13.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
3.2.2.13.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
3.2.2.14 [SWDDS.1.2.2.14] CheckDrvStaCondHoldCnt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
3.2.2.14.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
3.2.2.14.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
3.2.2.14.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
3.2.2.14.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127
3.2.2.15 [SWDDS.1.2.2.15] CheckDrvStaCondHoldCntWoClr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127
3.2.2.15.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127
3.2.2.15.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.2.15.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.2.15.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.3 [SWDDS.1.2.3] EopCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.3.1 [SWDDS.1.2.3.1] EopCtr_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.3.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128
3.2.3.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
3.2.3.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129
3.2.3.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130
3.2.3.2 [SWDDS.1.2.3.2] InitializeEopCtrSpdProf . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130
3.2.3.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130
3.2.3.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131
3.2.3.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132
3.2.3.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132
3.2.3.3 [SWDDS.1.2.3.3] InitializeEopCtrSpdCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
3.2.3.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133
3.2.3.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 135
3.2.3.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
3.2.3.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
3.2.3.4 [SWDDS.1.2.3.4] EopCtr_Run . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137
3.2.3.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137
3.2.3.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139
3.2.3.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140
3.2.3.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140
3.2.3.5 [SWDDS.1.2.3.5] ConvertEopCtrSpdUnitToPu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141
3.2.3.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141
3.2.3.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
3.2.3.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142
3.2.3.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
3.2.3.6 [SWDDS.1.2.3.6] ConvertEopCtrSpdUnitToRpm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
3.2.3.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
3.2.3.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
3.2.3.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 7
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
3.2.3.7 [SWDDS.1.2.3.7] CheckEopCtrEopStop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
3.2.3.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144
3.2.3.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145
3.2.3.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
3.2.3.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
3.2.3.8 [SWDDS.1.2.3.8] CheckEopCtrTgtSpdChg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146
3.2.3.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
3.2.3.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148
3.2.3.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149
3.2.3.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149
3.2.3.9 [SWDDS.1.2.3.9] ActEopCtrStateMaxSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
3.2.3.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150
3.2.3.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152
3.2.3.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152
3.2.3.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152
3.2.3.10 [SWDDS.1.2.3.10] ActEopCtrStateSpdChg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
3.2.3.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
3.2.3.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
3.2.3.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
3.2.3.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155
3.2.3.11 [SWDDS.1.2.3.11] ActEopCtrStateCurFilt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 156
3.2.3.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 156
3.2.3.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158
3.2.3.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158
3.2.3.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
3.2.3.12 [SWDDS.1.2.3.12] ActEopCtrStateCurLmt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
3.2.3.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159
3.2.3.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162
3.2.3.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162
3.2.3.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
3.2.3.13 [SWDDS.1.2.3.13] CheckEopCtrEnaMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
3.2.3.13.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
3.2.3.13.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
3.2.3.13.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
3.2.3.13.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 165
3.2.3.14 [SWDDS.1.2.3.14] CheckEopCtrEnaEdge . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166
3.2.3.14.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166
3.2.3.14.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168
3.2.3.14.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168
3.2.3.14.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
3.2.3.15 [SWDDS.1.2.3.15] CheckEopCtrEnaAppMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
3.2.3.15.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
3.2.3.15.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
3.2.3.15.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
3.2.3.15.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171
3.2.3.16 [SWDDS.1.2.3.16] CheckEopCtrAntiWindUp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
3.2.3.16.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
3.2.3.16.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
3.2.3.16.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173
3.2.3.16.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
3.2.3.17 [SWDDS.1.2.3.17] SetEopCtrSpdCtrCurLmt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
3.2.3.17.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174
3.2.3.17.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175
3.2.3.17.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
3.2.3.17.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
3.2.3.18 [SWDDS.1.2.3.18] CalculateEopCtrRefSpd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 8
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.18.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177
3.2.3.18.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
3.2.3.18.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
3.2.3.18.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
3.2.4 [SWDDS.1.2.4] SigRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
3.2.4.1 [SWDDS.1.2.4.1] SigRng_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
3.2.4.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180
3.2.4.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
3.2.4.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
3.2.4.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
3.2.4.2 [SWDDS.1.2.4.2] SigRng_Chk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
3.2.4.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182
3.2.4.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 183
3.2.4.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184
3.2.4.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184
3.2.4.3 [SWDDS.1.2.4.3] CheckSigRngBatVolt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185
3.2.4.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185
3.2.4.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186
3.2.4.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186
3.2.4.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186
3.2.4.4 [SWDDS.1.2.4.4] CheckSigRngBatVoltRngOvr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187
3.2.4.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187
3.2.4.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 188
3.2.4.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189
3.2.4.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189
3.2.4.5 [SWDDS.1.2.4.5] CheckSigRngBatVoltRngUnd . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190
3.2.4.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190
3.2.4.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192
3.2.4.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192
3.2.4.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192
3.2.4.6 [SWDDS.1.2.4.6] CheckSigRngPcbTemp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193
3.2.4.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193
3.2.4.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194
3.2.4.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194
3.2.4.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 195
3.2.4.7 [SWDDS.1.2.4.7] CheckSigRngPcbTempRngOvr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 195
3.2.4.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 195
3.2.4.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 197
3.2.4.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 197
3.2.4.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198
3.2.4.8 [SWDDS.1.2.4.8] CheckSigRngPcbTempRngWrn . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198
3.2.4.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198
3.2.4.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200
3.2.4.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201
3.2.4.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201
3.2.4.9 [SWDDS.1.2.4.9] CheckSigRngBatVoltRngHigh . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202
3.2.4.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202
3.2.4.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204
3.2.4.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204
3.2.4.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204
3.2.4.10 [SWDDS.1.2.4.10] CheckSigRngBatVoltRngLow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 205
3.2.4.10.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 205
3.2.4.10.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207
3.2.4.10.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207
3.2.4.10.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207
3.2.4.11 [SWDDS.1.2.4.11] CheckSigRngProtMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 208
3.2.4.11.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 208
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 9
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.11.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 209
3.2.4.11.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210
3.2.4.11.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210
3.2.4.12 [SWDDS.1.2.4.12] SetSigRngCondHoldCntFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 211
3.2.4.12.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 211
3.2.4.12.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212
3.2.4.12.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212
3.2.4.12.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
3.2.4.13 [SWDDS.1.2.4.13] ClrSigRngCondHoldCntFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
3.2.4.13.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
3.2.4.13.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.2.4.13.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.2.4.13.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.3 [SWDDS.1.3] AswMng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.3.1 [SWDDS.1.3.1] AswMng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.3.1.1 [SWDDS.1.3.1.1] AswMng_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.3.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214
3.3.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 215
3.3.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
3.3.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
3.3.2 [SWDDS.1.3.2] ModeChg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
3.3.2.1 [SWDDS.1.3.2.1] ModeChg_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
3.3.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216
3.3.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
3.3.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
3.3.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
3.3.2.2 [SWDDS.1.3.2.2] InitializeModeChgChkVar . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
3.3.2.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
3.3.2.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
3.3.2.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
3.3.2.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
3.3.2.3 [SWDDS.1.3.2.3] ModeChg_Mng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
3.3.2.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218
3.3.2.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
3.3.2.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
3.3.2.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
3.3.2.4 [SWDDS.1.3.2.4] ChangeModeChgAppMode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221
3.3.2.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221
3.3.2.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
3.3.2.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
3.3.2.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
3.3.2.5 [SWDDS.1.3.2.5] CheckModeChgStaFlg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
3.3.2.5.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223
3.3.2.5.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
3.3.2.5.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
3.3.2.5.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
3.3.2.6 [SWDDS.1.3.2.6] CheckModeChgMsgSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
3.3.2.6.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
3.3.2.6.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 225
3.3.2.6.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 226
3.3.2.6.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 226
3.3.2.7 [SWDDS.1.3.2.7] CheckModeChgMcuSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 226
3.3.2.7.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 226
3.3.2.7.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 227
3.3.2.7.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228
3.3.2.7.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228
3.3.2.8 [SWDDS.1.3.2.8] CheckModeChgDrvSta . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 10
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.8.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228
3.3.2.8.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
3.3.2.8.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
3.3.2.8.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
3.3.2.9 [SWDDS.1.3.2.9] CheckModeChgSigRng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
3.3.2.9.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230
3.3.2.9.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.2.9.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.2.9.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.3 [SWDDS.1.3.3] ShutDown . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.3.1 [SWDDS.1.3.3.1] ShutDown_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.3.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233
3.3.3.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234
3.3.3.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234
3.3.3.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235
3.3.3.2 [SWDDS.1.3.3.2] ShutDown_Mng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235
3.3.3.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235
3.3.3.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
3.3.3.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
3.3.3.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
3.3.3.3 [SWDDS.1.3.3.3] SaveShutDownFltCnt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
3.3.3.3.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237
3.3.3.3.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238
3.3.3.3.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
3.3.3.3.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
3.3.3.4 [SWDDS.1.3.3.4] SaveShutDownFltFlag . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
3.3.3.4.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
3.3.3.4.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 240
3.3.3.4.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
3.3.3.4.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
3.3.4 [SWDDS.1.3.4] StartUp . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
3.3.4.1 [SWDDS.1.3.4.1] StartUp_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
3.3.4.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241
3.3.4.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242
3.3.4.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242
3.3.4.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242
3.3.4.2 [SWDDS.1.3.4.2] StartUp_Mng . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243
3.3.4.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243
3.3.4.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.3.4.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.3.4.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.4 [SWDDS.1.4] AswAct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.4.1 [SWDDS.1.4.1] AswAct . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.4.1.1 [SWDDS.1.4.1.1] AswAct_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.4.1.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
3.4.1.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246
3.4.1.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4.1.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4.2 [SWDDS.1.4.2] MtrCtr . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4.2.1 [SWDDS.1.4.2.1] MtrCtr_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4.2.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247
3.4.2.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 248
3.4.2.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249
3.4.2.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249
3.4.2.2 [SWDDS.1.4.2.2] MtrCtr_Set . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249
3.4.2.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 11
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.2.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251
3.4.2.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251
3.4.2.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251
3.4.3 [SWDDS.1.4.3] ResMsg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 252
3.4.3.1 [SWDDS.1.4.3.1] ResMsg_Init . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 252
3.4.3.1.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 252
3.4.3.1.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 252
3.4.3.1.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253
3.4.3.1.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253
3.4.3.2 [SWDDS.1.4.3.2] ResMsg_Send . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253
3.4.3.2.1 Detailed Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253
3.4.3.2.2 Static View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 255
3.4.3.2.3 Dynamic View Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 255
3.4.3.2.4 Interface Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 255
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 12
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Figures
Figure 1 Software Hierarchy of WV_AQ_EOP
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 13
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
List of Tables
Table 1 Version History
Table 2 References
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 14
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1 Introduction
1.1 Purpose
The purpose of this document is to provide the following information and explanation on software unit functions for the software
development of VW_AQ_EOP.
Provides a software implementation information
Provides a standard for software unit testing
Used as data for impact analysis on software changes
1.2 Scope
This document is applicable to the software development related to VW_AQ_EOP project.
1.3 Strategy
1.3.1 Traceability Management
For traceability between the software units and the software architecture and software requirements, a unique ID is assigned to each
software unit.
1.3.1.1 Software detailed design identifier notation
The ID in the software detailed design document is defined as follows.
SWDDS.[Unit Category1].[Unit Category2]..[Unit CategoryN]
Unit Category1
<List the category by referring to SWADS.>
Unit Category2 ... Unit CategoryN
Depth of unit
Use .(dot) as a delimeter between depth
The category indices of a unit ID are kept the same as those of the corresponding unit ID identified in the software architectural design.
SWADS.1.2.3 (ID in SWADS)  SWDDS.1.2.3 (ID in SWDDS)
1.3.2 Sequence Diagram
Sequence diagrams are not drawn on all units, but only on control-related units. (e.g. AswCtr and SlFoc)
1.3.3 Diagram Notation
The notation applied to SW unit design follows Software Design Guideline [Ref.4].
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 15
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
1.3.4 Evaluation Criteria
Evaluation criteria of the SW units are as follow.
Aspect Rating Criteria Remark
Interoperability Yes The unit can be used multiple (can be reused).
No Only one instance of the unit is used (unique function).
Criticality High The unit is an interrupt service routine or called from that.
The unit is scheduler.
ISR
Mid The unit is called from task.
The unit is a HW accessing driver.
Asw, RteSch,
BswHal
Low The unit is a simple wrapper.
The other cases
RteApp, RteHal
Technical complexity High The unit has a number of decision points which is greater than or equal to 5.
The unit is a control and management related one.
The unit uses complex mathematical calculation.
AswCtr, AswMng,
Sensorless FOC
Mid The unit has a number of decision points is greater than or equal to 2
The unit uses a simple mathematical calculation
The unit is HW accessing driver with logic
Low The unit is a simple wrapper (get/set, read/write)
The unit is a HW accessing driver without logic (simple setting or getting)
RteApp, RteHal
Testability
(Verifiability)
Yes The unit can be verified by software unit test
No The unit cannot be verified by software unit test but by review.
Risk High The unit needs a new technology which is never applied before. NOTE1
Mid The unit can be implemented by technology which is used in the previous EOP advance project.
The unit can be implemented by modified technology used in mass production.
Low The unit is a simple wrapper.
The unit can be implemented by technology without modification used in mass production
RteApp, RteHal
(NOTE1) In this case, risk assessment is needed.
1.4 Terms, Acronyms and Abbreviations
The terms, acronyms and abbreviations which are required to correctly understand this document are explained in VW_AQ_EOP_Voca
[Ref.2] document and it is managed in the following location:
[Polarion] VW AQ EOP / Documents & Pages / 04_Others
1.5 References
All documents which are referred to to prepare this document are listed in the table below. The document name, version, and date of
reference document shall be described. If the Version is not specified, the latest version shall be referred to.
No. Document Name [Location]
Baseline, Version, or
Date
Remark
1.
Automotive SPICE; Process Reference Model / Process Assessment
Model
3.1
2. VW_AQ_EOP_Voca 20210420
3. VW_AQ_EOP_SWADS 003
4. VW_AQ_EOP_SWDG 1.3
5. VW_AQ_EOP_SWCG 1.3
6.
LAH.893.909 Group Basic Software Requirements
; Development, General Project-Independent Performance
Specification
3.4 KGAS
7. VW_AQ_EOP_SWDD 2.0
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 16
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Table 2 References
* If the Version is not specified, the latest version is referred to.
2 Software Hierarchy
The software hierarchy of VW_AQ_EOP is as follows.
Figure 1 Software Hierarchy of WV_AQ_EOP
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 17
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3 Function Description
3.1 [SWDDS.1.1] AswSen
AswSen updates input/output values such as Target speed, Output Current, DC Current, DC Voltage,
Temperature, Motor torque and Battery Voltage. It also checks status of Target speed range, Messagereceiving
time-out, CAN Bus, Current control and OPU.
3.1.1 [SWDDS.1.1.1] AswSen
3.1.1.1 [SWDDS.1.1.1.1] AswSen_Init
3.1.1.1.1 Detailed Design
[SWDDS.1.1.1.1] AswSen_Init
Software Unit Information
Unit ID SWDDS.1.1.1.1 Unit Name AswSen_Init
Architecture ID SWADS.1.1.1.1 ASIL QM
Prototype void AswSen_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Sensor software initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.3 InitializeRteSchAppSw
SWDDS.1.1.8.1 ReqMsg_Init
SWDDS.1.1.6.1 MtrSpd_Init
SWDDS.1.1.2.1 CtrSta_Init
SWDDS.1.1.3.1 CurSig_Init
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 18
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function
SWDDS.1.1.4.1 DcVolt_Init
SWDDS.1.1.9.1 TempSig_Init
SWDDS.1.1.7.1 MtrTrq_Init
SWDDS.1.1.5.1 McuSta_Init
Function Execution Time N/A
Requirement Id SWDDS.1.1.1.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.1.1.2 Static View Design
3.1.1.1.3 Dynamic View Design
- N/A
3.1.1.1.4 Interface Design
- N/A
3.1.1.2 [SWDDS.1.1.1.2] AswSen_FilterInpSig
3.1.1.2.1 Detailed Design
[SWDDS.1.1.1.2] AswSen_FilterInpSig
Software Unit Information
Unit ID SWDDS.1.1.1.2 Unit Name AswSen_FilterInpSig
Architecture
ID
SWADS.1.1.1.2 ASIL QM
Prototype
tFrac16 AswSen_FilterInpSig(
tFrac16 input_signal,
tBool* p_first_measurement,
GDFLIB_FILTER_MA_T_F16* p_filter_handle )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 input_signal
-32768 ~
32767
IN input signal for filtering
tBool* p_first_measurement True / False IN/OUT
first measurement flag
pointer
GDFLIB_FILTER_MA_T_F16* p_filter_handle
-2147483648
~ IN/OUT
filter handler pointer
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 19
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
2147483647
(f32Acc)
Function
Call
Return
Value
Data Type Possible Return Value
tFrac16 -32768 ~ 32767 Filtered value
Global
Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Input signal filtering
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.1.4.2 DcVolt_Measr
SWDDS.1.1.5.3 GetMcuStaBatVolt
SWDDS.1.1.6.2 MtrSpd_Measr
SWDDS.1.1.9.2 TempSig_Measr
Calling
Function
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.3.6.14.10 GDFLIB_FilterMASetState_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.1.1.1.2
Target Milestone SBS1
Element AswSen
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.1.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 20
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.1.2.3 Dynamic View Design
- N/A
3.1.1.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.9 OUT tFrac16 -32768 32767 N/A N/A N/A
Input
signal for
filtering
2 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER
_MA_ T_F16 *
N/A N/A N/A N/A N/A
Pointer of
a filtering
handler
3 filtered_signal SWDDS.3.6.14.9 IN tFrac16 -32768 32767 N/A N/A N/A
Filtered
output
signal
4 f16FilterMAOut SWDDS.3.6.14.10 OUT tFrac16 -32768 32767 N/A N/A N/A
Filtered
output
signal
5 pParam SWDDS.3.6.14.10 IN/OUT
GDFLIB_FILTER
_MA_ T_F16 *
N/A N/A N/A N/A N/A
Pointer of
a filtering
handler
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 21
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.2 [SWDDS.1.1.2] CtrSta
3.1.2.1 [SWDDS.1.1.2.1] CtrSta_Init
3.1.2.1.1 Detailed Design
[SWDDS.1.1.2.1] CtrSta_Init
Software Unit Information
Unit ID SWDDS.1.1.2.1 Unit Name CtrSta_Init
Architecture ID SWADS.1.1.2.1 ASIL QM
Prototype void CtrSta_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Control status checking initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.1.2.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.2.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 22
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.2.1.3 Dynamic View Design
- N/A
3.1.2.1.4 Interface Design
- N/A
3.1.2.2 [SWDDS.1.1.2.2] CtrSta_Chk
3.1.2.2.1 Detailed Design
[SWDDS.1.1.2.2] CtrSta_Chk
Software Unit Information
Unit ID SWDDS.1.1.2.2 Unit Name CtrSta_Chk
Architecture ID SWADS.1.1.2.2 ASIL QM
Prototype void CtrSta_Chk( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Control status checking
- Data getting
- Application data updating
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.9 RteSch_Task10ms
Calling Function
SWDDS.2.3.9 RteIo_GetCtrState
SWDDS.2.3.13 RteIo_GetCtrFlt
SWDDS.2.2.11 RteApp_WriteCtrState
SWDDS.2.2.13 RteApp_WriteCtrFlt
Function Execution Time N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 23
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.1.1.2.2
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.2.2.2 Static View Design
3.1.2.2.3 Dynamic View Design
- N/A
3.1.2.2.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 control_state SWDDS.2.3.9 IN tCtrState 0 4
CTR_STATE
_SWTC_OFF
CTR_STATE
_SL_RUN
N/A
Current
control
state
2 fault_flag SWDDS.2.3.13 IN tU16 0 65535 0x0000 0xffff N/A
Current
control
fault flags
3 control_state SWDDS.2.2.11 OUT tCtrState 0 4
CTR_STATE
_SWTC_OFF
CTR_STATE
_SL_RUN
N/A
Current
control
state
4 fault_flag SWDDS.2.2.13 OUT tU16 0 65535 0x0000 0xffff N/A
Current
control
fault flags
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 24
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3 [SWDDS.1.1.3] CurSig
3.1.3.1 [SWDDS.1.1.3.1] CurSig_Init
3.1.3.1.1 Detailed Design
[SWDDS.1.1.3.1] CurSig_Init
Software Unit Information
Unit ID SWDDS.1.1.3.1
Unit
Name
CurSig_Init
Architecture ID SWADS.1.1.3.1 ASIL QM
Prototype void CurSig_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndCurSigCurOutFilt 0 ~ 15 Read/Write
q-axis current output filtering handler
(u16NSamples)
GDFLIB_FILTER_MA_T_F16 g_hndCurSigCurErrFilt 0 ~ 15 Read/Write
q-axis current error filtering handler
(u16NSamples)
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcCurFilt 0 ~ 15 Read/Write DC input current filtering handler (u16NSamples)
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcMtrSpdFilt 0 ~ 15 Read/Write
Motor speed filtering handler for DC current
calculation (u16NSamples)
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcCurOutFilt 0 ~ 15 Read/Write
Current output filtering handler for DC current
calculation (u16NSamples)
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16CurSigOutFiltNoSmpl 3 Read
Number of samples for moving average filtering
of current output
tU16 par_u16CurSigErrFiltNoSmpl 5 Read
Number of samples for moving average filtering
of current error
tU16 par_u16CurSigDcFiltNoSmpl 4 Read
Number of samples for moving average filtering
DC input current
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Current signal measurement initialization
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 25
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.3.1
Target Milestone SBS1
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 26
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.1.2 Static View Design
3.1.3.1.3 Dynamic View Design
- N/A
3.1.3.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT GDFLIB_FILTER_MA_T_F16 * N/A N/A N/A N/A N/A Pointer of filtering handler
3.1.3.2 [SWDDS.1.1.3.2] CurSig_Measr
3.1.3.2.1 Detailed Design
[SWDDS.1.1.3.2] CurSig_Measr
Software Unit Information
Unit ID SWDDS.1.1.3.2 Unit Name CurSig_Measr
Architecture
ID
SWADS.1.1.3.2 ASIL QM
Prototype void CurSig_Measr( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 27
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Variables N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Current signal measurement
- Current output getting
- DC input current calculation
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.2.1.9 RteSch_Task10ms
Calling
Function
SWDDS.1.1.3.3 GetCurSigCurOut
SWDDS.1.1.3.5 GetCurSigDcCur
Function
Execution
Time
N/A
Requirement Id SWDDS.1.1.3.2
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.3.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 28
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.2.3 Dynamic View Design
- N/A
3.1.3.2.4 Interface Design
- N/A
3.1.3.3 [SWDDS.1.1.3.3] GetCurSigCurOut
3.1.3.3.1 Detailed Design
[SWDDS.1.1.3.3] GetCurSigCurOut
Software Unit Information
Unit ID SWDDS.1.1.3.3 Unit Name GetCurSigCurOut
Architecture ID SWADS.1.1.3.3 ASIL QM
Prototype void GetCurSigCurOut( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndCurSigCurOutFilt
-2147483648 ~
2147483647
Read/Write
q-axis current output filtering handler
(f32Acc)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Current output getting
- Current output getting
- q-axis current filtering
- Application data updating

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 29
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.3.2 CurSig_Measr
Calling Function
SWDDS.2.3.11 RteIo_GetCurOut
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.2.2.15 RteApp_WriteCurOut
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.3.3
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.3.3.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 30
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.3.3 Dynamic View Design
- N/A
3.1.3.3.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
q_axis
_current
_output
SWDDS.2.3.11 IN tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk q-axis current output (PU)
2 f16In SWDDS.3.6.14.9 OUT tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk Input signal for filtering
3 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER_
IIR1_T_F16 *const
N/A N/A N/A N/A N/A Pointer of filtering handler
4
filtered
_current
_output
SWDDS.3.6.14.9 IN tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk Filtered signal
5
current
_output
SWDDS.2.2.15 OUT tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk q-axis current output (PU)
[Deleted] [SWDDS.1.1.3.4] GetCurSigCurErr
3.1.3.4 [SWDDS.1.1.3.5] GetCurSigDcCur
3.1.3.4.1 Detailed Design
[SWDDS.1.1.3.5] GetCurSigDcCur
Software Unit Information
Unit ID SWDDS.1.1.3.5 Unit Name GetCurSigDcCur
Architecture ID SWADS.1.1.3.5 ASIL QM
Prototype void GetCurSigDcCur( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call Data Type Possible Return Value Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 31
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return Value void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcCurFilt
-2147483648 ~
2147483647
Read/Write
DC input current filtering handler
(f32Acc)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
DC input current getting
- DC current calculation
- DC current averaging
- DC input current filtering and application data updating
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.3.2 CurSig_Measr
Calling Function
SWDDS.1.1.3.6 CalculateCurSigDcCurTrqSpdVolt
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.2.2.18 RteApp_WriteDcCur
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.3.5
Target Milestone SBS2.1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 32
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.4.2 Static View Design
3.1.3.4.3 Dynamic View Design
- N/A
3.1.3.4.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
torque
_speed
_based
SWDDS.1.1.3.6 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Motor torque and speed based
DC current (PU)
2 f16In SWDDS.3.6.14.9 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Input signal for filtering
3 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER_
IIR1_T_F16
*const
N/A N/A N/A N/A N/A Pointer of filtering handler
5
calculated
_dc_current
SWDDS.3.6.14.9 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Filtered signal
6
dc_current
_input
SWDDS.2.2.18 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
DC current input (PU)
3.1.3.5 [SWDDS.1.1.3.6] CalculateCurSigDcCurTrqSpdVolt
3.1.3.5.1 Detailed Design
[SWDDS.1.1.3.6] CalculateCurSigDcCurTrqSpdVolt
Software Unit Information
Unit ID SWDDS.1.1.3.6 Unit Name CalculateCurSigDcCurTrqSpdVolt
Architecture ID SWADS.1.1.3.6 ASIL QM
Prototype tFrac16 CalculateCurSigDcCurTrqSpdVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 33
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Calculated DC current (PU)
Global
Variables 
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcCurOutFilt
-2147483648
~ 2147483647
Read/Write
Current output
filtering handler for
DC current
calculation
(f32Acc)
GDFLIB_FILTER_MA_T_F16 g_hndCurSigDcMtrSpdFilt
-2147483648
~ 2147483647
Read/Write
Motor speed
filtering handler for
DC current
calculation
(f32Acc)
Parameters 
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
DC input current calculation based on motor torque, speed and DC voltage
- q-axis current output getting
- Calculated DC current input
- Negative value limiting
Control Flow
Diagram
(or Pseudo
Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 34
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called
Function
SWDDS.1.1.3.5 GetCurSigDcCur
Calling
Function
SWDDS.2.3.11 RteIo_GetCurOut
SWDDS.2.3.10 RteIo_GetSpdOut
SWDDS.2.3.14 RteIo_GetDcVolt
SWDDS.1.1.3.9 CalculateCurSigDcCurCompn
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.40 MLIB_DivSat_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.1.1.3.6
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 35
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.5.2 Static View Design
3.1.3.5.3 Dynamic View Design
- N/A
3.1.3.5.4 Interface Design
No Name
Related
SWDDS
ID
Direction Data Type
Raw RangePhysical Range
Resolution
/Units
Description
Min Max Min Max
1
q_axis_current_
output
SWDDS.
2.3.11
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
q-axis current
output (PU)
2 speed_output
SWDDS.
2.3.10
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed output (PU)
3
dc_voltage_
input
SWDDS.
2.3.14
IN tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
DC driving voltage
(PU)
4
dc_
curcompnvalue
SWDDS.
1.1.3.9
IN tFrac16 -32768 32767 N/A N/A N/A
Calculated DC
current
Compensation(PU)
5 f16In
SWDDS.
3.6.14.9
OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Input q-axis
current signal for
filtering
6 pParam
SWDDS.
3.6.14.9
IN/OUT
GDFLIB_
FILTER_
IIR1_
T_F16
*const
N/A N/A N/A N/A N/A
Pointer of filtering
handler
7
q_axis_current_
output
SWDDS.
3.6.14.9
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Filtered q-axis
current output
8 speed_output
SWDDS.
3.6.14.9
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Filtered speed
output
9 f16In1
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Filtered q-axis
current output
10 f16In2
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Filtered speed
output
11
calculated_
dc_current
SWDDS.
3.6.14.32
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
Calculated DC
input current (PU)
12 f16In1
SWDDS.
OUT tFrac16 -32768 32767 0.0 64.4980
0.00196838 / Calculated DC
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 36
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.6.14.40 Apk input current (PU)
13 f16In2
SWDDS.
3.6.14.40
OUT tFrac16 0 32767 0.0 25.3992
0.000775146
/ Vpk
DC driving voltage
(PU)
14
calculated_
dc_current
SWDDS.
3.6.14.40
IN tFrac16 0 32767 0.0 64.4980
0.00196838 /
Apk
Calculated DC
input current (PU)
15 f16In1
SWDDS.
3.6.14.40
OUT tFrac16 0 32767 0.0 64.4980
0.00196838 /
Apk
Calculated DC
input current (PU)
16 f16In2
SWDDS.
3.6.14.40
OUT tFrac16 -32768 32767 N/A N/A N/A
Calculated DC
current
Compensation(PU)
17
calculated_
dc_current
SWDDS.
3.6.14.40
IN tFrac16 0 32767 0.0 64.4980
0.00196838 /
Apk
Calculated DC
input current (PU)
3.1.3.6 [SWDDS.1.1.3.7] CalcCurSigDcCurCompnIntpSpd
3.1.3.6.1 Detailed Design
[SWDDS.1.1.3.7] CalcCurSigDcCurCompnIntpSpd
Software Unit Information
Unit ID SWDDS.1.1.3.7 Unit Name CalcCurSigDcCurCompnIntpSpd
Architecture ID SWADS.1.1.3.7 ASIL QM
Prototype tFrac16 CalcCurSigDcCurCompnIntpSpd( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767
calculated dc current compensation speed
ratio(PU)
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16SpeedNodeFirstIndex 0 ~ 7 Write
Speed output of 1st. node
index
tU16 g_u16SpeedNodeSecondIndex 0 ~ 7 Write
Speed output of 2nd. node
index
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_af16CurSigDcCurSpdNodeLut[0]
2730.5
500rpm
Read
Speed Ratio for DC Current
compensation
: < 500rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[1]
4914.9
900rpm
Read
Speed Ratio for DC Current
compensation
: < 900rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[2]
7099.3
1300rpm
Read
Speed Ratio for DC Current
compensation
: < 1300rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[3]
9283.7
1700rpm
Read
Speed Ratio for DC Current
compensation
: < 1700rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[4]
11648.1
1700rpm
Read
Speed Ratio for DC Current
compensation
: <1700rpm
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 37
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_af16CurSigDcCurSpdNodeLut[5]
13652.5
2500rpm
Read
Speed Ratio for DC Current
compensation
: < 2500rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[6]
15836.9
2900rpm
Read
Speed Ratio for DC Current
compensation
: < 2900rpm
tFrac16 par_af16CurSigDcCurSpdNodeLut[7]
18021.3
3300rpm
Read
Speed Ratio for DC Current
compensation
: < 3300rpm
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Finding speed output node indexes, calculating DC current compensation speed ratio
1. Speed_output getting
2. Speed output range under checking
3. Speed output range over checking
4. search a node of speed output index
5. Calculate Speed Ratio for DC Current compensation
6. return DC current compensation speed ratio
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.1.3.9 CalculateCurSigDcCurCompn
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 38
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function
SWDDS.2.3.10 RteIo_GetSpdOut
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.40 MLIB_DivSat_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.1.3.7
Target Milestone SBS2.1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.1.3.6.2 Static View Design
3.1.3.6.3 Dynamic View Design
- N/A
3.1.3.6.4 Interface Design
no Name
Related
SWDDS
ID
Direction
Data
Type
Raw RangePhysical Range
Resolution
/Units
Description
Min Max Min Max
1 speed_output
SWDDS.
2.3.10
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Speed output (PU)
2 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Speed output (PU)
First node of
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 39
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 2730 18021 499.89 3299.84
0.183105
/ rpm
speed for DC
current
Compansation(PU)
4
dc_curcompn_
speed_num
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Numerator of DC
current
compensation
speed ratio
5 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 2730 18021 499.89 3299.84
0.183105
/ rpm
Second node of
speed for DC
current
Compansation(PU)
6 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 2730 18021 499.89 3299.84
0.183105
/ rpm
First node of
speed for DC
current
Compansation(PU)
7
dc_curcompn_
speed_den
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Denomenator of
DC current
compensation
speed ratio
8 f16In1
SWDDS.
3.6.14.40
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Numerator of DC
current
compensation
speed ratio
9 f16In2
SWDDS.
3.6.14.40
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Denomenator of
DC current
compensation
speed ratio
10
calculated_dc_
curcompn_spdratio
SWDDS.
3.6.14.40
IN tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation
speed ratio (PU)
3.1.3.7 [SWDDS.1.1.3.8] CalcCurSigDcCurCompnIntpCurQ
3.1.3.7.1 Detailed Design
[SWDDS.1.1.3.8] CalcCurSigDcCurCompnIntpCurQ
Software Unit Information
Unit ID SWDDS.1.1.3.8 Unit Name CalcCurSigDcCurCompnIntpCurQ
Architecture ID SWADS.1.1.3.8 ASIL QM
Prototype tFrac16 CalcCurSigDcCurCompnIntpCurQ( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 calculated dc current compensation current ratio(PU)
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16QaxisNodeFirstIndex 0 ~ 7 Write
q_axis current of 1st. node
index
tU16 g_u16QaxisNodeFirstIndex 0 ~ 7 Write
q_axis current of 2nd. node
index
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 40
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
tFrac16 par_af16CurSigDcCurCurNodeLut[0]
0
0.0Apk
Read
Current Ratio for DC Current
compensation
: < 0.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[1]
1524
3.0Apk
Read
Current Ratio for DC Current
compensation
: < 3.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[2]
3048
6.0Apk
Read
Current Ratio for DC Current
compensation
: < 6.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[3]
4572
9.0Apk
Read
Current Ratio for DC Current
compensation
: < 9.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[4]
6096
12.0Apk
Read
Current Ratio for DC Current
compensation
: < 12.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[5]
7620
15.0Apk
Read
Current Ratio for DC Current
compensation
: < 15.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[6]
9144
18.0Apk
Read
Current Ratio for DC Current
compensation
: < 18.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[7]
10668
21.0Apk
Read
Current Ratio for DC Current
compensation
: < 21.0A
tFrac16 par_af16CurSigDcCurCurNodeLut[8]
12192
24.0Apk
Read
Current Ratio for DC Current
compensation
: < 24.0A
Registers 
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
finding q-axis current output node indexes, calculating DC current compensation current ratio
1. q-axis current output getting
2. q-axis current output range under checking
3. q-axis current output range over checking
4. search a node of q-axis current output index
5. Calculate Current Ratio for DC Current compensation
6. return DC current compensation current ratio
Control Flow
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 41
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.1.3.9 CalculateCurSigDcCurCompn
Calling Function
SWDDS.2.3.11 RteIo_GetCurOut
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.40 MLIB_DivSat_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.1.3.8
Target Milestone SBS2.1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 42
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.3.7.2 Static View Design
3.1.3.7.3 Dynamic View Design
- N/A
3.1.3.7.4 Interface Design
No Name
Related
SWDDS
ID
Direction
Data
Type
Raw Range Physical Range
Resolution/
Units
Description
Min Max Min Max
1
q_axis_current_
output
SWDDS.
2.3.11
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis current
output (PU)
2 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis current
output (PU)
3 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 0 12192 0 23.9993
0.00196838
/ Apk
First node of
q-axis current
for DC current
compansation
(PU)
4
dc_curcompn_
current_num
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Numerator of
q-axis current
ratio for DC
current
compensation
(PU)
5 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 0 12192 0 23.9993
0.00196838
/ Apk
Second node
of q-axis
current for DC
current
compansation
(PU)
6 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 0 12192 0 23.9993
0.00196838
/ Apk
First node of
q-axis current
for DC current
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 43
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
compansation
(PU)
7
dc_curcompn_
current_den
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Denomenator
of q-axis
current ratio
for DC current
compensation
(PU)
8 f16In1
SWDDS.
3.6.14.40
OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Numerator of
q-axis current
ratio for DC
current
compensation
(PU)
9 f16In2
SWDDS.
3.6.14.40
OUT tFrac16 0 12192 0 23.9993
0.00196838
/ Apk
Denomenator
of q-axis
current ratio
for DC current
compensation
(PU)
10
calculated_dc_
curcompn_curratio
SWDDS.
3.6.14.40
IN tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation
current ratio
(PU)
3.1.3.8 [SWDDS.1.1.3.9] CalculateCurSigDcCurCompn
3.1.3.8.1 Detailed Design
[SWDDS.1.1.3.9] CalculateCurSigDcCurCompn
Software Unit Information
Unit ID SWDDS.1.1.3.9 Unit Name CalculateCurSigDcCurCompn
Architecture ID SWADS.1.1.3.9 ASIL QM
Prototype tFrac16 CalculateCurSigDcCurCompn( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -32768 ~ 32767 Calculated DC current Compensation(PU)
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16QaxisNodeFirstIndex 0 ~ 7 Read
q_axis current of 1st. node
index
tU16 g_u16SpeedNodeFirstIndex 0 ~ 8 Read
Speed output of 1st. node
index
tU16 g_u16QaxisNodeSecondIndex 0 ~ 7 Read
q_axis current of 2nd.
node index
tU16 g_u16SpeedNodeSecondIndex 0 ~ 8 Read
Speed output of 2nd.
node index
Data Type Name Range Read/Write Description
DC current compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 44
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_af16CurSigDcCurCompnLut[0][0] 32766 Read value
: < 0.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][1] 32766 Read
DC current compensation
value
: < 0.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][2] 32766 Read
DC current compensation
value
: < 0.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][3] 32766 Read
DC current compensation
value
: < 0.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][4] 32766 Read
DC current compensation
value
: < 0.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][5] 32766 Read
DC current compensation
value
: < 0.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][6] 32766 Read
DC current compensation
value
: < 0.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[0][7] 32766 Read
DC current compensation
value
: < 0.0A / < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][0] 31193.232 Read
DC current compensation
value
: < 3.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][1] 31193.232 Read
DC current compensation
value
: < 3.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][2] 31193.232 Read
DC current compensation
value
: < 3.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][3] 31946.85 Read
DC current compensation
value
: < 3.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][4] 32766 Read
DC current compensation
value
: < 3.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][5] 32766 Read
DC current compensation
value
: < 3.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][6] 32766 Read
DC current compensation
value
: < 3.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[1][7] 32766 Read
DC current compensation
value
: < 3.0A / < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][0] 29784.294 Read
DC current compensation
value
: < 6.0A / < 500rpm
DC current compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 45
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_af16CurSigDcCurCompnLut[2][1] 29784.294 Read value
: < 6.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][2] 29784.294 Read
DC current compensation
value
: < 6.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][3] 31193.232 Read
DC current compensation
value
: < 6.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][4] 31946.85 Read
DC current compensation
value
: < 6.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][5] 32766 Read
DC current compensation
value
: < 6.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][6] 32766 Read
DC current compensation
value
: < 6.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[2][7] 32766 Read
DC current compensation
value
: < 6.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][0] 28473.654 Read
DC current compensation
value
: < 9.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][1] 28473.654 Read
DC current compensation
value
: < 9.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][2] 28473.654 Read
DC current compensation
value
: < 9.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][3] 29784.294 Read
DC current compensation
value
: < 9.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][4] 31193.232 Read
DC current compensation
value
: < 9.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][5] 31946.85 Read
DC current compensation
value
: < 9.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][6] 32766 Read
DC current compensation
value
: < 9.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[3][7] 32766 Read
DC current compensation
value
: < 9.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][0] 26212.8 Read
DC current compensation
value
: < 12.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][1] 27294.078 Read
DC current compensation
value
: < 12.0A / < 900rpm
DC current compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 46
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
tFrac16 par_af16CurSigDcCurCompnLut[4][2] 27294.078 Read value
: < 12.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][3] 28473.654 Read
DC current compensation
value
: < 12.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][4] 29784.294 Read
DC current compensation
value
: < 12.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][5] 31193.232 Read
DC current compensation
value
: < 12.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][6] 32766 Read
DC current compensation
value
: < 12.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[4][7] 32766 Read
DC current compensation
value
: < 12.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][0] 24607.266 Read
DC current compensation
value
: < 15.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][1] 26212.8 Read
DC current compensation
value
: < 15.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][2] 26212.8 Read
DC current compensation
value
: < 15.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][3] 27294.078 Read
DC current compensation
value
: < 15.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][4] 28473.654 Read
DC current compensation
value
: < 15.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][5] 29784.294 Read
DC current compensation
value
: < 15.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][6] 31946.85 Read
DC current compensation
value
: < 15.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[5][7] 32766 Read
DC current compensation
value
: < 15.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][0] 22575.774 Read
DC current compensation
value
: < 18.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][1] 24607.266 Read
DC current compensation
value
: < 18.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][2] 25197.054 Read
DC current compensation
value
: < 18.0A / < 1300rpm
DC current compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 47
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_af16CurSigDcCurCompnLut[6][3] 26212.8 Read value
: < 18.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][4] 27294.078 Read
DC current compensation
value
: < 18.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][5] 28473.654 Read
DC current compensation
value
: < 18.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][6] 31193.232 Read
DC current compensation
value
: < 18.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[6][7] 31946.85 Read
DC current compensation
value
: < 18.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][0] 20708.112 Read
DC current compensation
value
: < 21.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][1] 22575.774 Read
DC current compensation
value
: < 21.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][2] 24607.266 Read
DC current compensation
value
: < 21.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][3] 25197.054 Read
DC current compensation
value
: < 21.0A / < 1700rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][4] 26212.8 Read
DC current compensation
value
: < 21.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][5] 27294.078 Read
DC current compensation
value
: < 21.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][6] 29784.294 Read
DC current compensation
value
: < 21.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[7][7] 31193.232 Read
DC current compensation
value
: < 21.0A/ < 3300rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][0] 19659.6 Read
DC current compensation
value
: < 24.0A / < 500rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][1] 20708.112 Read
DC current compensation
value
: < 24.0A / < 900rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][2] 23394.924 Read
DC current compensation
value
: < 24.0A / < 1300rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][3] 24607.266 Read
DC current compensation
value
: < 24.0A / < 1700rpm
DC current compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 48
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_af16CurSigDcCurCompnLut[8][4] 25197.054 Read value
: < 24.0A / < 2100rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][5] 26212.8 Read
DC current compensation
value
: < 24.0A / < 2500rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][6] 28473.654 Read
DC current compensation
value
: < 24.0A / < 2900rpm
tFrac16 par_af16CurSigDcCurCompnLut[8][7] 29784.294 Read
DC current compensation
value
: < 24.0A/ < 3300rpm
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Calculating DC input current beta value by interpolation of Compensation LUT
1. get a DC current compensation speed ratio
2. get a DC current compensation current ratio
3. get a DC current compensation value( q-axis current output first/second index, speed first index in LUT )
4. calculate DC current compensation first node
5. get a DC current compensation value( q-axis current output first/second index, speed second index in LUT )
6. calculate DC current compensation second node
7. Calculate DC current compensation value
8. Check DC current compensation value under limit
Control Flow
Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 49
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.1.1.3.6 CalculateCurSigDcCurTrqSpdVolt
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 50
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.33 MLIB_AddSat_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.1.3.9
Target Milestone SBS2.1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.1.3.8.2 Static View Design
3.1.3.8.3 Dynamic View Design
- N/A
3.1.3.8.4 Interface Design
No Name
Related
SWDDS ID
Direction Data Type
Raw Range
Physical
RangeResolution/
Units
Description
Min Max Min Max
1
calculated_dc_
curcompn_spdratio
SWDDS.
1.1.3.7
IN tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation
speed ratio (PU)
2
calculated_dc_
curcompn_curratio
SWDDS.
1.1.3.8
IN tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation qaxis
current ratio
(PU)
3 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 19660 32767 N/A N/A N/A
Speed output of
1st., q-axis
current output of
2nd node value
in DC Current
Compensation
LUT(PU)
4 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 19660 32767 N/A N/A N/A
Speed output of
1st., q-axis
current output of
1st node value in
DC Current
Compensation
LUT(PU)
5
dc_curcompn_ SWDDS.
IN tFrac16 -32768 32767 N/A N/A N/A
Speed output of
1st. node value
in DC Current
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 51
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
spd_firstindex 3.6.14.34
Compensation
LUT(PU)
6 f16In1
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
1st. node value
in DC Current
Compensation
LUT(PU)
7 f16In2
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation qaxis
current ratio
(PU)
8
dc_curcompn_
spd_firstindex
SWDDS.
3.6.14.32
IN tFrac16 -32768 32767 N/A N/A N/A
Speed output of
1st. node value
in DC Current
Compensation
LUT(PU)
9 f16In1
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
1st., q-axis
current output of
1st node value in
DC Current
Compensation
LUT(PU)
10 f16In2
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
1st. node value
in DC Current
Compensation
LUT(PU)
11
dc_curcompn_
first_node
SWDDS.
3.6.14.33
IN tFrac16 -32768 32767 N/A N/A N/A
1st. node value
in DC Current
Compensation
LUT(PU)
12 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd., q-axis
current output of
2nd node value
in DC Current
Compensation
LUT(PU)
13 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd., q-axis
current output of
1st node value in
DC Current
Compensation
LUT(PU)
14
dc_curcompn_
spd_secondindex
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd. node value
in DC Current
Compensation
LUT(PU)
15 f16In1
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd. node value
in DC Current
Compensation
LUT(PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 52
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
16 f16In2
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
DC current
compensation qaxis
current ratio
(PU)
17
dc_curcompn_
spd_secondindex
SWDDS.
3.6.14.32
IN tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd. node value
in DC Current
Compensation
LUT(PU)
18 f16In1
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd., q-axis
current output of
1st node value in
DC Current
Compensation
LUT(PU)
19 f16In2
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
Speed output of
2nd. node value
in DC Current
Compensation
LUT(PU)
20
dc_curcompn_
second_node
SWDDS.
3.6.14.33
IN tFrac16 -32768 32767 N/A N/A N/A
2nd. node value
in DC Current
Compensation
LUT(PU)
21 f16In1
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 N/A N/A N/A
2nd. node value
in DC Current
Compensation
LUT(PU)
22 f16In2
SWDDS.
3.6.14.34
OUT tFrac16 -32768 32767 N/A N/A N/A
1st. node value
in DC Current
Compensation
LUT(PU)
23
calculated_dc_
curcompnvalue
SWDDS.
3.6.14.34
IN tFrac16 -32768 32767 N/A N/A N/A
calculated dc
current
compensation
value(PU)
24 f16In1
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
calculated dc
current
compensation
value(PU)
25 f16In2
SWDDS.
3.6.14.32
OUT tFrac16 -32768 32767 N/A N/A N/A
calculated DC
current
compensation
speed ratio
26
calculated_dc_
curcompnvalue
SWDDS.
3.6.14.32
IN tFrac16 -32768 32767 N/A N/A N/A
calculated dc
current
compensation
value(PU)
27 f16In1
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
1st. node value
in DC Current
Compensation
LUT(PU)
28 f16In2
SWDDS.
3.6.14.33
OUT tFrac16 -32768 32767 N/A N/A N/A
calculated dc
current
compensation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 53
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
value(PU)
29 dc_curcompnvalue
SWDDS.
3.6.14.33
IN tFrac16 -32768 32767 N/A N/A N/A
dc current
compensation
value(PU)
3.1.4 [SWDDS.1.1.4] DcVolt
3.1.4.1 [SWDDS.1.1.4.1] DcVolt_Init
3.1.4.1.1 Detailed Design
[SWDDS.1.1.4.1] DcVolt_Init
Software Unit Information
Unit ID SWDDS.1.1.4.1
Unit
Name
DcVolt_Init
Architecture ID SWADS.1.1.4.1 ASIL QM
Prototype void DcVolt_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndDcVoltFilt 0 ~ 15 Read/Write DC driving voltage filtering handle (u16NSamples)
tBool g_bDcVoltFirstMeasr 0 ~ 1 Write DC driving voltage first measurement flag
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16DcVoltFiltNoSmpl 4 Read
Number of samples for moving average filtering of
DC driving voltage
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description DC driving voltage measurement initialization
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.4.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 54
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.4.1.2 Static View Design
3.1.4.1.3 Dynamic View Design
- N/A
3.1.4.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT GDFLIB_FILTER_MA_T_F16 * N/A N/A N/A N/A N/A Pointer of filtering handler
3.1.4.2 [SWDDS.1.1.4.2] DcVolt_Measr
3.1.4.2.1 Detailed Design
[SWDDS.1.1.4.2] DcVolt_Measr
Software Unit Information
Unit ID SWDDS.1.1.4.2 Unit Name DcVolt_Measr
Architecture ID SWADS.1.1.4.2 ASIL QM
Prototype void DcVolt_Measr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 55
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndDcVoltFilt
-2147483648 ~
2147483647
Read/Write
DC driving voltage filtering handle
(f32Acc)
tBool g_bDcVoltFirstMeasr 0 ~ 1 Read/Write
DC driving voltage first measurement
flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
DC driving voltage measurement
- DC driving voltage getting
- DC driving voltage filtering
- Application data updating
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.9 RteSch_Task10ms
Calling Function
SWDDS.2.3.14 RteIo_GetDcVolt
SWDDS.1.1.1.2 AswSen_FilterInpSig
SWDDS.2.2.19 RteApp_WriteDcVolt
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.4.2
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 56
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.4.2.2 Static View Design
3.1.4.2.3 Dynamic View Design
- N/A
3.1.4.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
dc_voltage
_input
SWDDS.2.3.14 IN tFrac16 0 32767 0.0 25.3992
0.000775146 /
Vpk
DC driving voltage input
(PU)
2
filtered_dc
_voltage
SWDDS.1.1.1.2 IN tFrac16 0 32767 0.0 25.3992
0.000775146 /
Vpk
Filtered DC driving
voltage (PU)
3 input_signal SWDDS.1.1.1.2 OUT tFrac16 0 32767 0.0 25.3992
0.000775146 /
Vpk
input signal for filtering
4
p_first
_measurement
SWDDS.1.1.1.2 IN/OUT tBool* 0 1
Normal
filtering
First
filtering
True / False
first measurement flag
pointer
5
p_filter
_handle
SWDDS.1.1.1.2 IN/OUT
GDFLIB
_FILTER
_MA_T_F16*
N/A N/A N/A N/A N/A filter handler pointer
6 dc_voltage SWDDS.2.2.19 OUT tFrac16 0 32767 0.0 25.3992
0.000775146 /
Vpk
DC link voltage (PU)
3.1.5 [SWDDS.1.1.5] McuSta
3.1.5.1 [SWDDS.1.1.5.1] McuSta_Init
3.1.5.1.1 Detailed Design
[SWDDS.1.1.5.1] McuSta_Init
Software Unit Information
Unit ID SWDDS.1.1.5.1
Unit
Name
McuSta_Init
Architecture ID SWADS.1.1.5.1 ASIL QM
Prototype void McuSta_Init( void )
Function Call Data Type Name Range IN/OUT Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 57
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndMcuStaBatVoltFilt 0 ~ 15 Read/Write
Battery voltage filtering handler
(u16NSamples)
tBool g_bMcuStaBatVoltFirstMeasr 0 ~ 1 Write Battery voltage first measurement flag
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16McuStaBatVoltFiltNoSmpl 4 Read
Number of samples for moving average
filtering battery voltage
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description MCU status checking initialization
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.5.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.5.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 58
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.5.1.3 Dynamic View Design
- N/A
3.1.5.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT GDFLIB_FILTER_MA_T_F16 * N/A N/A N/A N/A N/A Pointer of filtering handler
3.1.5.2 [SWDDS.1.1.5.2] McuSta_Chk
3.1.5.2.1 Detailed Design
[SWDDS.1.1.5.2] McuSta_Chk
Software Unit Information
Unit ID SWDDS.1.1.5.2 Unit Name McuSta_Chk
Architecture ID SWADS.1.1.5.2 ASIL QM
Prototype void McuSta_Chk( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 59
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description
MCU status checking
- Battery voltage getting
- MCU status checking
- Application data updating
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.10 RteSch_Task20ms
Calling Function
SWDDS.1.1.5.3 GetMcuStaBatVolt
SWDDS.2.2.27 RteApp_WriteMcuSta
Function Execution Time N/A
Requirement Id SWDDS.1.1.5.2
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.5.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 60
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.5.2.3 Dynamic View Design
- N/A
3.1.5.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 status_flag SWDDS.2.2.27 OUT tU32 0 134217728 0x00000000 0x08000000 N/A Checking flag
3.1.5.3 [SWDDS.1.1.5.3] GetMcuStaBatVolt
3.1.5.3.1 Detailed Design
[SWDDS.1.1.5.3] GetMcuStaBatVolt
Software Unit Information
Unit ID SWDDS.1.1.5.3 Unit Name GetMcuStaBatVolt
Architecture ID SWADS.1.1.5.3 ASIL QM
Prototype void GetMcuStaBatVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bMcuStaBatVoltFirstMeasr 0 ~ 1 Read/Write
Battery voltage first
measurement flag
GDFLIB_FILTER_MA_T_F16 g_hndMcuStaBatVoltFilt
-2147483648 ~
2147483647
Read/Write
Battery voltage filtering handler
(f32Acc)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Battery voltage getting and filtering
- Battery voltage getting
- Battery voltage filtering
- Application data updating
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.5.2 McuSta_Chk
SWDDS.2.3.19 RteIo_GetBatVolt
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 61
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function SWDDS.1.1.1.2 AswSen_FilterInpSig
SWDDS.2.2.25 RteApp_WriteBatVolt
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.5.3
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.1.5.3.2 Static View Design
3.1.5.3.3 Dynamic View Design
- N/A
3.1.5.3.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
battery_voltage
_input
SWDDS.2.3.19 IN tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Battery voltage input
(PU)
2
filtered_battery
_voltage
SWDDS.1.1.1.2 IN tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
Filtered battery voltage
(PU)
3 input_signal SWDDS.1.1.1.2 OUT tFrac16 0 32767 0.0 29.4991
0.000900269 /
Vpk
input signal for filtering
4
p_first
_measurement
SWDDS.1.1.1.2 IN/OUT tBool* 0 1
Normal
filtering
First
filtering
True / False
first measurement flag
pointer
5
p_filter
_handle
SWDDS.1.1.1.2 IN/OUT
GDFLIB
_FILTER
_MA_T_F16*
N/A N/A N/A N/A N/A filter handler pointer
battery 0.000900269 / Filtered battery voltage
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 62
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
6
_voltage
SWDDS.2.2.25 OUT tFrac16 0 32767 0.0 29.4991
Vpk (PU)
3.1.6 [SWDDS.1.1.6] MtrSpd
3.1.6.1 [SWDDS.1.1.6.1] MtrSpd_Init
3.1.6.1.1 Detailed Design
[SWDDS.1.1.6.1] MtrSpd_Init
Software Unit Information
Unit ID SWDDS.1.1.6.1 Unit Name MtrSpd_Init
Architecture
ID
SWADS.1.1.6.1 ASIL QM
Prototype void MtrSpd_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER
_MA_T_F16
g_hndMtrSpdOutFilt 0 ~ 15 Read/Write
Motor speed output
filtering handler
(u16NSamples)
GDFLIB_FILTER
_MA_T_F16
g_hndMtrSpdRpmFilt 0 ~ 15 Read/Write
Motor speed rpm filtering
handler (u16NSamples)
tFrac16 g_f16MtrSpdFilt -32768 ~ 32767 Write Filtered motor speed (PU)
tBool g_bMtrSpdFirstMeasr 0~1 (FALSE, TRUE) Write
Motor speed first
measurement flag
tEopState g_eMtrSpdPrevEopState
0~4 (EOP_STATE_DISABLED,
EOP_STATE_MAX_SPD,
EOP_STATE_SPD_CHG,
EOP_STATE_CUR_FILT,
EOP_STATE_CUR_LMT)
Write Previous EOP control state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16MtrSpdOutFiltNoSmpl 2 Write
Number of samples for
moving average filtering of
motor speed output
tU16 par_u16MtrSpdRpmFiltNoSmpl 4 Write
Number of samples for
moving average filtering of
motor speed rpm
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor speed measurement initialization
Control Flow
Diagram
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 63
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.1.1.1 AswSen_Init
Calling
Function
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.1.1.6.1
Target Milestone SBS1
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.6.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 64
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.6.1.3 Dynamic View Design
- N/A
3.1.6.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT
GDFLIB_FILTER_MA_T_F16
*
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
3.1.6.2 [SWDDS.1.1.6.2] MtrSpd_Measr
3.1.6.2.1 Detailed Design
[SWDDS.1.1.6.2] MtrSpd_Measr
Software Unit Information
Unit ID SWDDS.1.1.6.2 Unit Name MtrSpd_Measr
Architecture
ID
SWADS.1.1.6.2 ASIL QM
Prototype void MtrSpd_Measr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 65
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tEopState g_eMtrSpdPrevEopState
0~4 (EOP_STATE_DISABLED,
EOP_STATE_MAX_SPD,
EOP_STATE_SPD_CHG,
EOP_STATE_CUR_FILT, EOP_STATE_CUR_LMT)
Read/Write
Previous EOP control
state
GDFLIB_FILTER
_MA_T_F16
g_hndMtrSpdRpmFilt -2147483648 ~ 2147483647 Read/Write
Motor speed rpm filtering
handler (f32Acc)
tFrac16 g_f16MtrSpdFilt -32768 ~ 32767 Write
Filtered motor speed
(PU)
tBool g_bMtrSpdFirstMeasr 0~1 (FALSE, TRUE) Read/Write
Motor speed first
measurement flag
GDFLIB_FILTER
_MA_T_F16
g_hndMtrSpdOutFilt -2147483648 ~ 2147483647 Read/Write
Motor speed output
filtering handler (f32Acc)
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16MtrSpdRpmFiltNoSmpl 4 Read
Number of samples for
moving average filtering
of motor speed rpm
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Motor speed measurement
- Filtering coefficient setting
- Speed output getting and filtering
- Speed filtering and unit conversion
Control Flow
Diagram
(or Pseudo
Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 66
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.2.1.7 RteSch_Task1ms
Calling
Function
SWDDS.2.2.28 RteApp_ReadEopState
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
SWDDS.3.6.14.10 GDFLIB_FilterMASetState_F16
SWDDS.2.3.10 RteIo_GetSpdOut
SWDDS.1.1.1.2 AswSen_FilterInpSig
SWDDS.2.2.7 RteApp_WriteSpdOut
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.2.2.9 RteApp_WriteSpdFilt
Function
Execution
Time
N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 67
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.1.1.6.2
Target Milestone SBS1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.1.6.2.2 Static View Design
3.1.6.2.3 Dynamic View Design
- N/A
3.1.6.2.4 Interface Design
no Name
Related
SWDDS
ID
Direction
Data
Type
Raw Range Physical Range
Resolution
/Units
Description
Min Max Min Max
1
eop
_control
_state
SWDDS
.2.2.28
IN tEopState 0 4
EOP
_STATE
_DISABLED
EOP
_STATE
_CUR_LMT
N/A
EOP control
state
2 pParam
SWDDS
.3.6.14.2
IN/OUT
GDFLIB
_FILTER
_MA_T
_F16 *
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
3 f16FilterMAOut
SWDDS
.3.6.14.10
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Filtered speed
output (PU)
4 pParam
SWDDS
.3.6.14.10
IN/OUT
GDFLIB
_FILTER
_MA_T
_F16*
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
5
speed
_output
SWDDS
.2.3.10
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Motor speed
input (PU)
6
filtered
_speed
SWDDS
.1.1.1.2
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Filtered motor
speed (PU)
7 input_signal
SWDDS
.1.1.1.2
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
input signal
for filtering
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 68
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
8
p_first
_measurement
SWDDS
.1.1.1.2
IN/OUT tBool* 0 1
Normal
filtering
First
filtering
True /
False
first
measurement
flag pointer
9 p_filter_handle
SWDDS
.1.1.1.2
IN/OUT
GDFLIB
_FILTER
_MA_T
_F16*
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
10 g_f16MtrSpdFilt
SWDDS
.1.1.1.2
IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Filtered motor
speed (PU)
11 speed_output
SWDDS
.2.2.7
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Filtered motor
speed (PU)
12 f16In1
SWDDS
.3.6.14.32
OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105
/ rpm
Filtered motor
speed (PU)
13 f16In2
SWDDS
.3.6.14.32
OUT tFrac16 6000.0 6000.0 6000.0 6000.0 rpm
Mechanical
speed base
value
14 speed_in_rpm
SWDDS
.3.6.14.32
IN tS16 -6000 6000 -6000 6000 1 / rpm
Unit converted
speed (rpm)
15 filtered_speed
SWDDS
.2.2.9
OUT tS16 -6000 6000 -6000 6000 1 / rpm
filtered_speed:
filtered speed
(rpm)
3.1.7 [SWDDS.1.1.7] MtrTrq
3.1.7.1 [SWDDS.1.1.7.1] MtrTrq_Init
3.1.7.1.1 Detailed Design
[SWDDS.1.1.7.1] MtrTrq_Init
Software Unit Information
Unit ID SWDDS.1.1.7.1
Unit
Name
MtrTrq_Init
Architecture ID SWADS.1.1.7.1 ASIL QM
Prototype void MtrTrq_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndMtrTrqFilt 0 ~ 15 Read/Write Motor torque filtering handler (u16NSamples)
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16MtrTrqFiltNoSmpl 5 Read
Number of samples for moving average filtering of
motor torque
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor torque calculation initialization
Control Flow
Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 69
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.7.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.7.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 70
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.7.1.3 Dynamic View Design
- N/A
3.1.7.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT GDFLIB_FILTER_MA_T_F16 * N/A N/A N/A N/A N/A Pointer of filtering handler
3.1.7.2 [SWDDS.1.1.7.2] MtrTrq_Cal
3.1.7.2.1 Detailed Design
[SWDDS.1.1.7.2] MtrTrq_Cal
Software Unit Information
Unit ID SWDDS.1.1.7.2 Unit Name MtrTrq_Cal
Architecture ID SWADS.1.1.7.2 ASIL QM
Prototype void MtrTrq_Cal( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndMtrTrqFilt
-2147483648 ~
2147483647
Read/Write
Motor torque filtering handler
(f32Acc)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16MtrTrqConst 21662.42 Read
Motor torque constant
(current range x2 Nm/Apk)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Motor torque calculation
- q-axis current output getting
- Motor torque calculation and filtering
- Application data updating
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 71
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.10 RteSch_Task20ms
Calling Function
SWDDS.2.3.11 RteIo_GetCurOut
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.12 MLIB_ShLSat_F16
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.2.2.23 RteApp_WriteMtrTrq
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.7.2
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.1.7.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 72
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.7.2.3 Dynamic View Design
- N/A
3.1.7.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
q_axis
_current
_output
SWDDS.2.3.11 IN tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk
q-axis
current
output
(PU)
2 f16In1 SWDDS.3.6.14.32 OUT tFrac16
FRAC16
( 0.0205 * PARAM_PU
_BASE_PHS
_CUR / 2.0f )
0.0103 Nm/Apk
Torque
constant
3 f16In2 SWDDS.3.6.14.32 OUT tFrac16 -32768 32767 -64.5 64.4980 0.00196838 / Apk
q-axis
current
output
(PU)
4
calculated
_torque
SWDDS.3.6.14.32 IN tFrac16 -32768 32767 -0.5 0.4999845 0.0000152588 / Nm
Calculated
motor
torque
(Nm)
5 f16In1 SWDDS.3.6.14.12 OUT tFrac16 -32768 32767 -0.5 0.4999845 0.0000152588 / Nm
Calculated
motor
torque
(Nm)
6 u16In2 SWDDS.3.6.14.12 OUT tU16 1 1 N/A Bit shift
7
calculated
_torque
SWDDS.3.6.14.12 IN tFrac16 -32768 32767 -1.0 0.999969 0.0000305176 / Nm
Calculated
motor
torque
(Nm)
8 f16In SWDDS.3.6.14.9 OUT tFrac16 -32768 32767 -1.0 0.999969 0.0000305176 / Nm
Calculated
motor
torque
(Nm)
9 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB
_FILTER
_MA_T
_F16*
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
10
filtered
_torque
SWDDS.3.6.14.9 IN tFrac16 -32768 32767 -1.0 0.999969 0.0000305176 / Nm
Filtered
motor
torque
(Nm)
11
motor
SWDDS.2.2.23 OUT tFrac16 -32768 32767 -1.0 0.999969 0.0000305176 / Nm
Filtered
motor
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 73
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
_torque torque
(Nm)
3.1.8 [SWDDS.1.1.8] ReqMsg
3.1.8.1 [SWDDS.1.1.8.1] ReqMsg_Init
3.1.8.1.1 Detailed Design
[SWDDS.1.1.8.1] ReqMsg_Init
Software Unit Information
Unit ID SWDDS.1.1.8.1 Unit Name ReqMsg_Init
Architecture ID SWADS.1.1.8.1 ASIL QM
Prototype void ReqMsg_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16ReqMsgTgtSpd 0 ~ 5100 Write Target speed input (rpm)
tU16 g_u16ReqMsgTimOutCnt 0 ~ 60000 Write RX message time-out count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Request message sending initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.1.8.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 74
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.8.1.2 Static View Design
3.1.8.1.3 Dynamic View Design
- N/A
3.1.8.1.4 Interface Design
- N/A
3.1.8.2 [SWDDS.1.1.8.2] ReqMsg_Recv
3.1.8.2.1 Detailed Design
[SWDDS.1.1.8.2] ReqMsg_Recv
Software Unit Information
Unit ID SWDDS.1.1.8.2 Unit Name ReqMsg_Recv
Architecture ID SWADS.1.1.8.2 ASIL QM
Prototype void ReqMsg_Recv( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16ReqMsgTgtSpd 0 ~ 5100 Read/Write Target speed input (rpm)
tU16 g_u16ReqMsgTimOutCnt 0 ~ 60000 Read/Write RX message time-out count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Request message receiving
- Target speed input getting
- Speed range checking and time-out checking
- CAN bus status checking
- Application data updating
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 75
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.9 RteSch_Task10ms
Calling Function
SWDDS.2.3.22 RteIo_GetTgtSpd
SWDDS.1.1.8.3 CheckReqMsgTgtSpdRng
SWDDS.1.1.8.4 CheckReqMsgRxTimOut
SWDDS.1.1.8.5 CheckReqMsgCanBusSta
SWDDS.2.2.3 RteApp_WriteTgtSpd
SWDDS.2.2.5 RteApp_WriteMsgSta
Function Execution Time N/A
Requirement Id SWDDS.1.1.8.2
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 76
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.8.2.2 Static View Design
3.1.8.2.3 Dynamic View Design
- N/A
3.1.8.2.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range
Resolution/Units Description
Min Max Min Max
1 target_speed SWDDS.2.3.22 IN tS16* 0 5100 0 5100 1 / rpm Target speed (rpm)
2 data_valid SWDDS.2.3.22 IN tBool* 0 1 Data invalid Data valid True / False Data validity
3 data_updated SWDDS.2.3.22 IN tBool 0 1
Did not
updated
Data
updated
True / False Data updated status
4 speed_input SWDDS.1.1.8.3 OUT tS16 0 5100 0 5100 1 / rpm Target speed (rpm)
5 p_speed_output SWDDS.1.1.8.3 IN tS16* 0 3200 0 3200 1 / rpm Target speed input (rpm)
6 checking_flag SWDDS.1.1.8.3 IN tU16 0 2 0x0000 0x0002 N/A Checking flag
7 p_time_count SWDDS.1.1.8.4 IN/OUT tU16* 0 60000 0 60000 1 / msec
RX message time-out
count
8 checking_flag SWDDS.1.1.8.4 IN tU16 0 32 0x0000 0x0020 N/A Checking flag
9 checking_flag SWDDS.1.1.8.5 IN tU16 0 45056 0x0000 0xb000 N/A Checking flag
10 target_speed SWDDS.2.2.3 OUT tS16 0 3200 0 3200 1 / rpm Target speed input (rpm)
11 state_flag SWDDS.2.2.5 OUT tU16 0 65535 0x0000 0xffff N/A Checking flag
3.1.8.3 [SWDDS.1.1.8.3] CheckReqMsgTgtSpdRng
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 77
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.8.3.1 Detailed Design
[SWDDS.1.1.8.3] CheckReqMsgTgtSpdRng
Software Unit Information
Unit ID SWDDS.1.1.8.3 Unit Name CheckReqMsgTgtSpdRng
Architecture ID SWADS.1.1.8.3 ASIL QM
Prototype
tU16 CheckReqMsgTgtSpdRng(
tS16 speed_input,
tS16* p_speed_output )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 speed_input 0 ~ 5100 IN target speed input (rpm)
tS16* p_speed_output 0 ~ 3200 OUT range limited target speed pointer (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 2 Checking flags
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tS16 par_s16ReqMsgSpdOvrThrs 3200 Read Target speed range over threshold (rpm)
tS16 par_s16ReqMsgSpdUndThrs 0 Read Target speed range under threshold (rpm)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Target speed range checking and range limiting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.1.8.3
Target Milestone SBS1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 78
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
3.1.8.3.2 Static View Design
3.1.8.3.3 Dynamic View Design
- N/A
3.1.8.3.4 Interface Design
- N/A
3.1.8.4 [SWDDS.1.1.8.4] CheckReqMsgRxTimOut
3.1.8.4.1 Detailed Design
[SWDDS.1.1.8.4] CheckReqMsgRxTimOut
Software Unit Information
Unit ID SWDDS.1.1.8.4 Unit Name CheckReqMsgRxTimOut
Architecture ID SWADS.1.1.8.4 ASIL QM
Prototype
tU16 CheckReqMsgRxTimOut(
tU16* p_time_count )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16* p_time_count 0 ~ 60000 IN/OUT time count pointer
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 32 Checking flags
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16ReqMsgRxTimOut 2000 Read RX message time-out duration threshold (ms)
tU16 par_u16ReqMsgRxTimWrn 1000 Read RX message time warning duration threshold (ms)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Message receiving time-out checking
Control Flow Diagram

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 79
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.1.8.4
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.1.8.4.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 80
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.8.4.3 Dynamic View Design
- N/A
3.1.8.4.4 Interface Design
- N/A
3.1.8.5 [SWDDS.1.1.8.5] CheckReqMsgCanBusSta
3.1.8.5.1 Detailed Design
[SWDDS.1.1.8.5] CheckReqMsgCanBusSta
Software Unit Information
Unit ID SWDDS.1.1.8.5 Unit Name CheckReqMsgCanBusSta
Architecture ID SWADS.1.1.8.5 ASIL QM
Prototype tU16 CheckReqMsgCanBusSta( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
tU16 0 ~ 45056 Checking flags
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description CAN bus status checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.8.2 ReqMsg_Recv
Calling Function SWDDS.2.3.23 RteIo_GetCanBusSta
Function Execution Time N/A
Requirement Id SWDDS.1.1.8.5
Target Milestone SBS2.1
Element AswSen
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 81
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.8.5.2 Static View Design
3.1.8.5.3 Dynamic View Design
- N/A
3.1.8.5.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range
Resolution/Units Description
Min Max Min Max
1 checking_flag SWDDS.2.3.23 IN tU16 0 45056 0x0000 0xb000 N/A Checking flag
3.1.9 [SWDDS.1.1.9] TempSig
3.1.9.1 [SWDDS.1.1.9.1] TempSig_Init
3.1.9.1.1 Detailed Design
[SWDDS.1.1.9.1] TempSig_Init
Software Unit Information
Unit ID SWDDS.1.1.9.1 Unit Name TempSig_Init
Architecture ID SWADS.1.1.9.1 ASIL QM
Prototype void TempSig_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 82
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data Type Name Range Read/Write Description
GDFLIB_FILTER_MA_T_F16 g_hndTempSigPcbTempFilt 0 ~ 15 Read/Write
PCB temperature filtering handler
(u16NSamples)
tBool g_bTempSigPcbTempFirstMeasr
0~1, FALSE
/ TRUE
Write PCB temperature first measurement flag
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16TempPcbFiltNoSmpl 5 Read
Number of samples for moving average
filtering PCB temperature
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Temperature signal measurement initialization
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.1.1 AswSen_Init
Calling Function SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.1.9.1
Target Milestone EBS2
Element AswSen
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.1.9.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 83
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.9.1.3 Dynamic View Design
- N/A
3.1.9.1.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range
Resolution/Units Description
Min Max Min Max
1 pParam SWDDS.3.6.14.2 IN/OUT
GDFLIB
_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A Pointer of filtering handler
3.1.9.2 [SWDDS.1.1.9.2] TempSig_Measr
3.1.9.2.1 Detailed Design
[SWDDS.1.1.9.2] TempSig_Measr
Software Unit Information
Unit ID SWDDS.1.1.9.2 Unit Name TempSig_Measr
Architecture ID SWADS.1.1.9.2 ASIL QM
Prototype void TempSig_Measr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bTempSigPcbTempFirstMeasr 0~1, FALSE / TRUE Read/Write
PCB temperature first
measurement flag
GDFLIB_FILTER_MA_T_F16 g_hndTempSigPcbTempFilt
85899346 ~
365072220
Read/Write
PCB temperature filtering handler
(f32Acc)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 84
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Temperature signal measurement
- PCB temperature signal input
- Temperature signal interpolation and filtering
- Application data updating
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.11 RteSch_Task50ms
Calling Function
SWDDS.2.3.18 RteIo_GetPcbTempSig
SWDDS.1.1.9.3 InterpolateTempSigPcbTemp
SWDDS.1.1.1.2 AswSen_FilterInpSig
SWDDS.2.2.21 RteApp_WritePcbTemp
Function Execution
Time
N/A
Requirement Id SWDDS.1.1.9.2
Target Milestone EBS2
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 85
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.1.9.2.2 Static View Design
3.1.9.2.3 Dynamic View Design
- N/A
3.1.9.2.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
temperature
_signal
SWDDS.2.3.18 IN tFrac16 0 32767 0.0 4.99985
0.000152588 /
Vpk
Temperature signal input
(PU)
2
temperature
_signal
SWDDS.1.1.9.3 OUT tFrac16 0 32767 0.0 4.99985
0.000152588 /
Vpk
Temperature signal input
(PU)
3
interpolated
_temperature
SWDDS.1.1.9.3 IN tFrac16 -1311 5570 -40.0 170.0
0.0305176 /
degC
Interpolated temperature
(PU)
4
filtered
_temperature
SWDDS.1.1.1.2 IN tFrac16 -1311 5570 -40.0 170.0
0.0305176 /
degC
Filtered temperature (PU)
5 input_signal SWDDS.1.1.1.2 OUT tFrac16 -1311 5570 -40.0 170.0
0.0305176 /
degC
input signal for filtering
6
p_first
_measurement
SWDDS.1.1.1.2 IN/OUT tBool* 0 1
Normal
filtering
First
filtering
True / False
first measurement flag
pointer
7 p_filter_handle SWDDS.1.1.1.2 IN/OUT
GDFLIB
_FILTER
_MA_T
_F16*
N/A N/A N/A N/A N/A filter handler pointer
8
pcb
_temperature
SWDDS.2.2.21 OUT tFrac16 -1311 5570 -40.0 170.0
0.0305176 /
degC
Filtered temperature (PU)
3.1.9.3 [SWDDS.1.1.9.3] InterpolateTempSigPcbTemp
3.1.9.3.1 Detailed Design
[SWDDS.1.1.9.3] InterpolateTempSigPcbTemp
Software Unit Information
Unit ID SWDDS.1.1.9.3 Unit Name InterpolateTempSigPcbTemp
Architecture ID SWADS.1.1.9.3 ASIL QM
Prototype
tFrac16 InterpolateTempSigPcbTemp(
tFrac16 temperature_signal )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 temperature_signal 0 ~ 32767 IN temperature signal input (PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 86
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 -1311 ~ 5570 Interpolated PCB temperature (PU)
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_af16TempPcbLut 0 ~ 32767 Read PCB temperature signal voltage LUT (PU)
tFrac16 par_f16TempPcbOffs 163.83 Read PCB temperature offset (PU)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
PCB temperature interpolation in temperature LUT
- Lowest temperature range under checking
- Node searching
- Highest temperature range over checking
- Temperature calculation (linear interpolation)
Control Flow
Diagram
(or Pseudo Code)
1. InterpolateTempSigPcbTemp sets the minimum temperature if the temperature signal is below than the minimum voltage.
2. InterpolateTempSigPcbTemp searches node in the temperature loo-up table in which the temperature signal is lying between the
temperature signals.
3. InterpolateTempSigPcbTemp sets the maximum temperature if the searched index is the last one.
4. InterpolateTempSigPcbTemp sets the first and the second nodes to interpolate temperature.
5. InterpolateTempSigPcbTemp calculates the temperature using linear interpolation
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 87
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.1.9.2 TempSig_Measr
Calling Function
SWDDS.3.6.14.35 MLIB_Sub_F16
SWDDS.3.6.14.36 MLIB_Div_F16
SWDDS.3.6.14.37 MLIB_Mul_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.1.9.3
Target Milestone SBS1
Element AswSen
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 88
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
3.1.9.3.2 Static View Design
3.1.9.3.3 Dynamic View Design
- N/A
3.1.9.3.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.35 OUT tFrac16 0 32767 0.0 4.99985
0.000152588 /
Vpk
Temperature signal input
(PU)
2 f16In2 SWDDS.3.6.14.35 OUT tFrac16 0 32767 0.0 4.99985
0.000152588 /
Vpk
Temperature signal in LUT
3 temperature_num SWDDS.3.6.14.35 IN tFrac16 -32768 32767 -1.0 1.0 N/A Temperature numerator
4 temperature_den SWDDS.3.6.14.35 IN tFrac16 -32768 32767 -1.0 1.0 N/A Temperature denominator
5 f16In1 SWDDS.3.6.14.36 OUT tFrac16 -32768 32767 -1.0 1.0 N/A Temperature numerator
6 f16In2 SWDDS.3.6.14.36 OUT tFrac16 -32768 32767 -1.0 1.0 N/A Temperature denominator
7
calculated
_temperature
SWDDS.3.6.14.36 IN tFrac16 -32768 32767 -1.0 1.0 N/A Calculated temperature
8 f16In1 SWDDS.3.6.14.37 OUT tFrac16 -32768 32767 -1.0 1.0 N/A calculated value
9 f16In2 SWDDS.3.6.14.37 OUT tFrac16
FRAC16( 0.010
)
0.010 N/A Temperature interval
10
calculated
_temperature
SWDDS.3.6.14.37 IN tFrac16 -1311 5570 -40.0 170.0 0.0305176 / degC Calculated temperature (PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 89
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2 [SWDDS.1.2] AswCtr
AswSen updates input/output values such as Target speed, Output Current, DC Current, DC Voltage,
Temperature, Motor torque and Battery Voltage. It also checks status of Target speed range, Messagereceiving
time-out, CAN Bus, Current control and OPU.
3.2.1 [SWDDS.1.2.1] AswCtr
3.2.1.1 [SWDDS.1.2.1.1] AswCtr_Init
3.2.1.1.1 Detailed Design
[SWDDS.1.2.1.1] AswCtr_Init
Software Unit Information
Unit ID SWDDS.1.2.1.1 Unit Name AswCtr_Init
Architecture ID SWADS.1.2.1.1 ASIL QM
Prototype void AswCtr_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Control software initialization
- EOP control initialization
- Driving status checking initialization
- Signal range checking initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.3 InitializeRteSchAppSw
Calling Function
SWDDS.1.2.3.1 EopCtr_Init
SWDDS.1.2.2.1 DrvSta_Init
SWDDS.1.2.4.1 SigRng_Init
Function Execution Time N/A
Requirement Id SWDDS.1.2.1.1
Target Milestone EBS2
Element AswCtr
Risk Low
Interoperability No
Criticality Low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 90
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
3.2.1.1.2 Static View Design
3.2.1.1.3 Dynamic View Design
3.2.1.1.4 Interface Design
- N/A
3.2.2 [SWDDS.1.2.2] DrvSta
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 91
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.1 [SWDDS.1.2.2.1] DrvSta_Init
3.2.2.1.1 Detailed Design
[SWDDS.1.2.2.1] DrvSta_Init
Software Unit Information
Unit ID SWDDS.1.2.2.1 Unit Name DrvSta_Init
Architecture ID SWADS.1.2.2.1 ASIL QM
Prototype void DrvSta_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Driving status checking initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.1.1 AswCtr_Init
Calling Function SWDDS.1.2.2.2 ClearDrvStaHoldCnt
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.1
Target Milestone EBS2
Element AswCtr
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.2.2.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 92
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.1.3 Dynamic View Design
3.2.2.1.4 Interface Design
- N/A
3.2.2.2 [SWDDS.1.2.2.2] ClearDrvStaHoldCnt
3.2.2.2.1 Detailed Design
[SWDDS.1.2.2.2] ClearDrvStaHoldCnt
Software Unit Information
Unit ID SWDDS.1.2.2.2 Unit Name ClearDrvStaHoldCnt
Architecture ID SWADS.1.2.2.2 ASIL QM
Prototype void ClearDrvStaHoldCnt( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Data
Type
Name Range Read/Write Description
tU32 g_u32DrvStaChkFlag
0 ~
16776960
Write Driving status checking flag
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 93
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tU16 g_u16DrvStaMtrSpdOvrCnt 0 ~ 60000 Write Motor speed over condition hold time count (ms)
tU16 g_u16DrvStaMtrSpdUndCnt 0 ~ 60000 Write Motor speed under condition hold time count (ms)
tU16 g_u16DrvStaSpdErrOvrCnt 0 ~ 60000 Write Speed control error over condition hold time count (ms)
tU16 g_u16DrvStaSpdErrUndCnt 0 ~ 60000 Write Speed control error under condition hold time count (ms)
tU16 g_u16DrvStaCurErrOvrCnt 0 ~ 60000 Write Current control error over condition hold time count (ms)
tU16 g_u16DrvStaCurErrUndCnt 0 ~ 60000 Write
Current control error under condition hold time count
(ms)
tU16 g_u16DrvStaCurOutOvrCnt 0 ~ 60000 Write Current output over condition hold time count (ms)
tU16 g_u16DrvStaCurOutUndCnt 0 ~ 60000 Write Current output under condition hold time count (ms)
tU16 g_u16DrvStaShrtCirCnt 0 ~ 60000 Write Short circuit condition hold time count (ms)
tU16 g_u16DrvStaLowCurCnt 0 ~ 60000 Write Low current condition hold time count (ms)
tU16 g_u16DrvStaSpdErrCnt1 0 ~ 60000 Write Speed error condition 1 hold time count (ms)
tU16 g_u16DrvStaSpdErrCnt2 0 ~ 60000 Write Speed error condition 2 hold time count (ms)
tU16 g_u16DrvStaCurOvrCnt1 0 ~ 60000 Write Current over condition 1 hold time count (ms)
tU16 g_u16DrvStaCurOvrCnt21 0 ~ 60000 Write Current over condition 21 hold time count (ms)
tU16 g_u16DrvStaCurOvrCnt22 0 ~ 60000 Write Current over condition 22 hold time count (ms)
tU16 g_u16DrvStaCurOvrCnt3 0 ~ 60000 Write Current over condition 3 hold time count (ms)
tU16 g_u16DrvStaDcVoltUndCnt 0 ~ 60000 Write DC driving voltage under fault count
tU16 g_u16DrvStaGdrvUvOvCnt 0 ~ 60000 Write Gate driver under/over voltage fault count
tU16 g_u16DrvStaGdrvDesatCnt 0 ~ 60000 Write Gate driver DESAT fault count
tU16 g_u16DrvStaCurOffsCnt 0 ~ 60000 Write Current sensor offset fault count
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Driving status checking hold count clearing
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 94
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.1 DrvSta_Init
SWDDS.1.2.2.4 CheckDrvStaFlagClr
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.2.2
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.2.2.2 Static View Design
3.2.2.2.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 95
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.2.4 Interface Design
- N/A
3.2.2.3 [SWDDS.1.2.2.3] DrvSta_Chk
3.2.2.3.1 Detailed Design
[SWDDS.1.2.2.3] DrvSta_Chk
Software Unit Information
Unit ID SWDDS.1.2.2.3 Unit Name DrvSta_Chk
Architecture ID SWADS.1.2.2.3 ASIL QM
Prototype void DrvSta_Chk( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32DrvStaChkFlag 0 ~ 16776960 Read Driving status checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Driving status checking
-. Control enabling edge checking
-. EOP control disabling edge checking
-. Fault checking during control enabled
-. Data updating
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 96
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.9 RteSch_Task10ms
Calling Function
SWDDS.2.2.10 RteApp_ReadCtrState
SWDDS.2.2.30 RteApp_ReadCtrEna
SWDDS.2.2.28 RteApp_ReadEopState
SWDDS.2.2.42 RteApp_WriteDrvSta
SWDDS.1.2.2.4 CheckDrvStaFlagClr
SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
SWDDS.1.2.2.9 CheckDrvStaCtrFlt
SWDDS.1.2.2.6 CheckDrvStaAtSlRun
SWDDS.1.2.2.7 CheckDrvStaAtCurLmt
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.3
Target Milestone EBS2
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 97
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.2.3.2 Static View Design
3.2.2.3.3 Dynamic View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 98
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.3.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
control
_state
SWDDS.2.2.10 IN tCtrState 0 4
CTR
_STATE
_SWTC
_OFF
CTR
_STATE
_SL
_RUN
N/A
Current
control
state
2
control
_enable
SWDDS.2.2.30 IN tBool 0 1
Control
disable
Control
enable
True /
False
EOP
control
enabled
status
3 eop_state SWDDS.2.2.28 IN tEopState 0 4
EOP
_STATE
_DISABLED
EOP
_STATE
_CUR_LMT
N/A
EOP
control
state
4 status_flag SWDDS.2.2.42 OUT tU32 0 8388608 0x00000000 0x00800000 N/A
Driving
status
checking
flag
3.2.2.4 [SWDDS.1.2.2.4] CheckDrvStaFlagClr
3.2.2.4.1 Detailed Design
[SWDDS.1.2.2.4] CheckDrvStaFlagClr
Software Unit Information
Unit ID SWDDS.1.2.2.4 Unit Name CheckDrvStaFlagClr
Architecture ID SWADS.1.2.2.4 ASIL QM
Prototype void CheckDrvStaFlagClr( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tS16 par_s16RefSpdOffThrs 500 Read Control disabling(off) target speed threshold (rpm)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Driving status checking flag clearing condition checking
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 99
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function
SWDDS.1.2.2.2 ClearDrvStaHoldCnt
SWDDS.2.2.2 RteApp_ReadTgtSpd
SWDDS.2.3.16 RteIo_ClrSlFocFltSta
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.4
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.2.4.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 100
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.4.3 Dynamic View Design
3.2.2.4.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.2.2.2 IN tS16 N/A N/A N/A N/A N/A
Target
speed
setting
(rpm)
3.2.2.5 [SWDDS.1.2.2.5] CheckDrvStaAtCtrEna
3.2.2.5.1 Detailed Design
[SWDDS.1.2.2.5] CheckDrvStaAtCtrEna
Software Unit Information
Unit ID SWDDS.1.2.2.5
Unit
Name
CheckDrvStaAtCtrEna
Architecture ID SWADS.1.2.2.5 ASIL QM
Prototype void CheckDrvStaAtCtrEna( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible
Return Value
Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Driving status checking at EOP control enabled
status
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 101
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Description
-. Data getting
-. Status checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function
SWDDS.1.2.2.11 CheckDrvStaMtrSpdRng
SWDDS.1.2.2.10 CheckDrvStaLowCur
SWDDS.1.2.2.8 CheckDrvStaShrtCir
SWDDS.2.2.14 RteApp_ReadCurOut
SWDDS.2.2.8 RteApp_ReadSpdFilt
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.5
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.2.5.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 102
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.5.3 Dynamic View Design
3.2.2.5.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 current_output SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
2 motor_speed SWDDS.2.2.8 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Filtered
speed
output
(rpm)
3 current_output SWDDS.1.2.2.8 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
q-axis
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 103
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
4 current_output SWDDS.1.2.2.10 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
current
output
(PU)
5 motor_speed SWDDS.1.2.2.11 OUT tS16 -6000 6000 -6000 6000 1 / rpm
Filtered
speed
output
(rpm)
3.2.2.6 [SWDDS.1.2.2.6] CheckDrvStaAtSlRun
3.2.2.6.1 Detailed Design
[SWDDS.1.2.2.6] CheckDrvStaAtSlRun
Software Unit Information
Unit ID SWDDS.1.2.2.6 Unit Name CheckDrvStaAtSlRun
Architecture ID SWADS.1.2.2.6 ASIL QM
Prototype void CheckDrvStaAtSlRun( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Driving status checking at sensorless running state
-. Data getting
-. Status checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function
SWDDS.1.2.2.12 CheckDrvStaSpdErr
SWDDS.2.2.14 RteApp_ReadCurOut
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.6
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 104
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Technical complexity Low
Verifiability Yes
3.2.2.6.2 Static View Design
3.2.2.6.3 Dynamic View Design
3.2.2.6.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 current_output SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
2 current_output SWDDS.1.2.2.12 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 105
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.7 [SWDDS.1.2.2.7] CheckDrvStaAtCurLmt
3.2.2.7.1 Detailed Design
[SWDDS.1.2.2.7] CheckDrvStaAtCurLmt
Software Unit Information
Unit ID SWDDS.1.2.2.7 Unit Name CheckDrvStaAtCurLmt
Architecture ID SWADS.1.2.2.7 ASIL QM
Prototype void CheckDrvStaAtCurLmt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Driving status checking at current limiting state
-. Data getting
-. Status checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function
SWDDS.1.2.2.13 CheckDrvStaCurOvr
SWDDS.2.2.14 RteApp_ReadCurOut
SWDDS.2.2.8 RteApp_ReadSpdFilt
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.7
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 106
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
3.2.2.7.2 Static View Design
3.2.2.7.3 Dynamic View Design
3.2.2.7.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 current_output SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
2 motor_speed SWDDS.2.2.8 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Filtered
speed
output
(rpm)
q-axis
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 107
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3 current_output SWDDS.1.2.2.13 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
current
output
(PU)
4 motor_speed SWDDS.1.2.2.13 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Filtered
speed
output
(rpm)
3.2.2.8 [SWDDS.1.2.2.8] CheckDrvStaShrtCir
3.2.2.8.1 Detailed Design
[SWDDS.1.2.2.8] CheckDrvStaShrtCir
Software Unit Information
Unit ID SWDDS.1.2.2.8 Unit Name CheckDrvStaShrtCir
Architecture ID SWADS.1.2.2.8 ASIL QM
Prototype void CheckDrvStaShrtCir( tFrac16 current_output )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 current_output -32768 ~ 32767 IN current output
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16DrvStaShrtCirCnt 0 ~ 60000 Read
Short circuit condition hold time
count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltShrtCirCurThrs
FRAC16( 35.0f /
PARAM_PU_BASE_PHS_CUR )
Read
Short circuit detection current
threshold (PU)
tU16 par_u16FltShrtCirHoldTim 1000 Read
Short circuit detection condition
hold time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Short circuit condition checking
-. Short circuit condition over checking
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
Calling Function SWDDS.1.2.2.14 CheckDrvStaCondHoldCnt
Function Execution
Time
N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 108
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Requirement Id SWDDS.1.2.2.8
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.2.8.2 Static View Design
3.2.2.8.3 Dynamic View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 109
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.8.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking
condition
meet
2
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Short
circuit
condition
hold time
count (ms)
3
count
_threshold
SWDDS.1.2.2.14 OUT tU16 1000 1000 1000 1000 1 / msec
Short
circuit
detection
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.2.14 OUT tU32 131072 131072 0x00020000 0x00020000 N/A
Short
circuit fault
flag
3.2.2.9 [SWDDS.1.2.2.9] CheckDrvStaCtrFlt
3.2.2.9.1 Detailed Design
[SWDDS.1.2.2.9] CheckDrvStaCtrFlt
Software Unit Information
Unit ID SWDDS.1.2.2.9 Unit Name CheckDrvStaCtrFlt
Architecture ID SWADS.1.2.2.9 ASIL QM
Prototype void CheckDrvStaCtrFlt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32DrvStaChkFlag 0 ~ 16776960 Write Driving status checking flag
tU16 g_u16DrvStaDcVoltUndCnt 0 ~ 60000 Read/Write DC driving voltage under fault count
tU16 g_u16DrvStaCurOffsCnt 0 ~ 60000 Read/Write Current sensor offset fault count
tU16 g_u16DrvStaGdrvUvOvCnt 0 ~ 60000 Read/Write Gate driver under/over voltage fault count
tU16 g_u16DrvStaGdrvDesatCnt 0 ~ 60000 Read/Write Gate driver DESAT fault count
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Current control status checking
-. current control fault getting
-. Peak over-current checking
-. Peak over-voltage checking
-. Peak under-voltage checking
-. Current offset checking
-. Gate driver under-voltage or over-voltage checking
-. Gate driver DESAT detection checking
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 110
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
-. Initial starting time-out checking
Control Flow
Diagram
(or Pseudo Code)
1. CheckDrvStaCtrFlt sets the over current flag if d/q-axis or 3-phase current is over.
2. CheckDrvStaCtrFlt sets the DC voltage over flag if DC driving voltage is over.
3. CheckDrvStaCtrFlt sets the DC voltage under flag and increases the DC voltage under count if DC driving voltage is under.
4. CheckDrvStaCtrFlt sets the gate driver under/over voltage flag and increases the gate driver under/over voltage count if gate driver
under/over voltage is set.
5. CheckDrvStaCtrFlt sets the DESAT flag and increases the DESAT count if the gate driver DESAT is detected.
6. CheckDrvStaCtrFlt sets the starting time-out flag if the Sensorless FOC starting time-out is occurred.

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 111
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.1.2.2.3 DrvSta_Chk
Calling Function SWDDS.2.2.12 RteApp_ReadCtrFlt
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.2.9
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
Verifiability Yes
3.2.2.9.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 112
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.9.3 Dynamic View Design
3.2.2.9.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range
Physical
Range Resolution/Units Description
Min Max Min Max
1 control_fault SWDDS.2.2.12 IN tU16 0 65535 0x0000 0xffff N/A
Current
control
fault flags
3.2.2.10 [SWDDS.1.2.2.10] CheckDrvStaLowCur
3.2.2.10.1 Detailed Design
[SWDDS.1.2.2.10] CheckDrvStaLowCur
Software Unit Information
Unit ID SWDDS.1.2.2.10 Unit Name CheckDrvStaLowCur
Architecture ID SWADS.1.2.2.10 ASIL QM
Prototype void CheckDrvStaLowCur( tFrac16 current_output )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 current_output -32768 ~ 32767 IN current output
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16DrvStaLowCurCnt 0 ~ 60000 Read
Low current condition hold time
count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltLowCurCurThrs
FRAC16( 0.2f /
PARAM_PU_BASE_PHS_CUR )
Read
Low current detection current
threshold (PU)
tU16 par_u16FltLowCurHoldTim 5000 Read
Low current detection condition
hold time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Low current condition checking
Control Flow
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 113
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
Calling Function SWDDS.1.2.2.14 CheckDrvStaCondHoldCnt
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.2.10
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.2.10.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 114
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.10.3 Dynamic View Design
3.2.2.10.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking
condition
meet
2
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Low
current
condition
hold time
count (ms)
3
count
_threshold
SWDDS.1.2.2.14 OUT tU16 5000 5000 5000 5000 1 / msec
Low
current
detection
condition
hold time
(ms)
4
setting
_flag
SWDDS.1.2.2.14 OUT tU32 262144 262144 0x00040000 0x00040000 N/A
Low
current
fault flag
3.2.2.11 [SWDDS.1.2.2.11] CheckDrvStaMtrSpdRng
3.2.2.11.1 Detailed Design
[SWDDS.1.2.2.11] CheckDrvStaMtrSpdRng
Software Unit Information
Unit ID SWDDS.1.2.2.11 Unit Name CheckDrvStaMtrSpdRng
Architecture ID SWADS.1.2.2.11 ASIL QM
Prototype void CheckDrvStaMtrSpdRng( tS16 motor_speed )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 motor_speed -32768 ~ 32767 IN motor speed(rpm)
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16DrvStaMtrSpdOvrCnt 0 ~ 60000 Read Motor speed over condition hold time count (ms)
tU16 g_u16DrvStaMtrSpdUndCnt 0 ~ 60000 Read Motor speed under condition hold time count (ms)
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 115
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
tS16 par_s16MtrSpdOvrThrs 5500 Read Motor speed range over threshold (rpm)
tS16 par_s16MtrSpdUndThrs -500 Read Motor speed range under threshold (rpm)
tU16 par_u16MtrSpdHoldTim 200 Read Speed range over detection condition hold time (ms)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Motor speed range checking
-. Motor speed range over checking
-. Motor speed range under checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.5 CheckDrvStaAtCtrEna
Calling Function SWDDS.1.2.2.14 CheckDrvStaCondHoldCnt
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.11
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.2.11.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 116
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.11.3 Dynamic View Design
3.2.2.11.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking
condition
meet
2
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Motor
speed over
condition
hold time
count (ms)
count
Speed
range over
detection
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 117
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3
_threshold
SWDDS.1.2.2.14 OUT tU16 200 200 200 200 1 / msec
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.2.14 OUT tU32 1024 1024 0x00000400 0x00000400 N/A
Motor
speed
range over
fault flag
5
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking
condition
meet
6
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Motor
speed
under
condition
hold time
count (ms)
7
count
_threshold
SWDDS.1.2.2.14 OUT tU16 200 200 200 200 1 / msec
Speed
range over
detection
condition
hold time
(ms)
8 setting_flag SWDDS.1.2.2.14 OUT tU32 2048 2048 0x00000800 0x00000800 N/A
Motor
speed
range
under fault
flag
3.2.2.12 [SWDDS.1.2.2.12] CheckDrvStaSpdErr
3.2.2.12.1 Detailed Design
[SWDDS.1.2.2.12] CheckDrvStaSpdErr
Software Unit Information
Unit ID SWDDS.1.2.2.12 Unit Name CheckDrvStaSpdErr
Architecture ID SWADS.1.2.2.12 ASIL QM
Prototype void CheckDrvStaSpdErr( tFrac16 current_output )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 current_output -32768 ~ 32767 IN current output
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16DrvStaSpdErrCnt1 0 ~ 60000 Read
Speed error condition 1 hold time
count (ms)
tU16 g_u16DrvStaSpdErrCnt2 0 ~ 60000 Read
Speed error condition 2 hold time
count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltSpdErrCurThrs1
FRAC16( 1.5f /
PARAM_PU_BASE_PHS_CUR )
Read
Speed error detection current
threshold 1 (PU)
tU16 par_u16FltSpdErrHoldTim1 10000 Read
Speed error detection condition hold
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 118
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
time 1 (ms)
tFrac16 par_f16FltSpdErrCurThrs2
FRAC16( 1.5f /
PARAM_PU_BASE_PHS_CUR )
Read
Speed error detection current
threshold 2 (PU)
tU16 par_u16FltSpdErrHoldTim2 4000 Read
Speed error detection condition hold
time 2 (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Speed error condition checking
-. Operating mode getting and checking
-. Speed error condition 1 checking
-. Speed error condition 2 checking
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.6 CheckDrvStaAtSlRun
Calling Function
SWDDS.1.2.2.14 CheckDrvStaCondHoldCnt
SWDDS.2.2.45 RteApp_ReadOprMode
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.2.12
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 119
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.12.2 Static View Design
3.2.2.12.3 Dynamic View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 120
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.12.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
operating
_mode
SWDDS.2.2.45 IN tOprMode 0 5
OPR
_MODE
_OFF
OPR
_MODE
_TEST
N/A
Operating
mode
2
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True / False
Checking
condition
meet
3
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Speed
error
condition 1
hold time
count (ms)
4
count
_threshold
SWDDS.1.2.2.14 OUT tU16 10000 10000 10000 10000 1 / msec
Speed
error
detection
condition
hold time 1
(ms)
5 setting_flag SWDDS.1.2.2.14 OUT tU32 256 256 0x00000100 0x00000100
Speed
error 1
fault flag
6
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True / False
Checking
condition
meet
7
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Speed
error
condition 2
hold time
count (ms)
8
count
_threshold
SWDDS.1.2.2.14 OUT tU16 4000 4000 4000 4000 1 / msec
Speed
error
detection
condition
hold time 2
(ms)
9 setting_flag SWDDS.1.2.2.14 OUT tU32 512 512 0x00000200 0x00000200 N/A
Speed
error 2
fault flag
3.2.2.13 [SWDDS.1.2.2.13] CheckDrvStaCurOvr
3.2.2.13.1 Detailed Design
[SWDDS.1.2.2.13] CheckDrvStaCurOvr
Software Unit Information
Unit ID SWDDS.1.2.2.13 Unit Name CheckDrvStaCurOvr
Architecture ID SWADS.1.2.2.13 ASIL QM
Prototype void CheckDrvStaCurOvr( tFrac16 current_output, tFrac16 motor_speed )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 current_output -32768 ~ 32767 IN current output
tFrac16 motor_speed -32768 ~ 32767 IN motor speed(rpm)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 121
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16DrvStaCurOvrCnt1 0 ~ 60000 Read
Current over condition 1 hold time
count (ms)
tU16 g_u16DrvStaCurOvrCnt21 0 ~ 60000 Read
Current over condition 21 hold time
count (ms)
tU16 g_u16DrvStaCurOvrCnt22 0 ~ 60000 Read
Current over condition 22 hold time
count (ms)
tU16 g_u16DrvStaCurOvrCnt3 0 ~ 60000 Read
Current over condition 3 hold time
count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltCurOvrCurThrs1
FRAC16( 25.0f /
PARAM_PU_BASE_PHS_CUR )
Read
Over current detection current
threshold 1 (PU)
tFrac16 par_f16FltCurOvrSpdThrs1
FRAC16( 600.0f /
PARAM_PU_BASE_MECH_SPD )
Read
Over current detection speed
threshold 1 (PU)
tU16 par_u16FltCurOvrHoldTim1 3000 Read
Over current detection condition
hold time 1 (ms)
tBool par_bEopCtrCurLmtEna 0 ~ 1 Read Current limiting enable
tFrac16 par_f16FltCurOvrCurThrs2
FRAC16( 25.0f /
PARAM_PU_BASE_PHS_CUR
Read
Over current detection current
threshold 2 (PU)
tU16 par_u16FltCurOvrAkHoldTim2 3000 Read
Over current detection condition
AK hold time 2 (ms)
tU16 par_u16FltCurOvrCkHoldTim2 10000 Read
Over current detection condition
CK hold time 2 (ms)
tFrac16 par_f16FltCurOvrCurThrs3
FRAC16( 25.0f /
PARAM_PU_BASE_PHS_CUR )
Read
Over current detection current
threshold 3 (PU)
tU16 par_u16FltCurOvrHoldTim3 10000 Read
Over current detection condition
hold time 3 (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Current over condition checking
-. Current over condition 1 checking
-. Current over condition 2 checking at current limiting
-. Current over condition 3 checking at speed control
Control Flow
Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 122
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.7 CheckDrvStaAtCurLmt
Calling Function
SWDDS.1.2.2.14 CheckDrvStaCondHoldCnt
SWDDS.1.2.2.15 CheckDrvStaCondHoldCntWoClr
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.2.13
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.2.13.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 123
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.13.3 Dynamic View Design
3.2.2.13.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking condition meet
2
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Current over condition 1 hold
time count (ms)
3
count
_threshold
SWDDS.1.2.2.14 OUT tU16 3000 3000 3000 3000 1 / msec
Over current detection condition
hold time 1 (ms)
4 setting_flag SWDDS.1.2.2.14 OUT tU32 4096 4096 0x00001000 0x00001000 N/A Current over 1 fault flag
5
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking condition meet
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 124
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
6
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Current over condition 21 hold
time count (ms)
7
count
_threshold
SWDDS.1.2.2.14 OUT tU16 3000 3000 3000 3000 1 / msec
Over current detection condition
AK hold time 2 (ms)
8 setting_flag SWDDS.1.2.2.14 OUT tU32 8192 8192 0x00002000 0x00002000 N/A Current over 2 fault flag
9
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking condition meet
10
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Current over condition 22 hold
time count (ms)
11
count
_threshold
SWDDS.1.2.2.14 OUT tU16 10000 10000 10000 10000 1 / msec
Over current detection condition
CK hold time 2 (ms)
12 setting_flag SWDDS.1.2.2.14 OUT tU32 8192 8192 0x00002000 0x00002000 N/A Current over 2 fault flag
13
condition
_meet
SWDDS.1.2.2.14 OUT tBool 0 1
Did not
meet
Condition
meet
True /
False
Checking condition meet
14
p_checking
_count
SWDDS.1.2.2.14 IN/OUT tU16* 0 60000 0 60000 10 / msec
Current over condition 3 hold
time count (ms)
15
count
_threshold
SWDDS.1.2.2.14 OUT tU16 10000 10000 10000 10000 1 / msec
Over current detection condition
hold time 3 (ms)
16 setting_flag SWDDS.1.2.2.14 OUT tU32 16384 16384 0x00004000 0x00004000 N/A Current over 3 fault flag
3.2.2.14 [SWDDS.1.2.2.14] CheckDrvStaCondHoldCnt
3.2.2.14.1 Detailed Design
[SWDDS.1.2.2.14] CheckDrvStaCondHoldCnt
Software Unit Information
Unit ID SWDDS.1.2.2.14 Unit Name CheckDrvStaCondHoldCnt
Architecture ID SWADS.1.2.2.14 ASIL QM
Prototype
void CheckDrvStaCondHoldCnt( tBool condition_meet,
tU16* p_checking_count,
tU16 count_threshold,
tU32 setting_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool condition_meet 0 ~ 1 IN Condition meet
tU16* p_checking_count 0 ~ 60000 IN/OUT Pointer of condition Hold checking time count
tU16 count_threshold 0 ~ 60000 IN condition hold checking time count threshold
tU32 setting_flag 256 ~ 8388608 IN setting flag if hold count is reached
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32DrvStaChkFlag 0 ~ 16776960 Read Driving status checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Condition hold count checking

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 125
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.2.8 CheckDrvStaShrtCir
SWDDS.1.2.2.10 CheckDrvStaLowCur
SWDDS.1.2.2.11 CheckDrvStaMtrSpdRng
SWDDS.1.2.2.12 CheckDrvStaSpdErr
SWDDS.1.2.2.13 CheckDrvStaCurOvr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.14
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.2.14.2 Static View Design
3.2.2.14.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 126
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.2.14.4 Interface Design
- N/A
3.2.2.15 [SWDDS.1.2.2.15] CheckDrvStaCondHoldCntWoClr
3.2.2.15.1 Detailed Design
[SWDDS.1.2.2.15] CheckDrvStaCondHoldCntWoClr
Software Unit Information
Unit ID SWDDS.1.2.2.15 Unit Name CheckDrvStaCondHoldCntWoClr
Architecture ID SWADS.1.2.2.15 ASIL QM
Prototype
void CheckDrvStaCondHoldCntWoClr( tBool condition_meet,
tU16* p_checking_count,
tU16 count_threshold,
tU32 setting_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool condition_meet 0 ~ 1 IN Condition meet
tU16* p_checking_count 0 ~ 60000 IN/OUT Pointer of condition Hold checking time count
tU16 count_threshold 0 ~ 60000 IN condition hold checking time count threshold
tU32 setting_flag 256 ~ 8388608 IN setting flag if hold count is reached
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32DrvStaChkFlag 0 ~ 16776960 Read Driving status checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Condition hold count checking without count clearing
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.2.13 CheckDrvStaCurOvr
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.2.2.15
Target Milestone EBS2
Element AswCtr
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 127
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.2.15.2 Static View Design
3.2.2.15.3 Dynamic View Design
- N/A
3.2.2.15.4 Interface Design
- N/A
3.2.3 [SWDDS.1.2.3] EopCtr
3.2.3.1 [SWDDS.1.2.3.1] EopCtr_Init
3.2.3.1.1 Detailed Design
[SWDDS.1.2.3.1] EopCtr_Init
Software Unit Information
Unit ID SWDDS.1.2.3.1 Unit Name EopCtr_Init
Architecture ID SWADS.1.2.3.1 ASIL QM
Prototype void EopCtr_Init( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description EOP speed profile control initialization
Control Flow Diagram
(or Pseudo Code)

1. EopCtr_Init initializes the speed profile generation.
2. EopCtr_Init initializes speed control.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 128
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function SWDDS.1.2.1.1 AswCtr_Init
Calling Function
SWDDS.1.2.3.2 InitializeEopCtrSpdProf
SWDDS.1.2.3.3 InitializeEopCtrSpdCtr
Function Execution Time N/A
Requirement Id SWDDS.1.2.3.1
Target Milestone SBS1
Element AswCtr
Risk Low
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.1.2 Static View Design
3.2.3.1.3 Dynamic View Design
1. EopCtr_Init calls the speed profile generation initialization.
2. EopCtr_Init calls the speed control initialization.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 129
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.1.4 Interface Design
- N/A
3.2.3.2 [SWDDS.1.2.3.2] InitializeEopCtrSpdProf
3.2.3.2.1 Detailed Design
[SWDDS.1.2.3.2] InitializeEopCtrSpdProf
Software Unit Information
Unit ID SWDDS.1.2.3.2 Unit Name InitializeEopCtrSpdProf
Architecture ID SWADS.1.2.3.2 ASIL QM
Prototype void InitializeEopCtrSpdProf( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
tFrac16 g_f16EopCtrSpdProf 0 ~ 19661 Write EOP speed profile (PU)
tBool g_bEopCtrEna 0 ~ 1 Write
EOP control enable (FALSE - disabled, TRUE -
enabled)
tFrac16 g_f16EopCtrCurLmtUpp
-32768 ~
32767
Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow
-32768 ~
32767
Write Speed control current limit lower (PU)
tS16 g_s16EopCtrPrevTgtSpd 0 ~ 3200 Write Previous target speed setting (rpm)
tFrac16 g_f16EopCtrCurFilt
-32768 ~
32767
Write Filtered current (PU)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Write Elapse time count after state entered
GDFLIB_FILTER_MA_T_F16 g_hndEopCtrCurFilt 0 ~ 15 Read/Write Current output filtering handler (u16NSamples)
tU16 g_u16EopCtrSpdChgCondHoldCnt 0 ~ 60000 Write
Speed changing mode entering condition hold
time count (ms)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16EopCtrCurLmtMax 11430 Read Phase current limit at maximum speed (PU)
tU16 par_u16EopCtrCurFiltNoSmpl 5 Read
Number of samples for moving average filtering
of phase current
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Speed profile generation initialization
- Internal variables initialization
1. InitializeEopCtrSpdProf sets the EOP control state and EOP control enable as disabled.
2. InitializeEopCtrSpdProf sets the upper and lower current limits as maximum current limit setting.
3. InitializeEopCtrSpdProf initializes the internal variables related to the speed profile generation.
4. InitializeEopCtrSpdProf initializes the phase current filter.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 130
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.1.2.1.1 EopCtr_Init
Calling Function
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.2
Target Milestone EBS2
Element AswCtr
Risk Low
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 131
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.2.3 Dynamic View Design
3.2.3.2.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Phase
current limit
at maximum
speed (PU)
2 g_f16EopCtrCurLmtLow SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
3 pParam SWDDS.3.6.14.2 IN/OUT
GDFLIB_FILTER
_MA_T_F16 *
N/A N/A N/A N/A N/A
Current
output
filtering
handler
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 132
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.3 [SWDDS.1.2.3.3] InitializeEopCtrSpdCtr
3.2.3.3.1 Detailed Design
[SWDDS.1.2.3.3] InitializeEopCtrSpdCtr
Software Unit Information
Unit ID SWDDS.1.2.3.3 Unit Name InitializeEopCtrSpdCtr
Architecture
ID
SWADS.1.2.3.3 ASIL QM
Prototype void InitializeEopCtrSpdCtr( void )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data Type Possible Return Value Description
void N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
0 ~
10737418
Write
Reference speed
ramping handler
(f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
0 ~
10737418
Write
Reference speed
ramping handler
(f32RampDown)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp.f32State
0 ~
1288490189
Write
Reference speed
ramping handler
(f32State)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtUppRamp 0 ~ 457 Write
Current limit upper
ramping handler
(f16RampUp)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtUppRamp 0 ~ 457 Write
Current limit upper
ramping handler
(f16RampDown)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtUppRamp
-11430 ~
11430
Write
Current limit upper
ramping handler
(f16State)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtLowRamp.f16RampUp 0 ~ 609 Write
Current limit lower
ramping handler
(f16RampUp)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtLowRamp.f16RampDown 0 ~ 609 Write
Current limit lower
ramping handler
(f16RampDown)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtLowRamp.f16State
-11430 ~
11430
Write
Current limit lower
ramping handler
(f16State)
tFrac16 g_f16EopCtrPrevSpdProf 0 ~ 19660 Write
Previous speed
profile setting (PU)
tFrac16 g_f16EopCtrRefSpd 0 ~ 19660 Write
Reference speed
setting (PU)
GDFLIB_FILTER_MA_T_F16 g_hndEopCtrSpdErrFilt 0 ~ 15 Read/Write
Speed control error
filtering handler
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 133
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 g_f16EopCtrSpdErr
-32768 ~
32767
Write
Speed control error
(PU)
Parameters
Data Type Name Range Read/Write Description
tFrac32 par_f32RefSpdIncRate 10737418 Read
Reference speed
increment rate
(PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed
decrement rate
(PU/step, should be
positive)
tFrac16 par_f16EopCtrCurLmtRateUpp 457 Read
Phase current limit
upper
increment/decrement
rate (PU/step)
tFrac16 par_f16EopCtrCurLmtMax 11430 Read
Phase current limit at
maximum speed
(PU)
tU16 par_u16EopCtrSpdErrFiltNoSmpl 5 Read
Number of samples
for moving average
filtering of Speed
control error
Frac16 par_f16EopCtrCurLmtRateLow 609 Read
Phase current limit
lower
increment/decrement
rate (PU/step)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Speed control initialization
- Reference speed ramping handler initialization
- Current limit ramping handler initialization
- Internal variables initialization
- InitializeEopCtrSpdCtr initializes the speed control error filter.
Control
Flow
Diagram(or
Pseudo
Code)
1. InitializeEopCtrSpdCtr sets the increment and decrement rates of the reference speed.
2. InitializeEopCtrSpdCtr sets the increment and decrement rates of the upper and lower current limits.
3. InitializeEopCtrSpdCtr sets the initial upper and lower current limits.
4. InitializeEopCtrSpdCtr initializes the internal variables related to the speed control.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 134
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram(or
Pseudo
Code)
Called
Function
SWDDS.1.2.1.1 EopCtr_Init
Calling
Function 
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.2 GDFLIB_FilterMAInit_F16
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.3.3
Target Milestone SBS2.1
Element AswCtr
Risk Low
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.3.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 135
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.3.3 Dynamic View Design
3.2.3.3.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16
FRAC16
( 22.5f /
PARAM_PU
_BASE_PHS
_CUR )
FRAC16
( 22.5f /
PARAM_PU
_BASE_PHS
_CUR )
22.5 22.5
0.00196838
/ Apk
Phase
current limit
at maximum
speed (PU)
2
g_hndEopCtr
CurLmtLowRamp SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 136
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
.f16State
upper (PU)
3 pParam SWDDS.3.6.14.6 IN/OUT GDFLIB_FILTER_MA_T_F16 N/A N/A N/A N/A N/A
Pointer of
filtering
handler
3.2.3.4 [SWDDS.1.2.3.4] EopCtr_Run
3.2.3.4.1 Detailed Design
[SWDDS.1.2.3.4] EopCtr_Run
Software Unit Information
Unit ID SWDDS.1.2.3.4 Unit Name EopCtr_Run
Architecture ID SWADS.1.2.3.4 ASIL QM
Prototype void EopCtr_Run( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Read/Write
Elapse time count after state
entered
tBool g_bEopCtrEna 0 ~ 1 Read/Write EOP control enable
tEopState g_eEopCtrState 0 ~ 4 Read EOP control state
tFrac16 g_f16EopCtrRefSpd 0 ~ 19660 Read/Write Reference speed setting (PU)
tFrac16 g_f16EopCtrSpdErr -32768 ~ 32767 Write Speed control error (PU)
GDFLIB_FILTER_MA_T_F16 g_hndEopCtrSpdErrFilt 0 ~ 15 Read/Write
Speed control error filtering
handler
tS16 g_s16EopCtrPrevTgtSpd 0 ~ 3200 Write
Previous target speed setting
(rpm)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control
- Input data getting
- Elapse time counting
- Control enabling checking
- EOP control state handling
- Reference speed calculation and speed control anti-windup
- Data updating
- The speed control error filter
1. EopCtr_Run gets the target speed input.
2. EopCtr_Run increases the elapse time count of EOP control state.
3. EopCtr_Run checks the EOP control enable according to the target speed, functional mode and application mode.
4. EopCtr_Run handles action and state transition according to the EOP control states.
5. EopCtr_Run calculates the reference speed.
6. EopCtr_Run sets the upper and lower current limits.
7. EopCtr_Run handles the anti-windup logic.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 137
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
8. EopCtr_Run updates the application data related to EOP control.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 138
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.2.1.8 RteSch_Task5ms
Calling Function
SWDDS.2.2.2 RteApp_ReadTgtSpd
SWDDS.1.2.3.13 CheckEopCtrEnaMode
SWDDS.1.2.3.9 ActEopCtrStateMaxSpd
SWDDS.1.2.3.10 ActEopCtrStateSpdChg
SWDDS.1.2.3.11 ActEopCtrStateCurFilt
SWDDS.1.2.3.12 ActEopCtrStateCurLmt
SWDDS.1.2.3.18 CalculateEopCtrRefSpd
SWDDS.2.2.10 RteApp_ReadCtrState
SWDDS.1.2.3.17 SetEopCtrSpdCtrCurLmt
SWDDS.2.2.6 RteApp_ReadSpdOut
SWDDS.1.2.3.16 CheckEopCtrAntiWindUp
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.2.2.35 RteApp_WriteRefSpd
SWDDS.2.2.31 RteApp_WriteCtrEna
SWDDS.2.2.29 RteApp_WriteEopState
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
SWDDS.2.2.59 RteApp_WriteSpdErr
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.3.4
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
3.2.3.4.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 139
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.4.3 Dynamic View Design
1. EopCtr_Run gets the target speed from RteApp.
2. EopCtr_Run calls CheckEopCtrEnaMode to check the EOP control enable according to the target speed, functional mode and
application mode.
3. EopCtr_Run handles action and state transition according to the EOP control states by calling ActEopCtrStateMaxSpd,
ActEopCtrStateSpdChg, ActEopCtrStateCurFilt and ActEopCtrStateCurLmt.
4. EopCtr_Run calls CalculateEopCtrRefSpd to calculate the reference speed.
5. EopCtr_Run calls SetEopCtrSpdCtrCurLmt to set the upper and lower current limits.
6. EopCtr_Run calls CheckEopCtrAntiWindUp to handle the anti-windup logic.
7. EopCtr_Run updates the data related to EOP control to RteApp.
3.2.3.4.4 Interface Design
No Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.2.2.2 IN tS16 0 3200 0 3200 1 / rpm
Target speed
setting (rpm)
2 target_rpm SWDDS.1.2.3.13 OUT tS16 0 3200 0 3200 1 / rpm
Target speed
setting (rpm)
3 g_bEopCtrEna SWDDS.1.2.3.13 IN tBool 0 1
Control
disable
Control
enable
True / False
EOP control
enable
4 target_rpm SWDDS.1.2.3.9 OUT tS16 0 3200 0 3200 1 / rpm
Target speed
setting (rpm)
Target speed
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 140
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
5 target_rpm SWDDS.1.2.3.10 OUT tS16 0 3200 0 3200 1 / rpm
setting (rpm)
6 target_rpm SWDDS.1.2.3.11 OUT tS16 0 3200 0 3200 1 / rpm
Target speed
setting (rpm)
7 target_rpm SWDDS.1.2.3.12 OUT tS16 0 3200 0 3200 1 / rpm
Target speed
setting (rpm)
8 control_state SWDDS.1.2.3.18 OUT tCtrState 0 4
CTR_STATE
_SWTC_OFF
CTR_STATE
_SL_RUN
N/A Control state
9 control_enable SWDDS.1.2.3.18 OUT tBool 0 1
Control
disable
Control
enable
True / False
EOP control
enable
10 g_f16EopCtrRefSpd SWDDS.1.2.3.18 IN tFrac16 0 32767 0.0 5999.82
0.183105 /
rpm
Reference
speed setting
(PU)
11 g_eRteAppCtrState SWDDS.2.2.10 IN tCtrState 0 4
CTR_STATE
_SWTC_OFF
CTR_STATE
_SL_RUN
N/A Control state
12 speed_output SWDDS.2.2.6 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed output
(PU)
13 speed_output SWDDS.1.2.3.16 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
speed output
feedback (PU)
14 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 17476 0.0 3200.0
0.183105 /
rpm
Reference
speed (PU)
15 f16In2 SWDDS.3.6.14.34 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed output
(PU)
16 speed_error SWDDS.3.6.14.34 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed control
error(PU)
17 reference_speed SWDDS.2.2.35 OUT tFrac16 0 32767 0.0 5999.82
0.183105 /
rpm
Reference
speed setting
(PU)
18 control_enable SWDDS.2.2.31 OUT tBool 0 1
Control
disable
Control
enable
True / False
EOP control
enable
19 eop_state SWDDS.2.2.29 OUT tEopState 0 4
EOP_STATE
_DISABLED
EOP_STATE
_CUR_LMT
N/A
EOP control
state
20 speed_error SWDDS.2.2.59 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed control
error(PU)
21 f16In SWDDS.3.6.14.9 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105/
rpm
Speed control
error(PU)
22 pParam SWDDS.3.6.14.9 IN/OUT GDFLIB_FILTER_MA_T_16 N/A N/A N/A N/A N/A
Pointer of
filtering
handler
23 g_f16EopCtrSpdErr SWDDS.3.6.14.9 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105/
rpm
Speed control
error(PU)
3.2.3.5 [SWDDS.1.2.3.5] ConvertEopCtrSpdUnitToPu
3.2.3.5.1 Detailed Design
[SWDDS.1.2.3.5] ConvertEopCtrSpdUnitToPu
Software Unit Information
Unit ID SWDDS.1.2.3.5 Unit Name ConvertEopCtrSpdUnitToPu
Architecture
ID
SWADS.1.2.3.5 ASIL QM
Prototype tFrac16 ConvertEopCtrSpdUnitToPu( tS16 speed_rpm )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
tS16 speed_rpm -6000 ~ 6000 IN speed input (rpm)
Function
Call
Data Type Possible Return Value Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 141
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return
Value
tFrac16 -32768 ~ 32767 Speed output in PU
Global
Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed unit conversion from rpm to PU
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.2.3.8 CheckEopCtrTgtSpdChg
SWDDS.1.2.3.9 ActEopCtrStateMaxSpd
SWDDS.1.2.3.10 ActEopCtrStateSpdChg
SWDDS.1.2.3.14 CheckEopCtrEnaEdge
Calling
Function
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.3.5
Target Milestone SBS1
Element AswCtr
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.3.5.2 Static View Design
3.2.3.5.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 142
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.5.4 Interface Design
- N/A
3.2.3.6 [SWDDS.1.2.3.6] ConvertEopCtrSpdUnitToRpm
3.2.3.6.1 Detailed Design
[SWDDS.1.2.3.6] ConvertEopCtrSpdUnitToRpm
Software Unit Information
Unit ID SWDDS.1.2.3.6 Unit Name ConvertEopCtrSpdUnitToRpm
Architecture
ID
SWADS.1.2.3.6 ASIL QM
Prototype tS16 ConvertEopCtrSpdUnitToRpm( tFrac16 speed_pu )
Function
Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 speed_pu -32768 ~ 32767 IN speed input (PU)
Function
Call
Return
Value
Data Type Possible Return Value Description
tS16 -6000 ~ 6000 Speed output in PU
Global
Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Speed unit conversion from PU to rpm
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.2.3.15 CheckEopCtrEnaAppMode
Calling
Function
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.3.6
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 143
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.6.2 Static View Design
3.2.3.6.3 Dynamic View Design
- N/A
3.2.3.6.4 Interface Design
- N/A
3.2.3.7 [SWDDS.1.2.3.7] CheckEopCtrEopStop
3.2.3.7.1 Detailed Design
[SWDDS.1.2.3.7] CheckEopCtrEopStop
Software Unit Information
Unit ID SWDDS.1.2.3.7 Unit Name CheckEopCtrEopStop
Architecture ID SWADS.1.2.3.7 ASIL QM
Prototype tBool CheckEopCtrEopStop( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 FALSE - stop condition not occurred, TRUE - stop condition occurred
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Write EOP speed profile (PU)
tFrac16 g_f16EopCtrCurLmtUpp
-32768 ~
32767
Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow
-32768 ~
32767
Write Speed control current limit lower (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampDown)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Write Elapse time count after state entered
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
Parameters
Data Type Name Range Read/Write Description
tS16 par_s16RefSpdOffThrs 500 Read Control disabling(off) target speed threshold (rpm)
tFrac16 par_f16EopCtrCurLmtNorm 11430 Read Phase current limit at normal speed (PU)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step, should be
positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control stop condition checking
- Target speed range checking
- Speed profile setting for stop and speed changing state transition
1. CheckEopCtrStop checks if the target speed is lower than the off threshold speed.
2. CheckEopCtrStop sets the EOP control state as speed changing state and sets the related variables for stopping if the stop condition meets.
2-1. CheckEopCtrStop sets the speed profile as 0.
2-2. CheckEopCtrStop sets the upper and lower current limit as normal value.
2-3. CheckEopCtrStop sets the reference speed increment and decrement rates as normal.
3. CheckEopCtrStop returns the result of the stop condition checking.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 144
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function
SWDDS.1.2.3.9 ActEopCtrStateMaxSpd
SWDDS.1.2.3.10 ActEopCtrStateSpdChg
SWDDS.1.2.3.11 ActEopCtrStateCurFilt
SWDDS.1.2.3.12 ActEopCtrStateCurLmt
Calling Function SWDDS.3.6.14.38 MLIB_Neg_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.7
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.7.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 145
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.7.3 Dynamic View Design
3.2.3.7.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Phase
current limit
at normal
speed (PU)
2 g_f16EopCtrCurLmtLow SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
3.2.3.8 [SWDDS.1.2.3.8] CheckEopCtrTgtSpdChg
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 146
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.8.1 Detailed Design
[SWDDS.1.2.3.8] CheckEopCtrTgtSpdChg
Software Unit Information
Unit ID SWDDS.1.2.3.8 Unit Name CheckEopCtrTgtSpdChg
Architecture ID SWADS.1.2.3.8 ASIL QM
Prototype tBool CheckEopCtrEopStop( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 FALSE - target speed not changed, TRUE - target speed changed
Global Variables
Data Type Name Range Read/Write Description
tS16 g_s16EopCtrPrevTgtSpd 0 ~ 3200 Read Previous target speed setting (rpm)
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Write EOP speed profile (PU)
tFrac16 g_f16EopCtrCurLmtUpp 0 ~11430 Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~ 0 Write Speed control current limit lower (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampDown)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Write Elapse time count after state entered
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
Parameters
Data Type Name Range Read/Write Description
tS16 par_s16EopCtrSpdChgDiffThrs 5 Read
Speed changing mode entering speed difference
threshold (rpm)
tFrac16 par_f16EopCtrCurLmtNorm 11430 Read Phase current limit at normal speed (PU)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step, should be
positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control target speed changed checking
- Amount of target speed change calculation
- Target speed change range checking
- Speed changing state transition
Control Flow
Diagram
(or Pseudo Code)
1. CheckEopCtrTgtSpdChg calculates the target speed change.
2. CheckEopCtrTgtSpdChg checks if the absolute value of the target speed change is greater than the speed change difference threshold.
3. CheckEopCtrTgtSpdChg sets the EOP control state as speed changing state and sets the related variables for speed changing if the target speed
changing condition meets.
3-1. CheckEopCtrTgtSpdChg sets the speed profile as the target speed.
3-2. CheckEopCtrTgtSpdChg sets the upper and lower current limit as normal value.
3-3. CheckEopCtrTgtSpdChg sets the reference speed increment and decrement rates as normal.
4. CheckEopCtrTgtSpdChg returns the result of the target speed changing condition checking.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 147
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.3.10 ActEopCtrStateSpdChg
SWDDS.1.2.3.11 ActEopCtrStateCurFilt
SWDDS.1.2.3.12 ActEopCtrStateCurLmt
Calling Function
SWDDS.1.2.3.5 ConvertEopCtrSpdUnitToPu
SWDDS.3.6.14.38 MLIB_Neg_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.3.8
Target Milestone SBS1
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.8.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 148
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.8.3 Dynamic View Design
1. CheckEopCtrTgtSpdChg calls the target speed unit conversion.
2. CheckEopCtrTgtSpdChg calls the fixed-point negative function.
3.2.3.8.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 speed_rpm SWDDS.1.2.3.5 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
2 g_f16EopCtrSpdProf SWDDS.1.2.3.5 IN tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
EOP speed
profile (PU)
3 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at normal
speed (PU)
4 g_f16EopCtrCurLmtLow SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 149
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.9 [SWDDS.1.2.3.9] ActEopCtrStateMaxSpd
3.2.3.9.1 Detailed Design
[SWDDS.1.2.3.9] ActEopCtrStateMaxSpd
Software Unit Information
Unit ID SWDDS.1.2.3.9 Unit Name ActEopCtrStateMaxSpd
Architecture ID SWADS.1.2.3.9 ASIL QM
Prototype void ActEopCtrStateMaxSpd( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Read/Write Elapse time count after state entered
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Write EOP speed profile (PU)
tFrac16 g_f16EopCtrCurLmtUpp 0 ~11430 Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~ 0 Write Speed control current limit lower (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
0 ~
10737418
Write Reference speed ramping handler (f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
0 ~
10737418
Write Reference speed ramping handler (f32RampDown)
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16EopCtrMaxSpdTim 1000 Read Maximum speed holding time duration (ms)
tFrac16 par_f16EopCtrCurLmtNorm 11430 Read Phase current limit at normal speed (PU)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step, should be
positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control maximum speed holding state reaction
- Stop condition checking
- Current control state checking
- Speed changing state transition condition checking
Control Flow Diagram
(or Pseudo Code)
1. ActEopCtrStateMaxSpd checks if the stopping condition does not meet.
2. ActEopCtrStateMaxSpd sets the elapse time count as 0 when Sensorless FOC state is not sensorless running.
3. ActEopCtrStateMaxSpd checks if the elapse time count reaches the maximum speed acceleration ending time.
4. ActEopCtrStateMaxSpd sets the EOP control state as speed changing state and sets related variables.
4-1. ActEopCtrStateMaxSpd sets the speed profile as the target speed.
4-2. ActEopCtrStateMaxSpd sets the upper and lower current limit as normal value.
4-3. ActEopCtrStateMaxSpd sets the reference speed increment and decrement rates as normal.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 150
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.1.2.3.7 CheckEopCtrEopStop
SWDDS.2.2.10 RteApp_ReadCtrState
SWDDS.1.2.3.5 ConvertEopCtrSpdUnitToPu
SWDDS.3.6.14.38 MLIB_Neg_F16
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.9
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 151
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.9.2 Static View Design
3.2.3.9.3 Dynamic View Design
1. ActEopCtrStateMaxSpd calls the stop condition checking.
2. ActEopCtrStateMaxSpd calls the sensorless FOC control state.
3. ActEopCtrStateMaxSpd calls the target speed unit conversion.
4. ActEopCtrStateMaxSpd calls the fixed-point negative function.
3.2.3.9.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.1.2.3.7 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
2 checking_status SWDDS.1.2.3.7 IN tBool 0 1
Not stop
condition
Stop
condition
True /
False
Stop
condition
checking
status
3 control_state SWDDS.2.2.10 IN tCtrState 0 4
CTR
_STATE
_SWTC_OFF
CTR
_STATE
_SL_RUN
N/A
Current
control state
4 speed_rpm SWDDS.1.2.3.5 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 152
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
5
g_f16EopCtr
SpdProf
SWDDS.1.2.3.5 IN tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
EOP speed
profile (PU)
6 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at normal
speed (PU)
7
g_f16EopCtr
CurLmtLow
SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
3.2.3.10 [SWDDS.1.2.3.10] ActEopCtrStateSpdChg
3.2.3.10.1 Detailed Design
[SWDDS.1.2.3.10] ActEopCtrStateSpdChg
Software Unit Information
Unit ID SWDDS.1.2.3.10 Unit Name ActEopCtrStateSpdChg
Architecture ID SWADS.1.2.3.10 ASIL QM
Prototype void ActEopCtrStateSpdChg( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrRefSpd 0 ~ 19660 Read Reference speed setting (PU)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Read/Write Elapse time count after state entered
tFrac16 g_f16EopCtrCurFilt -32768 ~ 32767 Read/Write Filtered current (PU)
GDFLIB_FILTER_MA_T_F16 g_hndEopCtrCurFilt
-2147483648 ~
2147483647
Read/Write Current output filtering handler (f32Acc)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write
Reference speed ramping handler
(f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write
Reference speed ramping handler
(f32RampDown)
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16EopCtrSpdConvgTim 250 Read Speed convergence time duration (ms)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step,
should be positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control speed changing state reaction
- Stop and speed changing condition checking
- Reference speed convergence checking
- Current filtering state transition
1. ActEopCtrStateSpdChg checks if the stopping condition and speed changing condition do not meet.
2. ActEopCtrStateSpdChg calculates the target speed and the reference speed difference.
3. ActEopCtrStateSpdChg checks if the speed difference is very small (target speed reached).
4. ActEopCtrStateSpdChg waits for the convergence time.
5. ActEopCtrStateSpdChg sets the EOP control state as current filtering state and sets related variables.
5-1. ActEopCtrStateSpdChg substitutes the current filter output as current output.
5-2. ActEopCtrStateSpdChg sets the reference speed increment and decrement rate as normal value.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 153
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.1.2.3.7 CheckEopCtrEopStop
SWDDS.1.2.3.8 CheckEopCtrTgtSpdChg
SWDDS.3.6.14.34 MLIB_SubSat_F16
SWDDS.1.2.3.5 ConvertEopCtrSpdUnitToPu
SWDDS.3.6.14.39 MLIB_Abs_F16
SWDDS.2.2.14 RteApp_ReadCurOut
SWADS.3.6.14.10 GDFLIB_FilterMASetState_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.3.10
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 154
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.10.2 Static View Design
3.2.3.10.3 Dynamic View Design
1. ActEopCtrStateSpdChg calls checkEopCtrEopStop to check if the stopping condition meet.
2. ActEopCtrStateSpdChg calls checkEopCtrTgtSpdChg to check if the target speed changed.
3. ActEopCtrStateSpdChg calls RteApp_ReadCurOut to get q-axis current output.
4. ActEopCtrStateSpdChg call fixed arithmetic functions and filtering function in AMMCLIB.
3.2.3.10.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.1.2.3.7 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
2
checking
_status
SWDDS.1.2.3.7 IN tBool 0 1
Not stop
condition
Stop
condition
True /
False
Stop
condition
checking
status
3 target_rpm SWDDS.1.2.3.8 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
4
checking
_status
SWDDS.1.2.3.8 IN tBool 0 1
Target
speed
not
changed
Target
speed
changed
True /
False
Target
speed
changing
checking
status
5 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 17476 0.0 3200.0
0.183105 /
rpm
Target
speed (PU)
6 f16In2 SWDDS.3.6.14.34 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
Reference
speed (PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 155
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
7
reference
_difference
SWDDS.3.6.14.34 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Reference
speed
difference
(PU)
8 f16In1 SWDDS.3.6.14.39 OUT tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Reference
speed
difference
(PU)
9
reference
_difference
SWDDS.3.6.14.39 IN tFrac16 0 32767 0.0 5999.82
0.183105 /
rpm
Absoulte
reference
speed
difference
(PU)
10
g_f16EopCtr
CurFilt
SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Filtered
current (PU)
11 f16FilterMAOut SWDDS.3.6.14.10 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Filtered
current (PU)
12 pParam SWDDS.3.6.14.10 IN/OUT
GDFLIB_FILTER
_MA_T_F16*
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
13 speed_rpm SWDDS.1.2.3.5 OUT tS16 0 3200 0 3200 1 / rpm
Target
speed input
(rpm)
14 expanded_speed SWDDS.1.2.3.5 IN tFrac32 0 17476 0 3200 1 / rpm
Unit
converted
target
speed (PU)
3.2.3.11 [SWDDS.1.2.3.11] ActEopCtrStateCurFilt
3.2.3.11.1 Detailed Design
[SWDDS.1.2.3.11] ActEopCtrStateCurFilt
Software Unit Information
Unit ID SWDDS.1.2.3.11 Unit Name ActEopCtrStateCurFilt
Architecture ID SWADS.1.2.3.11 ASIL QM
Prototype void ActEopCtrStateCurFilt( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Read/Write Elapse time count after state entered
tFrac16 g_f16EopCtrCurFilt -32768 ~ 32767 Read/Write Filtered current (PU)
tFrac16 g_f16EopCtrCurLmtUpp -11430 ~11430 Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~11430 Write Speed control current limit lower (PU)
tU16 g_u16EopCtrSpdChgCondHoldCnt 0 ~ 60000 Write
Speed changing mode entering condition
hold time count (ms)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write
Reference speed ramping handler
(f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write
Reference speed ramping handler
(f32RampDown)
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
GDFLIB_FILTER_MA_T_F16 g_hndEopCtrCurFilt
-2147483648 ~
2147483647
Read/Write Current output filtering handler (f32Acc)
Parameters
Data Type Name Range Read/Write Description
tU16 par_u16EopCtrCurFiltTim 100 Read Phase current filtering time duration (ms)
tBool par_bEopCtrCurLmtEna 0 Read Current limiting enable
tFrac16 par_f16EopCtrCurLmtUpp 508 Read
Phase current limit upper increment width
(PU)
tFrac16 par_f16EopCtrCurLmtNorm 11430 Read Phase current limit at normal speed (PU)
tFrac16 par_f16EopCtrCurLmtLow 508 Read
Phase current limit lower decrement width
(PU)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 156
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step,
should be positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control current averaging state reaction
- Stop and speed changing condition checking
- Current filtering end checking
- Current limiting state transition
Control Flow
Diagram
(or Pseudo Code)
1. ActEopCtrStateCurFilt checks if the stopping condition and speed changing condition do not meet.
2. ActEopCtrStateCurFilt filters the q-axis current output for the current filter time.
3. ActEopCtrStateCurFilt limits the upper and lower current limits within the normal current range.
4. ActEopCtrStateCurFilt sets upper and lower current limits if the current limiting is enabled.

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.1.2.3.7 CheckEopCtrEopStop
SWDDS.1.2.3.8 CheckEopCtrTgtSpdChg
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.2.2.14 RteApp_ReadCurOut
SWDDS.3.6.14.9 GDFLIB_FilterMA_F16
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.3.11
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 157
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity High
Verifiability Yes
3.2.3.11.2 Static View Design
3.2.3.11.3 Dynamic View Design
1. ActEopCtrStateCurFilt calls checkEopCtrEopStop to check if the stopping condition meet.
2. ActEopCtrStateCurFilt calls checkEopCtrTgtSpdChg to check if the target speed changed.
3. ActEopCtrStateCurFilt calls RteApp_ReadCurOut to get q-axis current output.
4. ActEopCtrStateCurFilt call fixed arithmetic function(MLIB_Neg_F16) and filtering function(GDFLIB_FilterMA_F16) in AMMCLIB.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 158
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.11.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.1.2.3.7 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
2 checking_status SWDDS.1.2.3.7 IN tBool 0 1
Not stop
condition
Stop
condition
True /
False
Stop
condition
checking
status
3 target_rpm SWDDS.1.2.3.8 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
4 checking_status SWDDS.1.2.3.8 IN tBool 0 1
Target
speed
not
changed
Target
speed
changed
True /
False
Target
speed
changing
checking
status
5 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at normal
speed (PU)
6 current_limit SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
upper (PU)
7 f16In SWDDS.3.6.14.9 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at normal
speed (PU)
8 pParam SWDDS.3.6.14.9 IN/OUT
GDFLIB_FILTER_
IIR1_T_F16
*const
N/A N/A N/A N/A N/A
Pointer of
filtering
handler
9 g_f16EopCtrCurFilt SWDDS.3.6.14.9 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Filtered
current (PU)
10 f16Out SWDDS.3.6.14.38 IN tFrac16 -32768 0 -64.5 0
0.00196834
/ Apk
Negative
current limit
(PU)
11 g_f16RteAppCurOut SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.498
0.00196838
/ Apk
Current
output (PU)
3.2.3.12 [SWDDS.1.2.3.12] ActEopCtrStateCurLmt
3.2.3.12.1 Detailed Design
[SWDDS.1.2.3.12] ActEopCtrStateCurLmt
Software Unit Information
Unit ID SWDDS.1.2.3.12 Unit Name ActEopCtrStateCurLmt
Architecture ID SWADS.1.2.3.12 ASIL QM
Prototype void ActEopCtrStateCurLmt( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrSpdErr -32768 ~ 32767 Read Speed control error (PU)
tU16 g_u16EopCtrSpdChgCondHoldCnt 0 ~ 60000 Read/Write
Speed changing mode entering condition hold time
count (ms)
tFrac16 g_f16EopCtrCurLmtUpp 0 ~11430 Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~ 0 Write Speed control current limit lower (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 715826 Write Reference speed ramping handler (f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 715826 Write Reference speed ramping handler (f32RampDown)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
-2147483648 ~
2147483647
Write Reference speed ramping handler (f32State)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Write Elapse time count after state entered
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
Data Type Name Range Read/Write Description
tBool par_bEopCtrCurLmtEna 0 Read Current limiting enable
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 159
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
tFrac16 par_f16EopCtrSpdChgErrUppThrs 2730 Read
Speed changing mode entering speed error upper
threshold (PU)
tFrac16 par_f16EopCtrSpdChgErrLowThrs -2730 Read
Speed changing mode entering speed error lower
threshold (PU, should be negative)
tS16 par_s16EopCtrSpdChgSpdUppThrs 3400 Read
Speed changing mode entering speed upper
threshold (rpm)
tS16 par_s16EopCtrSpdChgSpdLowThrs 500 Read
Speed changing mode entering speed upper
threshold (rpm)
tU16 par_u16EopCtrSpdChgTim 500 Read Speed changing mode entering time duration (ms)
tFrac16 par_f16EopCtrCurLmtNorm 11430 Read Phase current limit at normal speed (PU)
tFrac32 par_f32RefSpdIncRateAprch 357913 Read
Reference speed increment rate at approaching
(PU/step)
tFrac32 par_f32RefSpdDecRateAprch 357913 Read
Reference speed decrement rate at approaching
(PU/step, should be positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
EOP control current limiting state reaction
- Stop and speed changing condition checking
- Speed error checking
- Speed changing state transition
Control Flow
Diagram
(or Pseudo
Code)
1. ActEopCtrStateCurLmt checks if the stopping condition and speed changing condition do not meet.
2. ActEopCtrStateCurLmt checks if the current limiting parameter is enabled.
3. ActEopCtrStateCurLmt gets the speed control error and speed output.
4. ActEopCtrStateCurLmt checks if the absolute values of the speed control error or speed output is over the specific threshold for given hold time.
5. ActEopCtrStateCurLmt sets the EOP control state as speed changing state and sets related variables.
5-1. ActEopCtrStateCurLmt sets the current limits as normal value.
5-2. ActEopCtrStateCurLmt sets the reference speed increment and decrement rate as approaching value.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 160
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.1.2.3.7 CheckEopCtrEopStop
SWDDS.1.2.3.8 CheckEopCtrTgtSpdChg
SWDDS.2.2.6 RteApp_ReadSpdOut
SWDDS.2.2.8 RteApp_ReadSpdFilt
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.3.6.14.13 MLIB_ShL_F32
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.3.12
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 161
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality High
Technical complexity High
Verifiability Yes
3.2.3.12.2 Static View Design
3.2.3.12.3 Dynamic View Design
1. ActEopCtrStateCurLmt calls the stop condition checking.
2. ActEopCtrStateCurLmt calls the target speed changing checking.
3. ActEopCtrStateCurLmt calls the motor speed output.
4. ActEopCtrStateCurLmt calls the filtered speed.
5. ActEopCtrStateCurLmt calls the fixed-point negative and bit shift function.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 162
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.12.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 target_rpm SWDDS.1.2.3.7 OUT tS16 0 3200 0 3200 1 / rpm
target
speed (rpm)
2 checking_status SWDDS.1.2.3.7 IN tBool 0 1
Not stop
condition
Stop
condition
True /
False
Stop
condition
checking
status
3 target_rpm SWDDS.1.2.3.8 OUT tS16 0 17476 0.0 3200.0
0.183105 /
rpm
target
speed (rpm)
4 checking_status SWDDS.1.2.3.8 IN tBool 0 1
Target
speed
not
changed
Target
speed
changed
True /
False
Target
speed
changing
checking
status
5 speed_output SWDDS.2.2.6 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed
output (PU)
6 speed_rpm SWDDS.2.2.8 IN tS16 -6000 6000 -6000 6000 1 / rpm
Filtered
speed (rpm)
7 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at normal
speed (PU)
8
g_f16EopCtr
CurLmtLow
SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
9 f32In1 SWDDS.3.6.14.13 OUT tFrac32 -2147483648 2147483647 -6000.0 5999.82
0.183105 /
rpm
Speed
output (PU)
10 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A Bit shift
11
g_hndEopCtr
RefSpdRamp
.f32State
SWDDS.3.6.14.13 IN tFrac32 -2147483648 2147483647 -6000.0 5999.82
0.183105 /
rpm
Current
speed ramp
state (PU)
3.2.3.13 [SWDDS.1.2.3.13] CheckEopCtrEnaMode
3.2.3.13.1 Detailed Design
[SWDDS.1.2.3.13] CheckEopCtrEnaMode
Software Unit Information
Unit ID SWDDS.1.2.3.13 Unit Name CheckEopCtrEnaMode
Architecture ID SWADS.1.2.3.13 ASIL QM
Prototype tBool CheckEopCtrEnaMode( tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 FALSE - control disable, TRUE - control enable
Global Variables
Data Type Name Range Read/Write Description
tBool g_bEopCtrEna 0 ~ 1 Read EOP control enable (FALSE - disabled, TRUE - enabled)
tFrac16 g_f16EopCtrRefSpd 0 ~ 19660 Read Reference speed setting (PU)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Control enable checking with respect to functional mode
- Data getting
- Control enable setting with respect to functional and application modes
- Control enabling edge checking
1. CheckEopCtrEnaMode sets the control enabling as disable if the functional mode is none or partial.
2. CheckEopCtrEnaMode sets the control enabling according to the checking result of the application mode.
3. CheckEopCtrEnaMode checks the control enabling edge.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 163
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)
Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.2.2.47 RteApp_ReadFuncMode
SWDDS.1.2.3.15 CheckEopCtrEnaAppMode
SWDDS.1.2.3.14 CheckEopCtrEnaEdge
Function Execution Time N/A
Requirement Id SWDDS.1.2.3.13
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.13.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 164
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.13.3 Dynamic View Design
1. CheckEopCtrEnaMode calls the functional mode setting.
2. CheckEopCtrEnaMode calls the control enabling checking according to the application mode.
3. CheckEopCtrEnaMode calls the control enabling edge checking.
3.2.3.13.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
g_eRteApp
FuncMode
SWDDS.2.2.47 IN tFuncMode 0 2
FUNC
_MODE
_NONE
FUNC
_MODE
_FULL
N/A
Functional
mode
2
previous
_enable
SWDDS.1.2.3.15 OUT tBool 0 1
Control
disable
Control
enable
True /
False
Previous
control
enabled
status
3 target_rpm SWDDS.1.2.3.15 OUT tS16 0 17476 0.0 3200.0
0.183105
/ rpm
target
speed
(rpm)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 165
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
4
reference
_speed
SWDDS.1.2.3.15 OUT tFrac16 0 17476 0.0 3200.0
0.183105
/ rpm
Reference
speed
setting
(PU)
5
control
_enable
SWDDS.1.2.3.15 IN tBool 0 1
Control
disable
Control
enable
True /
False
Checked
control
enabling
status
6
control
_enable
SWDDS.1.2.3.14 OUT tBool 0 1
Control
disable
Control
enable
True /
False
Checked
control
enabling
status
7
previous
_enable
SWDDS.1.2.3.14 OUT tBool 0 1
Control
disable
Control
enable
True /
False
Previous
control
enabled
status
8 target_rpm SWDDS.1.2.3.14 OUT tS16 0 3200 0 3200 1 / rpm
target
speed
(rpm)
3.2.3.14 [SWDDS.1.2.3.14] CheckEopCtrEnaEdge
3.2.3.14.1 Detailed Design
[SWDDS.1.2.3.14] CheckEopCtrEnaEdge
Software Unit Information
Unit ID SWDDS.1.2.3.14 Unit Name CheckEopCtrEnaEdge
Architecture ID SWADS.1.2.3.14 ASIL QM
Prototype void CheckEopCtrEnaEdge( tBool control_enable, tBool previous_enable, tS16 target_rpm )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool control_enable 0 ~ 1 IN current control enable status
tBool previous_enable 0 ~ 1 IN previous control enabled status
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrCurLmtUpp 0 ~ 11430 Write Speed control current limit upper (PU)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~ 0 Write Speed control current limit lower (PU)
tFrac16 g_f16EopCtrSpdErr
-32768 ~
32767
Write Speed control error (PU)
tEopState g_eEopCtrState 0 ~ 4 Write EOP control state
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Write EOP speed profile (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampUp)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp 0 ~ 10737418 Write Reference speed ramping handler (f32RampDown)
tU16 g_u16EopCtrStateElapCnt 0 ~ 60000 Write Elapse time count after state entered
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16EopCtrCurLmtMax 11430 Read Phase current limit at maximum speed (PU)
tBool par_bEopCtrMaxSpdEna 0 Read Initial maximum speed acceleration enable
tFrac16 par_f16EopCtrInitMaxSpd 19660 Read EOP control maximum speed (rpm)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step, should be
positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Control enabling edge checking
- Control disabling edge checking
- Control enabling edge checking
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 166
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
- Maximum speed accelerating disabled condition handling
Control Flow Diagram
(or Pseudo Code)
1. CheckEopCtrEnaEdge checks the control disabling edge.
2. CheckEopCtrEnaEdge sets the EOP control state as disabled.
3. CheckEopCtrEnaEdge checks the control enabling edge.
3-1. CheckEopCtrEnaEdge set the EOP control state as maximum speed accelerating state.
3-2. CheckEopCtrEnaEdge sets the current limits as the maximum value.
3-3. CheckEopCtrEnaEdge sets the reference speed increment and decrement rate as normal value.

Called Function SWDDS.1.2.3.13 CheckEopCtrEnaMode
Calling Function
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.1.2.3.5 ConvertEopCtrSpdUnitToPu
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.14
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 167
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.14.2 Static View Design
3.2.3.14.3 Dynamic View Design
1. CheckEopCtrEnaEdge calls the fixed-point negative function.
2. CheckEopCtrEnaEdge calls target speed unit conversion function.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 168
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.14.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In1 SWDDS.3.6.14.38 OUT tFrac16 11430 11430 22.5 22.5
0.00196838
/ Apk
Current limit
at maximum
speed (PU)
2
g_f16EopCtr
CurLmtLow
SWDDS.3.6.14.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Speed
control
current limit
lower (PU)
3 speed_rpm SWDDS.1.2.3.5 OUT tFrac32 0 3200 0 3200 1 / rpm
Target
speed input
(rpm)
4 g_f16EopCtrSpdProf SWDDS.1.2.3.5 IN tFrac16 0 17476 0 3200 1 / rpm
EOP speed
profile
setting (PU)
3.2.3.15 [SWDDS.1.2.3.15] CheckEopCtrEnaAppMode
3.2.3.15.1 Detailed Design
[SWDDS.1.2.3.15] CheckEopCtrEnaAppMode
Software Unit Information
Unit ID SWDDS.1.2.3.15 Unit Name CheckEopCtrEnaAppMode
Architecture ID SWADS.1.2.3.15 ASIL QM
Prototype tBool CheckEopCtrEnaAppMode( tBool previous_enable, tS16 target_rpm, tFrac16 reference_speed )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool previous_enable 0 ~ 1 IN previous control enabled status
tS16 target_rpm 0 ~ 3200 IN target speed (rpm)
tFrac16 reference_speed 0 ~ 19660 IN reference speed (PU)
Function Call
Return Value
Data Type Possible Return Value Description
tBool 0 ~ 1 FALSE - control disable, TRUE - control enable
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
tS16 par_s16RefSpdOnThrs 500 Read Control enabling(on) target speed threshold (rpm)
tS16 par_s16RefSpdOffThrs 500 Read Control disabling(off) target speed threshold (rpm)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Control enable checking with respect to application mode
- Control enable initialization and reference speed unit conversion to rpm
- Control enable checking under application mode
- Control enable with respect to speed
1. CheckEopCtrEnaAppMode checks the application mode.
2. CheckEopCtrEnaAppMode disables control if the application mode is none or warning or failure.
3. CheckEopCtrEnaAppMode checks the control enable and disable condition if the application mode is normal or caution.
4. CheckEopCtrEnaAppMode enables control if the target speed is greater than or equal to the on threshold.
5. CheckEopCtrEnaAppMode disables control if the target speed and the reference speed are less than the off threshold.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 169
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.13 CheckEopCtrEnaMode
Calling Function
SWDDS.1.2.3.6 ConvertEopCtrSpdUnitToRpm
SWDDS.2.2.49 RteApp_ReadAppMode
Function Execution Time N/A
Requirement Id SWDDS.1.2.3.15
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 170
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.15.2 Static View Design
3.2.3.15.3 Dynamic View Design
1. CheckEopCtrEnaAppMode calls target speed unit conversion.
2. CheckEopCtrEnaAppMode calls the application mode setting.
3.2.3.15.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 speed_pu SWDDS.1.2.3.6 OUT tFrac16 0 32767 0.0 5999.82
0.183105
/ rpm
Reference
speed (PU)
2 reference_rpm SWDDS.1.2.3.6 IN tS16 0 3200 0 3200 1 / rpm
Reference
speed
(rpm)
3
g_eRteApp
AppMode
SWDDS.2.2.49 IN tAppMode 0 4
APP
_MODE
_NONE
APP
_MODE
_FAILURE
N/A
Application
mode
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 171
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.16 [SWDDS.1.2.3.16] CheckEopCtrAntiWindUp
3.2.3.16.1 Detailed Design
[SWDDS.1.2.3.16] CheckEopCtrAntiWindUp
Software Unit Information
Unit ID SWDDS.1.2.3.16 Unit Name CheckEopCtrAntiWindUp
Architecture ID SWADS.1.2.3.16 ASIL QM
Prototype void CheckEopCtrAntiWindUp( tFrac16 speed_output )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 speed_output N/A IN speed output feedback (PU)
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Read EOP speed profile (PU)
tFrac16 g_f16EopCtrPrevSpdProf 0 ~ 19660 Read/Write Previous speed profile setting (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp.f32State
-2147483648 ~
2147483647
Write Reference speed ramping handler (f32State)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16SpdCtrAwuSpdDiffThrs 54 Read
Speed control anti-windup speed difference
threshold (PU)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Speed control anti-windup checking
- Data getting
- Speed profile decrement checking
- Speed and current control integrator pre-charging
- Previous speed profile updating
Control Flow
Diagram
(or Pseudo Code)
1. CheckEopCtrAntiWindUp calculates speed profile decrement difference.
2. CheckEopCtrAntiWindUp checks if the speed profile decrement difference is greater than specific threshold.
3. CheckEopCtrAntiWindUp sets the reference ramping state as current speed output.
4. CheckEopCtrAntiWindUp precharges the sensorless FOC current control and speed control.

Called Function SWDDS.1.2.3.4 EopCtr_Run
SWDDS.2.2.14 RteApp_ReadCurOut
SWDDS.3.6.14.34 MLIB_SubSat_F16
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 172
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Calling Function
SWDDS.3.6.14.13 MLIB_ShL_F32
SWDDS.2.3.17 RteIo_PrechrgCurIntg
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.16
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity Low
Verifiability Yes
3.2.3.16.2 Static View Design
3.2.3.16.3 Dynamic View Design
1. CheckEopCtrAntiWindUp calls the fixed-point subtraction and bit shift function.
2. CheckEopCtrAntiWindUp calls the sensorless FOC precharging.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 173
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.16.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
current
_output
SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
q-axis
current
output
(PU)
2 f16In1 SWDDS.3.6.14.34 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
Previous
EOP speed
profile (PU)
3 f16In2 SWDDS.3.6.14.34 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
EOP speed
profile (PU)
4
speed
_difference
SWDDS.3.6.14.34 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Target
speed
difference
(PU)
5 f32In1 SWDDS.3.6.14.13 OUT tFrac32 -2147483648 2147483647 -6000.0 5999.82
0.183105 /
rpm
Speed
output
(PU)
6 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A Bit shift
7
g_hndEopCtr
RefSpdRamp
.f32State
SWDDS.3.6.14.13 IN
GFLIB_
RAMP_
T_F32
0 1145324612 0.0 5999.82
0.183105 /
rpm
Current
speed
ramp state
(PU)
3.2.3.17 [SWDDS.1.2.3.17] SetEopCtrSpdCtrCurLmt
3.2.3.17.1 Detailed Design
[SWDDS.1.2.3.17] SetEopCtrSpdCtrCurLmt
Software Unit Information
Unit ID SWDDS.1.2.3.17 Unit Name SetEopCtrSpdCtrCurLmt
Architecture ID SWADS.1.2.3.17 ASIL QM
Prototype void SetEopCtrSpdCtrCurLmt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
void N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrCurLmtUpp -11430 ~11430 Write Speed control current limit upper (PU)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtUppRamp -11430 ~11430 Read/Write Current limit upper ramping handler (f16State)
tFrac16 g_f16EopCtrCurLmtLow -11430 ~11430 Write Speed control current limit lower (PU)
GFLIB_RAMP_T_F16 g_hndEopCtrCurLmtLowRamp -11430 ~11430 Read/Write Current limit lower ramping handler (f16State)
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Speed control current limit setting
- Upper current limit ramping
- Lower current limit ramping
1. SetEopCtrSpdCtrCurLmt calculates the upper current limit with ramping and set the upper current limit.
2. SetEopCtrSpdCtrCurLmt calculates the lower current limit with ramping and set the lower current limit.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 174
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.3.6.14.31 GFLIB_Ramp_F16
SWDDS.2.2.37 RteApp_WriteCurLmtUpp
SWDDS.2.2.39 RteApp_WriteCurLmtLow
Function Execution Time N/A
Requirement Id SWDDS.1.2.3.17
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.3.17.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 175
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.17.3 Dynamic View Design
1. SetEopCtrSpdCtrCurLmt calls the ramping function to calculate upper and lower current limit.
2. SetEopCtrSpdCtrCurLmt calls the upper and lower current limit setting
3.2.3.17.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.31 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Current
limit upper
of speed
control
(PU)
2 pParam SWDDS.3.6.14.31 IN/OUT
GFLIB_RAMP
_T_F16
*const
N/A N/A N/A N/A N/A
Pointer of
current
limit upper
3 current_limit SWDDS.3.6.14.31 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Ramped
current
limit upper
of speed
control
(PU)
4 current_limit SWDDS.2.2.37 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Current
limit lower
of speed
control
(PU)
5 pParam SWDDS.3.6.14.31 IN/OUT
GFLIB_RAMP
_T_F16
*const
N/A N/A N/A N/A N/A
Pointer of
current
limit lower
6 current_limit SWDDS.2.2.39 OUT tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Ramped
current
limit lower
of speed
control
(PU)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 176
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.18 [SWDDS.1.2.3.18] CalculateEopCtrRefSpd
3.2.3.18.1 Detailed Design
[SWDDS.1.2.3.18] CalculateEopCtrRefSpd
Software Unit Information
Unit ID SWDDS.1.2.3.18 Unit Name CalculateEopCtrRefSpd
Architecture ID SWADS.1.2.3.18 ASIL QM
Prototype tFrac16 CalculateEopCtrRefSpd( tCtrState control_state, tBool control_enable )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tCtrState control_state 0 ~ 4 IN current control state
tBool control_enable 0 ~ 1 IN
FALSE - control disable,
TRUE - control enable
Function Call
Return Value
Data Type Possible Return Value Description
tFrac16 0 ~ 19660 Reference speed (PU)
Global Variables
Data Type Name Range Read/Write Description
tFrac16 g_f16EopCtrSpdProf 0 ~ 19660 Read EOP speed profile (PU)
GFLIB_RAMP_T_F32 g_hndEopCtrRefSpdRamp
0 ~
1288490189
Read/Write Reference speed ramping handler (f32State)
Parameters
Data Type Name Range Read/Write Description
tBool par_bEopCtrMaxSpdEna 0 Read Initial maximum speed acceleration enable
tFrac16 par_f16EopCtrInitSpdIncRatio 8192 Read Initial reference speed increment ratio
tFrac16 par_f16EopCtrInitMaxSpd 19660 Read EOP control maximum speed (rpm)
tFrac32 par_f32RefSpdIncRate 10737418 Read Reference speed increment rate (PU/step)
tFrac32 par_f32RefSpdDecRate 10737418 Read
Reference speed decrement rate (PU/step, should be
positive)
tFrac32 par_f32EopCtrInitRefSpdDecRate 1789569 Read
Initial reference speed decrement rate (PU/step, should
be positive)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Reference speed calculation
- Reference speed calculation with ramp up/down
- Increased reference speed calculation at initial maximum speed acceleration disabled
- Reference speed calculation at initial maximum speed acceleration enabled
- Reference speed calculation at control enabled
Control Flow
Diagram
(or Pseudo Code)
1. CalculateEopCtrRefSpd checks if control is enabled.
2. CalculateEopCtrRefSpd calculates the reference speed with ramping if the control state is sensorless running.
3. CalculateEopCtrRefSpd calculates the initial reference speed if the control state is open-loop starting.
4. CalculateEopCtrRefSpd sets the reference speed as the given amount of overshoot speed if initial maximum speed acceleration is disabled.
5. CalculateEopCtrRefSpd sets the reference speed as the initial maximum speed if initial maximum speed acceleration is enabled.
6. CalculateEopCtrRefSpd sets the reference speed as 0 if control is disabled.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 177
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.3.4 EopCtr_Run
Calling Function
SWDDS.3.6.14.14 GFLIB_Ramp_F32
SWDDS.3.6.14.32 MLIB_MulSat_F16
SWDDS.3.6.14.33 MLIB_AddSat_F16
SWDDS.3.6.14.13 MLIB_ShL_F32
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.3.18
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality High
Technical complexity High
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 178
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.3.18.2 Static View Design
3.2.3.18.3 Dynamic View Design
1. CalculateEopCtrRefSpd calls the ramping function to calculate the reference speed with ramp.
2. CalculateEopCtrRefSpd calls the fixed-point multiplication, addition and bit shift function.
3.2.3.18.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f32In SWDDS.3.6.14.14 OUT tFrac32 0 1288490189 0.0 3600.0
0.183105 /
rpm
Bit expanded speed profile (PU)
2 pParam SWDDS.3.6.14.14 IN/OUT
GFLIB
_RAMP_T
_F32
*const
N/A N/A N/A N/A N/A Pointer of ramping handler
reference 0.183105 /
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 179
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3
_speed
SWDDS.3.6.14.14 IN tFrac16 0 19661 0.0 3600.0
rpm
Reference speed (PU)
4 f16In1 SWDDS.3.6.14.32 OUT tFrac16 8192 8192 0.25 0.25 N/A
Initial reference speed increment
ratio
5 f16In2 SWDDS.3.6.14.32 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
EOP speed profile (PU)
6
increased
_reference
SWDDS.3.6.14.32 IN tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
Increased reference speed (PU)
7 f16In1 SWDDS.3.6.14.33 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
Increased reference speed (PU)
8 f16In2 SWDDS.3.6.14.33 OUT tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
EOP speed profile (PU)
9
increased
_reference
SWDDS.3.6.14.33 IN tFrac16 0 19660 0.0 3600.0
0.183105 /
rpm
Increased reference speed (PU)
10 f32In1 SWDDS.3.6.14.13 OUT tFrac32 0 1288490189 0.0 3600.0
0.183105 /
rpm
Current speed ramp state (PU)
11 u16In2 SWDDS.3.6.14.13 OUT tU16 16 16 16 16 N/A Bit shift
12
g_hndEopCtr
RefSpdRamp
.f32State
SWDDS.3.6.14.13 IN tFrac32 0 1145324612 0.0 5999.82
0.183105 /
rpm
Current speed ramp state (PU)
3.2.4 [SWDDS.1.2.4] SigRng
3.2.4.1 [SWDDS.1.2.4.1] SigRng_Init
3.2.4.1.1 Detailed Design
[SWDDS.1.2.4.1] SigRng_Init
Software Unit Information
Unit ID SWDDS.1.2.4.1
Unit
Name
SigRng_Init
Architecture ID SWADS.1.2.4.1 ASIL QM
Prototype void SigRng_Init( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read Signal range checking flag
tU16 g_u16SigRngBatVoltOvr1CntSet
0 ~
60000
Read
Battery voltage over setting condition 1 hold time count
(ms)
tU16 g_u16SigRngBatVoltOvr2CntSet
0 ~
60000
Read
Battery voltage over setting condition 2 hold time count
(ms)
tU16 g_u16SigRngBatVoltOvrCntClr
0 ~
60000
Read
Battery voltage over clearing condition hold time count
(ms)
tU16 g_u16SigRngBatVoltUndCntSet
0 ~
60000
Read
Battery voltage under setting condition hold time count
(ms)
tU16 g_u16SigRngBatVoltUndCntClr
0 ~
60000
Read
Battery voltage under clearing condition hold time count
(ms)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 180
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tU16 g_u16SigRngPcbTempOvrCntSet
0 ~
60000
Read
PCB temperature over setting condition hold time count
(ms)
tU16 g_u16SigRngPcbTempOvrCntClr
0 ~
60000
Read
PCB temperature over clearing condition hold time count
(ms)
tU16 g_u16SigRngPcbTempWrnCntSet
0 ~
60000
Read
PCB temperature warning setting condition hold time
count (ms)
tU16 g_u16SigRngPcbTempWrnCntClr
0 ~
60000
Read
PCB temperature warning clearing condition hold time
count (ms)
tU16 g_u16SigRngBatVoltHighCntSet
0 ~
60000
Read
Battery voltage high setting condition hold time count
(ms)
tU16 g_u16SigRngBatVoltHighCntClr
0 ~
60000
Read
Battery voltage high clearing condition hold time count
(ms)
tU16 g_u16SigRngBatVoltLowCntSet
0 ~
60000
Read Battery voltage low setting condition hold time count (ms)
tU16 g_u16SigRngBatVoltLowCntClr
0 ~
60000
Read
Battery voltage low clearing condition hold time count
(ms)
tU16 g_u16SigRngProtModeCntSet
0 ~
60000
Read Protect mode setting condition hold time count (ms)
tU16 g_u16SigRngProtModeCntClr
0 ~
60000
Read Protect mode clearing condition hold time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Signal range checking initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.1.1 AswCtr_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.1.2.4.1
Target Milestone EBS2
Element AswCtr
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 181
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
3.2.4.1.2 Static View Design
3.2.4.1.3 Dynamic View Design
- N/A
3.2.4.1.4 Interface Design
- N/A
3.2.4.2 [SWDDS.1.2.4.2] SigRng_Chk
3.2.4.2.1 Detailed Design
[SWDDS.1.2.4.2] SigRng_Chk
Software Unit Information
Unit ID SWDDS.1.2.4.2 Unit Name SigRng_Chk
Architecture ID SWADS.1.2.4.2 ASIL QM
Prototype void SigRng_Chk( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read Signal range checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Signal range checking
-. Battery voltage range checking
-. PCB temperature range checking
-. Protect mode checking
-. Application data updating
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 182
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.10 RteSch_Task20ms
Calling Function
SWDDS.1.2.4.3 CheckSigRngBatVolt
SWDDS.1.2.4.6 CheckSigRngPcbTemp
SWDDS.1.2.4.11 CheckSigRngProtMode
SWDDS.2.2.44 RteApp_WriteSigRng
Function Execution Time N/A
Requirement Id SWDDS.1.2.4.2
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.4.2.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 183
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.2.3 Dynamic View Design
3.2.4.2.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw
Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 checking_flag SWDDS.2.2.44 OUT tU32 N/A N/A N/A N/A N/A
Signal
range
checking
flag
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 184
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.3 [SWDDS.1.2.4.3] CheckSigRngBatVolt
3.2.4.3.1 Detailed Design
[SWDDS.1.2.4.3] CheckSigRngBatVolt
Software Unit Information
Unit ID SWDDS.1.2.4.3 Unit Name CheckSigRngBatVolt
Architecture ID SWADS.1.2.4.3 ASIL QM
Prototype void CheckSigRngBatVolt( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Battery voltage range checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.2 SigRng_Chk
Calling Function
SWDDS.1.2.4.9 CheckSigRngBatVoltRngHigh
SWDDS.1.2.4.10 CheckSigRngBatVoltRngLow
SWDDS.1.2.4.4 CheckSigRngBatVoltRngOvr
SWDDS.1.2.4.5 CheckSigRngBatVoltRngUnd
SWDDS.2.2.24 RteApp_ReadBatVolt
Function Execution Time N/A
Requirement Id SWDDS.1.2.4.3
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 185
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.3.2 Static View Design
3.2.4.3.3 Dynamic View Design
3.2.4.3.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 battery_voltage SWDDS.2.2.24 IN tFrac16 0 32767 0.0 29.4991
0.000900269
/ Vpk
Battery
voltage
(PU)
2 battery_voltage SWDDS.1.2.4.9 OUT tFrac16 0 32767 0.0 29.4991
0.000900269
/ Vpk
Battery
voltage
(PU)
3 battery_voltage SWDDS.1.2.4.10 OUT tFrac16 0 32767 0.0 29.4991
0.000900269
/ Vpk
Battery
voltage
(PU)
Battery
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 186
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
4 battery_voltage SWDDS.1.2.4.4 OUT tFrac16 0 32767 0.0 29.4991
0.000900269
/ Vpk
voltage
(PU)
5 battery_voltage SWDDS.1.2.4.5 OUT tFrac16 0 32767 0.0 29.4991
0.000900269
/ Vpk
Battery
voltage
(PU)
3.2.4.4 [SWDDS.1.2.4.4] CheckSigRngBatVoltRngOvr
3.2.4.4.1 Detailed Design
[SWDDS.1.2.4.4] CheckSigRngBatVoltRngOvr
Software Unit Information
Unit ID SWDDS.1.2.4.4 Unit Name CheckSigRngBatVoltRngOvr
Architecture ID SWADS.1.2.4.4 ASIL QM
Prototype void CheckSigRngBatVoltRngOvr( tFrac16 battery_voltage )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 battery_voltage 0 ~ 32767 IN Batter Voltage(PU)
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read Signal range checking flag
tU16 g_u16SigRngBatVoltOvrCntClr 0 ~ 600000 Read/Write
Battery voltage over clearing
condition hold time count (ms)
tU16 g_u16SigRngBatVoltOvr1CntSet 0 ~ 600000 Read/Write
Battery voltage over setting condition
1 hold time count (ms)
tU16 g_u16SigRngBatVoltOvr2CntSet 0 ~ 600000 Read/Write
Battery voltage over setting condition
2 hold time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltBatVoltOvrSetThrs1
FRAC16( 17.6f /
PARAM_PU_BASE_BAT_VOLT )
Read
Battery voltage over detection setting
voltage threshold 1 (PU)
tU16 par_u16FltBatVoltOvrSetTim1 1500 Read
Battery voltage over detection setting
condition hold time 1 (ms)
tFrac16 par_f16FltBatVoltOvrSetThrs2
FRAC16( 20.4f /
PARAM_PU_BASE_BAT_VOLT )
Read
Battery voltage over detection setting
voltage threshold 2 (PU)
tU16 par_u16FltBatVoltOvrSetTim2 1 Read
Battery voltage over detection setting
condition hold time 2 (ms)
tFrac16 par_f16FltBatVoltOvrClrThrs
FRAC16( 17.0f /
PARAM_PU_BASE_BAT_VOLT )
Read
Battery voltage over detection
clearing voltage threshold (PU)
tU16 par_u16FltBatVoltOvrClrTim 300 Read
Battery voltage over detection
clearing condition hold time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Battery voltage range over checking
-. Battery voltage range over setting checking
-. Battery voltage over 1 checking
-. Battery voltage over 2 checking
-. Battery voltage range over clearing checking
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 187
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo Code)

Called Function SWDDS.1.2.4.3 CheckSigRngBatVolt
Calling Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.4.4
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
Verifiability Yes
3.2.4.4.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 188
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.4.3 Dynamic View Design
3.2.4.4.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage over
setting
condition 1
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1 1500 1 1500 1 / msec
Battery
voltage over
detection
setting
condition
hold time 1
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 4 12 0x00000004 0x0000000b N/A
Battery
voltage over
1 fault flag
5 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
6 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage over
setting
condition 2
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.12 OUT tU16 0 1 0 1 1 / msec
Battery
voltage over
detection
setting
condition
hold time 2
(ms)
8 setting_flag SWDDS.1.2.4.12 OUT tU32 4 12 0x00000004 0x0000000b N/A
Battery
voltage over
2 fault flag
9 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
10 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage over
clearing
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 189
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
condition
hold time
count (ms)
11 count_threshold SWDDS.1.2.4.13 OUT tU16 300 300 300 300 1 / msec
Battery
voltage over
detection
clearing
condition
hold time
(ms)
12 clearing_flag SWDDS.1.2.4.13 OUT tU32 4 12 0x00000004 0x0000000b N/A
Battery
voltage over
1 and
Battery
voltage over
2
3.2.4.5 [SWDDS.1.2.4.5] CheckSigRngBatVoltRngUnd
3.2.4.5.1 Detailed Design
[SWDDS.1.2.4.5] CheckSigRngBatVoltRngUnd
Software Unit Information
Unit ID SWDDS.1.2.4.5 Unit Name CheckSigRngBatVoltRngUnd
Architecture
ID
SWADS.1.2.4.5 ASIL QM
Prototype void CheckSigRngBatVoltRngUnd( tFrac16 battery_voltage )
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 battery_voltage IN
Batter
Voltage(PU)
Function
Call
Return
Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global
Variables
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read
Signal range
checking flag
tU16 g_u16SigRngBatVoltUndCntClr 0 ~ 60000 Read/Write
Battery voltage
under clearing
condition hold
time count
(ms)
tU16 g_u16SigRngBatVoltUndCntSet 0 ~ 60000 Read/Write
Battery voltage
under setting
condition hold
time count
(ms)
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltBatVoltUndSetThrs FRAC16( 8.0f / PARAM_PU_BASE_BAT_VOLT ) Read
Battery voltage
under
detection
setting voltage
threshold (PU)
tU16 par_u16FltBatVoltUndSetTim 1500 Read
Battery voltage
under
detection
setting
condition hold
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 190
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters time (ms)
tFrac16 par_f16FltBatVoltUndClrThrs FRAC16( 8.6f / PARAM_PU_BASE_BAT_VOLT ) Read
Battery voltage
under
detection
clearing
voltage
threshold (PU)
tU16 par_u16FltBatVoltUndClrTim 300 Read
Battery voltage
under
detection
clearing
condition hold
time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Battery voltage range under checking
-. Battery voltage range under setting checking
-. Battery voltage range under clearing checking
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.2.4.3 CheckSigRngBatVolt
Calling
Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.4.5
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 191
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.5.2 Static View Design
3.2.4.5.3 Dynamic View Design
3.2.4.5.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage
under
setting
condition
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1500 1500 1500 1500 1 / msec
Battery
voltage
under
detection
setting
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 192
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 16 16 0x00000010 0x00000010 N/A
Battery
voltage
under fault
flag
5 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
6 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage
under
clearing
condition
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.13 OUT tU16 300 300 300 300 1 / msec
Battery
voltage
under
detection
clearing
condition
hold time
(ms)
8 clearing_flag SWDDS.1.2.4.13 OUT tU32 16 16 0x00000010 0x00000010 N/A
Battery
voltage
under fault
flag
3.2.4.6 [SWDDS.1.2.4.6] CheckSigRngPcbTemp
3.2.4.6.1 Detailed Design
[SWDDS.1.2.4.6] CheckSigRngPcbTemp
Software Unit Information
Unit ID SWDDS.1.2.4.6 Unit Name CheckSigRngPcbTemp
Architecture ID SWADS.1.2.4.6 ASIL QM
Prototype void CheckSigRngPcbTemp( void )
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description PCB temperature range checking
Control Flow Diagram
(or Pseudo Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 193
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Called Function SWDDS.1.2.4.2 SigRng_Chk
Calling Function
SWDDS.1.2.4.7 CheckSigRngPcbTempRngOvr
SWDDS.1.2.4.8 CheckSigRngPcbTempRngWrn
SWDDS.2.2.20 RteApp_ReadPcbTemp
Function Execution Time N/A
Requirement Id SWDDS.1.2.4.6
Target Milestone SBS1
Element AswCtr
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.2.4.6.2 Static View Design
3.2.4.6.3 Dynamic View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 194
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.6.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 pcb_temperature SWDDS.2.2.20 IN tFrac16 -1311 5570 -40.0 170.0
0.0305176
/ degC
PCB
temperature
(PU)
2 pcb_temperature SWDDS.1.2.4.7 OUT tFrac16 -1311 5570 -40.0 170.0
0.0305176
/ degC
PCB
temperature
(PU)
3 pcb_temperature SWDDS.1.2.4.8 OUT tFrac16 -1311 5570 -40.0 170.0
0.0305176
/ degC
PCB
temperature
(PU)
3.2.4.7 [SWDDS.1.2.4.7] CheckSigRngPcbTempRngOvr
3.2.4.7.1 Detailed Design
[SWDDS.1.2.4.7] CheckSigRngPcbTempRngOvr
Software Unit Information
Unit ID SWDDS.1.2.4.7 Unit Name CheckSigRngPcbTempRngOvr
Architecture
ID
SWADS.1.2.4.7 ASIL QM
Prototype void CheckSigRngPcbTempRngOvr( tFrac16 pcb_temperature )
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 pcb_temperature IN
PCB
temperature(PU)
Function
Call
Return
Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global
Variables
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read
Signal range
checking flag
tU16 g_u16SigRngPcbTempOvrCntClr 0 ~ 60000 Read/Write
PCB temperature
over clearing
condition hold
time count (ms)
PCB temperature
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 195
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tU16 g_u16SigRngPcbTempOvrCntSet 0 ~ 60000 Read/Write
over setting
condition hold
time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltPcbTempOvrSetThrs FRAC16( 140.0f / PARAM_PU_BASE_TEMP ) Read
PCB
temperature over
detection setting
temperature
threshold (PU)
tU16 par_u16FltPcbTempOvrSetTim 1000 Read
PCB temperature
over detection
setting condition
hold time (ms)
tFrac16 par_f16FltPcbTempOvrClrThrs FRAC16( 125.0f / PARAM_PU_BASE_TEMP ) Read
PCB temperature
over detection
clearing
temperature
threshold (PU)
tU16 par_u16FltPcbTempOvrClrTim 1000 Read
PCB temperature
over detection
clearing
condition hold
time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
PCB temperature range over checking
-. PCB temperature range over setting checking
-. PCB temperature range over clearing checking
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.2.4.6 CheckSigRngPcbTemp
Calling
Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 196
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.4.7
Target Milestone SBS1
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.4.7.2 Static View Design
3.2.4.7.3 Dynamic View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 197
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.7.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range
Resolution/Units Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True / False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
PCB
temperature
over setting
condition
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1000 1000 1000 1000 1 / msec
PCB
temperature
over
detection
setting
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 32 32 0x00000020 0x00000020 N/A
PCB
temperature
over fault
flag
5 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True / False
Checking
condition
meet
6 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
PCB
temperature
over
clearing
condition
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.13 OUT tU16 1000 1000 1000 1000 1 / msec
PCB
temperature
over
detection
clearing
condition
hold time
(ms)
8 clearing_flag SWDDS.1.2.4.13 OUT tU32 32 32 0x00000020 0x00000020 N/A
PCB
temperature
over fault
flag
3.2.4.8 [SWDDS.1.2.4.8] CheckSigRngPcbTempRngWrn
3.2.4.8.1 Detailed Design
[SWDDS.1.2.4.8] CheckSigRngPcbTempRngWrn
Software Unit Information
Unit ID SWDDS.1.2.4.8 Unit Name CheckSigRngPcbTempRngWrn
Architecture
ID
SWADS.1.2.4.8 ASIL QM
Prototype void CheckSigRngPcbTempRngWrn( tFrac16 pcb_temperature )
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 pcb_temperature IN
PCB
temperature(PU)
Function
Call
Return
Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Data
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 198
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global
Variables
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read
Signal range
checking flag
tU16 g_u16SigRngPcbTempWrnCntClr 0 ~ 60000 Read/Write
PCB temperature
warning clearing
condition hold
time count (ms)
tU16 g_u16SigRngPcbTempWrnCntSet 0 ~ 60000 Read/Write
PCB temperature
warning setting
condition hold
time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltPcbTempWrnSetThrs FRAC16( -30.0f / PARAM_PU_BASE_TEMP ) Read
PCB temperature
warning
detection setting
temperature
threshold (PU)
tU16 par_u16FltPcbTempWrnSetTim 1000 Read
PCB temperature
warning
detection setting
condition hold
time (ms)
tFrac16 par_f16FltPcbTempWrnClrThrs FRAC16( -25.0f / PARAM_PU_BASE_TEMP ) Read
PCB temperature
warning
detection
clearing
temperature
threshold (PU)
tU16 par_u16FltPcbTempWrnClrTim 1000 Read
PCB temperature
warning
detection
clearing
condition hold
time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
PCB temperature range warning checking
-. PCB temperature range warning setting checking
-. PCB temperature range warning clearing checking
Control
Flow
Diagram
(or Pseudo
Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 199
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.2.4.6 CheckSigRngPcbTemp
Calling
Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
Function
Execution
Time
N/A
Requirement Id SWDDS.1.2.4.8
Target Milestone SBS1
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.4.8.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 200
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.8.3 Dynamic View Design
3.2.4.8.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
PCB
temperature
warning
setting
condition
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1000 1000 1000 1000 1 / msec
PCB
temperature
warning
detection
setting
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 64 64 0x00000040 0x00000040 N/A
PCB
temperature
warning
fault flag
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 201
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
5 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
6 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
PCB
temperature
warning
clearing
condition
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.13 OUT tU16 1000 1000 1000 1000 1 / msec
PCB
temperature
warning
detection
clearing
condition
hold time
(ms)
8 clearing_flag SWDDS.1.2.4.13 OUT tU32 64 64 0x00000040 0x00000040 N/A
PCB
temperature
warning
fault flag
3.2.4.9 [SWDDS.1.2.4.9] CheckSigRngBatVoltRngHigh
3.2.4.9.1 Detailed Design
[SWDDS.1.2.4.9] CheckSigRngBatVoltRngHigh
Software Unit Information
Unit ID SWDDS.1.2.4.9 Unit Name CheckSigRngBatVoltRngHigh
Architecture ID SWADS.1.2.4.9 ASIL QM
Prototype void CheckSigRngBatVoltRngHigh( tFrac16 battery_voltage )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tFrac16 battery_voltage 0~32767 IN battery voltage(PU)
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global
Variables
Data Type Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read
Signal range
checking flag
tU16 g_u16SigRngBatVoltHighCntClr 0 ~ 60000 Read/Write
Battery voltage
high clearing
condition hold time
count (ms)
tU16 g_u16SigRngBatVoltHighCntSet 0 ~ 60000 Read/Write
Battery voltage
high setting
condition hold time
count (ms)
Parameters
Data Type Name Range Read/Write Description
tFrac16 par_f16FltBatVoltHighSetThrs
FRAC16( 26.9f /
PARAM_PU_BASE_BAT_VOLT)
Read
Battery voltage
high detection
setting voltage
threshold (PU)
tU16 par_u16FltBatVoltHighSetTim 1000 Read
Battery voltage
high detection
setting condition
hold time (ms)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 202
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_f16FltBatVoltHighClrThrs
FRAC16( 26.5f /
PARAM_PU_BASE_BAT_VOLT)
Read
Battery voltage
high detection
clearing voltage
threshold (PU)
tU16 par_u16FltBatVoltHighClrTim 1000 Read
Battery voltage
high detection
clearing condition
hold time (ms)
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Battery voltage range high checking
-. DC driving voltage range over setting checking
-. DC driving voltage range over clearing checking
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.2.4.3 CheckSigRngBatVolt
Calling
Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.4.9
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 203
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.9.2 Static View Design
3.2.4.9.3 Dynamic View Design
3.2.4.9.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage high
setting
condition
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1000 1000 1000 1000 1 / msec
Battery
voltage high
detection
setting
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 1 1 0x00000001 0x00000001 N/A
Battery
voltage high
fault flag
5 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
Battery
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 204
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
6 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
voltage high
clearing
condition
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.13 OUT tU16 1000 1000 1000 1000 1 / msec
Battery
voltage high
detection
clearing
condition
hold time
(ms)
8 clearing_flag SWDDS.1.2.4.13 OUT tU32 1 1 0x00000001 0x00000010 N/A
Battery
voltage high
fault flag
3.2.4.10 [SWDDS.1.2.4.10] CheckSigRngBatVoltRngLow
3.2.4.10.1 Detailed Design
[SWDDS.1.2.4.10] CheckSigRngBatVoltRngLow
Software Unit Information
Unit ID SWDDS.1.2.4.10 Unit Name CheckSigRngBatVoltRngLow
Architecture ID SWADS.1.2.4.10 ASIL QM
Prototype void CheckSigRngBatVoltRngLow( tFrac16 battery_voltage )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
tFrac16 battery_voltage 0~32767 IN battery voltage(PU)
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read
Signal range
checking flag
tU16 g_u16SigRngBatVoltLowCntClr 0 ~ 60000 Read/Write
Battery voltage low
clearing condition
hold time count
(ms)
tU16 g_u16SigRngBatVoltLowCntSet 0 ~ 60000 Read/Write
Battery voltage low
setting condition
hold time count
(ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16FltBatVoltLowSetThrs
FRAC16( 5.6f /
PARAM_PU_BASE_BAT_VOLT)
Read
Battery voltage low
detection setting
voltage threshold
(PU)
tU16 par_u16FltBatVoltLowSetTim 1000 Read
Battery voltage low
detection setting
condition hold time
(ms)
FRAC16( 6.0f /
Battery voltage low
detection clearing
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 205
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tFrac16 par_f16FltBatVoltLowClrThrs
PARAM_PU_BASE_BAT_VOLT)
Read
voltage threshold
(PU)
tU16 par_u16FltBatVoltLowClrTim 1000 Read
Battery voltage low
detection clearing
condition hold time
(ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Battery voltage range low checking
-. DC driving voltage under setting checking
-. DC driving voltage under clearing checking
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.2.4.3 CheckSigRngBatVolt
Calling Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.4.10
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 206
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.10.2 Static View Design
3.2.4.10.3 Dynamic View Design
3.2.4.10.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
2 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Battery
voltage low
setting
condition
hold time
count (ms)
3 count_threshold SWDDS.1.2.4.12 OUT tU16 1000 1000 1000 1000 1 / msec
Battery
voltage low
detection
setting
condition
hold time
(ms)
4 setting_flag SWDDS.1.2.4.12 OUT tU32 2 2 0x00000002 0x00000002 N/A
Battery
voltage low
fault flag
5 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
Battery
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 207
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
6 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
voltage low
clearing
condition
hold time
count (ms)
7 count_threshold SWDDS.1.2.4.13 OUT tU16 1000 1000 1000 1000 1 / msec
Battery
voltage low
detection
clearing
condition
hold time
(ms)
8 clearing_flag SWDDS.1.2.4.13 OUT tU32 2 2 0x00000002 0x00000002 N/A
Battery
voltage low
fault flag
3.2.4.11 [SWDDS.1.2.4.11] CheckSigRngProtMode
3.2.4.11.1 Detailed Design
[SWDDS.1.2.4.11] CheckSigRngProtMode
Software Unit Information
Unit ID SWDDS.1.2.4.11 Unit Name CheckSigRngProtMode
Architecture ID SWADS.1.2.4.11 ASIL QM
Prototype void CheckSigRngProtMode( void )
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
N/A N/A N/A
Global Variables
Data
Type
Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read/Write Signal range checking flag
tU16 g_u16SigRngProtModeCntClr 0 ~ 60000 Read/Write
Protect mode clearing condition
hold time count (ms)
tU16 g_u16SigRngProtModeCntSet 0 ~ 60000 Read/Write
Protect mode setting condition hold
time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16ProtModeSpdErrSetThrs
FRAC16( 500.0f /
PARAM_PU_BASE_MECH_SPD )
Read
Protect mode detection setting
speed error threshold (PU)
tU16 par_u16ProtModeSetTim 2500 Read
Protect mode detection setting
condition hold time (ms)
tFrac16 par_f16ProtModeSpdErrClrThrs
FRAC16( 200.0f /
PARAM_PU_BASE_MECH_SPD )
Read
Protect mode detection clearing
speed error threshold (PU)
tU16 par_u16ProtModeClrTim 1000 Read
Protect mode detection clearing
condition hold time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
DC driving voltage range under checking
-. Data getting
-. Control enable checking
-. Protect mode setting checking
-. Protect mode clearing checking
-. Protect mode checking inactive condition
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 208
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)

Called Function SWDDS.1.2.4.2 SigRng_Chk
Calling Function
SWDDS.1.2.4.12 SetSigRngCondHoldCntFlag
SWDDS.1.2.4.13 ClrSigRngCondHoldCntFlag
SWDDS.2.2.30 RteApp_ReadCtrEna
SWDDS.2.2.40 RteApp_ReadSpdErr
Function
Execution Time
N/A
Requirement Id SWDDS.1.2.4.11
Target Milestone SBS2.1
Element AswCtr
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.4.11.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 209
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.11.3 Dynamic View Design
3.2.4.11.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 control_enable SWDDS.2.2.30 IN tBool 0 1
Control
disable
Control
enable
True /
False
EOP control
enable
2 speed_error SWDDS.2.2.40 IN tFrac16 -32768 32767 -6000.0 5999.82
0.183105 /
rpm
Speed
control error
(PU)
3 condition_meet SWDDS.1.2.4.12 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 210
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
4 p_checking_count SWDDS.1.2.4.12 IN/OUT tU16* 0 60000 0 60000 20 / msec
Protect
mode
setting
condition
hold time
count (ms)
5 count_threshold SWDDS.1.2.4.12 OUT tU16 2500 2500 2500 2500 1 / msec
Protect
mode
detection
setting
condition
hold time
(ms)
6 setting_flag SWDDS.1.2.4.12 OUT tU32 128 128 0x00000080 0x00000080 N/A
Protection
mode flag
7 condition_meet SWDDS.1.2.4.13 OUT tBool 0 1
Condition
not meet
Condition
meet
True /
False
Checking
condition
meet
8 p_checking_count SWDDS.1.2.4.13 IN/OUT tU16* 0 60000 0 60000 20 / msec
Protect
mode
clearing
condition
hold time
count (ms)
9 count_threshold SWDDS.1.2.4.13 OUT tU16 2500 2500 2500 2500 1 / msec
Protect
mode
detection
clearing
condition
hold time
(ms)
10 clearing_flag SWDDS.1.2.4.13 OUT tU32 128 128 0x00000080 0x00000080 N/A
Protection
mode flag
3.2.4.12 [SWDDS.1.2.4.12] SetSigRngCondHoldCntFlag
3.2.4.12.1 Detailed Design
[SWDDS.1.2.4.12] SetSigRngCondHoldCntFlag
Software Unit Information
Unit ID SWDDS.1.2.4.12 Unit Name SetSigRngCondHoldCntFlag
Architecture ID SWADS.1.2.4.12 ASIL QM
Prototype
void SetSigRngCondHoldCntFlag( tBool condition_meet,
tU16* p_checking_count,
tU16 count_threshold,
tU32 setting_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool condition_meet 0 ~ 1 IN FALSE - condition does not meet, TRUE - condition meet
tU16* p_checking_count 0 ~ 60000 IN/OUT pointer of condition hold checking time count
tU16 count_threshold 0 ~ 60000 IN condition hold checking time count threshold
tFrac16 setting_flag 1 ~ 128 IN setting flag if hold time count is reached
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read Signal range checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Condition hold time count checking and the flag setting
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 211
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.4.4 CheckSigRngBatVoltRngOvr
SWDDS.1.2.4.5 CheckSigRngBatVoltRngUnd
SWDDS.1.2.4.7 CheckSigRngPcbTempRngOvr
SWDDS.1.2.4.8 CheckSigRngPcbTempRngWrn
SWDDS.1.2.4.9 CheckSigRngBatVoltRngHigh
SWDDS.1.2.4.10 CheckSigRngBatVoltRngLow
SWDDS.1.2.4.11 CheckSigRngProtMode
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.2.4.12
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.4.12.2 Static View Design
3.2.4.12.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 212
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.2.4.12.4 Interface Design
- N/A
3.2.4.13 [SWDDS.1.2.4.13] ClrSigRngCondHoldCntFlag
3.2.4.13.1 Detailed Design
[SWDDS.1.2.4.13] ClrSigRngCondHoldCntFlag
Software Unit Information
Unit ID SWDDS.1.2.4.13 Unit Name ClrSigRngCondHoldCntFlag
Architecture ID SWADS.1.2.4.13 ASIL QM
Prototype
void ClrSigRngCondHoldCntFlag(
tBool condition_meet,
tU16* p_checking_count,
tU16 count_threshold,
tU32 clearing_flag )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tBool condition_meet 0 ~ 1 IN FALSE - condition does not meet, TRUE - condition meet
tU16* p_checking_count 0 ~ 60000 IN/OUT pointer of condition hold checking time count
tU16 count_threshold 0 ~ 60000 IN condition hold checking time count threshold
tFrac16 clearing_flag 1 ~ 128 IN clearing flag if hold time count is reached
Function Call
Return Value
Data Type Possible Return Value Description
N/A N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU32 g_u32SigRngChkFlag 0 ~ 255 Read Signal range checking flag
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Condition hold time count checking and the flag clearing
Control Flow Diagram
(or Pseudo Code)

Called Function
SWDDS.1.2.4.4 CheckSigRngBatVoltRngOvr
SWDDS.1.2.4.5 CheckSigRngBatVoltRngUnd
SWDDS.1.2.4.7 CheckSigRngPcbTempRngOvr
SWDDS.1.2.4.8 CheckSigRngPcbTempRngWrn
SWDDS.1.2.4.9 CheckSigRngBatVoltRngHigh
SWDDS.1.2.4.10 CheckSigRngBatVoltRngLow
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 213
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
SWDDS.1.2.4.11 CheckSigRngProtMode
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.2.4.13
Target Milestone EBS2
Element AswCtr
Risk Mid
Interoperability Yes
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.2.4.13.2 Static View Design
3.2.4.13.3 Dynamic View Design
- N/A
3.2.4.13.4 Interface Design
- N/A
3.3 [SWDDS.1.3] AswMng
3.3.1 [SWDDS.1.3.1] AswMng
3.3.1.1 [SWDDS.1.3.1.1] AswMng_Init
3.3.1.1.1 Detailed Design
[SWDDS.1.3.1.1] AswMng_Init
Software Unit Information
Unit ID SWDDS.1.3.1.1 Unit Name AswMng_Init
Architecture ID SWADS.1.3.1.1 ASIL QM
Prototype void AswMng_Init (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 214
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Initial start-up mode initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.3 InitializeRteSchAppSw()
Calling Function
SWDDS.1.3.4.1 StartUp_Init
SWDDS.1.3.3.1 ShutDown_Init
SWDDS.1.3.2.1 ModeChg_Init
Function Execution Time N/A
Requirement Id SWDDS.1.3.1.1
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.3.1.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 215
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.1.1.3 Dynamic View Design
- N/A
3.3.1.1.4 Interface Design
- N/A
3.3.2 [SWDDS.1.3.2] ModeChg
3.3.2.1 [SWDDS.1.3.2.1] ModeChg_Init
3.3.2.1.1 Detailed Design
[SWDDS.1.3.2.1] ModeChg_Init
Software Unit Information
Unit ID SWDDS.1.3.2.1 Unit Name ModeChg_Init
Architecture ID SWADS.1.3.2.1 ASIL QM
Prototype void ModeChg_Init (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bModeChgVlsLow True /False Write Low voltage
tBool g_bModeChgFltEdgeTrig True /False Write Edge triggered fault occurred
tBool g_bModeChgFltLvlTrig True /False Write Level triggered fault occurred
tBool g_bModeChgFltLvlDuringEna True /False Write Level triggered fault occurred during enabled
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Mode changing initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.1.1 AswMng_Init
Calling Function SWDDS.1.3.2.2 InitializeModeChgChkVar
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.1
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 216
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Verifiability Yes
3.3.2.1.2 Static View Design
3.3.2.1.3 Dynamic View Design
- N/A
3.3.2.1.4 Interface Design
- N/A
3.3.2.2 [SWDDS.1.3.2.2] InitializeModeChgChkVar
3.3.2.2.1 Detailed Design
[SWDDS.1.3.2.2] InitializeModeChgChkVar
Software Unit Information
Unit ID SWDDS.1.3.2.2 Unit Name InitializeModeChgChkVar
Architecture ID SWADS.1.3.2.2 ASIL QM
Prototype void InitializeModeChgChkVar (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Write Current OPU fault flag status
tBool g_bModeChgShutDown True /False Write ShutDown condition storing
tBool g_bModeChgAppCaution True /False Write Application caution storing
tBool g_bModeChgAppWarning True /False Write Application warning storing
tBool g_bModeChgAppFailure True /False Write Application failure storing
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Checking variables initialization

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 217
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.1 ModeChg_Init
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.2
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.3.2.2.2 Static View Design
3.3.2.2.3 Dynamic View Design
- N/A
3.3.2.2.4 Interface Design
- N/A
3.3.2.3 [SWDDS.1.3.2.3] ModeChg_Mng
3.3.2.3.1 Detailed Design
[SWDDS.1.3.2.3] ModeChg_Mng
Software Unit Information
Unit ID SWDDS.1.3.2.3 Unit Name ModeChg_Mng
Architecture ID SWADS.1.3.2.3 ASIL QM
Prototype void ModeChg_Mng (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bModeChgVlsLow True /False Read/Write Low voltage
Parameters
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 218
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Mode changing management
- Input data getting
- Status flags checking
- Mode changing with respect to operating mode
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.10 RteSch_Task20ms
Calling Function
SWDDS.2.2.45 RteApp_ReadOprMode
SWDDS.2.2.4 RteApp_ReadMsgSta
SWDDS.2.2.26 RteApp_ReadMcuSta
SWDDS.2.2.41 RteApp_ReadDrvSta
SWDDS.2.2.43 RteApp_ReadSigRng
SWDDS.1.3.2.5 CheckModeChgStaFlg
SWDDS.2.3.20 RteIo_ChkGdrvVlsLow
SWDDS.1.3.2.4 ChangeModeChgAppMode
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.3
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 219
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.2.3.2 Static View Design
3.3.2.3.3 Dynamic View Design
- N/A
3.3.2.3.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 operating_mode SWDDS.2.2.45 IN tOprMode 2 5
OPR_MODE
_NORMAL
OPR_MODE
_TEST
N/A
Current
operating
mode
2 message_status_flags SWDDS.2.2.4 IN tU16 0 32768 0x0000 0x8000 N/A
CAN
message
status flags
3 mcu_status_flags SWDDS.2.2.26 IN tU32 0 134217728 0x00000000 0x08000000 N/A
MCU status
flags
4 driving_status_flags SWDDS.2.2.41 IN tU32 0 8388608 0x00000000 0x00800000 N/A
Driving
status flags
5 signal_range_flags SWDDS.2.2.43 IN tU32 0 128 0x00000000 0x00000080 N/A
Signal range
checking
flags
6 message_status_flags SWDDS.1.3.2.5 OUT tU16 0 32768 0x0000 0x8000 N/A
CAN
message
status flags
7 mcu_status_flags SWDDS.1.3.2.5 OUT tU32 0 134217728 0x00000000 0x08000000 N/A
MCU status
flags
8 driving_status_flags SWDDS.1.3.2.5 OUT tU32 0 8388608 0x00000000 0x00800000 N/A
Driving
status flags
9 signal_range_flags SWDDS.1.3.2.5 OUT tU32 0 128 0x00000000 0x00000080 N/A
Signal range
checking
flags
10 g_bModeChgVlsLow SWDDS.2.3.20 IN tBool 0 1
FALSE
VLS_OUT
above
VLVLSD
TRUE
VLS_OUT
below
V_LVLSA
N/A
LVS low
level: FALSE
- normal,
TRUE -
voltage low
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 220
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.4 [SWDDS.1.3.2.4] ChangeModeChgAppMode
3.3.2.4.1 Detailed Design
[SWDDS.1.3.2.4] ChangeModeChgAppMode
Software Unit Information
Unit ID SWDDS.1.3.2.4 Unit Name ChangeModeChgAppMode
Architecture ID SWADS.1.3.2.4 ASIL QM
Prototype void ChangeModeChgAppMode (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bModeChgShutDown True /False Read ShutDown condition storing
tBool g_bModeChgAppFailure True /False Read Failure mode
tBool g_bModeChgAppWarning True /False Read Warning mode
tBool g_bModeChgAppCaution True /False Read Caution mode
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Read Current OPU fault flag status
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Application mode changing
- Mode transition
- Application data updating
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.3 ModeChg_Mng
Calling Function
SWDDS.2.2.46 RteApp_WriteOprMode
SWDDS.2.2.50 RteApp_WriteAppMode
SWDDS.2.2.52 RteApp_WriteOpuFlt
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.4
Target Milestone EBS2
Element AswMng
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 221
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.2.4.2 Static View Design
3.3.2.4.3 Dynamic View Design
- N/A
3.3.2.4.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 operation_mode SWDDS.2.2.46 OUT tOprMode 4 4
OPR_MODE
_SHUTDOWN
OPR_MODE
_SHUTDOWN
N/A Shutdown mode
2 application_mode SWDDS.2.2.50 OUT tAppMode 1 4
APP_MODE
_NORMAL
APP_MODE
_FAILURE
N/A Normal, Warning and Failure mode
3 opu_fault SWDDS.2.2.52 OUT tU16 0 65535 0 65535 N/A OPU fault flags
3.3.2.5 [SWDDS.1.3.2.5] CheckModeChgStaFlg
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 222
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.5.1 Detailed Design
[SWDDS.1.3.2.5] CheckModeChgStaFlg
Software Unit Information
Unit ID SWDDS.1.3.2.5 Unit Name CheckModeChgStaFlg
Architecture ID SWADS.1.3.2.5 ASIL QM
Prototype
void CheckModeChgStaFlg (tU16 message_status_flags,
tU32 mcu_status_flags,
tU32 driving_status_flags,
tU32 signal_range_flags)
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 message_status_flags 0 ~ 32768 IN CAN message status flags
tU32 mcu_status_flags 0 ~ 134217728 IN MCU status flags
tU32 driving_status_flags 0 ~ 8388608 IN Driving status flags
tU32 signal_range_flags 0 ~ 128 IN Signal range checking flags
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Status flags checking for mode transition
- Checking variables clearing
- Status flags checking
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.3 ModeChg_Mng
Calling Function
SWDDS.1.3.2.2 InitializeModeChgChkVar
SWDDS.1.3.2.6 CheckModeChgMsgSta
SWDDS.1.3.2.7 CheckModeChgMcuSta
SWDDS.1.3.2.8 CheckModeChgDrvSta
SWDDS.1.3.2.9 CheckModeChgSigRng
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.5
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 223
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.5.2 Static View Design
3.3.2.5.3 Dynamic View Design
- N/A
3.3.2.5.4 Interface Design
no Name
Related SWDDS
ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 message_status_flags SWDDS.1.3.2.6 OUT tU16 0 32768 0x0000 0x8000 N/A CAN message status flags
2 mcu_status_flags SWDDS.1.3.2.7 OUT tU32 0 134217728 0x00000000 0x08000000 N/A MCU status flags
3 driving_status_flags SWDDS.1.3.2.8 OUT tU32 0 8388608 0x00000000 0x00800000 N/A Driving status flags
4 signal_range_flags SWDDS.1.3.2.9 OUT tU32 0 128 0x00000000 0x00000080 N/A
Signal range checking
flags
3.3.2.6 [SWDDS.1.3.2.6] CheckModeChgMsgSta
3.3.2.6.1 Detailed Design
[SWDDS.1.3.2.6] CheckModeChgMsgSta
Software Unit Information
Unit ID SWDDS.1.3.2.6 Unit Name CheckModeChgMsgSta
Architecture ID SWADS.1.3.2.6 ASIL QM
Prototype void CheckModeChgMsgSta (tU16 message_status_flags)
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 message_status_flags 0 ~ 32768 IN CAN message status flags
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tBool g_bModeChgAppCaution True /False Write Application caution storing
tBool g_bModeChgShutDown True /False Write ShutDown condition storing
tBool g_bModeChgAppFailure True /False Write Application failure storing
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Write Current OPU fault flag status
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
CAN message status checking
- Request message status checking
- CAN bus status checking
- CAN data receiving time-out and bus-off checking
- CAN received data CRC error checking
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 224
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.5 CheckModeChgStaFlg
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.6
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.2.6.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 225
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.6.3 Dynamic View Design
- N/A
3.3.2.6.4 Interface Design
- N/A
3.3.2.7 [SWDDS.1.3.2.7] CheckModeChgMcuSta
3.3.2.7.1 Detailed Design
[SWDDS.1.3.2.7] CheckModeChgMcuSta
Software Unit Information
Unit ID SWDDS.1.3.2.7 Unit Name CheckModeChgMcuSta
Architecture ID SWADS.1.3.2.7 ASIL QM
Prototype void CheckModeChgMcuSta (tU32 mcu_status_flags)
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 mcu_status_flags 0 ~ 134217728 IN CAN message status flags
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Read Current OPU fault flag status
tBool g_bModeChgShutDown True /False Write ShutDown condition storing
tBool g_bModeChgAppFailure True /False Write Application failure storing
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
OPU status checking
- Watchdog timer status checking
- Memory failure status checking
- Oscillator failure status checking
- Low voltage detection status checking
Control Flow Diagram
(or Pseudo Code)
1. CheckModeChgMcuSta sets shutdown mode if the watchdog time-out is occurred.
2. CheckModeChgMcuSta sets shutdown mode if the memory failure is occurred.
3. CheckModeChgMcuSta sets shutdown mode if the oscillator failure is occurred.
4. CheckModeChgMcuSta sets shutdown mode if the low voltage is detected.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 226
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.2.5 CheckModeChgStaFlg
Calling Function N/A
Function Execution Time N/A
Requirement Id SWDDS.1.3.2.7
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.2.7.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 227
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.7.3 Dynamic View Design
- N/A
3.3.2.7.4 Interface Design
- N/A
3.3.2.8 [SWDDS.1.3.2.8] CheckModeChgDrvSta
3.3.2.8.1 Detailed Design
[SWDDS.1.3.2.8] CheckModeChgDrvSta
Software Unit Information
Unit ID SWDDS.1.3.2.8 Unit Name CheckModeChgDrvSta
Architecture ID SWADS.1.3.2.8 ASIL QM
Prototype void CheckModeChgDrvSta ( tU32 driving_status_flags)
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 driving_status_flags 0 ~ 8388608 IN Driving status checked flags
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Read Current OPU fault flag status
tBool g_bModeChgAppWarning True / False Write Application warning storing
tBool g_bModeChgFltEdgeTrig True / False Write Edge triggered fault occurred
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Driving status checking
- Speed error checking
- Over-current checking
- Short circuit checking
- Gate drive under or over-voltage checking
- Low current checking
- Internal error checking
1. CheckModeChgDrvSta sets the application mode as warning and speed error flag if speed error is detected.
2. CheckModeChgDrvSta sets the application mode as warning and over-current flag if over-current is detected.
3. CheckModeChgDrvSta sets the application mode as warning and short circuit flag if short circuit or the gate driver DESAT is detected.
4. CheckModeChgDrvSta sets the application mode as warning and gate driver under or over-voltage flag if the gate driver under or over-voltage is
detected.
5. CheckModeChgDrvSta sets the application mode as warning and low current flag if low current is detected.
6. CheckModeChgDrvSta sets the application mode as warning and internal error flag if motor speed range over or current offset error or phase
current over or DC driving voltage over/under or starting time-out is detected.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 228
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.3.2.5 CheckModeChgStaFlg
Calling Function N/A
Function
Execution Time
N/A
Requirement Id SWDDS.1.3.2.8
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 229
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Criticality Mid
Technical complexity High
Verifiability Yes
3.3.2.8.2 Static View Design
3.3.2.8.3 Dynamic View Design
- N/A
3.3.2.8.4 Interface Design
- N/A
3.3.2.9 [SWDDS.1.3.2.9] CheckModeChgSigRng
3.3.2.9.1 Detailed Design
[SWDDS.1.3.2.9] CheckModeChgSigRng
Software Unit Information
Unit ID SWDDS.1.3.2.9 Unit Name CheckModeChgSigRng
Architecture ID SWADS.1.3.2.9 ASIL QM
Prototype void CheckModeChgSigRng( tU32 signal_range_flags )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU32 signal_range_flags 0 ~ 128 IN
Signal range checked
flags
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16ModeChgOpuFlt 0 ~ 4095 Read
Current OPU fault flag
status
tBool g_bModeChgAppWarning True / False Write
Application warning
storing
tBool g_bModeChgAppFailure True / False Write
Application failure
storing
tBool g_bModeChgFltLvlTrig True / False Write
Level triggered fault
occurred
tBool g_bModeChgAppCaution True / False Write
Application caution
storing
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 230
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Signal range checking
- Over-temperature checking
- Warning temperature checking
- Over voltage range checking
- Under voltage range checking
- Normal voltage range checking
- Protect mode checking
Control Flow
Diagram
(or Pseudo
Code)
1. CheckModeChgSigRng sets the application mode as warning and over temperature flag if over temperature
is detected.
2. CheckModeChgSigRng sets the application mode as warning and warning temperature flag if warning
temperature is detected.
3. CheckModeChgSigRng sets the application mode as failure, the functional mode as none and high voltage
flag if over voltage is detected.
4. CheckModeChgSigRng sets the application mode as failure, the functional mode as none and low voltage
flag if under voltage is detected.
5. CheckModeChgSigRng sets the application mode as warning, the functional mode as partial and over
voltage flag if over voltage is detected.
6. CheckModeChgSigRng sets the application mode as warning, the functional mode as partial and under
voltage flag if under voltage is detected.
7. CheckModeChgSigRng sets the functional mode as full flag if voltage range is normal.
8. CheckModeChgSigRng sets the application mode as caution if protect mode is detected.
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 231
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow
Diagram
(or Pseudo
Code)
Called Function SWDDS.1.3.2.5 CheckModeChgStaFlg
Calling Function SWDDS.2.2.48 RteApp_WriteFuncMode
Function
Execution Time
N/A
Requirement Id SWDDS.1.3.2.9
Target Milestone SBS2.1
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity High
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 232
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.2.9.2 Static View Design
3.3.2.9.3 Dynamic View Design
- N/A
3.3.2.9.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 function_mode SWDDS.2.2.48 OUT tFuncMode 0 2
FUNC_MODE
_NONE
FUNC_MODE
_FULL
N/A Non / Partial / Full functional mode
3.3.3 [SWDDS.1.3.3] ShutDown
3.3.3.1 [SWDDS.1.3.3.1] ShutDown_Init
3.3.3.1.1 Detailed Design
[SWDDS.1.3.3.1] ShutDown_Init
Software Unit Information
Unit ID SWDDS.1.3.3.1
Unit
Name
ShutDown_Init
Architecture
ID
SWADS.1.3.3.1 ASIL QM
Prototype void ShutDown_Init (void)
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Data
Type
Possible Return Value Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 233
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Return
Value
void N/A N/A N/A
Global
Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16ShutDownWaitCnt
0 ~
250
Write Shut-down mode waiting time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Shut-down mode initialization
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.1.3.1.1 AswMng_Init
Calling
Function
N/A
Function
Execution
Time
N/A
Requirement Id SWDDS.1.3.3.1
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.3.3.1.2 Static View Design
3.3.3.1.3 Dynamic View Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 234
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.3.1.4 Interface Design
- N/A
3.3.3.2 [SWDDS.1.3.3.2] ShutDown_Mng
3.3.3.2.1 Detailed Design
[SWDDS.1.3.3.2] ShutDown_Mng
Software Unit Information
Unit ID SWDDS.1.3.3.2
Unit
Name
ShutDown_Mng
Architecture
ID
SWADS.1.3.3.2 ASIL QM
Prototype void ShutDown_Mng (void)
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data
Type
Possible Return Value Description
void N/A N/A N/A
Global
Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16ShutDownWaitCnt
0 ~
250
Read Shut-down mode waiting time count (ms)
Parameters
Data
Type
Name Range Read/Write Description
tU16 par_u16ModeMngShutDownTim 250u Read Shutdown mode waiting time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Shutdown mode management
- Waiting for shutdown time
- EOP motor stop checking
- Fault flag saving
- CAN sleep mode entering
Control
Flow
Diagram
(or Pseudo
Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 235
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.2.1.10 RteSch_Task20ms
Calling
Function
SWDDS.2.2.10 RteApp_ReadCtrState
SWDDS.2.2.54 RteApp_GetOpuFltNo
SWDDS.2.3.6 RteIo_RstWdtTim
SWDDS.2.3.4 RteIo_DisGlobalInterrupt
SWDDS.2.3.24 RteIo_SetCanSlp
SWDDS.1.3.3.3 SaveShutDownFltCnt
SWDDS.1.3.3.4 SaveShutDownFltFlag
Function
Execution
Time
N/A
Requirement Id SWDDS.1.3.3.2
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 236
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.3.2.2 Static View Design
3.3.3.2.3 Dynamic View Design
- N/A
3.3.3.2.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 g_eRteAppCtrState SWDDS.2.2.10 IN tCtrState N/A N/A N/A N/A N/A Control state
2 current_fault_count SWDDS.2.2.54 IN tU16 0 65535 0 65535 N/A Current fault count
3 current_fault_count SWDDS.1.3.3.3 OUT tU16 0 65535 0 65535 N/A Current fault count
3.3.3.3 [SWDDS.1.3.3.3] SaveShutDownFltCnt
3.3.3.3.1 Detailed Design
[SWDDS.1.3.3.3] SaveShutDownFltCnt
Software Unit Information
Unit ID SWDDS.1.3.3.3 Unit Name SaveShutDownFltCnt
Architecture ID SWADS.1.3.3.3 ASIL QM
Prototype void SaveShutDownFltCnt( tU16 current_fault_count )
Function Call
Parameters
Data Type Name Range IN/OUT Description
tU16 current_fault_count 0 ~ 65535 IN current fault count
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Fault count saving
- Current fault existence checking
- Stored previous fault count and current fault count adding
- Fault count storing

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 237
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.2 ShutDown_Mng
Calling Function
SWDDS.2.3.27 RteIo_LoadEepromLong
SWDDS.2.3.26 RteIo_SaveEepromDat
Function Execution Time N/A
Requirement Id SWDDS.1.3.3.3
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.3.3.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 238
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.3.3.3 Dynamic View Design
- N/A
3.3.3.3.4 Interface Design
no Name Related SWDDS ID Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 eeprom_address SWDDS.2.3.27 OUT tU16 32 32 0x0020 0x0020 N/A OPU fault count address
2 fault_count SWDDS.2.3.27 IN tU32 0 4294967295 0 4294967295 N/A Previous and calculated fault count
3 eeprom_address SWDDS.2.3.26 OUT tU16 32 32 0x0020 0x0020 N/A OPU fault count address
4 data_word[2u] SWDDS.2.3.26 OUT tU16 0 65535 0x0000 0xffff N/A Writing data buffer
3.3.3.4 [SWDDS.1.3.3.4] SaveShutDownFltFlag
3.3.3.4.1 Detailed Design
[SWDDS.1.3.3.4] SaveShutDownFltFlag
Software Unit Information
Unit ID SWDDS.1.3.3.4 Unit Name SaveShutDownFltFlag
Architecture ID SWADS.1.3.3.4 ASIL QM
Prototype void SaveShutDownFltFlag( void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Fault flag saving
- Previous fault flag in EEPROM shifting
- Current fault flag storing
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 239
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.3.3.2 ShutDown_Mng
Calling Function
SWDDS.2.3.27 RteIo_LoadEepromLong
SWDDS.2.3.26 RteIo_SaveEepromDat
SWDDS.2.3.6 RteIo_RstWdtTim
SWDDS.2.2.55 SWDDS.2.2.55
Function Execution Time N/A
Requirement Id SWDDS.1.3.3.4
Target Milestone EBS2
Element AswMng
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
3.3.3.4.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 240
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.3.4.3 Dynamic View Design
- N/A
3.3.3.4.4 Interface Design
no Name
Related
SWDDS ID
Direction
Data
Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 eeprom_address SWDDS.2.3.27 OUT tU16 0 31 0x0000 0x001f N/A
OPU fault
flag address
2 fault_data SWDDS.2.3.27 IN tU32 0 268435455 0x00000000 0x0fffffff N/A Fault data
3 eeprom_address SWDDS.2.3.26 OUT tU16 0 31 0x0000 0x001f N/A
OPU fault
flag address
4 data_word[2u] SWDDS.2.3.26 OUT tU16 0 65535 0x0000 0xffff N/A
Writing data
buffer
5 flag_buffer SWDDS.2.2.55 IN tU32
0
268435455
0x00000000
0x0fffffff N/A
Current fault
flag
3.3.4 [SWDDS.1.3.4] StartUp
3.3.4.1 [SWDDS.1.3.4.1] StartUp_Init
3.3.4.1.1 Detailed Design
[SWDDS.1.3.4.1] StartUp_Init
Software Unit Information
Unit ID SWDDS.1.3.4.1 Unit Name StartUp_Init
Architecture ID SWADS.1.3.4.1 ASIL QM
Prototype void StartUp_Init (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return ValueDescription
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
tU16 g_u16StartUpWaitCnt 0 ~ 200 Write
Start-up mode
waiting time count
(ms)
LVS low level: FALSE
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 241
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
tBool g_bStartUpVlsLow True/False Write - normal, TRUE -
voltage low
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Start-up mode initialization
Control Flow
Diagram
(or Pseudo Code)
Called Function SWDDS.1.3.1.1 AswMng_Init
Calling Function N/A
Function Execution
Time
N/A
Requirement Id SWDDS.1.3.4.1
Target Milestone EBS2
Element AswMng
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.3.4.1.2 Static View Design
3.3.4.1.3 Dynamic View Design
- N/A
3.3.4.1.4 Interface Design
- N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 242
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.3.4.2 [SWDDS.1.3.4.2] StartUp_Mng
3.3.4.2.1 Detailed Design
[SWDDS.1.3.4.2] StartUp_Mng
Software Unit Information
Unit ID SWDDS.1.3.4.2
Unit
Name
StartUp_Mng
Architecture
ID
SWADS.1.3.4.2 ASIL QM
Prototype void StartUp_Mng (void)
Function
Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function
Call
Return
Value
Data
Type
Possible Return Value Description
void N/A N/A N/A
Global
Variables
Data
Type
Name Range Read/Write Description
tU16 g_u16StartUpWaitCnt 0 ~ 200 Read/Write Start-up mode waiting time count (ms)
tBool g_bStartUpVlsLow True/False Write LVS low level: FALSE - normal, TRUE - voltage low
Parameters
Data
Type
Name Range Read/Write Description
tU16 par_u16ModeMngStartUpTim 200u Read Start-up mode waiting time (ms)
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Initial start-up mode management
- Waiting for initial start-up time
- Fault clearing and mode changing
Control
Flow
Diagram
(or Pseudo
Code)

VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 243
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control
Flow
Diagram
(or Pseudo
Code)

Called
Function
SWDDS.2.1.10 RteSch_Task20ms
Calling
Function
SWDDS.2.2.53 App_ClrOpuFlt
SWDDS.2.2.46 RteApp_WriteOprMode
SWDDS.2.2.48 RteApp_WriteFuncMode
SWDDS.2.2.50 RteApp_WriteAppMode
SWDDS.2.3.20 RteIo_ChkGdrvVlsLow
SWDDS.2.3.16 RteIo_ClrSlFocFltSta
Function
Execution
Time
N/A
Requirement Id SWDDS.1.3.4.2
Target Milestone EBS2
Element AswMng
Risk Mid
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 244
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.3.4.2.2 Static View Design
3.3.4.2.3 Dynamic View Design
- N/A
3.3.4.2.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw
Range
Physical Range Resolution
/Units
Description
Min Max Min Max
1 g_bStartUpVlsLow SWDDS.2.3.20 IN tBool 0 1 Normal Voltage low
True /
False
LVS low level: FALSE - normal,
TRUE - voltage low
2 operation_mode SWDDS.2.2.46 OUT tOprMode 2 2
OPR_MODE
_NORMAL
OPR_MODE
_NORMAL
N/A Normal mode
3 function_mode SWDDS.2.2.48 OUT tFuncMode 2 2
FUNC_MODE
_NONE
FUNC_MODE
_FULL
N/A
Full functional mode: EOP - active,
CAN - active
4 application_mode SWDDS.2.2.50 OUT tAppMode 1 1
APP_MODE
_NONE
APP_MODE
_FAILURE
N/A Normal mode
3.4 [SWDDS.1.4] AswAct
3.4.1 [SWDDS.1.4.1] AswAct
3.4.1.1 [SWDDS.1.4.1.1] AswAct_Init
3.4.1.1.1 Detailed Design
[SWDDS.1.4.1.1] AswAct_Init
Software Unit Information
Unit ID SWDDS.1.4.1.1 Unit Name AswAct_Init
Architecture ID SWADS.1.4.1.1 ASIL QM
Prototype void AswAct_Init (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 245
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Actuator software initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.3 InitializeRteSchAppSw()
Calling Function
SWDDS 1.4.2.1 MtrCtr_Init()
SWDDS.1.4.3.1 ResMsg_Init()
Function Execution Time N/A
Requirement Id SWDDS.1.4.1.1
Target Milestone EBS2
Element AswAct
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.4.1.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 246
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.1.1.3 Dynamic View Design
- N/A
3.4.1.1.4 Interface Design
3.4.2 [SWDDS.1.4.2] MtrCtr
3.4.2.1 [SWDDS.1.4.2.1] MtrCtr_Init
3.4.2.1.1 Detailed Design
[SWDDS.1.4.2.1] MtrCtr_Init
Software Unit Information
Unit ID SWDDS.1.4.2.1 Unit Name MtrCtr_Init
Architecture ID SWADS.1.4.2.1 ASIL QM
Prototype void MtrCtr_Init (void)
Function Call
Parameters
Data
Type
Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data
Type
Possible Return Value Description
void N/A N/A
Data
Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 247
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
Type
tBool g_bMtrCtrEna True / False Write
Stored motor control enabled
status
Parameters
Data
Type
Name Range Read/Write Description
tFrac16 par_f16EopCtrCurLmtMax
FRAC16 (22.5f /
PARAM_PU_BASE_PHS_CUR)
Write
Phase current limit at maximum
speed
Registers
Data
Type
Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Motor control initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.1.1 AswAct_Init
Calling Function
SWDDS.3.6.14.38 MLIB_Neg_F16
SWDDS.2.3.15 RteIo_SetSlFocCtrDat
Function Execution
Time
N/A
Requirement Id SWDDS.1.4.2.1
Target Milestone EBS2
Element AswAct
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.4.2.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 248
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.2.1.3 Dynamic View Design
- N/A
3.4.2.1.4 Interface Design
no Name
Related SWDDS
ID
Direction Data Type
Raw Range
Physical
Range
Resolution
/Units
Description
Min Max Min Max
1 f16In SWDDS.3.6.14.38 OUT tFrac16
FRAC16
(22.5f /
PARAM_PU_BASE
_PHS_CUR)
22.5 Apk
Phase
current limit
at maximum
speed
2
control_data
.f16CurrentLimitLower
SWDDS.3.6.14.38 IN tFrac16
-FRAC16
(22.5f /
PARAM_PU_BASE
_PHS_CUR)
-22.5 Apk
Phase
current
lower limit
at maximum
speed
3 control_data SWDDS.2.3.15 OUT tSlFocCtrDat N/A N/A N/A N/A N/A
Sensorless
FOC control
data
3.4.2.2 [SWDDS.1.4.2.2] MtrCtr_Set
3.4.2.2.1 Detailed Design
[SWDDS.1.4.2.2] MtrCtr_Set
Software Unit Information
Unit ID SWDDS.1.4.2.2 Unit Name MtrCtr_Set
Architecture ID SWADS.1.4.2.2 ASIL QM
Prototype void MtrCtr_Set (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Data Type Name Range Read/Write Description
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 249
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Global Variables
tBool g_bMtrCtrEna True / False Read/Write Stored motor control enabled status
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Motor control data setting
-Control data getting
-Control enabling edge checking
-Current control data setting
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.8 RteSch_Task5ms
Calling Function
SWDDS.2.2.30 RteApp_ReadCtrEna
SWDDS.2.2.32 RteApp_ReadCtrMode
SWDDS.2.2.33 RteApp_ReadRefCur
SWDDS.2.2.34 RteApp_ReadRefSpd
SWDDS.2.2.36 RteApp_ReadCurLmtUpp
SWDDS.2.3.16 RteIo_ClrSlFocFltSta
SWDDS.2.3.15 RteIo_SetSlFocCtrDat
SWDDS.2.2.38 RteApp_ReadCurLmtLow
Function Execution Time N/A
Requirement Id SWDDS.1.4.2.2
Target Milestone EBS2
Element AswAct
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 250
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Low
Verifiability Yes
3.4.2.2.2 Static View Design
3.4.2.2.3 Dynamic View Design
- N/A
3.4.2.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1 control_enable SWDDS.2.2.30 IN tBool 0 1
Control
disable
Control
enable
True/ False
Control
enable
2
control_data
.eControlMode
SWDDS.2.2.32 IN tCtrMode N/A N/A N/A N/A N/A
Speed
control
mode /
Current
control
mode
3
control_data
.f16ReferenceCurrent
SWDDS.2.2.33 IN tFrac16 0 32767 0.0 64.4980
0.00196838
/ Apk
Reference
current
4
control_data
.f16ReferenceSpeed
SWDDS.2.2.34 IN tFrac16 0 32767 0.0 5999.82
0.183105 /
rpm
Reference
speed
5
control_data
.f16CurrentLimitUpper
SWDDS.2.2.36 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Current limit
upper
6
control_data
.f16CurrentLimitLower
SWDDS.2.2.38 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838
/ Apk
Current limit
lower
7 control_data SWDDS.2.3.15 OUT tSlFocCtrDat N/A N/A N/A N/A N/A
Sensorless
FOC control
data
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 251
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.3 [SWDDS.1.4.3] ResMsg
3.4.3.1 [SWDDS.1.4.3.1] ResMsg_Init
3.4.3.1.1 Detailed Design
[SWDDS.1.4.3.1] ResMsg_Init
Software Unit Information
Unit ID SWDDS.1.4.3.1 Unit Name ResMsg_Init
Architecture ID SWADS.1.4.3.1 ASIL QM
Prototype void ResMsg_Init (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description Response message sending initialization
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.1.4.1.1 AswAct_Init
Calling Function
N/A
N/A
Function Execution Time N/A
Requirement Id SWDDS.1.4.3.1
Target Milestone EBS2
Element AswAct
Risk Low
Interoperability No
Criticality Low
Technical complexity Low
Verifiability Yes
3.4.3.1.2 Static View Design
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 252
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.3.1.3 Dynamic View Design
- N/A
3.4.3.1.4 Interface Design
- N/A
3.4.3.2 [SWDDS.1.4.3.2] ResMsg_Send
3.4.3.2.1 Detailed Design
[SWDDS.1.4.3.2] ResMsg_Send
Software Unit Information
Unit ID SWDDS.1.4.3.2 Unit Name ResMsg_Send
Architecture ID SWADS.1.4.3.2 ASIL QM
Prototype void ResMsg_Send (void)
Function Call
Parameters
Data Type Name Range IN/OUT Description
N/A N/A N/A N/A N/A
Function Call
Return Value
Data Type Possible Return Value Description
void N/A N/A
Global Variables
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Parameters
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Registers
Data Type Name Range Read/Write Description
N/A N/A N/A N/A N/A
Description
Response message sending
- Status data setting
- EEPROM fault count loading
- Response message sending
Control Flow Diagram
(or Pseudo Code)
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 253
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
Control Flow Diagram
(or Pseudo Code)

Called Function SWDDS.2.1.9 RteSch_Task10ms
Calling Function
SWDDS.2.2.8 RteApp_ReadSpdFilt
SWDDS.2.2.17 RteApp_ReadDcCur
SWDDS.2.2.14 RteApp_ReadCurOut
SWDDS.2.2.22 RteApp_ReadMtrTrq
SWDDS.2.2.51 RteApp_ReadOpuFlt
SWDDS.2.3.27 RteIo_LoadEepromLong
SWDDS.2.3.25 RteIo_SendResMsg
Function Execution Time N/A
Requirement Id SWDDS.1.4.3.2
Target Milestone EBS2
Element AswAct
Risk Mid
Interoperability No
Criticality Mid
Technical complexity Mid
Verifiability Yes
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 254
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.
3.4.3.2.2 Static View Design
3.4.3.2.3 Dynamic View Design
- N/A
3.4.3.2.4 Interface Design
no Name
Related
SWDDS ID
Direction Data Type
Raw Range Physical Range Resolution
/Units
Description
Min Max Min Max
1
response_message
.s16ActualRotational
Speed
SWDDS.2.2.8 IN tS16 -6000 6000 -6000 6000 1 / rpm
Actual
rotational
speed
2
response_message
.f16DcCurrentInput
SWDDS.2.2.17 IN tFrac16 0 32767 0.0 64.4980
0.00196838 /
Apk
DC current
input
3
response_message
.f16CurrentOutputQ
SWDDS.2.2.14 IN tFrac16 -32768 32767 -64.5 64.4980
0.00196838 /
Apk
q-axis
current
output
4
response_message
.f16MotorTorque
SWDDS.2.2.22 IN tFrac16 -32768 32767 -1.0 0.999969
0.0000305176
/ Nm
Motor
torque
5
response_message
.u16OpuFaultFlag
SWDDS.2.2.51 IN tU16 0 4095 0x0000 0x0fff N/A
OPU fault
flag
6 eeprom_address SWDDS.2.3.27 OUT tU16 32 32 0x0020 0x0020 N/A
EEPROM
memory
address
7 fault_count SWDDS.2.3.27 IN tU32 0 4294967295 0 4294967295 N/A
32-bit
EEPROM
data
8 response_message SWDDS.2.3.25 OUT tCanMsgRes N/A N/A N/A N/A N/A
CAN
response
message to
TCU
VW AQ EOP
Baseline / Version /
Date
003
Software Detailed Design Specification
Updated Date 2021-06-30
Page 255
SWDDS Copyright (c) SNT Motiv Co., Ltd. All rights reserved.